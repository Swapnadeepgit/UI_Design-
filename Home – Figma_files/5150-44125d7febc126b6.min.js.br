"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3119b8dd-6dc3-5aba-bd81-2caa7b21f2e3")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[5150],{430335:(e,t,n)=>{n.d(t,{$M:()=>w,AT:()=>y,Gd:()=>s,I$:()=>S,IO:()=>g,K4:()=>k,KF:()=>L,Kk:()=>I,L3:()=>a,LU:()=>b,MO:()=>D,SR:()=>_,T$:()=>u,TQ:()=>P,V3:()=>O,WD:()=>C,WX:()=>r,YQ:()=>i,YS:()=>R,b0:()=>F,dg:()=>M,dl:()=>d,fI:()=>v,f_:()=>f,fo:()=>E,hP:()=>l,i7:()=>x,jU:()=>h,oE:()=>m,r9:()=>T,sp:()=>p,v6:()=>N,yO:()=>c,yS:()=>o});let o="component_browser_component_list--componentListLoadingRow--6VtcP",c="component_browser_component_list--componentListLoadingItems--XJ359",a="component_browser_component_list--componentsList--jcFMY",r="component_browser_component_list--componentsListLoadingContainer--WPYPK",l="component_browser_component_list--componentsListTable--puqS-",s="component_browser_component_list--componentsListTableHeader--Aynmf",i="component_browser_component_list--spacious--yB0HS",m="component_browser_component_list--compact--3tCnY",d="component_browser_component_list--componentsListTableBody--PiBLQ",_="component_browser_component_list--componentsListTableHeaderRow---iaPM",p="component_browser_component_list--isSelected--oGCS1",u="component_browser_component_list--componentsListTableRow--MWiH-",b="component_browser_component_list--componentsListTableCell--qX8vW",f="component_browser_component_list--designCell--2WgKC",g="component_browser_component_list--decoratorCell--f6ZpC",v="component_browser_component_list--decoratorIcon--DSFkj",h="component_browser_component_list--fileCell--oVoAy",w="component_browser_component_list--variantsCell--yGi-I",E="component_browser_component_list--statusCell--x8DtR",y="component_browser_component_list--actionsCell--xbCNx",k="component_browser_component_list--tableRowExpandChevron--bw780",C="component_browser_component_list--countItemNumber--0qq5f",N="component_browser_component_list--componentItemImageContainer--XlLnu",I="component_browser_component_list--icon--qFSlI",S="component_browser_component_list--componentItemImage--l1RBu",x="component_browser_component_list--codeConnectionStatus--p3-4K",L="component_browser_component_list--searchInputContainer--1OO4i",T="component_browser_component_list--disabled--DfITX",M="component_browser_component_list--componentsListEmptyContainer--MxQaf",R="component_browser_component_list--onlyShowActionsOnHover--X76em",D="component_browser_component_list--menuOpen--1-ztt",P="component_browser_component_list--componentName--yOdtn",F="component_browser_component_list--libraryName--rDSdu",O="component_browser_component_list--nameBlock--Qm8-K"},817068:(e,t,n)=>{n.d(t,{a:()=>o});let o=(0,n(382902).eU)("components")},884286:(e,t,n)=>{n.d(t,{Mj:()=>C,cU:()=>h,k1:()=>v,kE:()=>w,qd:()=>y});var o=n(848318);if(443==n.j)var c=n(660376);var a=n(382902),r=n(53837),l=n(967688),s=n(957872),i=n(34542),m=n(385711),d=n(517776),_=n(263336),p=n(518383),u=n(391301),b=n(370715),f=n(136169);let g=(0,d.r1)("dev_mode_has_seen_component_browser_onboarding"),v={Step1:"dev_mode_component_browser_manual_mapping_step_1",Step2:"dev_mode_component_browser_manual_mapping_step_2",Step3:"dev_mode_component_browser_manual_mapping_step_3"},h={Step1:"dev_mode_component_browser_shared_step_1"},w={Step1:"dev_mode_component_browser_codebase_ingestion_step_1",Step2:"dev_mode_component_browser_codebase_ingestion_step_2",Step3:"dev_mode_component_browser_codebase_ingestion_step_3"};var E=(e=>(e.ManualStep1="ManualStep1",e.ManualStep2="ManualStep2",e.ManualStep3="ManualStep3",e.ManualStep4="ManualStep4",e.CodebaseIngestionStep1="CodebaseIngestionStep1",e.CodebaseIngestionStep2="CodebaseIngestionStep2",e.CodebaseIngestionStep3="CodebaseIngestionStep3",e))(E||{}),y=(e=>(e.OpenDialog="OpenDialog",e.CloseDialog="CloseDialog",e))(y||{});function k(e){let{step:t,isOverlayShowing:n,next:a,complete:r,onOnboardingSequenceAction:i}=e,m=e=>{e&&i?.(e),a()};switch(t){case"ManualStep1":return o.createElement(u.rq,{description:(0,l.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_1_description"),isShowing:n,onClose:r,primaryCta:{label:(0,l.tx)("general.next"),type:"button",onClick:a,ctaTrackingDescriptor:s.c.NEXT},stepCounter:{stepNum:1,totalNumSteps:4},targetKey:v.Step1,trackingContextName:"dev_mode_component_browser_step_1 - identify the code file"});case"ManualStep2":return o.createElement(u.rq,{description:(0,l.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_2_description"),isShowing:n,onClose:r,primaryCta:{label:(0,l.tx)("general.next"),type:"button",onClick:a,ctaTrackingDescriptor:s.c.NEXT},stepCounter:{stepNum:2,totalNumSteps:4},targetKey:v.Step2,title:(0,l.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_2_title"),trackingContextName:"dev_mode_component_browser_step_2 - identify the component"});case"ManualStep3":return o.createElement(u.rq,{description:(0,l.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_3_description"),isShowing:n,onClose:r,primaryCta:{label:(0,l.tx)("general.next"),type:"button",onClick:a,ctaTrackingDescriptor:s.c.NEXT},stepCounter:{stepNum:3,totalNumSteps:4},targetKey:v.Step3,title:(0,l.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_3_title"),trackingContextName:"dev_mode_component_browser_step_3 - review or edit the mapping"});case"ManualStep4":return o.createElement(u.rq,{zIndex:b.R.MODAL,description:(0,l.tx)("dev_handoff.component_browser_onboarding_callout.shared_step_1_description"),isShowing:n,onClose:r,primaryCta:{label:(0,l.tx)("general.got_it"),type:"button",onClick:r,ctaTrackingDescriptor:s.c.DONE},stepCounter:{stepNum:4,totalNumSteps:4},targetKey:h.Step1,title:(0,l.tx)("dev_handoff.component_browser_onboarding_callout.shared_step_1_title"),trackingContextName:"dev_mode_component_browser_step_4 - manage your connection"});case"CodebaseIngestionStep1":return o.createElement(u.rq,{zIndex:b.R.MODAL,description:(0,l.tx)("dev_handoff.component_browser_onboarding_callout.codebase_ingestion_step_1_description"),isShowing:n,onClose:r,primaryCta:{label:(0,l.tx)("general.next"),type:"button",onClick:()=>m("OpenDialog"),ctaTrackingDescriptor:s.c.DONE},stepCounter:{stepNum:1,totalNumSteps:3},targetKey:w.Step1,title:(0,l.tx)("dev_handoff.component_browser_onboarding_callout.codebase_ingestion_step_1_title"),trackingContextName:"dev_mode_component_browser_step_1 - manage your connection"});case"CodebaseIngestionStep2":return o.createElement(u.rq,{description:(0,l.tx)("dev_handoff.component_browser_onboarding_callout.codebase_ingestion_step_2_description"),isShowing:n,onClose:r,onTargetLost:()=>m("CloseDialog"),primaryCta:{label:(0,l.tx)("general.next"),type:"button",onClick:()=>m("CloseDialog"),ctaTrackingDescriptor:s.c.DONE},stepCounter:{stepNum:2,totalNumSteps:3},targetKey:w.Step2,title:(0,l.tx)("dev_handoff.component_browser_onboarding_callout.codebase_ingestion_step_2_title"),trackingContextName:"dev_mode_component_browser_step_2 - manage your connection",zIndex:b.R.MODAL});case"CodebaseIngestionStep3":return o.createElement(u.rq,{zIndex:b.R.MODAL,description:(0,l.tx)("dev_handoff.component_browser_onboarding_callout.shared_step_1_description"),isShowing:n,onClose:r,primaryCta:{label:(0,l.tx)("general.got_it"),type:"button",onClick:r,ctaTrackingDescriptor:s.c.DONE},stepCounter:{stepNum:3,totalNumSteps:3},targetKey:h.Step1,title:(0,l.tx)("dev_handoff.component_browser_onboarding_callout.shared_step_1_title"),trackingContextName:"dev_mode_component_browser_step_3 - manage your connection"});default:(0,c.xb)(t)}}function C({onOnboardingSequenceAction:e,canShowOnboarding:t}){let n=(0,a.md)(g),[c,l]=(0,r.Vc)("componentBrowserOnboardingSelection",null),{show:s,complete:d,isShowing:u}=(0,i.e)({overlay:f.Hx5,priority:_.N.DEFAULT_MODAL},[n]),b=(0,o.useMemo)(()=>"codebase_ingestion"===c?["CodebaseIngestionStep1","CodebaseIngestionStep2","CodebaseIngestionStep3"]:["ManualStep1","ManualStep2","ManualStep3","ManualStep4"],[c]),{currentStep:v,next:h}=(0,m.A)({numSteps:b.length,onComplete:d});return(0,o.useEffect)(()=>{t&&s({canShow:e=>!e})},[s,c,t]),o.createElement(p.U,{currentStep:v,isShowing:u,children:b.map((t,n)=>o.createElement(k,{key:n,step:t,isOverlayShowing:u,next:h,complete:d,onOnboardingSequenceAction:e}))})}},763593:(e,t,n)=>{n.d(t,{o:()=>_,u:()=>m});var o=n(848318),c=n(749233),a=n(218742),r=n(266004),l=n(536384),s=n.n(l),i=n(967688);function m({count:e}){return o.createElement("div",{className:"component_browser_connected_count--countItemNumber--MBHsK"},e)}function d({open:e,count:t,icon:n,tooltip:c}){return o.createElement("div",{"data-tooltip":c,"data-tooltip-type":"text",className:s()("component_browser_connected_count--countItem--OKOTR",e&&"component_browser_connected_count--open--ryc1n")},n,o.createElement(m,{count:t}))}function _({open:e,notConnectedComponents:t,connectedComponents:n,ignoredComponents:l}){return o.createElement("div",{className:"component_browser_connected_count--container--2Qv4B"},o.createElement(d,{open:e,count:t,icon:o.createElement(c.w,{style:{"--color-icon-tertiary":"var(--color-icon)"}}),tooltip:(0,i.t)("dev_handoff.component_browser.not_connected_to_code")}),o.createElement(d,{open:e,count:n,icon:o.createElement(a.W,null),tooltip:(0,i.t)("dev_handoff.component_browser.connected_to_code")}),o.createElement(d,{open:e,count:l,icon:o.createElement(r.M,null),tooltip:(0,i.t)("dev_handoff.component_browser.no_code_equivalent")}))}},375150:(e,t,n)=>{n.d(t,{ComponentBrowserLibraryView:()=>tH,T_:()=>t1});var o=n(848318),c=n(891627),a=n(291549),r=n(193675),l=n(658029),s=n(544405),i=n(773511),m=n(523152),d=n(877770),_=n(952647),p=n(282631),u=n(562027),b=n(19180),f=n(382902),g=n(410725),v=n(439382),h=n(967688),w=n(817068),E=n(777905),y=n(361964),k=n(388831);n(822879);var C=n(55116),N=n(17753),I=n(884286),S=n(168323),x=n(353317),L=n(143823),T=n(408193),M=n(232167),R=n(124810),D=n(218029),P=n(813321),F=n(329228),O=n(422482),A=n(696483),K=n(536384),q=n.n(K),B=n(345964);function W({id:e,isVisible:t,position:n,containerRef:a,isLoading:r,loadingMessage:l,items:s,noItemsView:i,renderItem:m,selectedIndex:d=0}){let _=(0,o.useRef)(null);return((0,o.useEffect)(()=>{if(t&&!r&&s.length>0&&_.current){let e=_.current.children[d];e&&e.scrollIntoView({block:"nearest"})}},[t,r,s.length,d]),t&&n)?(0,c.createPortal)(o.createElement("div",{ref:a,id:e,className:"component_browser_chip_search_dropdown--componentBrowserChipSearchDropdownContainer--3WPEW",style:{top:`${n.top}px`,left:`${n.left}px`,width:`${n.width}px`}},o.createElement("ul",{ref:_,className:"component_browser_chip_search_dropdown--resultsList--J1-7i"},r?o.createElement("li",{className:"component_browser_chip_search_dropdown--loadingState--BfIlh"},o.createElement(B.kt,null),l):s.length>0?s.map((e,t)=>o.createElement(o.Fragment,{key:t},m(e,t))):o.createElement("li",null,i))),document.body):null}var $=n(430335);function U({labels:e,onClick:t,onBackspace:n,isClearable:c}){return o.createElement("button",{onKeyDown:e=>{"Backspace"===e.key&&n?.()},onClick:t,className:"component_browser_chip_search_input--pillBase--HlS0p","aria-label":(0,h.t)("dev_handoff.component_browser.clear_input")},e.map((t,a)=>o.createElement(o.Fragment,{key:`${t.value}-${a}`},o.createElement("span",{"data-tooltip":t.tooltip,"data-tooltip-type":"text",className:"component_browser_chip_search_input--pillLabel--qzAew utilities--bodyMedium--7-YGK"},t.value),a<e.length-1&&o.createElement(O.R,null),c&&o.createElement(A.f,{onClick:n,className:"component_browser_chip_search_input--pillClearIcon--QXb02"}))))}function Q({title:e,subtitle:t,onClick:n,icon:c,isSelected:a}){return o.createElement("li",null,o.createElement(i.E,{className:q()("component_browser_chip_search_input--item--IGp8Y",{"component_browser_chip_search_input--selected--gg3EU":a}),onClick:e=>{e.stopPropagation(),n()}},c&&o.createElement("div",{className:"component_browser_chip_search_input--itemIcon--8ZOb3"},c),o.createElement("div",{className:"component_browser_chip_search_input--itemContent--2QfZV"},o.createElement("div",{className:"component_browser_chip_search_input--title--oGz9H"},e),t&&o.createElement("div",{className:"component_browser_chip_search_input--subtitle--5zMEl"},t))))}let Y="component-browser-chip-search-dropdown",V=o.forwardRef(function({placeholder:e,disabled:t,searchResults:n,isLoadingSearchResults:c,selectedItem:a,onChipSelect:r,onDeleteLastItem:l,onDropdownItemClick:s,onValueChanged:i,onEnterPressed:d,showDropdown:_=!0,showDropdownOnFocus:p=!1,arePillsClearable:u=!1,isClearable:b=!0,hint:f,onboardingKey:g},v){let[w,E]=(0,o.useState)({value:"",isSearchListOpen:!1,dropdownPosition:null,isConnecting:!1,selectedIndex:0}),y=(0,o.useRef)(w.value),k=(0,o.useRef)(null),C=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(w.isSearchListOpen&&k.current){let e=k.current.getBoundingClientRect();E(t=>({...t,dropdownPosition:{top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width}}))}else E(e=>({...e,dropdownPosition:null}))},[w.isSearchListOpen]),(0,o.useEffect)(()=>{function e(e){let t=e.target;k.current&&!k.current.contains(t)&&C.current&&!C.current.contains(t)&&E(e=>({...e,isSearchListOpen:!1}))}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let N=()=>{E(e=>({...e,value:"",isSearchListOpen:!1}))},I=e=>{E(e=>({...e,isSearchListOpen:!1,value:"",selectedIndex:0})),s(e)},S=e=>{""!==e&&e!==y.current&&(y.current=e,d?.(e)&&N())};return o.createElement("div",{className:"component_browser_chip_search_input--inlineSearchContainer--8CJzi",ref:k},o.createElement("div",{className:"component_browser_chip_search_input--inputWrapper--aiWWZ"},o.createElement("div",{className:q()($.KF,{[$.r9]:t})},a&&o.createElement(U,{onBackspace:()=>{l(),v.current?.focus()},labels:a.value,onClick:()=>r?.(a),isClearable:u}),o.createElement("input",{ref:v,className:"component_browser_chip_search_input--input--KG-iT faceted_search_bar--input--V5ksZ","data-onboarding-key":g,onBlur:e=>{S(w.value);let t=e.relatedTarget;t?.closest(`#${Y}`)||E(e=>({...e,isSearchListOpen:!1,selectedIndex:0}))},onChange:e=>{if(t||a)return;let n=e.target.value;E(e=>({...e,value:n,isSearchListOpen:n.length>0,selectedIndex:0})),i(n)},onFocus:()=>{p&&E(e=>({...e,isSearchListOpen:!0,selectedIndex:0}))},onKeyDown:e=>{if(!t){if("Backspace"===e.key&&""===w.value&&l(),"Enter"===e.key){if(n&&n.length>0){let t=n[w.selectedIndex];if(t){e.preventDefault(),I(t);return}}S(w.value)}"ArrowDown"===e.key&&n&&n.length>0&&(e.preventDefault(),E(e=>({...e,selectedIndex:(e.selectedIndex+1)%n.length}))),"ArrowUp"===e.key&&n&&n.length>0&&(e.preventDefault(),E(e=>({...e,selectedIndex:0===e.selectedIndex?n.length-1:e.selectedIndex-1})))}},placeholder:e,type:"search",value:w.value}),a&&b&&o.createElement("div",{className:"component_browser_chip_search_input--clearIconContainer--lm-6s"},o.createElement(m.L,{className:"component_browser_chip_search_input--clearIcon--1KMS0",onClick:l})))),_&&o.createElement(W,{id:Y,isVisible:!!w.isSearchListOpen,position:w.dropdownPosition,containerRef:C,isLoading:c||!1,items:n||[],selectedIndex:w.selectedIndex,noItemsView:o.createElement("div",{className:"component_browser_chip_search_input--noItemsView--dmc-y"},o.createElement("span",{className:"component_browser_chip_search_input--noItemsTitle--MF48d"},(0,h.t)("dev_handoff.component_browser.no_results_found")),f&&o.createElement("div",{className:"component_browser_chip_search_input--hint--W3h7w"},o.createElement("span",null,f))),renderItem:(e,t)=>o.createElement(Q,{icon:e.icon,title:e.title,subtitle:e.subtitle,onClick:()=>I(e),isSelected:t===w.selectedIndex})}))});var z=n(893613),J=n(493111);let j=({searchTerm:e,libraryKey:t,selectedRepositories:n})=>{let c=(n?.length??0)>0,a=n[0],[r]=(0,F.IT)((0,z.T)({libraryKey:t,repository:a?.id??""}),{enabled:!!t&&c&&!!a,key:"repositorySourceFilesQuery"}),l=(0,o.useMemo)(()=>{let t=e.match(/^https?:\/\/github\.com\/([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_.]+)\/(?:blob|tree)\/([a-zA-Z0-9-_.]+)\/(.*)$/);if(t){let[,,,,e]=t;return e}let n=e.replace(/^https?:\/\//,"");if(/^[a-zA-Z0-9\-_./\\]+$/.test(n))return n},[e]);return{result:(0,o.useMemo)(()=>r.data&&l?(0,D.$P)(l,r.data,{keySelector:e=>[e.path,e.name],threshold:.6,limit:10,ignoreCase:!0,ignoreSymbols:!0}).map(e=>({title:e.name,subtitle:e.path,metadata:e})):[],[r.data,l]),isLoading:"loading"===r.status||"disabled"===r.status}},X=(0,o.forwardRef)(function(e,t){let{sourceIndex:n,currentRowIndex:c,component:a,libraryKey:r,disabled:l,onFileChanged:s,selectedFile:i,selectedRepositories:m,onboardingKey:d}=e,[_,p]=(0,o.useState)(""),[u]=(0,P.A)(_,300),b=(m?.length??0)>0,f=a?.code_connect_info.v1.state==="ignored",{result:g,isLoading:v}=j({searchTerm:u,libraryKey:r,selectedRepositories:m});if(f)return o.createElement("span",null,"--");let w=a?.node_id;if(a&&!w)return null;let E=i?.title?{value:[{value:i.title,tooltip:i.metadata?.path}]}:void 0;return o.createElement(V,{ref:t,arePillsClearable:!0,disabled:l,hint:(0,h.t)("dev_handoff.component_browser.file_search_hint"),isClearable:!1,isLoadingSearchResults:v,onDeleteLastItem:()=>{s({sourceIndex:n,selectedFile:null,currentRowIndex:c,trackingProps:{location:e.location,source:"manual"}})},onDropdownItemClick:t=>{s({sourceIndex:n,selectedFile:t,currentRowIndex:c,trackingProps:{location:e.location,source:"manual"}})},onEnterPressed:t=>{if(""===t.trim())return!1;if(0===g.length){let o=t.split("/"),a=(0,J.Wq)(o,t);return s({sourceIndex:n,currentRowIndex:c,selectedFile:{title:a??t,subtitle:t,metadata:{isCustomLink:!0,repository:{id:"",name:""},path:t,name:a??t,sha:"",type:"file"}},trackingProps:{location:e.location,source:"manual"}}),!0}return p(t),!1},onValueChanged:e=>{p(e)},onboardingKey:d,placeholder:i?"":(0,h.t)("dev_handoff.component_browser.paste_code_link"),searchResults:g,selectedItem:E,showDropdown:b})}),G="component_browser_bulk_icon_connect--container--j5G1s",H="component_browser_bulk_icon_connect--content--6ciQR",Z="component_browser_bulk_icon_connect--connectStateText--y18Lf",ee="component_browser_bulk_icon_connect--spinnerContainer--zuPn7",et="component_browser_bulk_icon_connect--progressText--5HqXg",en="component_browser_bulk_icon_connect--connectStateContainer--i7RgN",eo="component_browser_bulk_icon_connect--connectStateRightContent--5AW1y";var ec=(e=>(e.INITIAL="initial",e.CONNECTING="connecting",e.CONNECTED="connected",e.DISCONNECTING="disconnecting",e))(ec||{});function ea({connectedComponents:e,onDeleteMapping:t}){let{getTriggerProps:n,manager:c}=S.b();return o.createElement(S.bL,{manager:c},o.createElement(x.d,{"aria-label":(0,h.t)("dev_handoff.component_browser.bulk_icon_connect.more_options"),htmlAttributes:{"data-tooltip":(0,h.t)("dev_handoff.component_browser.bulk_icon_connect.more_options"),"data-tooltip-type":N.Ib.TEXT},...n()},o.createElement(T.J,null)),o.createElement(S.mc,null,o.createElement(S.q7,{onClick:function(){for(let n of e)n.component.isIcon&&t({codeConnectId:n.component.code_connect_info.v1.id,row:{...n,selectedFile:null,selectedComponent:null},trackingProps:{location:"list_view"}})},disabled:0===e.length},(0,h.t)("dev_handoff.component_browser.bulk_icon_connect.disconnect_all"))))}function er({connectedComponents:e,notConnectedComponents:t,onConnectMapping:n,libraryKey:c,selectedRepositories:a}){let[r,s]=(0,o.useState)(null),[m,d]=(0,o.useState)("initial"),[_,u]=(0,o.useState)(0),[b,f]=(0,o.useState)(0),g=o.useRef(null);o.useEffect(()=>{0===e.length&&"connected"===m&&d("initial")},[e,m]);let v=(0,o.useCallback)(e=>{s(e.selectedFile)},[]),w=()=>{if(r)for(let e of(d("connecting"),u(0),f(t.length),t))n({row:{assetKey:e.assetKey,sourceIndex:e.sourceIndex,component:e.component,selectedFile:r,selectedComponent:{title:e.component.name}},trackingProps:{location:"list_view",source:"manual"},callback:e=>{if(e){d("initial");return}u(e=>e+1),_===b&&d("connected")}})};return o.createElement(p.J,null,(()=>{switch(m){case"initial":return t.length>0&&o.createElement("div",{className:G},o.createElement("div",{className:"component_browser_bulk_icon_connect--initialContent--yYbWa"},o.createElement(o.Fragment,null,o.createElement("div",{className:"component_browser_bulk_icon_connect--header--z22ji"},o.createElement("h2",{className:"component_browser_bulk_icon_connect--title--Ssiyo"},e.length>0?(0,h.t)("dev_handoff.component_browser.bulk_icon_connect.connect_remaining",{count:t.length}):(0,h.t)("dev_handoff.component_browser.bulk_icon_connect.connect_all",{count:t.length})),o.createElement("p",{className:"component_browser_bulk_icon_connect--description--fumpL"},(0,h.t)("dev_handoff.component_browser.bulk_icon_connect.description"))),o.createElement("div",{className:"component_browser_bulk_icon_connect--inputGroup--rMbmm"},o.createElement(X,{ref:g,sourceIndex:0,libraryKey:c,onFileChanged:v,selectedFile:r,selectedRepositories:a,location:"list_view"}),o.createElement(i.E,{className:"component_browser_bulk_icon_connect--connectButton--QRuMQ",onClick:w,disabled:!r},(0,h.t)("dev_handoff.component_browser.bulk_icon_connect.connect_button"))))));case"connecting":return o.createElement("div",{className:G},o.createElement("div",{className:H},o.createElement("div",{className:en},o.createElement("div",{className:ee},o.createElement(L.k,{size:"sm"}),o.createElement("h2",{className:Z},(0,h.t)("dev_handoff.component_browser.bulk_icon_connect.connecting_progress"))),o.createElement("div",{className:eo},o.createElement("p",{className:et},(0,h.t)("dev_handoff.component_browser.bulk_icon_connect.connected_progress",{connected:_,total:b}))))));case"connected":return o.createElement("div",{className:G},o.createElement("div",{className:H},o.createElement("div",{className:en},o.createElement("div",{className:"component_browser_bulk_icon_connect--checkmarkContainer---3EnN"},o.createElement(M.g,{className:"component_browser_bulk_icon_connect--checkmark--l-ftB",style:{"--color-icon":"var(--color-icon-success)"}}),o.createElement("h2",{className:Z},(0,h.t)("dev_handoff.component_browser.bulk_icon_connect.connected_success",{count:e.length}))),o.createElement("div",{className:eo},o.createElement(l.K,{"aria-label":(0,h.t)("dev_handoff.component_browser.bulk_icon_connect.close_notification"),onClick:()=>d("initial")},o.createElement(R.A,null))))));case"disconnecting":return o.createElement("div",{className:G},o.createElement("div",{className:H},o.createElement("div",{className:en},o.createElement("div",{className:ee},o.createElement(L.k,{size:"sm"}),o.createElement("h2",{className:Z},(0,h.t)("dev_handoff.component_browser.bulk_icon_connect.disconnecting_progress"))),o.createElement("div",{className:eo},o.createElement("p",{className:et},(0,h.t)("dev_handoff.component_browser.bulk_icon_connect.disconnected_progress",{disconnected:_,total:b}))))))}})())}var el=n(531788),es=n(760893),ei=n(376771),em=n(469508),ed=n(177019),e_=n(959498),ep=n(332174),eu=n(603005),eb=n(918777),ef=n(996202),eg=n(359822),ev=n(53837),eh=n(230618),ew=n(173926),eE=n(994924),ey=n(392935),ek=n(428774),eC=n(217958),eN=n(301168),eI=n(989232),eS=n(238462),ex=n(522804),eL=n(370259),eT=n(979485),eM=n(435207),eR=n(584845),eD=n(120700),eP=n(553527),eF=n(31898),eO=n(88009),eA=n(549520);let eK=e=>({componentId:e.id,nodeId:e.node_id,libraryKey:(0,ek.T)(e)||"",entrypoint:"component_browser"}),eq=(e,t)=>({searchSessionId:e,codebaseComponentId:t?.codebase_component_id,codebaseComponentScore:t?.score,entrypoint:"component_browser"}),eB=(e,t,n=null)=>{let o=eK(e);return o={...o,searchSessionId:t},n&&(o={...o,...eq(t,n)}),o},eW="component_browser_code_connect_code--suggestionsWrapper--vJt9q",e$="component_browser_code_connect_code--heading--RJJmA utilities--bodyMediumStrong--1R5cZ",eU="component_browser_code_connect_code--input--Y0rEc",eQ="component_browser_code_connect_code--label--5KW2i utilities--bodyMedium--7-YGK",eY="component_browser_codebase_suggestions--container--knWRq";function eV(){return o.createElement("div",{className:eY},o.createElement(L.k,null))}function ez({items:e,itemLimit:t,selectedSuggestion:n,onSelect:c,onItemLimitChange:a,itemsPerRow:r=5,suggestionsGridRef:l}){let s=ej(),i=t<Math.min(50,e.length);return o.createElement("div",{className:eY,ref:l},o.createElement("div",{className:"component_browser_codebase_suggestions--grid--kwpAM",style:{gridTemplateColumns:`repeat(${r}, 1fr)`}},e.slice(0,t).map((e,t)=>o.createElement(eT.jO,{key:e.id,item:e,onClick:()=>c(t),onHover:eS.lQ,isSelected:n?.id===e.id,index:t}))),i&&o.createElement("div",null,o.createElement(el.$n,{variant:"link",onClick:()=>{let n=5===t?25:25===t?50:t;(0,eI.trackEvent)(eA.Tg,{itemsShownAfterClick:n,totalItems:e.length,...s}),a(n)}},(0,h.t)("dev_handoff.codebase_suggestions.more_results"))))}let eJ=o.createContext({sharedTrackingProps:()=>({})}),ej=()=>o.useContext(eJ).sharedTrackingProps();function eX(){let e=(0,eN.wA)(),t=o.useCallback(()=>{e((0,eF.to)({type:eL.d}))},[e]);return o.createElement("div",{className:eY},o.createElement("p",null,(0,h.t)("auto_suggest.suggestion_shelf_no_suggestions")),o.createElement("p",null,o.createElement(el.$n.Link,{onClick:t},(0,h.t)("dev_handoff.codebase_suggestions.have_you_connected_your_running_app"))))}function eG({component:e,onCodeChange:t,onSuggestionSelected:n,searchSessionId:c}){let a=!!(0,b.k)().dt_ccv2_dd,[r,[l]]=(0,ex.gY)(e,!a,c),[s,i]=(0,o.useState)(5),m=(0,eN.wA)(),d=(0,o.useCallback)(()=>eB(e,c),[e,c]);o.useEffect(()=>{(0,eI.trackEvent)(eA.AD,{...d()})},[d]);let _=a?eP.p6.data:l.data,p=a?"loaded":l.status,u=(0,o.useRef)(null),f=(0,eD.s)({result:_,status:p,itemLimit:s}),g=(0,o.useMemo)(()=>_?.map(e=>({id:e.codebase_component_id,thumbnail:e.thumbnail_url,srcPath:e.src_path||void 0,name:e.name,type:"suggestion"}))??[],[_]),v=(0,o.useMemo)(()=>()=>{if(!u.current)return{x:0,y:0};let e=u.current.getBoundingClientRect(),t=f.width;return{x:e.left-t-4,y:e.top}},[f.width]),w=o.useCallback(e=>{let t=g[e];t&&(f.setOpen(e,v()),n({source:t.srcPath??"",name:t.name,componentName:t.name,index:e}),(0,eI.trackEvent)(eA.bp,{...d(),indexInList:e,codebaseComponentId:t.id}))},[n,d,g,f,v]),E=()=>{f.setKeepWindowOpen(!1),m(eF.Lo())};o.useEffect(()=>{f.selectedItem&&t(function(e){let{name:t,srcPath:n}=e;return n?`import { ${t} } from '${n}'

<${t} />`:`<${t} />`}(f.selectedItem))},[f.selectedItem,t]);let y="loading"===l.status,k="loaded"===l.status&&_&&0===_.length,C="loaded"===l.status,N=(0,ef.hC)(),I=f.data.map(e=>({name:e.name,src_path:e.srcPath}));return o.useEffect(()=>{C&&(0,eI.trackEvent)(eA.v7,{...d(),numResults:_?_.length:0})},[C,_,d]),o.createElement(eJ.Provider,{value:{sharedTrackingProps:d}},o.createElement("div",{className:eW},o.createElement("div",{className:e$},(0,h.t)("dev_handoff.codebase_suggestions.inspect_panel_disconnected_header_title")),y&&o.createElement(eV,null),k&&o.createElement(eX,null),!y&&!k&&o.createElement(o.Fragment,null,o.createElement(ez,{items:g,itemLimit:s,onItemLimitChange:i,selectedSuggestion:f.selectedItem,onSelect:w,suggestionsGridRef:u}),o.createElement(eR.q_,{window:f,onPageThrough:t=>{N("code_connect_v2.codebase_suggestions_results_interaction",{nodeId:e.type===eO.PW.COMPONENT?e.component_key:e.key,location:"component_browser",renderedSuggestionsCount:f.data.length,renderedSuggestionsSetData:JSON.stringify(I),suggestionData:JSON.stringify(I[t]),action:"page_through"})},onReferenceClicked:(t,n)=>{N("code_connect_v2.codebase_suggestion_reference_clicked",{nodeId:e.type===eO.PW.COMPONENT?e.component_key:e.key,location:"component_browser",renderedSuggestionsCount:f.data.length,renderedSuggestionsSetData:JSON.stringify(I),suggestionData:JSON.stringify(I[t]),clickedReferenceUrl:n?n.url:void 0,clickedReferenceType:n?n.type:void 0,componentNameCopied:n?n.componentName:void 0})},onZoomClicked:()=>{let{data:e,setKeepWindowOpen:t}=f;t(!0),m(eF.to({type:eM.dU,data:{data:e,onClose:E,onReferenceClicked:()=>{}},showModalsBeneath:!0}))}}))))}var eH=n(618803),eZ=n(749214);let e0=(0,o.memo)(function(e){return(0,eZ.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,eZ.jsx)("path",{fill:"var(--color-icon)",d:"M14.165 11.624A.38.38 0 0 1 14.5 12c0 1.83-.228 3.507-.608 4.743-.189.615-.425 1.149-.71 1.54-.276.38-.67.717-1.182.717-.513 0-.906-.337-1.183-.717-.284-.391-.52-.925-.71-1.54a10 10 0 0 1-.19-.715.484.484 0 0 1 .516-.585c.224.017.416.18.467.398q.076.323.163.608c.173.561.369.98.563 1.246.2.276.333.305.374.305s.173-.029.374-.305c.194-.266.39-.685.562-1.246.344-1.116.564-2.69.564-4.449 0-.236.198-.425.432-.401zM7.22 15c.345 0 .568.351.5.69l-.012.073c-.053.336.02.451.049.48.028.028.143.102.48.049l.072-.014c.338-.067.69.156.69.5a.45.45 0 0 1-.331.445 3 3 0 0 1-.275.056c-.464.073-.981.033-1.343-.329-.363-.362-.403-.88-.33-1.344a3 3 0 0 1 .057-.275A.45.45 0 0 1 7.22 15m9.559 0a.45.45 0 0 1 .443.331q.036.141.057.275c.073.465.032.982-.33 1.344-.363.362-.878.402-1.343.33a3 3 0 0 1-.276-.058.45.45 0 0 1-.331-.444c0-.344.351-.567.69-.5l.073.014c.338.053.452-.02.48-.049.028-.028.102-.142.049-.48l-.014-.073c-.067-.339.157-.69.502-.69M7.972 9.917a.484.484 0 0 1 .584.516.52.52 0 0 1-.395.466q-.324.076-.61.165c-.56.172-.979.368-1.246.562-.276.2-.304.334-.304.374s.027.172.304.374c.267.194.685.39 1.247.563 1.116.343 2.69.563 4.449.563.235 0 .423.197.4.43l-.027.237A.38.38 0 0 1 12 14.5c-1.83 0-3.508-.227-4.743-.607-.615-.19-1.15-.426-1.54-.71C5.338 12.906 5 12.513 5 12c0-.512.336-.906.717-1.183.39-.284.925-.52 1.54-.71q.337-.102.714-.19M12 9.5c1.83 0 3.507.227 4.743.607.615.19 1.149.426 1.54.71.38.277.716.67.717 1.183 0 .513-.337.906-.717 1.183-.391.284-.925.52-1.54.71q-.337.102-.715.189a.484.484 0 0 1-.585-.516.52.52 0 0 1 .396-.466q.324-.075.61-.163c.561-.173.98-.37 1.246-.563.277-.202.305-.335.305-.374 0-.04-.029-.173-.305-.374-.267-.194-.685-.39-1.246-.562-1.117-.344-2.69-.564-4.45-.564a.397.397 0 0 1-.4-.433l.026-.233A.38.38 0 0 1 12 9.5M12 5c.512 0 .906.337 1.182.717.285.39.521.925.71 1.54q.104.337.19.714a.484.484 0 0 1-.517.585.52.52 0 0 1-.466-.397 9 9 0 0 0-.163-.608c-.172-.561-.368-.98-.562-1.246C12.174 6.029 12.04 6 12 6s-.174.03-.374.305c-.194.266-.39.685-.563 1.246-.343 1.116-.563 2.69-.563 4.449a.396.396 0 0 1-.433.4l-.233-.025A.38.38 0 0 1 9.5 12c0-1.83.227-3.507.607-4.743.19-.615.426-1.15.71-1.54.277-.38.67-.717 1.183-.717M7.05 7.05c.362-.362.879-.403 1.343-.33q.134.022.274.057c.2.05.332.237.332.444 0 .344-.352.567-.69.5l-.072-.013c-.338-.053-.452.022-.48.05-.029.028-.102.142-.05.48l.013.073c.068.337-.155.689-.5.689a.45.45 0 0 1-.443-.331 3 3 0 0 1-.057-.275c-.073-.465-.033-.98.33-1.343m8.556-.33c.464-.072.98-.031 1.343.33.362.363.403.88.33 1.344a3 3 0 0 1-.057.274.45.45 0 0 1-.443.332c-.345 0-.57-.352-.502-.69l.014-.073c.053-.336-.02-.45-.05-.48-.028-.027-.142-.102-.479-.049l-.074.013c-.338.067-.689-.156-.69-.5a.45.45 0 0 1 .332-.444q.141-.035.276-.056"})})}),e1=(0,o.forwardRef)(function(e,t){let{sourceIndex:n,currentRowIndex:c,component:a,libraryKey:r,selectedFile:l,selectedComponent:s,onComponentChanged:i,disabled:m=!1,repositoriesAvailable:d,onboardingKey:_,isInline:p=!1}=e,[u,b]=(0,o.useState)(""),{searchResults:f,isLoadingFileContent:g}=function({libraryKey:e,selectedFile:t,repositoriesAvailable:n,searchTerm:c}){let a=t?.metadata?.repository?.id,r=t?.metadata?.path,[l]=(0,F.IT)((0,z.r)({libraryKey:e,repository:a??"",path:r??""}),{enabled:!!t&&!!e&&!!a&&!!r&&!t?.metadata?.isCustomLink,key:`repositoryComponentsQuery-${r}`}),s="loading"===l.status,i="loaded"===l.status,m=l.data,d=(0,o.useMemo)(()=>i&&m?m.components:[],[i,m]);return{searchResults:(0,o.useMemo)(()=>d.length||n?d.filter(e=>e.toLowerCase().includes(c.toLowerCase())).map(e=>({title:e,subtitle:"",icon:o.createElement(e0,null)})):[],[c,d,n]),isLoadingFileContent:s,searchTerm:c}}({libraryKey:r,selectedFile:l,repositoriesAvailable:d,searchTerm:u});if("ignored"===a.code_connect_info.v1.state)return o.createElement("span",null,"--");let v=p?(0,h.t)("dev_handoff.component_browser.component_name"):(0,h.t)("dev_handoff.component_browser.add_component_name");return o.createElement(V,{ref:t,arePillsClearable:!0,disabled:m,hint:(0,h.t)("dev_handoff.component_browser.component_search_hint"),isClearable:!1,isLoadingSearchResults:g,onDeleteLastItem:()=>{i({sourceIndex:n,currentRowIndex:c,selectedComponent:null,action:"delete",trackingProps:{location:e.location,source:"manual"}})},onDropdownItemClick:t=>{i({sourceIndex:n,currentRowIndex:c,selectedComponent:t,action:"create",trackingProps:{location:e.location,source:"manual"}})},onEnterPressed:t=>""!==t.trim()&&(i({sourceIndex:n,currentRowIndex:c,selectedComponent:{title:t,subtitle:""},action:"create",trackingProps:{location:e.location,source:"manual"}}),!0),onValueChanged:e=>{b(e)},onboardingKey:_,placeholder:s?"":v,searchResults:f,selectedItem:s?{value:[{value:s.title}]}:void 0,showDropdown:!l?.metadata?.isCustomLink&&!s&&d,showDropdownOnFocus:!0})}),e3=(0,o.forwardRef)(function({index:e,showIcon:t,libraryKey:n,component:c,selectedFile:a,selectedComponent:r,onFileChanged:l,onComponentChanged:s,title:i,selectedRepositories:m},d){let _=o.useRef(null),p=o.useRef(null),u=o.useRef(null);return(0,o.useImperativeHandle)(d,()=>({fileSearchInputRef:_,componentSearchInputRef:p})),(0,o.useEffect)(()=>{_.current?.focus()},[e,_]),o.createElement("div",{className:eW,ref:u},o.createElement("div",{className:e$},t&&o.createElement(eH.X,null),i),o.createElement("div",{className:eU},o.createElement("label",{className:eQ},(0,h.t)("dev_handoff.component_browser.code_file")),o.createElement(X,{ref:_,sourceIndex:e,component:c,libraryKey:n,onFileChanged:l,selectedFile:a,selectedRepositories:m,location:"side_sheet"})),o.createElement("div",{className:eU},o.createElement("label",{className:eQ},(0,h.t)("dev_handoff.component_browser.code_component")),o.createElement(e1,{ref:p,sourceIndex:e,component:c,libraryKey:n,selectedFile:a,onComponentChanged:s,selectedComponent:r,repositoriesAvailable:m.length>0,location:"side_sheet"})))});var e2=n(763593);let e4="component_browser_connect_dialog--footer--Pu5AO",e5="component_browser_connect_dialog--contentTitle--Zbcus utilities--bodyMediumStrong--1R5cZ",e7="component_browser_connect_dialog--contentIcon--Paond utilities--bodyMediumStrong--1R5cZ",e8="component_browser_connect_dialog--connectedComponentTable--pHSDk",e6="component_browser_connect_dialog--connectedComponentTableRow--vcP6G",e9="component_browser_connect_dialog--connectedComponentTableFirstCell--TagEo",te="component_browser_connect_dialog--connectedComponentTableSecondCell--n97Tg",tt="component_browser_connect_dialog--connectionContent--cUifs";function tn({onRequestPreviousComponent:e,onRequestNextComponent:t}){return o.createElement("div",{className:"component_browser_connect_dialog--footerNavigationButtons--jdpAm"},o.createElement(l.K,{"aria-label":(0,h.t)("dev_handoff.component_browser.previous"),onClick:e},o.createElement(ed.N,null)),o.createElement(l.K,{"aria-label":(0,h.t)("dev_handoff.component_browser.next"),onClick:t},o.createElement(e_.W,null)))}let to=(0,o.forwardRef)(function({isConnected:e,isIgnored:t,handleDeleteMapping:n,handleConnect:c,handleIgnore:a,selectedFile:r,selectedComponent:l,isDisabled:s,onRequestPreviousComponent:i,onRequestNextComponent:m},d){return e||t?o.createElement("div",{className:e4},o.createElement(tn,{onRequestPreviousComponent:i,onRequestNextComponent:m}),o.createElement(el.$n,{onClick:n,variant:"destructive",disabled:s},t?(0,h.t)("dev_handoff.component_browser.has_code_equivalent"):(0,h.t)("dev_handoff.component_browser.disconnect"),o.createElement(el.$n.Shortcut,null,"\u232B"))):o.createElement("div",{className:e4},o.createElement(tn,{onRequestPreviousComponent:i,onRequestNextComponent:m}),o.createElement("div",{className:"component_browser_connect_dialog--footerButtons--wRhfx"},o.createElement(el.$n,{variant:"secondary",onClick:a,disabled:s},(0,h.t)("dev_handoff.component_browser.mark_as_no_code_equivalent"),o.createElement(el.$n.Shortcut,null,"\u21E7\u232B")),o.createElement(el.$n,{ref:d,onClick:c,disabled:s||!r||!l},(0,h.t)("dev_handoff.component_browser.code_connect"),o.createElement(el.$n.Shortcut,null,"\u21B5"))))});function tc({data:e,sourceIndex:t,onClose:n,onRequestNextComponent:c,onRequestPreviousComponent:a,notConnectedComponents:r,connectedComponents:l,ignoredComponents:s,onDeleteMapping:i,onIgnoreMapping:m,onConnectMapping:d,selectedRepositories:_}){let[p,u]=(0,o.useState)(null),[b,f]=(0,o.useState)(null),[g]=(0,ev.Vc)("componentBrowserOnboardingSelection",null),v=(0,ey.A)(),w=o.useRef(null),E=o.useRef(null),y=o.useRef(null),k="connected"===e.component.code_connect_info.v1.state,C="ignored"===e.component.code_connect_info.v1.state,N=e.component.code_connect_info.v1?.type==="figmadoc";(0,o.useEffect)(()=>{u(e?.selectedFile??null),f(e?.selectedComponent??null)},[e]);let S=(0,ef.hC)();(0,eg.h)(()=>{S("component_browser.component_browser_side_sheet_viewed")});let x="key"in e.component?e.component.key:"component_key"in e.component?e.component.component_key:"",[L]=(0,P.A)(x,1e3,{leading:!0});(0,o.useEffect)(()=>{(C||k)&&E.current?.focus()},[C,k]);let[T,[M]]=(0,ex.gY)(e.component,"not_connected"===e.component.code_connect_info.v2.state&&L===x,null),[R,D]=o.useState(0),[F,O]=o.useState(!1),A=(0,ew.Ak)(e.component.updated_at),[K,q]=o.useState(""),[B,W]=o.useState(!1);(0,o.useEffect)(()=>{D(-1),O(!1)},[x,D]),(0,o.useEffect)(()=>{"loaded"===M.status&&D(0)},[x,M.status,D]);let $=()=>{let n={location:"side_sheet",source:B?"codebase_suggestions":"manual"};if(F&&"loaded"===M.status&&M.data?.length>R){let e=eq(T,M.data[R]||null);n={...n,...e,source:"codebase_suggestions",indexInList:R}}d({row:{assetKey:e.assetKey,sourceIndex:t,component:e.component,selectedFile:p,selectedComponent:b},trackingProps:n})},U=()=>{m({row:{assetKey:e.assetKey,sourceIndex:t,component:e.component,selectedFile:p,selectedComponent:b},trackingProps:{location:"side_sheet"}})},Q=()=>{let n=e.component.code_connect_info.v1.id;n&&i({codeConnectId:n,row:{assetKey:e.assetKey,sourceIndex:t,component:e.component,selectedFile:null,selectedComponent:null},trackingProps:{location:"side_sheet"}})},Y="codebase_ingestion"===g&&!k&&v,V=(0,o.useCallback)(t=>{W(!1),u(t.selectedFile),O(!1),S("component_browser.code_component_manual_connection_data_entered",{nodeId:e.component.node_id,field:"code_file",location:"side_sheet",value:t.selectedFile?.title}),t.selectedFile&&y.current?.componentSearchInputRef.current?.focus()},[e.component.node_id,S]),z=(0,o.useCallback)(t=>{f(t.selectedComponent),W(!1),O(!1),S("component_browser.code_component_manual_connection_data_entered",{nodeId:e.component.node_id,field:"code_component",location:"side_sheet",value:t.selectedComponent?.title}),"create"===t.action&&t.selectedComponent&&p&&w.current?.focus()},[e.component.node_id,p,S]);return o.createElement(eE.n.div,{ref:E,className:"component_browser_connect_dialog--wrapper--pYy--",onKeyDown:function(e){let t=y.current?.fileSearchInputRef.current===document.activeElement,o=y.current?.componentSearchInputRef.current===document.activeElement,r=t||o;if("Backspace"===e.key&&e.shiftKey){U();return}if("Escape"===e.key&&r){y.current?.componentSearchInputRef.current?.blur(),y.current?.fileSearchInputRef.current?.blur(),E.current?.focus();return}if(!r)switch(e.key){case"ArrowUp":a();break;case"ArrowDown":c();break;case"ArrowRight":!function(){let e=M.data;e&&D(t=>t+1>=e.length?0:t+1)}();break;case"ArrowLeft":!function(){let e=M.data;e&&D(t=>t-1<0?e.length-1:t-1)}();break;case"Enter":$();break;case"Escape":n();break;case"Backspace":e.shiftKey?U():Q()}},tabIndex:-1},o.createElement("div",{className:"component_browser_connect_dialog--header--5-qTG"},o.createElement("div",{className:"component_browser_connect_dialog--headerSide--EpKa2"},o.createElement(e2.o,{open:!0,notConnectedComponents:r,connectedComponents:l,ignoredComponents:s}))),o.createElement("div",{className:"component_browser_connect_dialog--content--pfamD"},o.createElement("div",{"data-onboarding-key":I.kE.Step2,className:"component_browser_connect_dialog--designContent--f-Lg3"},o.createElement("div",{className:"component_browser_connect_dialog--title--bpt4P utilities--bodyMediumStrong--1R5cZ"},o.createElement("div",{className:"component_browser_connect_dialog--titleIcon--WvA82"},o.createElement(ep.m,null),(0,h.t)("dev_handoff.component_browser.figma_component_label")),e.component.name),o.createElement("div",{className:"component_browser_connect_dialog--imageWrapper--xsdOt"},o.createElement(eh.oW,{className:"component_browser_connect_dialog--componentThumbnail--8njGv",src:e.component.thumbnail_url,alt:e.component.name})),o.createElement("div",{className:"component_browser_connect_dialog--lastUpdated--VWubK"},(0,h.t)("dev_handoff.component_browser.last_updated",{0:A})),o.createElement("div",{className:"component_browser_connect_dialog--description--YNpNH"},o.createElement(eC.i,{description:e.component.description,description_rt:e.component.description_rt}))),C?o.createElement("div",{className:tt},o.createElement("div",{className:e5},o.createElement("div",{className:e7},o.createElement(eu.I,null)),(0,h.t)("dev_handoff.component_browser.no_code_equivalent_menu")),o.createElement("div",null,o.createElement("table",{className:e8},o.createElement("tbody",null,o.createElement("tr",{className:e6},o.createElement("td",{className:e9},(0,h.t)("dev_handoff.component_browser.marked_by")),o.createElement("td",{className:te},e.component.code_connect_info.v1.author_name)),o.createElement("tr",{className:e6},o.createElement("td",{className:e9},(0,h.t)("dev_handoff.component_browser.date")),o.createElement("td",{className:te},e.component.code_connect_info.v1.updated_at?(0,eb.A)(e.component.code_connect_info.v1.updated_at).format("MMM D, YYYY"):"")))))):k?o.createElement(ta,{data:e}):o.createElement(o.Fragment,null,Y?o.createElement(eG,{libraryKey:(0,ek.T)(e.component)||"",component:e.component,onCodeChange:q,onSuggestionSelected:e=>{e&&(O(!0),D(e.index)),W(!0),u(e?{title:e.source,metadata:{name:e.name,type:"file",isCustomLink:!1,repository:{id:"",name:""},path:e.source,sha:""}}:null),f(e?{title:e.componentName}:null)},searchSessionId:T}):null,o.createElement(e3,{ref:y,component:e.component,index:t,libraryKey:(0,ek.T)(e.component),onComponentChanged:z,onFileChanged:V,selectedComponent:b,selectedFile:p,selectedRepositories:_,showIcon:"manual"===g,title:"manual"===g||"github"===g?(0,h.t)("dev_handoff.component_browser.in_your_codebase"):(0,h.t)("dev_handoff.component_browser.none_of_these_work")}))),o.createElement(to,{ref:w,handleConnect:$,handleDeleteMapping:Q,handleIgnore:U,isConnected:k,isDisabled:N,isIgnored:C,onRequestNextComponent:c,onRequestPreviousComponent:a,selectedComponent:b,selectedFile:p}))}function ta({data:e}){let t=e.component?.code_connect_info?.v1?.type==="figmadoc",n=(0,eb.A)(e.component.code_connect_info.v1.updated_at).format("MMM D, YYYY"),c=[{title:(0,h.t)("dev_handoff.component_browser.component_file"),value:e.selectedFile?.subtitle??e.selectedFile?.title},{title:(0,h.t)("dev_handoff.component_browser.component_name"),value:e.selectedComponent?.title},{title:(0,h.t)("dev_handoff.component_browser.linked_by"),value:e.component.code_connect_info.v1.author_name},{title:(0,h.t)("dev_handoff.component_browser.date_linked"),value:n}];return t?o.createElement("div",{className:"component_browser_connect_dialog--warningWrapper---Q4Ly"},o.createElement(es.Yy,{variant:"warn"},o.createElement(ei.Q,{title:(0,h.t)("dev_handoff.component_browser.cli_only_title")},(0,h.t)("dev_handoff.component_browser.cli_only_message"),o.createElement(em.N,{href:"https://help.figma.com"},(0,h.t)("dev_handoff.component_browser.learn_more"))))):o.createElement("div",{className:tt},o.createElement("div",{className:e5},o.createElement("div",{className:e7},o.createElement(eu.I,null)),(0,h.t)("dev_handoff.component_browser.component_in_your_codebase")+" "+e.selectedComponent?.title),o.createElement("div",null,o.createElement("table",{className:e8},o.createElement("tbody",null,c.map(e=>o.createElement("tr",{key:e.title,className:e6},o.createElement("td",{className:e9},e.title),o.createElement("td",{className:te},e.value)))))))}var tr=n(749233),tl=n(218742),ts=n(266004);let ti="progress_ring--ring--QMZk8";function tm(e){let{fraction:t,stroke:n=2,size:c=16,color:a="var(--color-icon-menu-tertiary, rgba(255, 255, 255, 0.4))"}=e,r=c/2,l=(c-n)/2,s=2*l*Math.PI;return o.createElement("svg",{height:c,width:c},e.background&&o.createElement("circle",{className:ti,strokeWidth:n,strokeDasharray:`${s} ${s}`,strokeDashoffset:0,r:l,cx:r,cy:r,style:{stroke:e.background}}),o.createElement("circle",{className:ti,strokeWidth:n,strokeDasharray:`${s} ${s}`,style:{strokeDashoffset:s-t*s,stroke:a},r:l,cx:r,cy:r}))}let td="component_browser_library_view_mapping_counts--statusRow--U5TVX",t_="component_browser_library_view_mapping_counts--statusText--EMe8n",tp="component_browser_library_view_mapping_counts--iconRingContainer--35-2h",tu="component_browser_library_view_mapping_counts--centeredIcon--9-npT";function tb({notConnectedComponents:e,connectedComponents:t,ignoredComponents:n}){let c=t.length+e.length+n.length,a=e=>0===c?0:Math.round(e/c*100);return o.createElement("div",{className:"component_browser_library_view_mapping_counts--container--rjZ68"},o.createElement("div",{className:"component_browser_library_view_mapping_counts--border--M34yA"}),o.createElement("div",{className:"component_browser_library_view_mapping_counts--headerRow--dorJ-"},o.createElement("div",{className:"component_browser_library_view_mapping_counts--title--mlZdy"},(0,h.tx)("dev_handoff.component_browser_right_panel_mapping_counts.title"))),o.createElement("div",{className:"component_browser_library_view_mapping_counts--statusSection--229SS"},o.createElement("div",{className:td},o.createElement("div",{className:tp},o.createElement(tm,{fraction:a(e.length)/100,color:"var(--color-multiplayergrey)",background:"var(--color-bg-secondary)",size:32,stroke:4}),o.createElement(tr.w,{className:tu,style:{"--color-icon":"var(--color-multiplayergrey)"}})),o.createElement("div",{className:t_},(0,h.tx)("dev_handoff.component_browser.in_context_section_percent_components_need_to_be_mapped",{num_components:a(e.length)}))),o.createElement("div",{className:td},o.createElement("div",{className:tp},o.createElement(tm,{fraction:a(t.length)/100,color:"var(--color-bg-handoff)",background:"var(--color-bg-handoff-tertiary)",size:32,stroke:4}),o.createElement(tl.W,{className:tu,style:{"--color-icon":"var(--color-bg-handoff)"}})),o.createElement("div",{className:t_},(0,h.tx)("dev_handoff.component_browser.in_context_section_percent_components_mapped",{num_components:a(t.length)}))),o.createElement("div",{className:td},o.createElement("div",{className:tp},o.createElement(tm,{fraction:a(n.length)/100,color:"var(--color-bg-warning)",background:"var(--color-bg-warning-tertiary)",size:32,stroke:4}),o.createElement(ts.M,{className:tu,style:{"--color-icon":"var(--color-icon-warning)"}})),o.createElement("div",{className:t_},(0,h.tx)("dev_handoff.component_browser.in_context_section_percent_components_can_t_be_mapped",{num_components:a(n.length)})))))}var tf=n(672449);function tg(){return o.createElement("div",{className:"component_browser_library_view_suggestions_status--container--qSV-D"},o.createElement("div",{className:"component_browser_library_view_suggestions_status--border--Jw79U"}),o.createElement("div",{className:"component_browser_library_view_suggestions_status--header--kBmN-"},o.createElement("div",{className:"component_browser_library_view_suggestions_status--headerRow--QgWgT"},o.createElement(tf.N,null),o.createElement("div",{className:"component_browser_library_view_suggestions_status--title--inV3P"},o.createElement("p",null,(0,h.t)("component_browser.suggestions_status.title"))))),o.createElement("div",{className:"component_browser_library_view_suggestions_status--statusSection--BDuQ4"},o.createElement("div",{className:"component_browser_library_view_suggestions_status--statusRow--BJKC5"},o.createElement("div",{className:"component_browser_library_view_suggestions_status--statusDotCircle--5M5TN"}),o.createElement("div",{className:"component_browser_library_view_suggestions_status--statusText--IRVPD"},o.createElement("p",null,(0,h.t)("component_browser.suggestions_status.indexing_in_progress")))),o.createElement("div",{className:"component_browser_library_view_suggestions_status--statusDescriptionRow--Iehb8"},o.createElement("div",{className:"component_browser_library_view_suggestions_status--statusDescription---7S3f"},o.createElement("p",null,(0,h.t)("component_browser.suggestions_status.indexing_description"))))))}function tv({notConnectedComponents:e,connectedComponents:t,ignoredComponents:n}){return o.createElement("div",{className:"component_browser_library_view_right_panel--container--sJEeY"},(0,b.k)().dt_component_browser_bulk_mapping&&o.createElement(tg,null),o.createElement(tb,{notConnectedComponents:e,connectedComponents:t,ignoredComponents:n}))}var th=n(748059),tw=n(52495),tE=n(398612),ty=n(615233),tk=n(968325),tC=n(234053),tN=n(179688),tI=n(440539),tS=n(506428),tx=n(162796),tL=n(309488),tT=n(93275),tM=n(952039),tR=n(138528),tD=n(513718),tP=n(446951);let tF="confirm_deletion_modal--bodyText--OTH-f",tO=(0,tP.Ju)(function(e){let t=tx.hS(e),n=(0,tR.D6)("ConfirmDeletionModal"),c=(0,eN.wA)(),a="loaded"===n.status,[r,l]=(0,o.useState)(!1),s=n.data?.planKey,i=s?.type,m=s?.parentId,d=(0,o.useCallback)(async()=>{if(i&&m){(0,eI.trackEvent)(eA.WG),l(!0);try{await tD.w.deleteAllCodeSuggestions({planParentType:i,planParentId:m}),c(tM.F.enqueue({type:"success",message:(0,h.t)("dev_handoff.codebase_suggestions.deletion_request_received_it_may_take_a_few_minutes_to_complete")})),e.onClose()}catch(e){c(tM.F.enqueue({type:"error",message:(0,h.t)("dev_handoff.codebase_suggestions.failed_to_submit_deletion_request_please_try_again_later")})),l(!1)}}},[e,c,i,m]);return o.createElement(tL.bL,{manager:t,width:"md"},o.createElement(tT.vo,null,o.createElement(tT.Y9,null,o.createElement(tT.hE,null,(0,h.t)("dev_handoff.codebase_suggestions.delete_all_visual_codebase_suggestions"))),o.createElement(tT.nB,null,o.createElement("p",{className:tF},(0,h.t)("dev_handoff.codebase_suggestions.are_you_sure_you_want_to_delete_all_the_visual_codebase_suggestions_that_have_been_collected_so_far")),o.createElement("p",{className:tF},(0,h.t)("dev_handoff.codebase_suggestions.this_will_delete_all_the_visual_codebase_suggestions_that_have_been_collected_so_far_for_your_organization_you_ll_need_to_connect_your_running_app_again_if_you_change_your_mind")),o.createElement("p",{className:tF},(0,h.t)("dev_handoff.codebase_suggestions.this_will_not_delete_any_explicit_code_connect_mappings_you_have_made_with_those_suggestions"))),o.createElement(tT.wi,null,o.createElement(tT.jk,null,o.createElement(el.$n,{variant:"secondary",onClick:e.onClose},(0,h.t)("dev_handoff.codebase_suggestions.cancel")),o.createElement(el.$n,{variant:"destructive",disabled:!(a&&!r),onClick:d},(0,h.t)("dev_handoff.codebase_suggestions.delete"))))))}),tA="component_browser_settings_panel--iconContainer--xstoF",tK="component_browser_settings_panel--optionTitleText--KwUII",tq="component_browser_settings_panel--option--v7PyN",tB="component_browser_settings_panel--optionTitle--hQS7B";function tW({onChangeRepo:e,status:t,hasMultipleAvailableRepositories:n}){let{getTriggerProps:c,manager:a}=S.b(),r=(0,tN.e)(),[l,s]=o.useState(!1),i=async()=>{s(!0);try{await r()}finally{s(!1)}},m=async()=>{let e=await (0,tI.l)();(0,tE.FJ)(e.manage)},d={[tC.w.Connected]:o.createElement(o.Fragment,null,n&&o.createElement(S.q7,{onClick:e},(0,h.t)("dev_handoff.component_browser.settings.change_repository")),o.createElement(S.q7,{onClick:m},(0,h.t)("dev_handoff.component_browser.settings.disconnect"))),[tC.w.NeedsInfo]:o.createElement(o.Fragment,null,o.createElement(S.q7,{onClick:e},(0,h.t)("dev_handoff.component_browser.settings.select_repository"))),[tC.w.Pending]:o.createElement(o.Fragment,null,o.createElement(S.q7,{onClick:m},(0,h.t)("dev_handoff.component_browser.settings.manage_request"))),[tC.w.NotSetup]:o.createElement(o.Fragment,null,o.createElement(S.q7,{onClick:i},l?o.createElement(L.k,{size:"sm"}):(0,h.t)("dev_handoff.component_browser.settings.setup")))};return o.createElement(S.bL,{manager:a},o.createElement(el.$n,{variant:"ghost",...c()},o.createElement(T.J,null)),o.createElement(S.mc,null,d[t]))}function t$(){let e=(0,eN.wA)(),{getTriggerProps:t,manager:n}=S.b(),c=o.useCallback(()=>{e(eF.to({type:eL.d}))},[e]),a=o.useCallback(()=>{e((0,eF.to)({type:tO}))},[e]);return o.createElement("div",{className:"component_browser_settings_panel--setupIngestionButton---keGz"},o.createElement(S.bL,{manager:n},o.createElement(el.$n,{variant:"ghost",...t()},o.createElement(T.J,null)),o.createElement(S.mc,null,o.createElement(S.q7,{onClick:c},(0,h.t)("dev_handoff.component_browser.settings.setup")),o.createElement(S.q7,{onClick:a},(0,h.t)("dev_handoff.codebase_suggestions.delete_all_codebase_suggestions")))))}function tU({status:e}){switch(e){case tC.w.Pending:return o.createElement(r.E,{variant:"warningOutline"},(0,h.t)("dev_handoff.component_browser_source_connection_status.pending"));case tC.w.NeedsInfo:return o.createElement(r.E,{variant:"warningOutline"},(0,h.t)("dev_handoff.component_browser_source_connection_status.needs_info"));case tC.w.Connected:return o.createElement(r.E,{variant:"successOutline"},(0,h.t)("dev_handoff.component_browser_source_connection_status.connected"));default:return o.createElement(r.E,{variant:"inactiveOutline"},(0,h.t)("dev_handoff.component_browser_source_connection_status.not_setup"))}}function tQ({position:e,getContainerProps:t,onOpenChange:n,libraryKey:c}){let a="dark"===(0,tS.DP)(),r=(0,ey.A)(),l=a?(0,ty.ck)("87362980e1543a5db4a0044590b04d5f491a1e75"):(0,ty.ck)("a938cc4b8421dc36477282e09f83e9e6770065ed"),s=(0,y.Bt)(),{repositoryConnection:i,isLoading:m,repositories:d}=(0,tC.T)({libraryKey:c}),_=d?.availableRepositories.length&&d.availableRepositories.length>1;return o.createElement(th.mc,{...t(),className:"component_browser_settings_panel--container--bNvEu",style:{top:`${e.top+24+8}px`,left:`${e.left-320+24}px`,width:"320px"}},o.createElement("div",{className:"component_browser_settings_panel--title--I250A"},(0,h.t)("dev_handoff.component_browser.settings.title")),o.createElement("div",{className:"component_browser_settings_panel--options--BisI-"},o.createElement("div",{className:tq},o.createElement("div",{className:tB},o.createElement("div",{className:tA},o.createElement(tk.f,null)),m?o.createElement("div",{className:tK},o.createElement(L.k,{size:"sm"})):o.createElement("div",{className:tK},i.selectedRepositoryName)),o.createElement("div",{className:"component_browser_settings_panel--optionActions--kGJXl"},o.createElement(tU,{status:i.status}),o.createElement(tW,{onChangeRepo:()=>{s(!0),n(!1)},status:i.status,hasMultipleAvailableRepositories:!!_}))),r&&o.createElement("div",{className:tq},o.createElement("div",{className:tB},o.createElement("div",{className:tA},o.createElement(eh.oW,{src:l,alt:(0,h.t)("dev_handoff.component_browser_onboarding.connected_projects_icon"),className:"component_browser_settings_panel--cardImage--YKour"})),o.createElement("div",{className:tK},(0,h.t)("dev_handoff.component_browser.settings.connect_running_app"))),o.createElement("div",null,o.createElement(t$,null))),o.createElement("div",{className:"component_browser_settings_panel--footer--2OuKN"},(0,h.tx)("dev_handoff.component_browser.settings.footer_message",{learnMore:o.createElement(em.N,{href:"https://docs.google.com/document/d/1IsJTLpqR1rRQfphfbotvWoYbtoaZExKpggeANRFmRI8/edit?tab=t.0",newTab:!0,"aria-label":(0,h.t)("dev_handoff.component_browser.settings.footer_message_link")},(0,h.t)("dev_handoff.component_browser.settings.footer_message_link"))}))))}function tY({libraryKey:e}){let t=o.useRef(null),[n,c]=o.useState(!1),{getTriggerProps:a,getContainerProps:r}=th.fP({isOpen:n,onOpenChange:c,type:"dialog",softDismiss:!0});return o.createElement(o.Fragment,null,o.createElement(x.d,{...a(),"aria-label":(0,h.t)("dev_handoff.component_browser.settings"),htmlAttributes:{"data-tooltip":(0,h.t)("dev_handoff.codebase_suggestions.open_settings"),"data-tooltip-type":N.Ib.TEXT},"data-onboarding-key":I.cU.Step1,"aria-expanded":n,ref:t},o.createElement(tw.I,null)),o.createElement(tQ,{getContainerProps:r,onOpenChange:c,position:t.current?.getBoundingClientRect()??{top:0,left:0},libraryKey:e}))}var tV=n(273372),tz=n(741680),tJ=n(500897);let tj="component_browser_library_view--componentsListLoadingOrError--JChCC";function tX({label:e,value:t,icon:n}){return o.createElement(a.c$,{key:t,value:t},o.createElement("div",{className:"component_browser_library_view--filterOption--EQd3a"},o.createElement(_.J,{mode:"dark"},n),e))}function tG({displayedComponent:e,displayedComponentIndex:t,onConnectMapping:n,onDeleteMapping:a,onDisplayNextComponent:r,onDisplayPreviousComponent:l,onDisplayedComponentChanged:s,onIgnoreMapping:i,paginationInfo:m,selectedRepositories:d}){return(0,c.createPortal)(o.createElement(o.Fragment,null,o.createElement(tZ,{onCloseDialog:()=>s(null)}),o.createElement("div",{className:"component_browser_library_view--containerRight--zBqnJ utilities--bodyMedium--7-YGK"},o.createElement(tc,{connectedComponents:m.connectedComponents,data:e,ignoredComponents:m.ignoredComponents,notConnectedComponents:m.notConnectedComponents,onClose:()=>s(null),onConnectMapping:n,onDeleteMapping:a,onIgnoreMapping:i,onRequestNextComponent:r,onRequestPreviousComponent:l,selectedRepositories:d,sourceIndex:t}))),document.body)}function tH(e){let t=e.componentKey,n=(0,u.l)(e.libraryKey),c=(0,k.bh)(),i=t1(n),d=(0,f.md)(w.a),_=(0,y.xV)(),g=(0,y.Bt)(),v=(0,b.k)().dt_component_browser_icons_flow&&"icons"===d,{inputRefs:C,status:N,paginationInfo:S,displayedComponent:x,displayedComponentIndex:L,onDisplayedComponentChanged:T,onFileChanged:M,onComponentChanged:R,onMoreActionsMenuItemClick:D,filteredComponents:P,searchQuery:F,setSearchQuery:O,dropdownFilter:A,setDropdownFilter:K,onConnectMapping:q,onDeleteMapping:B,onIgnoreMapping:W,onDisplayNextComponent:$,onDisplayPreviousComponent:U,getIndexOfComponent:Q,connectedComponents:Y,notConnectedComponents:V,ignoredComponents:z,selectedRepositories:j,suggestions:X}=(0,J.dx)({libraryKey:n,componentKey:t}),G="loading"===i||"loading"===N,H=(0,tz.gY)(),Z=(0,o.useCallback)(e=>{if(e===I.qd.OpenDialog){if(P.length>0&&!x){let e=P[0];e&&T(e.component)}}else e===I.qd.CloseDialog&&T(null)},[P,x,T]);return o.createElement(p.J,null,o.createElement(I.Mj,{canShowOnboarding:!G,onOnboardingSequenceAction:Z}),o.createElement("div",{className:"component_browser_library_view--container--sxcXn"},o.createElement("div",{className:"component_browser_library_view--containerLeft--tMnWN"},o.createElement("div",{className:"component_browser_library_view--header--pZiav"},o.createElement("div",{className:"component_browser_library_view--headerLeft--coXBP"},o.createElement("h1",{className:"component_browser_library_view--headerText--jnhLj"},v?(0,h.t)("dev_handoff.component_browser.map_icons_to_code_title"):(0,h.t)("dev_handoff.component_browser.map_components_to_code_title")),o.createElement(r.E,{variant:"defaultOutline"},(0,h.t)("dev_handoff.component_browser.alpha"))),o.createElement("div",{className:"component_browser_library_view--headerRight--iwCrG"},o.createElement(tY,{libraryKey:n}),v&&o.createElement(ea,{connectedComponents:Y,onDeleteMapping:B}),"file"===e.location&&o.createElement(l.K,{"aria-label":(0,h.t)("dev_handoff.component_browser.close_component_browser"),onClick:c},o.createElement(m.L,null)))),v&&i&&o.createElement(er,{connectedComponents:Y,notConnectedComponents:V,ignoredComponents:z,onConnectMapping:q,onDeleteMapping:B,onIgnoreMapping:W,getIndexOfComponent:Q,libraryKey:n,selectedRepositories:j}),o.createElement("div",{className:"component_browser_library_view--contentContainer--EKiHF"},o.createElement("div",{className:"component_browser_library_view--componentsToolbarAndList--o2Dlh"},G||i?"errors"===N?o.createElement("div",{className:tj},(0,h.t)("dev_handoff.component_browser.error_loading")):o.createElement(o.Fragment,null,o.createElement("div",{className:"component_browser_library_view--componentsListFilters--M4se4"},o.createElement("div",{className:"component_browser_library_view--componentsListFiltersInner--t95XT"},o.createElement(t0,{value:F,onChange:O}),o.createElement("div",{className:"component_browser_library_view--componentsListFiltersRight--d-PGj"},o.createElement(a.bL,{value:A,onChange:e=>K(e)},o.createElement(a.l9,{label:o.createElement(s.h,null,(0,h.t)("dev_handoff.component_browser.filter"))},(0,h.t)("dev_handoff.component_browser.show_filter",{0:H[A]})),o.createElement(a.mc,null,Object.entries(tV.W).map(([e,{value:t,Icon:n}])=>{let c=H[t];return o.createElement(tX,{key:e,label:c,value:t,icon:o.createElement(n,{style:{"--color-icon-tertiary":"notConnected"===t?"var(--color-icon)":void 0}})})})))))),o.createElement(tJ.g,{bulkSuggestions:X,data:P,inputRefs:C,isLoading:G,libraryKey:n,onComponentChanged:R,onFileChanged:M,onMoreActionsMenuItemClick:D,onSelectComponent:T,searchQuery:F,selectedComponent:x?.component??null,selectedRepositories:j})):o.createElement("div",{className:tj},(0,h.t)("dev_handoff.component_browser.no_permission"))),o.createElement("div",{className:"component_browser_library_view--rightPanel--bnzK-"},o.createElement(tv,{notConnectedComponents:V,connectedComponents:Y,ignoredComponents:z})))),x&&i&&o.createElement(tG,{displayedComponent:x,displayedComponentIndex:L,onConnectMapping:q,onDeleteMapping:B,onDisplayNextComponent:$,onDisplayPreviousComponent:U,onDisplayedComponentChanged:T,onIgnoreMapping:W,paginationInfo:S,selectedRepositories:j})),_&&n&&o.createElement(E.A,{libraryKey:n,onClose:()=>g(!1),onBack:()=>g(!1)}))}function tZ({onCloseDialog:e}){return o.createElement(i.E,{onClick:e,className:"component_browser_library_view--dialogOverlay--lWQNK"},o.createElement("div",{className:"component_browser_library_view--dialogOverlayContent--vAFyK"}))}function t0({value:e,onChange:t}){return o.createElement("div",{className:"component_browser_library_view--searchBar--bauvr"},o.createElement(d.h,null),o.createElement(v.L,{placeholder:(0,h.t)("dev_handoff.component_browser.search_placeholder"),value:e,onChange:e=>{t(e.currentTarget.value)},className:"component_browser_library_view--searchInput--tzNk- text--fontPos11--2LvXf text--_fontBase--QdLsd",spellCheck:!1}),!!e&&o.createElement("div",null,o.createElement(l.K,{onClick:()=>t(""),"aria-label":(0,h.t)("dev_handoff.component_browser.clear_search"),htmlAttributes:{"data-tooltip":(0,h.t)("dev_handoff.component_browser.clear_search"),"data-tooltip-type":N.Ib.TEXT}},o.createElement(m.L,null))))}function t1(e){let t=(0,g.Rs)(C.iAs,{libraryKey:e??""},{enabled:!!e});return!!e&&"errors"!==t.status&&("loading"===t.status?"loading":!!t.data?.libraryKeyToFile?.fileCanAccess)}},893613:(e,t,n)=>{n.d(t,{T:()=>a,r:()=>r});var o=n(677334),c=n(326252);let a=o.M4.Query({fetch:async e=>(await c.Q.getRepositorySourceFiles(e)).data.meta.source_files??[]}),r=o.M4.Query({fetch:async e=>(await c.Q.getRepositoryFileComponents(e)).data.meta})},273372:(e,t,n)=>{n.d(t,{I:()=>l,W:()=>s});var o=n(969604),c=n(749233),a=n(218742),r=n(266004);function l(e){return"key"in e?e.key:"component_key"in e?e.component_key:null}let s={all:{value:"all",Icon:o.F},notConnected:{value:"notConnected",Icon:c.w},connected:{value:"connected",Icon:a.W},ignored:{value:"ignored",Icon:r.M}}},500897:(e,t,n)=>{n.d(t,{g:()=>G});var o=n(848318),c=n(921666),a=n(635600),r=n(562027),l=n(19180),s=n(382902),i=n(536384),m=n.n(i),d=n(53837),_=n(230618),p=n(967688),u=n(817068),b=n(884286),f=n(273372),g=n(428774),v=n(822879),h=n(345964),w=n(741680),E=n(430335);function y({component:e,isLoading:t}){let n=(0,w.gY)(),c=(0,w.P8)(),a=e.code_connect_info.v1.state,r=(0,o.useMemo)(()=>{switch(a){case"not_connected":let e=c.notConnected;return o.createElement(e,{"data-tooltip":n.notConnected,"data-tooltip-type":"text"});case"connected":let t=c.connected;return o.createElement(t,{"data-tooltip":n.connected,"data-tooltip-type":"text",style:{"--color-icon":"var(--color-icon-success)"}});case"ignored":let r=c.ignored;return o.createElement(r,{"data-tooltip":n.ignored,"data-tooltip-type":"text",style:{"--color-icon":"var(--color-icon-warning)"}})}},[a,n,c]);return t?o.createElement("span",{className:E.i7},o.createElement(h.kt,null)):o.createElement("span",{className:E.i7},r)}var k=n(48908);function C({width:e=102,height:t=58}){let n=Math.ceil((window.innerHeight-200)/49);return o.createElement("div",{className:E.yO},Array.from({length:n}).map((n,c)=>o.createElement("div",{key:c,className:E.yS},o.createElement(k.Wi,{style:{width:e,height:t,borderRadius:4},animationType:k.JR.SHIMMER}),o.createElement(k.Wi,{style:{width:200},animationType:k.JR.SHIMMER}),o.createElement(k.Wi,{style:{flex:1},animationType:k.JR.SHIMMER}),o.createElement(k.Wi,{style:{width:120},animationType:k.JR.SHIMMER}))))}var N=n(168323),I=n(658029),S=n(408193),x=n(899656);function L({data:e,isConnected:t,isIgnored:n,isComponentBrowserType:c,onMenuItemClick:a,showOpenInSidebar:r=!0,onPrepareForOpen:l,onCloseMenu:s}){let{manager:i,getTriggerProps:m}=N.b(),d=(0,o.useCallback)(()=>{l?.(e.component.node_id)},[l,e.component.node_id]);(0,o.useEffect)(()=>{i.isOpen||s?.()},[i.isOpen,s]);let _={label:(0,p.t)("dev_handoff.component_browser.open_in_sidebar"),onClick:()=>a({event:x.d.OpenInSidebar,row:e})},u=[[{label:(0,p.t)("dev_handoff.component_browser.no_code_equivalent_menu"),onClick:()=>a({event:x.d.Ignore,row:e})}]];r&&u.push([_]);let b=[[{label:(0,p.t)("dev_handoff.component_browser.disconnect_menu"),onClick:()=>a({event:x.d.Disconnect,row:e})}]];r&&b.push([_]);let f=r?[[_]]:[],g=[[{label:(0,p.t)("dev_handoff.component_browser.has_code_equivalent"),onClick:()=>a({event:x.d.HasCodeEquivalent,row:e})}]];r&&g.push([_]);let v=[];if(0===(v=t?c?b:f:n?g:u).length)return null;let h=m({onClick:d,onMouseDown:d});return o.createElement(N.bL,{manager:i},o.createElement(I.K,{...h,"aria-label":(0,p.t)("dev_handoff.component_browser.more_actions")},o.createElement(S.J,null)),o.createElement(N.mc,null,v.map((e,t)=>o.createElement(N.YJ,{key:t},e.map(e=>o.createElement(N.q7,{key:e.label,onClick:e.onClick},e.label))))))}var T=n(808943),M=n(696483),R=n(549699),D=n(538775),P=n(329228),F=n(893613),O=n(143823),A=n(773511);let K=(0,o.forwardRef)(function({shouldBeVisible:e,items:t,onItemSelect:n,selectedIndex:c,isLoading:a},r){let l=(0,o.useRef)(null);return((0,o.useEffect)(()=>{l.current&&r.current&&l.current.scrollIntoView({block:"nearest",behavior:"smooth"})},[c,r]),e&&(0!==t.length||a))?o.createElement("div",{className:"component_browser_input_dropdown--container--2FBO7"},a?o.createElement("li",{className:"component_browser_input_dropdown--loading--dViPC"},o.createElement(O.k,null)):o.createElement("ul",{ref:r,className:"component_browser_input_dropdown--list--m1Kui"},t.map((e,t)=>o.createElement("li",{key:t,ref:t===c?l:null},o.createElement(A.E,{className:m()("component_browser_input_dropdown--item--7nu7x",{"component_browser_input_dropdown--selected--CWEgq":t===c}),onClick:()=>n(e,t)},e.icon&&o.createElement("div",{className:"component_browser_input_dropdown--icon--vpXIg"},e.icon),o.createElement("div",{className:"component_browser_input_dropdown--content--eGCcQ"},o.createElement("div",{className:"component_browser_input_dropdown--title--LeadU"},e.title),e.subtitle&&o.createElement("div",{className:"component_browser_input_dropdown--subtitle--8GQKQ"},e.subtitle))))))):null});var q=n(218029);let B="component_browser_input--disabled--QH8GR",W="component_browser_input--readonly--m8lWF",$="component_browser_input--chip--TzaRn",U="component_browser_input--empty--wTZBe",Q="component_browser_input--max--kTrPE",Y="component_browser_input--chevron--gFXeX",V=(0,o.forwardRef)(({maxItems:e=1,disabled:t=!1,onAddItem:n,onRemoveLastItem:c,onClearItems:a,items:r,value:l,onValueChange:s,onRequestPlaceholder:i,onFocus:d,onBlur:_,onKeyDown:u,maxChipWidth:b,readonly:f=!1},g)=>o.createElement("div",{className:m()("component_browser_input--wrapper--VlXZo",{[B]:t,[W]:f})},r.length>0&&o.createElement("div",{className:m()($,"component_browser_input--items--97pb-",{[U]:0===r.length,"component_browser_input--incomplete--sIuCz":r.length<e,[B]:t,[W]:f})},r.map((t,n)=>o.createElement(o.Fragment,{key:n},o.createElement("div",{className:"component_browser_input--item---g-f1","data-tooltip":t.value,"data-tooltip-type":"text",style:{maxWidth:b?`${b}px`:void 0}},t.value),n<r.length&&n<e-1&&o.createElement(T.k,{className:Y}))),r.length===e&&!f&&o.createElement(I.K,{"aria-label":(0,p.t)("dev_handoff.component_browser.clear_input"),onClick:()=>a()},o.createElement(M.f,null))),!f&&o.createElement("div",{className:m()($,"component_browser_input--inputWrapper--4eKiy",{[U]:0===r.length,[Q]:r.length>=e,[B]:t})},o.createElement("input",{ref:g,onFocus:d,onBlur:_,placeholder:i(r.length),className:m()("component_browser_input--input--VpMqX",{[U]:0===r.length,[Q]:r.length>=e||f}),type:"text",value:l,onChange:n=>{t||r.length>=e||s(n.target.value)},onKeyDown:o=>{if(!(t||u(o)))switch(o.key){case"Enter":if(r.length>=e)return;n({value:l},r.length),s(""),o.preventDefault();break;case"Backspace":0===l.length&&r.length>0&&(c(r.length-1),o.preventDefault())}}}),r.length>0&&r.length<e&&!f&&o.createElement(I.K,{"aria-label":(0,p.t)("dev_handoff.component_browser.clear_input"),onClick:()=>a()},o.createElement(M.f,null)))));function z({items:e,isSuggestion:t}){return o.createElement("div",{className:m()($,W,{"component_browser_input--suggestion--RaUTH":t})},e.length>0&&e.map((t,n)=>o.createElement(o.Fragment,{key:n},o.createElement("div",null,t),n!==e.length-1&&o.createElement("div",{className:Y},o.createElement(T.k,null)))))}function J({isLoading:e,sourceIndex:t,currentRowIndex:n,libraryKey:c,onComponentChanged:a,onFileChanged:r,selectedFile:l,selectedComponent:s,inputRefs:i,selectedRepositories:m,readonly:d=!1}){let _=(0,o.useCallback)(e=>{e&&void 0!==n&&(i.current[n]=e)},[n,i]),[u,b]=(0,o.useState)(""),[f,g]=(0,o.useState)([]),v=(0,o.useRef)(null),{result:h,isLoading:w}=function({searchTerm:e,libraryKey:t,selectedRepositories:n}){let c=(n?.length??0)>0,a=n[0],[r]=(0,P.IT)((0,F.T)({libraryKey:t,repository:a?.id??""}),{enabled:!!t&&c&&!!a,key:"repositorySourceFilesQuery"}),l=(0,o.useMemo)(()=>{let t=e.match(/^https?:\/\/github\.com\/([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_.]+)\/(?:blob|tree)\/([a-zA-Z0-9-_.]+)\/(.*)$/);if(t){let[,,,,e]=t;return e??""}let n=e.replace(/^https?:\/\//,"");return/^[a-zA-Z0-9\-_./\\]+$/.test(n)?n:""},[e]);return{result:(0,o.useMemo)(()=>r.data?""===l?r.data.sort((e,t)=>e.name.localeCompare(t.name)).slice(0,20).map(e=>({title:e.name,subtitle:e.path,metadata:{isCustomLink:!1,repository:{id:a?.id??"",name:a?.name??""},path:e.path,name:e.name,sha:e.sha,type:e.type}})):(0,q.$P)(l,r.data,{keySelector:e=>[e.path,e.name],threshold:.6,limit:10,ignoreCase:!0,ignoreSymbols:!0}).map(e=>({title:e.name,subtitle:e.path,metadata:{isCustomLink:!1,repository:{id:a?.id??"",name:a?.name??""},path:e.path,name:e.name,sha:e.sha,type:e.type}})).slice(0,20):[],[r.data,l,a?.id,a?.name]),isLoading:"loading"===r.status}}({searchTerm:u,libraryKey:c,selectedRepositories:m}),{results:E,isLoading:y}=function({libraryKey:e,selectedFile:t,repositoriesAvailable:n,searchTerm:c}){let a=t?.metadata?.repository?.id,r=t?.metadata?.path,[l]=(0,P.IT)((0,F.r)({libraryKey:e,repository:a??"",path:r??""}),{enabled:!!t&&!!e&&!!a&&!!r&&!t?.metadata?.isCustomLink,key:`repositoryComponentsQuery-${r}`}),s="loading"===l.status,i="loaded"===l.status,m=l.data,d=(0,o.useMemo)(()=>i&&m?m.components:[],[i,m]);return{results:(0,o.useMemo)(()=>d.length||n?d.filter(e=>e.toLowerCase().includes(c.toLowerCase())).map((e,t)=>({title:e,subtitle:"",metadata:{index:t}})):[],[c,d,n]),isLoading:s,searchTerm:c}}({libraryKey:c,selectedFile:l,repositoriesAvailable:(m?.length??0)>0,searchTerm:u}),k=(0,o.useMemo)(()=>{let e=0===f.length,t=1===f.length;return e?{results:h.map(e=>({title:e.title,subtitle:e.subtitle,icon:o.createElement(R.V,null)})),isLoading:w}:t?{results:E.map(e=>({title:e.title,subtitle:e.subtitle,icon:o.createElement(D.K,null)})),isLoading:y}:{results:[],isLoading:!1}},[h,E,f.length,w,y]),[C,N]=(0,o.useState)({shouldBeVisible:!1,selectedIndex:0});(0,o.useEffect)(()=>{let e=[];l&&e.push({value:l.subtitle??l.title}),s&&e.push({value:s.title}),g(e)},[l,s]);let I=(0,o.useCallback)(e=>{switch(e){case 0:return(0,p.t)("dev_handoff.component_browser.paste_code_link");case 1:return(0,p.t)("dev_handoff.component_browser.component_name")}},[]),S=()=>{b(""),N(e=>({...e,selectedIndex:0}))};function x(e,o){let c=0===f.length,l=1===f.length;if(N(e=>({...e,selectedIndex:0})),c){let e=h[o];e&&(r({sourceIndex:t,currentRowIndex:n,selectedFile:e,trackingProps:{location:"list_view",source:"manual"}}),S())}else l&&E[o]&&(a({sourceIndex:t,currentRowIndex:n,selectedComponent:e,action:"create",trackingProps:{location:"list_view",source:"manual"}}),S())}return o.createElement("div",{className:"component_browser_input--container---QBDC"},o.createElement(V,{ref:_,disabled:e,items:f,maxChipWidth:180,maxItems:2,onAddItem:(e,o)=>{switch(o){case 0:r({sourceIndex:t,currentRowIndex:n,selectedFile:{title:e.value,subtitle:e.value,metadata:{isCustomLink:!1,repository:{id:"",name:""},path:e.value,name:e.value,sha:"",type:"file"}},trackingProps:{location:"list_view",source:"manual"}});break;case 1:a({sourceIndex:t,currentRowIndex:n,selectedComponent:{title:e.value,subtitle:e.value,metadata:{index:o}},action:"create",trackingProps:{location:"list_view",source:"manual"}})}},onBlur:e=>{let t=e.relatedTarget;t&&v.current?.contains(t)||N(e=>({...e,shouldBeVisible:!1,selectedIndex:0}))},onClearItems:()=>{r({sourceIndex:t,currentRowIndex:n,selectedFile:null,trackingProps:{location:"list_view",source:"manual"}}),N(e=>({...e,shouldBeVisible:!1,selectedIndex:0}))},onFocus:()=>{N(e=>({...e,shouldBeVisible:!0,selectedIndex:0}))},onKeyDown:e=>{if("ArrowDown"===e.key){if(C.selectedIndex<k.results.length-1)return N(e=>({...e,selectedIndex:e.selectedIndex+1})),e.preventDefault(),!0}else if("ArrowUp"===e.key){if(C.selectedIndex>0)return N(e=>({...e,selectedIndex:e.selectedIndex-1})),e.preventDefault(),!0}else if("Enter"===e.key){let t=k.results[C.selectedIndex];if(t)return x(t,C.selectedIndex),e.preventDefault(),!0}else if("Escape"===e.key)return N(e=>({...e,shouldBeVisible:!1,selectedIndex:0})),e.currentTarget.blur(),e.preventDefault(),!0;return!1},onRemoveLastItem:e=>{switch(e){case 0:r({sourceIndex:t,currentRowIndex:n,selectedFile:null,trackingProps:{location:"list_view",source:"manual"}});break;case 1:a({sourceIndex:t,currentRowIndex:n,selectedComponent:null,action:"delete",trackingProps:{location:"list_view",source:"manual"}})}},onRequestPlaceholder:I,onValueChange:e=>{b(e)},readonly:d,value:u}),o.createElement(K,{ref:v,shouldBeVisible:C.shouldBeVisible,isLoading:k.isLoading,items:k.results,selectedIndex:C.selectedIndex,onItemSelect:x}))}function j({item:e,component:t,suggestions:n,libraryKey:c,onComponentChanged:a,onFileChanged:r,selectedRepositories:l,sourceIndex:s,inputRefs:i,currentRowIndex:_}){let[p,u]=(0,d.Vc)("componentBrowserOnboardingSelection",null),b=t?.code_connect_info.v1.state==="ignored",f="figmadoc"===t.code_connect_info.v1.type;if(n&&n.length>0){let e=n[0],t=[e.src_path];return e.name&&t.push(e.name),o.createElement("td",{className:m()(E.LU,E.jU),style:{position:"relative"}},o.createElement(z,{items:t,isSuggestion:!0}))}if(f||"codebase_ingestion"===p){let t=[];return e.selectedFile&&t.push(e.selectedFile.title),e.selectedComponent&&t.push(e.selectedComponent.title),o.createElement("td",{className:m()(E.LU,E.jU),style:{position:"relative"}},o.createElement(z,{items:t}))}return b?o.createElement("td",{className:m()(E.LU,E.jU)},"--"):o.createElement("td",{className:m()(E.LU,E.jU),onClick:e=>{b||e.stopPropagation()}},o.createElement(J,{currentRowIndex:_,inputRefs:i,isLoading:e.isLoading??!1,libraryKey:c,onComponentChanged:a,onFileChanged:r,selectedComponent:e.selectedComponent,selectedFile:e.selectedFile,selectedRepositories:l,sourceIndex:s}))}function X({item:e,currentRowIndex:t,onSelectComponent:n,onMoreActionsMenuItemClick:l,columns:s,spacing:i,onlyShowActionsOnHover:d,openMenuRowId:p,onPrepareForOpen:u,suggestions:h,onCloseMenu:w,selectedComponent:k,isIconsFlow:C,inputRefs:N,libraryKey:I,onComponentChanged:S,onFileChanged:x,selectedRepositories:T,showExpandChevron:M,showLibraryNames:R}){let D=e.sourceIndex,P=e.component,F="connected"===P.code_connect_info.v1.state,O="ignored"===P.code_connect_info.v1.state,{isSelected:A}=(e=>{let t=null;if("connected"===e.code_connect_info.v1.state)try{let n=JSON.parse(e.code_connect_info.v1.figmadoc??"");t=Array.isArray(n)?n[0]:n}catch(e){}let n=k&&(0,f.I)(e)===(0,f.I)(k),o=null,c=null;if("connected"===e.code_connect_info.v1.state&&t){let e=t.source;e&&(o=e.substring(e.lastIndexOf("/")+1)),c=t.component}return{isSelected:n,fileName:o,componentName:c}})(P),K="component_browser"===P.code_connect_info.v1.type,q=0===t,B=(0,g.T)(P),W=(0,v.B)(B||(0,r.l)("")),$=B?W.data:null;return o.createElement("tr",{key:P.node_id,className:m()(E.T$,{[E.sp]:A,"js-is-selected":A}),onClick:()=>n(P)},s.includes("design")&&o.createElement("td",{className:m()(E.LU,E.f_)},P.thumbnail_url&&o.createElement("div",{className:m()(E.v6,{[E.Kk]:C}),"data-onboarding-key":q?b.k1.Step3:void 0},o.createElement(_.oW,{"data-onboarding-key":q?b.kE.Step1:void 0,className:E.I$,src:P.thumbnail_url,alt:P.name})),o.createElement("div",{className:E.V3},o.createElement("div",{className:E.TQ},P.name),$&&R&&o.createElement("div",{className:E.b0},$))),s.includes("decorator")&&o.createElement("td",{className:m()(E.LU,E.IO)},o.createElement(c.o,{className:E.fI})),s.includes("file")&&o.createElement(j,{component:P,currentRowIndex:t,inputRefs:N,item:e,libraryKey:I,onComponentChanged:S,onFileChanged:x,selectedRepositories:T,sourceIndex:D,suggestions:h}),s.includes("variants")&&o.createElement("td",{className:m()(E.LU,E.$M)},"variants"in P?o.createElement("div",{className:E.WD},P.variants.length):"--"),s.includes("status")&&o.createElement("td",{className:m()(E.LU,E.fo)},o.createElement(y,{component:P,isLoading:e.isLoading??!1})),s.includes("actions")&&o.createElement("td",{className:m()(E.LU,E.AT,{[E.YS]:d,[E.MO]:p===P.node_id})},o.createElement(L,{data:e,isConnected:F,isIgnored:O,isComponentBrowserType:K,onMenuItemClick:l,showOpenInSidebar:"spacious"===i,onPrepareForOpen:u,onCloseMenu:w}),M&&o.createElement("div",{className:E.K4},o.createElement(a.a,null))))}function G({libraryKey:e,data:t,selectedComponent:n,onSelectComponent:c,onFileChanged:a,onComponentChanged:r,isLoading:i,onMoreActionsMenuItemClick:d,inputRefs:_,selectedRepositories:b,searchQuery:g,columns:v=["design","decorator","file","variants","status","actions"],spacing:h="spacious",showExpandChevron:w=!1,showTableHeader:y=!0,showLibraryNames:k=!1,onlyShowActionsOnHover:N=!1,bulkSuggestions:I}){let S=0===t.length,x=(0,o.useRef)(null),L=(0,s.md)(u.a),T=(0,l.k)().dt_component_browser_icons_flow&&"icons"===L,[M,R]=(0,o.useState)(null),D=n?(0,f.I)(n):null;(0,o.useEffect)(()=>{D&&x.current?.querySelector(".js-is-selected")?.scrollIntoView({block:"nearest"})},[D]);let P=(0,o.useCallback)(e=>{R(e)},[]),F=(0,o.useCallback)(()=>{R(null)},[]);return i?o.createElement("div",{className:E.WX},o.createElement(C,null)):S?o.createElement("div",{className:E.dg},o.createElement("span",null,g.length>0?(0,p.t)("dev_handoff.component_browser.no_components_search_result",{searchQuery:g}):(0,p.t)("dev_handoff.component_browser.no_results_found"))):o.createElement("div",{ref:x,className:E.L3},o.createElement("table",{className:m()(E.hP,{[E.YQ]:"spacious"===h,[E.oE]:"compact"===h})},y&&o.createElement("thead",{className:m()(E.Gd,{[E.YQ]:"spacious"===h,[E.oE]:"compact"===h})},o.createElement("tr",{className:E.SR},v.includes("design")&&o.createElement("th",{className:m()(E.LU,E.f_)},o.createElement("div",null,(0,p.t)("dev_handoff.component_browser.design_component"))),v.includes("decorator")&&o.createElement("th",{className:m()(E.LU,E.IO)}),v.includes("file")&&o.createElement("th",{className:m()(E.LU,E.jU)},o.createElement("div",null,(0,p.t)("dev_handoff.component_browser.code_file_column"))),v.includes("variants")&&o.createElement("th",{className:m()(E.LU,E.$M)},o.createElement("div",null,(0,p.t)("dev_handoff.component_browser.variants"))),v.includes("status")&&o.createElement("th",{className:m()(E.LU,E.fo)},o.createElement("div",null,(0,p.t)("dev_handoff.component_browser.status"))),v.includes("actions")&&o.createElement("th",{className:m()(E.LU,E.AT)}))),o.createElement("tbody",{className:m()(E.dl,{[E.YQ]:"spacious"===h,[E.oE]:"compact"===h})},t.map((t,l)=>o.createElement(X,{key:t.component.node_id,columns:v,currentRowIndex:l,inputRefs:_,isIconsFlow:T??!1,item:t,libraryKey:e,onCloseMenu:F,onComponentChanged:r,onFileChanged:a,onMoreActionsMenuItemClick:d,onPrepareForOpen:P,onSelectComponent:c,onlyShowActionsOnHover:N,openMenuRowId:M,selectedComponent:n,selectedRepositories:b,showExpandChevron:w,showLibraryNames:k,spacing:h,suggestions:I[t.assetKey]?.suggestions??[]})))))}},493111:(e,t,n)=>{n.d(t,{rI:()=>S,Wq:()=>x,IN:()=>C,Hf:()=>N,dx:()=>I});var o=n(848318),c=n(301168),a=n(150583),r=n(19180),l=n(382902),s=n(996202),i=n(329228),m=n(967688),d=n(952039),_=n(817068),p=n(234053),u=n(522804),b=n(741680),f=n(428774),g=n(273372),v=n(740848),h=n(453370),w=n(209595),E=n(125761),y=n(206142),k=n(899656);function C({displayedComponent:e,filteredComponents:t,componentBrowserListRowData:n,setComponentBrowserListRowData:r}){let _=(0,E.iZ)(),[p,b]=(0,o.useState)(-1),v=(0,o.useRef)([]);(0,o.useEffect)(()=>{v.current=v.current.slice(0,n.length)},[n.length]);let C=(0,w._6)(),N=(0,c.wA)(),I=(0,i.gY)(u.RL),S=(0,i.gY)(u.S6),x=(0,i.gY)(u.K5),L=(0,l.Xr)(y.mO),T=(0,s.hC)(),M=(0,o.useCallback)(e=>{if(void 0!==e)for(let n=e+1;n<v.current.length;n++){let e=t[n],o=e?.component.code_connect_info.v1.state==="ignored";if(e&&!o&&(!e.selectedFile||!e.selectedComponent)){let e=v.current[n];if(e){e.focus();break}}}},[v,t]),R=(0,o.useCallback)(e=>{let{codeConnectId:t,row:n}=e,o=n?.sourceIndex;if(n&&void 0!==o){let c={...n,component:{...n.component,code_connect_info:{...n.component.code_connect_info,v1:{...n.component.code_connect_info.v1,state:"not_connected",id:void 0}}}};t?(r(e=>{let t=[...e];return t[o]={...c,isLoading:!0},t}),S({codeConnectId:t}).then(()=>{let t="connected"!==n.component.code_connect_info.v1.state,a=t?(0,m.t)("dev_handoff.component_browser.removed_ignore_message",{componentName:n.component.name}):(0,m.t)("dev_handoff.component_browser.disconnected_message",{componentName:n.component.name}),l=(0,g.I)(n.component);l&&L(e=>{if(!e)return{status:{}};let{[l]:t,...n}=e.status;return{...e,status:n}}),T(t?"component_browser.code_connect_component_ignore_removed":"component_browser.code_connect_component_disconnected",{nodeId:n.component.node_id,location:e.trackingProps.location}),r(e=>{let t=[...e];return t[o]={...c,isLoading:!1},t}),N(d.F.enqueue({message:a,type:"Disconnect component"})),e.callback?.()}).catch(t=>{a.vF.error("Error deleting code connect map",t),r(e=>{let t=[...e];return t[o]={...n,isLoading:!1},t}),N(d.F.enqueue({message:t.message,type:"Disconnect component error",error:!0})),e.callback?.(t)})):r(e=>{let t=[...e];return t[o]={...c,isLoading:!1},t})}},[S,N,r,T,L]),D=(0,o.useCallback)(e=>{let{row:t,sourceIndex:n,trackingProps:o}=e,c=t.selectedFile,l=t.selectedComponent,s=c?.metadata?.path??"",i=t.component.node_id,p=(0,g.I)(t.component);if(p&&L(e=>e?{...e,status:{...e.status,[p]:"connected"}}:{status:{[p]:"connected"}}),!c||!s)return;let u={...t,component:{...t.component,code_connect_info:{...t.component.code_connect_info,v1:{...t.component.code_connect_info.v1,author_name:_?.name,author_id:_?.id,state:"connected",type:"component_browser"}}}};r(e=>{let t=[...e];return t[n]={...u,isLoading:!0},t}),I({library_key:(0,f.T)(t.component)||"",node_id:i,template:"",component_name:l?.title,source_path:s,status:"connected"}).then(e=>{let c=e.data.meta.code_connect_id;r(e=>{let t=[...e];return t[n]={...u,isLoading:!1,component:{...u.component,code_connect_info:{...u.component.code_connect_info,v1:{...u.component.code_connect_info.v1,id:c,type:"component_browser"}}}},t}),N(d.F.enqueue({message:(0,m.t)("dev_handoff.component_browser.connected_message",{componentName:t.component.name}),type:"Connected component"})),T("component_browser.code_connect_component_connected",{componentName:l?.title??"",sourcePath:s,location:o.location,source:o.source})}).catch(e=>{a.vF.error("Error creating code connect map",e),r(e=>{let o=[...e];return o[n]={...t,isLoading:!1},o}),N(d.F.enqueue({message:e.message,type:"Connect component error",error:!0}))})},[I,N,r,T,_,L]),P=(0,o.useCallback)(e=>{let{row:t,sourceIndex:n,trackingProps:o}=e,c=t.selectedFile,l=t.selectedComponent,s=c?.metadata?.path??"",i=t.component.node_id,p=t.component.code_connect_info.v1.id;if(!c||!s||!p)return;let u={...t,component:{...t.component,code_connect_info:{...t.component.code_connect_info,v1:{...t.component.code_connect_info.v1,author_name:_?.name,author_id:_?.id,state:"connected",type:"component_browser"}}}};r(e=>{let t=[...e];return t[n]={...u,isLoading:!0},t}),x({code_connect_id:p,library_key:(0,f.T)(t.component)||"",node_id:i,template:"",component_name:l?.title,source_path:s,status:"connected"}).then(()=>{r(e=>{let t=[...e];return t[n]={...u,isLoading:!1,component:{...u.component,code_connect_info:{...u.component.code_connect_info,v1:{...u.component.code_connect_info.v1,id:p,type:"component_browser"}}}},t}),N(d.F.enqueue({message:(0,m.t)("dev_handoff.component_browser.updated_message",{componentName:t.component.name}),type:"Updated component"})),T("component_browser.code_connect_component_updated",{componentName:l?.title??"",sourcePath:s,location:o.location,source:o.source})}).catch(e=>{a.vF.error("Error updating code connect map",e),r(e=>{let o=[...e];return o[n]={...t,isLoading:!1},o}),N(d.F.enqueue({message:e.message,type:"Update component error",error:!0}))})},[x,N,r,T,_]),F=(0,o.useCallback)(e=>{let{currentRowIndex:t,sourceIndex:o,selectedComponent:c,action:a}=e,l=n[o];if(l){if("create"===a){let n={...l,selectedComponent:c};T("component_browser.code_component_manual_connection_data_entered",{nodeId:l?.component.node_id,field:"code_component",location:e.trackingProps.location,source:e.trackingProps.source,value:e.selectedComponent?.title}),r(e=>{let t=[...e];return t[o]=n,t}),l.selectedFile&&(l.component.code_connect_info.v1.id?P({row:{...l,selectedComponent:c},sourceIndex:o,trackingProps:e.trackingProps}):D({row:{...l,selectedComponent:c},sourceIndex:o,trackingProps:e.trackingProps}),void 0!==t&&M(t))}else"delete"===a&&l&&P({sourceIndex:o,row:{...l,selectedComponent:null},trackingProps:e.trackingProps})}},[n,D,P,r,T,M]),O=e=>{let{row:t}=e,n=t.sourceIndex,o=t.component.node_id,c={...t,component:{...t.component,code_connect_info:{...t.component.code_connect_info,v1:{...t.component.code_connect_info.v1,state:"ignored"}}},selectedComponent:null,selectedFile:null};r(e=>{let t=[...e];return t[n]=c,t}),I({library_key:(0,f.T)(t.component)||"",node_id:o,status:"ignored"}).then(o=>{let a=o.data.meta.code_connect_id,l=(0,g.I)(t.component);l&&L(e=>e?{...e,status:{...e.status,[l]:"ignored"}}:{status:{[l]:"ignored"}}),r(e=>{let t=[...e];return t[n]={...c,component:{...c.component,code_connect_info:{...c.component.code_connect_info,v1:{...c.component.code_connect_info.v1,id:a,author_name:_?.name,author_id:_?.id}}}},t}),T("component_browser.code_connect_component_ignored",{nodeId:t.component.node_id,location:e.trackingProps.location}),N(d.F.enqueue({message:(0,m.t)("dev_handoff.component_browser.ignored_message",{componentName:t.component.name}),type:"Ignored component"})),e.callback?.()}).catch(o=>{a.vF.error("Error ignoring code connect map",o),r(e=>{let o=[...e];return o[n]=t,o}),N(d.F.enqueue({message:o.message,type:"Ignore component error",error:!0})),e.callback?.(o)})},A=(0,o.useCallback)(e=>{if(b(-1),"componentBrowserLibrary"===C.view){let t={...C,componentKey:e&&(0,g.I)(e)||void 0};N(h.$T(t))}else if("fullscreen"===C.view){let t={...C,showDevModeComponentBrowser:!0,devModeComponentBrowserBackButtonTargetNodeId:e?.node_id,componentKey:e&&(0,g.I)(e)||void 0};N(h.$T(t))}},[C,N]),K=(0,o.useCallback)(()=>{if(!e){t[0]&&A(t[0].component);return}let n=t.findIndex(t=>(0,g.I)(t.component)===(0,g.I)(e.component));if(-1===n){-1!==p&&t[p]?A(t[p].component):t[0]&&A(t[0].component);return}let o=t[n+1];o&&A(o.component)},[e,t,A,p]),q=(0,o.useCallback)(()=>{if(!e){let e=t[t.length-1];e&&A(e.component);return}let n=t.findIndex(t=>(0,g.I)(t.component)===(0,g.I)(e.component));if(-1===n){let e=t[p-1];-1!==p&&e?A(e.component):t[0]&&A(t[0].component);return}let o=t[n-1];o&&A(o.component)},[e,t,A,p]);return{onDeleteMapping:R,onMoreActionsMenuItemClick:e=>{let{event:t,currentRowIndex:n,row:o}=e;switch(t){case k.d.OpenInSidebar:A(o.component);break;case k.d.HasCodeEquivalent:case k.d.Disconnect:R({currentRowIndex:n,codeConnectId:o.component.code_connect_info.v1.id,row:{...o,selectedFile:null,selectedComponent:null},trackingProps:{location:"list_view"}});break;case k.d.Ignore:O({currentRowIndex:n,row:o,trackingProps:{location:"list_view"}})}},onFileChanged:e=>{let{sourceIndex:t,selectedFile:o,currentRowIndex:c}=e,a=n[t];T("component_browser.code_component_manual_connection_data_entered",{nodeId:a?.component.node_id,field:"code_file",location:e.trackingProps.location,source:e.trackingProps.source,value:e.selectedFile?.title}),a&&(o?(r(e=>{let n=[...e];return n[t]={...a,selectedFile:o,isLoading:!1},n}),D({row:{...a,selectedFile:o},sourceIndex:t,trackingProps:e.trackingProps})):R({currentRowIndex:c,codeConnectId:a.component.code_connect_info.v1.id,row:{...a,selectedFile:null,selectedComponent:null},trackingProps:e.trackingProps}))},onComponentChanged:F,onConnectMapping:e=>{let{currentRowIndex:t,row:n}=e,o=n.sourceIndex,c=n.component,l=n.selectedFile,s=l?.metadata?.path??"",i=n.selectedComponent,p=n.component.node_id;if(l&&s){let u={...n,component:{...c,code_connect_info:{...c.code_connect_info,v1:{...c.code_connect_info.v1,state:"connected",author_name:_?.name,author_id:_?.id}}},selectedFile:l,selectedComponent:i};r(e=>{let t=[...e];return t[o]={...u,isLoading:!0},t}),I({library_key:(0,f.T)(n.component)||"",node_id:p,template:"",component_name:i?.title,source_path:s,status:"connected"}).then(c=>{let a=c.data.meta.code_connect_id;r(e=>{let t=[...e];return t[o]={...u,isLoading:!1,component:{...u.component,code_connect_info:{...u.component.code_connect_info,v1:{...u.component.code_connect_info.v1,id:a}}}},t}),N(d.F.enqueue({message:(0,m.t)("dev_handoff.component_browser.connected_message",{componentName:n.component.name}),type:"Connected component"})),T("component_browser.code_connect_component_connected",{componentName:i?.title??"",sourcePath:s,location:e.trackingProps.location,source:e.trackingProps.source}),M(t),e.callback?.()}).catch(t=>{a.vF.error("Error creating code connect map",t),r(e=>{let t=[...e];return t[o]={...n,isLoading:!1},t}),N(d.F.enqueue({message:t.message,type:"Connect component error",error:!0})),e.callback?.(t)})}},onIgnoreMapping:O,onDisplayedComponentChanged:A,onDisplayNextComponent:K,onDisplayPreviousComponent:q,updateConnection:P,inputRefs:v}}function N({componentKey:e,componentsAndStateGroups:t}){let[n,c]=(0,o.useState)([]),[s,m]=(0,o.useState)(""),[d,p]=(0,o.useState)(g.W.all.value),h=(0,o.useMemo)(()=>n.findIndex(t=>(0,g.I)(t.component)===e),[n,e]),w=(0,o.useMemo)(()=>n[h]??null,[n,h]),E=(0,u.bV)(),y=(0,l.md)(_.a),k=function(e){let{planType:t,planId:n}=(0,b.jb)(),c=(0,o.useMemo)(()=>e.map(({component:e,assetKey:t})=>({type:e.type,key:t,library_key:(0,f.T)(e)||void 0})),[e]),[a]=(0,i.IT)((0,u.Mo)({assets:c,plan_parent_id:n,plan_parent_type:t}),{enabled:c.length>0&&(0,r.k)().dt_component_browser_bulk_mapping});return a.data?.suggestions??{}}(n),[C,N,I,S]=(0,o.useMemo)(()=>{let e=[],t=[],o=[],c=[];return n.forEach(n=>{(0,r.k)().dt_component_browser_icons_flow&&("icons"===y&&!n.component.isIcon||"icons"!==y&&n.component.isIcon)||(e.push(n),"connected"===n.component.code_connect_info.v1.state&&t.push(n),"not_connected"===n.component.code_connect_info.v1.state&&o.push(n),"ignored"===n.component.code_connect_info.v1.state&&c.push(n))}),[e,t,o,c]},[n,y]),x=(0,o.useMemo)(()=>{let e=[];return"all"===d?e=C:"connected"===d?e=N:"notConnected"===d?e=I:"ignored"===d&&(e=S),s&&(e=e.filter(e=>e.component.name.toLocaleLowerCase().includes(s.toLocaleLowerCase()))),[...e].sort((e,t)=>e.component.name<t.component.name?-1:e.component.name>t.component.name?1:0).map((e,t)=>({...e,currentRowIndex:t}))},[d,s,C,N,I,S]);(0,o.useEffect)(()=>{if(!t)return;let{components:e}=t;c(function(e){let t=[];return e.forEach((e,n)=>{let o=e.code_connect_info.v1.figmadoc;if(!o){t.push(L(e,n));return}try{let c=JSON.parse(o)[0];t.push({component:e,assetKey:(0,v.A)(e),sourceIndex:n,isLoading:!1,selectedFile:c?.source?{title:c.source,metadata:{path:c.source,isCustomLink:!1,repository:{id:"",name:""},name:"",sha:"",type:"file"}}:null,selectedComponent:c?.component?{title:c.component}:null})}catch(o){a.vF.error("Error parsing figmadoc",o),t.push(L(e,n))}}),t}(e.map(e=>({...e,isIcon:E.has(e.node_id)}))))},[t,E]);let T=(0,o.useCallback)(e=>n.findIndex(t=>(0,g.I)(t.component)===(0,g.I)(e)),[n]);return{paginationInfo:{notConnectedComponents:I.length,connectedComponents:N.length,ignoredComponents:S.length},connectedComponents:N,notConnectedComponents:I,ignoredComponents:S,searchQuery:s,setSearchQuery:m,dropdownFilter:d,setDropdownFilter:p,displayedComponent:w,displayedComponentIndex:h,filteredComponents:x,componentBrowserListRowData:n??[],setComponentBrowserListRowData:c,getIndexOfComponent:T,suggestions:k}}function I({libraryKey:e,componentKey:t}){let n=function({libraryKey:e,componentKey:t}){let[n,c]=(0,i.IT)((0,u.t2)(e),{enabled:!0}),{repositories:a}=(0,p.T)({libraryKey:e}),r=a?.selectedRepositories??[];return{...N({componentKey:t,componentsAndStateGroups:(0,o.useMemo)(()=>{var e;return n.data?S((e=n.data).components||[],e.state_groups||[]):null},[n.data])}),status:n.status,refetch:c.refetch,selectedRepositories:r}}({libraryKey:e,componentKey:t});return{...C({displayedComponent:n.displayedComponent,filteredComponents:n.filteredComponents,componentBrowserListRowData:n.componentBrowserListRowData,setComponentBrowserListRowData:n.setComponentBrowserListRowData}),...n}}function S(e,t){let n=[],o={},c={};return t.forEach(e=>{c[e.node_id]={...e,updated_at:e.updated_at||"",variants:[]},o[e.key]={...e,updated_at:e.updated_at||"",variants:[]}}),e.forEach(e=>{let t=e.containing_frame?.containingStateGroup?.nodeId,a=t&&c[t]?.key;a&&o[a]?o[a].variants.push(e):n.push(e)}),Object.values(o).forEach(e=>{n.push(e)}),{components:n}}function x(e,t){if(1===e.length)return e[0]??"";let n=e.pop();if(n){if(n.length>=20)return n;let e=20-(n?.length??0);return t.slice(0,e)+".../"+n}return""}function L(e,t){return{component:e,assetKey:(0,v.A)(e),sourceIndex:t,isLoading:!1,selectedFile:null,selectedComponent:null}}},899656:(e,t,n)=>{n.d(t,{d:()=>o});var o=(e=>(e.OpenInSidebar="open-in-sidebar",e.Disconnect="disconnect",e.HasCodeEquivalent="has-code-equivalent",e.Ignore="ignore",e))(o||{})},740848:(e,t,n)=>{n.d(t,{A:()=>a,k:()=>c});var o=n(88009);function c(e,t){let n=new Set;for(let o of e)t.has(o)&&n.add(o);return Array.from(n)}function a(e){return e.type===o.PW.COMPONENT?e.component_key:e.key}},428774:(e,t,n)=>{n.d(t,{T:()=>a});var o=n(277454),c=n(88009);function a(e){return e.type===c.PW.COMPONENT?(0,o.uN)(e.component_key||null):(0,o.f0)(e.key||null)}}}]);

//# debugId=3119b8dd-6dc3-5aba-bd81-2caa7b21f2e3

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/390bd922c5a04cf92f6d90850e19b50457127ed8/5150-44125d7febc126b6.min.js.map