"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a070149c-6c66-5de3-9b19-7b2f9bbb5067")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[8717,8325],{722541:(e,t,r)=>{r.d(t,{JP:()=>s,O6:()=>i,R3:()=>a,Rg:()=>l,Xq:()=>o,b:()=>n,j:()=>c,zu:()=>d});let a="ready_for_dev_signals_upsell--tooltipContainer--MfMyF pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",n="ready_for_dev_signals_upsell--closeButton--IqINb",l="ready_for_dev_signals_upsell--tooltipHeader--vN9FE utilities--bodyMediumStrong--1R5cZ",o="ready_for_dev_signals_upsell--tooltipPageIdNodeHeader--9D-dA ready_for_dev_signals_upsell--tooltipHeader--vN9FE utilities--bodyMediumStrong--1R5cZ",i="ready_for_dev_signals_upsell--tooltipBody--LCLlM utilities--bodyMediumStrong--1R5cZ",s="ready_for_dev_signals_upsell--tooltipFooter--bN45f",d="ready_for_dev_signals_upsell--tooltipBodyText--fXjaC",c="ready_for_dev_signals_upsell--videoContainer--Hcl5T"},214758:(e,t,r)=>{r.d(t,{As:()=>p,Dq:()=>u,KE:()=>w,Mf:()=>C,Mp:()=>v,Nr:()=>P,Nz:()=>y,Pl:()=>g,Pz:()=>l,RE:()=>n,Sp:()=>a,VC:()=>I,VQ:()=>F,Vt:()=>b,YW:()=>T,_J:()=>h,aY:()=>i,dB:()=>R,ge:()=>S,hi:()=>x,iB:()=>_,jE:()=>O,jG:()=>N,l$:()=>o,mB:()=>A,n6:()=>s,oG:()=>c,q8:()=>L,sR:()=>E,sl:()=>f,vu:()=>d,wH:()=>m,yR:()=>k});let a="legacy_pages_panel--pageChangesCount--ZvU4X",n="legacy_pages_panel--pagesHeaderContainer--LWPh-",l="legacy_pages_panel--pagesHeaderText--vgHeJ",o="legacy_pages_panel--pagesList--20gAo",i="legacy_pages_panel--pendingPagesList--Kqq9Y legacy_pages_panel--pagesList--20gAo",s="legacy_pages_panel--pageIcon--2SeMV",d="legacy_pages_panel--active--4gxmS",c="legacy_pages_panel--pageRow--RXLs9 legacy_pages_panel--pageRowBase--2BLqh",m="legacy_pages_panel--selected--ZWcge",u="legacy_pages_panel--hoverByMouse--QLchE",_="legacy_pages_panel--hoverState--Jq0dh",p="legacy_pages_panel--pageRowButton--ZYdDc",f="legacy_pages_panel--pageRowActive--wbZe-",g="legacy_pages_panel--activePageBrand--X-F3Y",E="legacy_pages_panel--pageRowActiveUI2--Lwdqd",b="legacy_pages_panel--flipVertically--ZvNfN",v="legacy_pages_panel--pageRowSvgV2--QicIQ legacy_pages_panel--pageRowSvg--nbDOj",h="legacy_pages_panel--pageRowSvgV2Unselected--1IlVx legacy_pages_panel--pageRowSvgV2--QicIQ legacy_pages_panel--pageRowSvg--nbDOj",y="legacy_pages_panel--renameableNode--JPw8y",w="legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",T="legacy_pages_panel--disabledNodeText--2HBBi legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",I="legacy_pages_panel--renameableNodeTextEnd--iOsDL legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",x="legacy_pages_panel--renameableNodeTextEndDisabled--fFOaW legacy_pages_panel--renameableNodeTextEnd--iOsDL legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",N="legacy_pages_panel--scrollContainer--YR8Lw",S="legacy_pages_panel--leftPanelWidth--fUkeU",C="legacy_pages_panel--tab--inhND",k="legacy_pages_panel--tabActive--hmo0j legacy_pages_panel--tab--inhND",R="legacy_pages_panel--assetsTab--nMUmk",A="legacy_pages_panel--pageRowDividerContainer--eWfpW legacy_pages_panel--pageRowBase--2BLqh",O="legacy_pages_panel--pageRowDivider--0c9dh",P="legacy_pages_panel--offlineContainer--zrR3y",F="legacy_pages_panel--offlineIcon--sLbbs",L="legacy_pages_panel--pageRowRight--N3-uE"},50742:(e,t,r)=>{r.d(t,{IK:()=>o,Vi:()=>s,cJ:()=>a,iZ:()=>i,pf:()=>l,yF:()=>n});let a="pages_list--pagesRowWrapper--Plig-",n="pages_list--divider--idUOu",l="pages_list--withInsertBefore---ui-o",o="pages_list--withInsertAfter--7QoMA",i="pages_list--withInsertBeforeTop--IQT63",s="pages_list--withInsertAfterBottom--yG3xD"},377549:(e,t,r)=>{r.d(t,{D6:()=>n,kF:()=>a});let a="asset_description_lexical_editor--contentEditableReadOnly--BlHWQ asset_description_lexical_editor--contentEditableBase--nTcyo",n="asset_description_lexical_editor--contentEditableCollapsed--H601A asset_description_lexical_editor--contentEditableReadOnly--BlHWQ asset_description_lexical_editor--contentEditableBase--nTcyo"},406509:(e,t,r)=>{r.d(t,{w:()=>n});var a=r(720300);let n=r(642547).A.createLazyComponent(()=>Promise.all([r.e(8254),r.e(7900),r.e(2677)]).then(r.bind(r,603119)).then(e=>e.EduReviewPage),{loading:()=>null,error:a.H4.NONE,componentName:"EduReviewPage"})},621603:(e,t,r)=>{r.d(t,{G:()=>l});var a=r(720300),n=r(345964);let l=r(642547).A.createLazyComponent(()=>Promise.all([r.e(8254),r.e(7900),r.e(2677)]).then(r.bind(r,573665)).then(e=>e.OrgSelfServeBillingRemodelPage),{loading:n.Z_,error:a.H4.NONE,componentName:"OrgSelfServeBillingRemodelPage"})},627416:(e,t,r)=>{r.d(t,{z:()=>n});var a=r(720300);let n=r(642547).A.createLazyComponent(()=>Promise.all([r.e(8254),r.e(7900),r.e(2677)]).then(r.bind(r,520722)).then(e=>e.PromoReviewPage),{loading:()=>null,error:a.H4.NONE,componentName:"PromoReviewPage"})},943845:(e,t,r)=>{r.d(t,{q:()=>n});var a=r(720300);let n=r(642547).A.createLazyComponent(()=>Promise.all([r.e(8254),r.e(7900),r.e(2677)]).then(r.bind(r,953233)).then(e=>e.TeamUpgradePageBillingRemodel),{loading:()=>null,error:a.H4.NONE,componentName:"TeamUpgradePageBillingRemodel"})},398661:(e,t,r)=>{r.d(t,{m:()=>T});var a=r(848318),n=r(301168),l=r(938982),o=r(48908),i=r(297638),s=r(695920),d=r(288661),c=r(767339);if(443==r.j)var m=r(746571);var u=r(453370),_=r(209595),p=r(318147),f=r(407638),g=r(138528),E=r(83432),b=r(850768),v=r(773293),h=r(34134),y=r(118774),w=r(710166);function T(){let e=(0,n.wA)(),t=(0,g.S2)(),r=(0,g.px)(),T=(0,s.RR)(),I=(0,_._6)(),x=(0,n.d4)(e=>(0,f.getPermissionsStateMemoized)(e)),N=(0,n.d4)(e=>e.teams),S=(0,g.j_)(r),C="loaded"===S.status&&(0,c.pO)({isAdminOrg:S.data,permissions:x,teams:N,view:I}),k=(0,E.vS)(I),R="loaded"===t.status&&"loaded"===r.status&&r.data.permission!==p.Xn.ADMIN;return(a.useEffect(()=>{C?e(u.$T({view:"resourceUnavailable",resourceType:k})):R&&e(u.$T(h.o0))},[e,k,R,C]),"loaded"!==t.status||"loaded"!==r.status||R||C)?a.createElement("div",{className:i.s.wFull.pl32.py24.bb1.colorBorder.bSolid.$},a.createElement(o.Wi,{className:i.s.w200.h32.$,dataTestId:"srpv-loading"})):(T||(t.data.key.type===p.OL.ORG?e(u.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:b.J7.DASHBOARD})):e(u.$T({view:"teamAdminConsole",teamId:t.data.key.parentId??"",teamAdminConsoleViewTab:v.Iv.DASHBOARD}))),a.createElement(m.r,{containerClass:w.nF,scrollableContainerClass:w.lF,content:a.createElement(y.l,{plan:t.data,isOrgAdmin:t.data.type===p.OL.ORG}),toolbar:a.createElement(d.g,null),errorBoundaryConfig:{figmaTeam:l.e.MONETIZATION_EXPANSION,boundaryKeySuffix:"SeatRequestsPageView"}}))}},825368:(e,t,r)=>{r.r(t),r.d(t,{ConfirmDowngradeEditorsModal:()=>s});var a=r(848318),n=r(461979),l=r(967688),o=r(863270),i=r(890257);function s(e){let{team:t,editors:r}=e,{id:s}=t,d=r.length,c=r.filter(e=>e.id).map(e=>e.id).join(),m=(0,l.t)("team_view.downgrade_editor_modal.downgrade_user_team_permissions",{username:(0,n.EJ)(e.editors[0].name||e.editors[0].email,20)}),u=(0,l.t)("team_view.downgrade_editor_modal.downgrade_multiple_users_team_permissions",{numSelectedUsers:d});return a.createElement(o.fu,{name:"Team Admin Downgrade Editors Modal",properties:{editorCount:d,editorIds:c,teamId:s}},a.createElement(i.Eo,{title:d>1?u:m,confirmText:(0,l.t)("team_view.downgrade_editor_modal.downgrade"),onConfirm:e.onConfirm},a.createElement("p",null,d>1&&(0,l.t)("team_view.downgrade_editor_modal.are_you_sure_you_want_to_downgrade",{numSelectedUsers:d}),(0,l.tx)("team_view.downgrade_editor_modal.downgrading_their_team_permission_will_change_all_permissions_to_can_view"))))}},332727:(e,t,r)=>{r.r(t),r.d(t,{ConfirmTeamUserPaidStatusUpdateModal:()=>c});var a=r(848318),n=r(264478),l=r(967688),o=r(863270),i=r(318147),s=r(173847),d=r(890257);function c(e){let{team:t,members:r,paidStatus:c}=e,{id:m}=t;if(![i.Zf.FULL,i.Zf.RESTRICTED].includes(c))return a.createElement(a.Fragment,null);let u=r.length,_=r.filter(e=>e.id).map(e=>e.id).join(),p=c===i.Zf.RESTRICTED,f=e.paidStatusType===s.j4.WHITEBOARD,g=f?r.every(e=>!e.whiteboard_editor_upgrade):r.every(e=>!e.design_editor_upgrade),E=c===i.Zf.RESTRICTED&&g,b=r[0].name||r[0].email;return a.createElement(o.fu,{name:"Team Admin Restrict TeamUser Modal",properties:{memberCount:u,memberIds:_,teamId:m}},a.createElement(d.Eo,{title:p?E?f?(0,l.tx)("team_view.downgrade_figjam_access_from_viewer_to_viewer_restricted"):(0,l.tx)("team_view.downgrade_design_access_from_viewer_to_viewer_restricted"):f?(0,l.tx)("team_view.remove_figjam_edit_status.seat_rename"):(0,l.tx)("team_view.remove_design_edit_status.seat_rename"):f?(0,l.tx)("team_view.grant_figjam_edit_status.seat_rename"):(0,l.tx)("team_view.grant_design_edit_status.seat_rename"),confirmText:p?E?(0,l.t)("team_view.change"):(0,l.t)("team_view.remove.seat_rename"):(0,l.t)("team_view.grant.seat_rename"),onConfirm:e.onConfirm},c===i.Zf.RESTRICTED&&(E?f?(0,l.tx)("team_view.downgrade_figjam_from_viewer_to_viewer_restricted_description.seat_rename",{memberNameOrEmail:b,numMembers:u}):(0,l.tx)("team_view.downgrade_design_from_viewer_to_viewer_restricted_description.seat_rename",{memberNameOrEmail:b,numMembers:u}):f?(0,l.tx)("team_view.downgrade_figjam_description.seat_rename",{memberNameOrEmail:b,numMembers:u}):(0,l.tx)("team_view.downgrade_design_description.seat_rename",{memberNameOrEmail:b,numMembers:u})),c===i.Zf.FULL&&a.createElement(a.Fragment,null,(()=>{if(!p)return f?(0,l.tx)("team_view.change_to_editor_figjam_description.seat_rename",{numMembers:u,memberNameOrEmail:b}):(0,l.tx)("team_view.change_to_editor_design_description.seat_rename",{numMembers:u,memberNameOrEmail:b})})(),a.createElement("p",{className:"confirm_team_user_paid_status_update_modal--spacing--D5LgW"},a.createElement(n.N_,{target:"_blank",className:"confirm_team_user_paid_status_update_modal--link--cb35L",href:"https://help.figma.com/hc/articles/360039960434#Account_Types",trusted:!0},(0,l.tx)("team_view.learn_more.seat_rename"))))))}},652921:(e,t,r)=>{r.r(t),r.d(t,{MemberEditAccessModal:()=>P});var a=r(848318),n=r(301168),l=r(430385),o=r(19180),i=r(418193),s=r(317720),d=r(870567),c=r(410725),m=r(755534),u=r(967688),_=r(31898),p=r(863270),f=r(859172),g=r(472520),E=r(613733),b=r(481534),v=r(265217),h=r(318147),y=r(55116),w=r(280255),T=r(94831),I=r(890257);let x="edit_access_modal--column--MYvAz",N="edit_access_modal--resource--qhm-x",S="edit_access_modal--resourceTitle--79DdK edit_access_modal--resource--qhm-x",C="edit_access_modal--greyResource--pdVfB edit_access_modal--resource--qhm-x",k=(e,t)=>{if("file"===e.resource_type){let r=t[e.resource_id_or_key];if(r)return{name:r.name,id_or_key:r.key}}else{let r=t[e.resource_id_or_key];if(r)return{name:r.name,id_or_key:r.id}}},R=(0,i.xx)((e,t)=>{let r={privateResourceCount:0,editableResources:[]};return e&&0!==e.length&&(e.forEach(e=>{let a=k(e,t);a?r.editableResources.push(a):r.privateResourceCount++}),(0,l.v7)(r.editableResources,e=>e.name)),r}),A=e=>{let t=e.team_user,r=e.edit_roles,a=r?.whiteboard_files||[],n=r?.design_files||[],l=r?.slides_files||[],o=!(0,w.on)(t,h.G_.DESIGN);return{whiteboardRoles:(0,w.on)(t,h.G_.WHITEBOARD)?a:[],designRoles:o?[]:n,slidesRoles:(0,w.on)(t,h.G_.SLIDES)?l:[]}},O=(e,t,r)=>{if(r)return{privateResourceCount:e.file_edit_roles_count,editableResources:[]};let{whiteboardRoles:a,designRoles:n,slidesRoles:l}=A(e);return R(a.concat(n).concat(l),t)};function P(e){let t=(0,n.wA)(),r=function(e,t){let r=(0,n.d4)(r=>r.teamMembersByTeamId[e][t]);if(!r)return s.Qw.loaded(r);if(!r.edit_roles)return s.Qw.loaded({...r,file_edit_roles_count:0});let{whiteboard_files:a,design_files:l,slides_files:o}=r.edit_roles,i={...r,file_edit_roles_count:a.length+l.length+(o||[]).length};return s.Qw.loaded(i)}(e.teamId,e.memberEmail),l=function(e,t){let r=(0,c.Rs)(y.DLq,{teamId:e,userId:t},{enabled:(0,o.k)().edit_access_modal_lg_cutover});return a.useMemo(()=>r.transform(e=>{let t=e.teamUserDescendedRoles;if(!t||t.status!==d.tT.Loaded||!t.data)return{team_user:void 0,team_role:void 0,edit_roles:{whiteboard_files:[],design_files:[],folders:[]},file_edit_roles_count:0,name:"",id:""};let r=t.data[0];if(!r.teamUser)return{team_user:void 0,team_role:void 0,edit_roles:{whiteboard_files:[],design_files:[],folders:[]},file_edit_roles_count:0,name:"",id:""};let a=r.teamUser,n=r.teamUser.teamRole;return{...v.W.toSinatra(a.user),team_user:{id:a.id,user_id:a.user.id,team_id:r.teamId,active_seat_type:(0,f.TA)(a.activeSeatTypeUpgrade?.billableProduct)},team_role:n?(0,b.Pe)(n,a.user):void 0,file_edit_roles_count:r.fileEditRolesCount,edit_roles:{whiteboard_files:[],design_files:[],folders:r.projectEditRoles?.map(e=>b.Pe(e,a.user))||[]}}}),[r])}(e.teamId,e.userId),i=(0,o.k)().edit_access_modal_lg_cutover,N=(0,E.MF)({oldValue:r,newValue:l,label:g.A.TeamMembersTable.editAccessModal,enableFullRead:i,contextArgs:{teamId:e.teamId,memberEmail:e.memberEmail,memberResultRedux:JSON.stringify(r.data?.edit_roles)},comparator:(0,E.BG)({strictLists:!1,strictRecords:!1,ignore:e=>!!(1===e.length&&!["team_user","team_role","file_edit_roles_count","name","id"].includes(e[0])||e.includes("created_at")||e.includes("updated_at"))}),maxReports:5}),C=(0,n.d4)(e=>e.folders),k=a.useMemo(()=>N.transform(e=>R(e?.edit_roles?.folders,C)),[C,N]),A=(0,n.d4)(e=>e.folders),P=a.useMemo(()=>N.transform(e=>e?O(e,A,i):{privateResourceCount:0,editableResources:[]}),[A,N,i]),F=(0,n.d4)(t=>t.teams[e.teamId]),D=s.Qw.all([N,k,P]);if("loaded"!==D.status)return null;let[M,B,U]=D.data;if(!M)return console.error("Member not found"),null;let $=!!M.team_role&&M.team_role?.level>=T.e6.EDITOR,j=B.editableResources.length+B.privateResourceCount,W=U.editableResources.length+U.privateResourceCount,G=(0,w.on)(M.team_user,h.G_.DESIGN),V=(0,w.on)(M.team_user,h.G_.WHITEBOARD),H=(0,w.on)(M.team_user,h.G_.SLIDES);return a.createElement(p.fu,{name:"Member Edit Access Modal",properties:{teamId:F.id,userId:M.id,folderCount:j,fileCount:W}},a.createElement(I.XV,{title:(0,u.t)("team_view.member_edit_access_modal.title",{memberName:M.name??""}),maxWidth:432,minWidth:432,containerClassName:"edit_access_modal--modalStyle--20dSp",onClose:()=>{t(_.Ce())}},a.createElement("div",{className:"edit_access_modal--headerContainer--ZoKpu edit_access_modal--resourceContainer--vZA5E"},a.createElement("div",{className:x},a.createElement("div",{className:S},i?(0,u.tx)("team_view.member_edit_access_modal.projects_title_v2"):(0,u.tx)("team_view.member_edit_access_modal.projects_title"))),a.createElement("div",{className:x},a.createElement("div",{className:S},i?(0,u.tx)("team_view.member_edit_access_modal.files_title_v2"):(0,u.tx)("team_view.member_edit_access_modal.files_title")))),a.createElement(m.P,{className:"edit_access_modal--scrollContainer--WzCWr",hideScrollbar:!0},a.createElement("div",{className:"edit_access_modal--resourceContainer--vZA5E"},a.createElement("div",{className:x},a.createElement(L,{hasTeamEditPermissions:$,isWhiteboardEditor:V,isDesignEditor:G,isSlidesEditor:H,resources:B,resourceType:"project"})),a.createElement("div",{className:x},a.createElement(L,{hasTeamEditPermissions:$,isWhiteboardEditor:V,isDesignEditor:G,isSlidesEditor:H,resources:U,resourceType:"file",migrateModalToLivegraph:i}))))))}let F=e=>"file"===e?(0,u.tx)("team_view.member_edit_access_modal.none_files"):(0,u.tx)("team_view.member_edit_access_modal.none_projects");function L(e){let t;let{hasTeamEditPermissions:r,isDesignEditor:n,isWhiteboardEditor:l,isSlidesEditor:o,resourceType:i,migrateModalToLivegraph:s}=e;if(r)return"project"===i?a.createElement("div",{className:C},(0,u.tx)("team_view.member_edit_access_modal.all_projects")):s||n&&l&&o?a.createElement("div",{className:C},(0,u.tx)("team_view.member_edit_access_modal.all_files")):n||l||o?a.createElement(a.Fragment,null,n&&a.createElement("div",{className:C},(0,u.tx)("team_view.member_edit_access_modal.all_design_files")),l&&a.createElement("div",{className:C},(0,u.tx)("team_view.member_edit_access_modal.all_figjam_files")),o&&a.createElement("div",{className:C},(0,u.tx)("team_view.member_edit_access_modal.all_slides_files"))):a.createElement("div",{className:C},F(i));let d=e.resources;if(0===d.privateResourceCount&&0===d.editableResources.length)return a.createElement("div",{className:C},F(i));if(d.privateResourceCount>0){let e=a.createElement("span",null);0===d.editableResources.length&&"project"===i?e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_projects",{numProjects:d.privateResourceCount}):0===d.editableResources.length&&"file"===i?e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_files",{numFiles:d.privateResourceCount}):d.editableResources.length>0&&"project"===i?e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_projects_list_end",{numProjects:d.privateResourceCount}):d.editableResources.length>0&&"file"===i&&(e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_files_list_end",{numFiles:d.privateResourceCount})),t=a.createElement("div",{className:N},e)}return a.createElement(a.Fragment,null,d.editableResources.map(e=>a.createElement("div",{key:e.id_or_key,className:N},e.name)),t)}},361397:(e,t,r)=>{r.d(t,{JC:()=>m,Oe:()=>d,T3:()=>_,VY:()=>o,ay:()=>u,dZ:()=>c,vW:()=>i,wu:()=>l,y$:()=>s});var a=r(720300),n=r(240692);r(398661);let l=n.A.createLazyComponent(()=>Promise.all([r.e(2331),r.e(1500),r.e(7710),r.e(3994),r.e(5567),r.e(5163),r.e(7291),r.e(9220),r.e(6195),r.e(3720),r.e(6048)]).then(r.bind(r,763156)).then(e=>e.BillingGroupDashboardSettingsPageView),{loading:()=>null,error:a.H4.NONE,componentName:"BillingGroupDashboardSettingsPageView"}),o=n.A.createLazyComponent(()=>Promise.all([r.e(2331),r.e(1500),r.e(7710),r.e(3994),r.e(5567),r.e(5163),r.e(7291),r.e(9220),r.e(6195),r.e(3720),r.e(6048)]).then(r.bind(r,52146)).then(e=>e.LicenseGroupAdminSettingsPageView),{loading:()=>null,error:a.H4.NONE,componentName:"LicenseGroupAdminSettingsPageView"}),i=n.A.createLazyComponent(()=>Promise.all([r.e(2331),r.e(1500),r.e(7710),r.e(3994),r.e(5567),r.e(5163),r.e(7291),r.e(9220),r.e(6195),r.e(3720),r.e(6048)]).then(r.bind(r,112534)).then(e=>e.OrgAdminSettingsPageView),{loading:()=>null,error:a.H4.NONE,componentName:"OrgAdminSettingsPageView"}),s=n.A.createLazyComponent(()=>Promise.all([r.e(2331),r.e(1500),r.e(7710),r.e(3994),r.e(5567),r.e(5163),r.e(7291),r.e(9220),r.e(6195),r.e(3720),r.e(6048)]).then(r.bind(r,168816)).then(e=>e.WorkspaceAdminSettingsPageView),{loading:()=>null,error:a.H4.NONE,componentName:"WorkspaceAdminSettingsPageView"}),d=n.A.createLazyComponent(()=>Promise.all([r.e(2331),r.e(1500),r.e(7710),r.e(3994),r.e(5567),r.e(5163),r.e(7291),r.e(9220),r.e(6195),r.e(3720),r.e(6048)]).then(r.bind(r,323137)).then(e=>e.OrgDomainManagementPageView),{loading:()=>null,error:a.H4.NONE,componentName:"OrgDomainManagementPageView"}),c=n.A.createLazyComponent(()=>Promise.all([r.e(2331),r.e(1500),r.e(7710),r.e(3994),r.e(5567),r.e(5163),r.e(7291),r.e(9220),r.e(6195),r.e(3720),r.e(6048)]).then(r.bind(r,517278)).then(e=>e.AbandonedDraftFilesPageView),{loading:()=>null,error:a.H4.NONE,componentName:"AbandonedDraftFilesPageView"}),m=n.A.createLazyComponent(()=>Promise.all([r.e(2331),r.e(1500),r.e(7710),r.e(3994),r.e(5567),r.e(5163),r.e(7291),r.e(9220),r.e(6195),r.e(3720),r.e(6048)]).then(r.bind(r,685462)).then(e=>e.TeamAdminConsoleView),{loading:()=>null,error:a.H4.NONE,componentName:"TeamAdminConsoleView"}),u=n.A.createLazyComponent(()=>Promise.all([r.e(2331),r.e(1500),r.e(7710),r.e(3994),r.e(5567),r.e(5163),r.e(7291),r.e(9220),r.e(6195),r.e(3720),r.e(6048)]).then(r.bind(r,791653)).then(e=>e.AdminSidebar),{loading:()=>null,error:a.H4.NONE,componentName:"AdminSidebar"}),_=n.A.createLazyComponent(()=>Promise.all([r.e(2331),r.e(1500),r.e(7710),r.e(3994),r.e(5567),r.e(5163),r.e(7291),r.e(9220),r.e(6195),r.e(3720),r.e(6048)]).then(r.bind(r,39884)).then(e=>e.OrgIdpManagementPageView),{loading:()=>null,error:a.H4.NONE,componentName:"OrgIdpManagementPageView"})},988730:(e,t,r)=>{r.r(t),r.d(t,{BlockConnectedFileMoveModal:()=>p});var a=r(848318),n=r(162796),l=r(469508),o=r(309488),i=r(93275),s=r(410725),d=r(297638),c=r(967688),m=r(863270),u=r(55116),_=r(615608);function p(e){let t=n.hS(e),r=(0,s.Rs)(u.s0Z,{fileKey:e.fileKey}),p=r?.data?.file?.project?.name,f=r?.data?.file?.plan?.name;return a.createElement(m.fu,{name:"Block Connected File Move Modal"},a.createElement(o.bL,{manager:t,width:"md"},a.createElement(i.vo,null,a.createElement(i.Y9,null,a.createElement(i.hE,null,p?(0,c.tx)("resource_connection.block_file_move.unable_to_move_out_of_project_name",{projectName:p}):(0,c.tx)("resource_connection.block_file_move.unable_to_move_out_of_this_project"))),a.createElement(i.nB,{className:_.Yw},a.createElement("div",{className:d.s.mt4.mb4.$},(0,c.tx)("resource_connection.block_file_move.learn_more_about_what_you_can_do_in_connected_projects",{learnMore:a.createElement(l.N,{href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects"},(0,c.tx)("resource_connection.request_modal.learn_more")),hostPlanName:f??""}))))))}},304769:(e,t,r)=>{r.r(t),r.d(t,{FileMoveDropdown:()=>tn,FileMoveHiddenDiv:()=>tl,FileMoveModal:()=>e7,FileMoveModalComponent:()=>e3,FileMoveSearch:()=>e9,TeamSection:()=>te,TeamsDisplay:()=>tr,getCurrentFolderId:()=>e5,getTargetAttribute:()=>e4,isSubscribedLG:()=>e8});var a=r(848318),n=r(301168),l=r(660376),o=r(19180),i=r(805353),s=r.n(i),d=r(989232),c=r(410441),m=r(857607),u=r(410725),_=r(748008),p=r(329228),f=r(879263),g=r(156974),E=r(264478),b=r(467905),v=r(439382),h=r(345964),y=r(755534),w=r(720522),T=r(297638),I=r(967688),x=r(220576),N=r(5990),S=r(468709),C=r(190731),k=r(647345);function R(e){let t=(0,n.wA)(),r=a.useCallback(r=>{r.stopPropagation(),e.team.canEdit&&((0,d.trackEvent)("New Folder",{trackingContext:e.trackingContextName}),t((0,N.SX)({where:C.Ah.FolderListView,team:{...(0,S.Ws)(e.team),canEdit:e.team.canEdit}})))},[t,e.team,e.trackingContextName]);return e.team.canEdit?a.createElement(k.f,{data_tooltip:(0,I.t)("sidebar.new_project"),data_onboarding_key:"new-project-icon",innerText:"Creates new project",onClick:r,isBackgroundTransparent:e.isBackgroundTransparent}):null}var A=r(453370),O=r(857977),P=r(198479),F=r(31898),L=r(863270),D=r(859172),M=r(318147),B=r(806349),U=r(376132),$=r(94831),j=r(249726),W=r(863875),G=r(55116),V=r(656320),H=r(361053),z=r(230432),Y=r(262234),K=r(129723),q=r(17753),J=r(991675),X=r(795234);let Q=new class{constructor(){this.TeamRestrictionsListsSchemaValidator=(0,X.vh)()}getTeamRestrictionsLists(e){return this.TeamRestrictionsListsSchemaValidator.validate(async({xr:t})=>await t.get("/api/team_restrictions_lists",{team_ids:e.teamIds}))}};var Z=r(764872),ee=r(890257),et=r(764206),er=r(810503),ea=r(304756);function en(e){return a.createElement("div",{className:"page_move--fileCreateNameContainer--JBcti"},a.createElement("div",{className:"page_move--fileCreateNameSvgContainer--nm5eH"},a.createElement(et.v,null)),a.createElement(E.ks,{value:e.newFileName,onChange:e.onChange,maxLength:255,autoFocus:!0,placeholder:(0,I.t)("page_move.add_new_file_name"),className:"page_move--fileCreateNameInput--0yBR8"}))}var el=r(136126),eo=(e=>(e.SHARE_DRAFT="share_draft",e.MOVE_DRAFT="move_draft",e.CREATE_FILE="create_file",e))(eo||{});function ei({planName:e,planType:t,planId:r,fileKey:n,upgradeReason:l}){return a.createElement(L.fu,{name:"Viewer Upgrade Awareness Banner",properties:{entryPoint:l,fileKey:n,orgId:t===K.O.ORG?r:void 0,teamId:t===K.O.ORG?void 0:r}},a.createElement("div",{className:l===eo.MOVE_DRAFT?T.s.pt8.pb4.px8.$:void 0},a.createElement(el._,{dataTestId:"viewer-upgrade-banner",color:el.S.INFORMATION,text:a.createElement(a.Fragment,null,a.createElement("p",{className:T.s.fontSemiBold.$},(0,I.tx)("viewer_upgrade_awareness.you_re_working_in_drafts_on_a_free_seat")),a.createElement("p",null,function(e,t,r){switch(r){case eo.SHARE_DRAFT:if(t===K.O.ORG){if(e)return(0,I.tx)("viewer_upgrade_awareness.sharing_a_draft_will_move_you_to_a_paid_seat_org",{planName:e});return(0,I.tx)("viewer_upgrade_awareness.sharing_a_draft_will_move_you_to_a_paid_seat_in_your_organization")}if(e)return(0,I.tx)("viewer_upgrade_awareness.sharing_a_draft_will_move_you_to_a_paid_seat_team",{planName:e});return(0,I.tx)("viewer_upgrade_awareness.sharing_a_draft_will_move_you_to_a_paid_seat_in_your_team");case eo.MOVE_DRAFT:if(t===K.O.ORG){if(e)return(0,I.tx)("viewer_upgrade_awareness.moving_a_draft_will_change_you_to_a_paid_seat_org",{planName:e});return(0,I.tx)("viewer_upgrade_awareness.moving_a_draft_will_change_you_to_a_paid_seat_in_your_organization")}if(e)return(0,I.tx)("viewer_upgrade_awareness.moving_a_draft_will_change_you_to_a_paid_seat_team",{planName:e});return(0,I.tx)("viewer_upgrade_awareness.moving_a_draft_will_change_you_to_a_paid_seat_in_your_team")}}(e,t,l)))})))}var es=r(558214),ed=r(559389),ec=r(97481),em=r(151223),eu=r(253332),e_=r(193743),ep=r(842744),ef=r(88009);let eg="32px",eE=(0,c.hG)(eg),eb=e=>e?.id||O.iK,ev=new e_.KH({keys:["folder.path","team.name"],threshold:.3,tokenize:!0}),eh=(e,t,r,a,n)=>!(e.orgId!==n&&t?.orgId!==n||!e.canEdit||t&&(0,eu.S$)(e,t,r)&&!(0,j.VA)(e))&&(!a||!!(0,eu.XX)(t)),ey=(e,t,r)=>!r||!!(0,eu.XX)(e),ew=(e,t=!1)=>{let r=[];Object.keys(e.folders).forEach(a=>{let n=e.folders[a],l=n.teamId?e.teams[n.teamId]:null;eh(n,l,e.user,t,e.orgId)&&((0,j.VA)(n)&&(n={...n,path:(0,ef.Tb)()}),r.push(n))}),ev.set(r.map(t=>{let r=t.teamId&&e.teams[t.teamId]&&{name:e.teams[t.teamId].name},a={path:t.path,teamId:t.teamId,id:t.id,subscription:!!t.subscription,...(0,ec.VI)(t)};return r?{folder:a,team:r}:{folder:a}}))},eT=({folders:e,roles:t,user:r,orgUsers:a,teams:n,orgId:l,implicitTeamRolesTeamIds:i},s,d,c)=>{let m=Object.create(null),u=0,_=0,p=(0,j.gj)(r&&r.id,e,t.byFolderId,r&&l?a[l][r.id]:null);for(let e in m[O.HK]=[],m[O.iK]=[],t.byTeamId)ey(n[e],r,s)&&(_++,m[e]=[]);i&&i.forEach(e=>{ey(n[e],r,s)&&(_++,m[e]=[])}),Object.keys(e).forEach(t=>{let a={...e[t]},i=eh(a,a.teamId?n[a.teamId]:null,r,s,l);if((0,o.k)().file_move_show_all_resources){if(i&&(!d||a.subscription||(0,j.VA)(a))){let e=a.teamId?n[a.teamId]:null;m[p&&a.id===p.id?O.HK:eb(e)].push(a),u++}}else if(i&&(a.subscription||(0,j.VA)(a))){let e=a.teamId?n[a.teamId]:null;m[p&&a.id===p.id?O.HK:eb(e)].push(a),u++}});let f=u+_;return c(O.CU({indexCount:f})),c(O.xH()),m},eI=(e,t,r,a,n)=>{let l=Object.create(null),o=Object.create(null),i=[],s=0,d=0;if(n){let t=e.indexOf(n);t>-1&&(e.splice(t,1),e.splice(1,0,n))}return e.forEach(e=>{if(o[e]=s,d+=8,e!==O.iK&&e!==O.HK){let t={type:z.b.NEW_FOLDER_TEAM,id:e,positionTop:d};i.push(t),d+=eE,s+=1}let r=t[e];s+=r.length,r.sort((e,t)=>""===e.path?-1:""===t.path?1:e.path.toLowerCase()<t.path.toLowerCase()?-1:1);let c=Array.from(r);a&&n&&e===n&&c.forEach((e,t)=>{e.id===a&&(r.splice(t,1),r.unshift(e))}),r.forEach(e=>{let t={type:z.b.FOLDER_ROW,id:e.id,positionTop:d};d+=eE,i.push(t)}),l[e]=r,d+=9}),[l,o,i]},ex=(e,t,r)=>{let a=Object.create(null),n=Object.create(null),l=0,o=0,i=t.orgId&&t.user?t.orgUsers[t.orgId][t.user.id]:null,s=(0,j.gj)(t.user?t.user.id:null,t.folders,t.roles.byFolderId,i);for(let r of e){let e=r.item.folder,i=s&&e.id===s.id?0:r.score,d=e.teamId?t.teams[e.teamId]:null,c=s&&e.id===s.id?O.HK:eb(d);!(c in a)&&(a[c]=[],c!==O.iK&&c!==O.HK&&o++),a[c].push(e),null==n[c]?n[c]=i:n[c]=Math.min(n[c],i),l++}let d=l+o;return r(O.CU({indexCount:d})),[n,a]},eN=e=>(t,r)=>{if(t===O.iK)return 1;let a=e[t],n=e[r];return a?n&&a.name.toLowerCase()<n.name.toLowerCase()?-1:1:-1},eS=e=>(t,r)=>e[t]-e[r],eC=async(e,t,r,a,n=!1,o=!1,i,s,d,c)=>{var m,u;let _=e.getState(),p=null,f=null;t.type===z.A.FILE?(p=t.file.parent_org_id||null,f=t.file.team_id):t.type===z.A.REPO?(p=t.repo.parent_org_id||null,f=t.repo.team_id):t.type===z.A.FILE_IMPORT&&(p=t.orgId);let g=[];if(r){let e=ex(await ev.search(r),a,i);u=e[0],(g=Object.keys(m=e[1])).length&&g.sort(eS(u))}else m=eT(a,n,!!c,e.dispatch),a.user?(g.push(O.HK),g=g.concat((0,H.n$)(Object.values(a.teams),a.fileBrowserPreferences?.orderedTeamIds||[])),m[O.iK].length>0&&g.push(O.iK)):(g=Object.keys(m)).sort(eN(a.teams));let E=(()=>{switch(t.type){case z.A.FILE:return[t.file.editor_type];case z.A.REPO:return[M._Y.DESIGN];case z.A.FILE_IMPORT:return t.files.map(e=>(0,ep.NU)(e));default:(0,l.xb)(t)}})(),b=new Set(Object.values(m).flat().filter(e=>E.every(t=>!!t&&(0,ec.d6)(e,t))).map(e=>e.id)),v=g.filter(e=>{if(e===O.iK)return null===m||m[e].length>0;let t=a.teams;if(e!==O.HK){let r=t[e]?.orgId||null;if(p||r){if(r!==p)return!1}else if(f&&e===O.iK)return!1}return!t[e]?.deletedAt&&!!m[e]?.some(e=>b.has(e.id))}),[h,y,w]=eI(v,m,o,s,d);e.dispatch(O.OT({rows:w})),e.dispatch(O.t3({indexOffsets:y})),e.dispatch(O.Pb({foldersByTeamId:h})),e.dispatch(O.Mi({teamIds:v})),r||e.dispatch(O.w3({userTeamCount:v.length})),_.fileMove.isSearchResult!==o&&e.dispatch(O.EN({isSearchResult:o}));let T=O.HK in y&&w[0].type===z.b.FOLDER_ROW;r&&T?e.dispatch(O.Dp({indexAt:0})):r&&!T&&e.dispatch(O.Dp({indexAt:1}))},ek=(e,t,r,a=!1,n,l,o)=>{eC(e,t,"",r,a,!1,e.dispatch,l,o,n)},eR=(0,ed.s)((e,t,r,a,n=!1)=>{eC(e,t,r,a,n,!!r,e.dispatch)},200),eA=(0,em.nF)((e,t)=>{ew(t.userResources,t.modalData.isPublishing),ek(e,t.modalData,t.userResources,t.modalData.isPublishing,!1,t.currentFolderId,t.currentFolderTeamId)}),eO=(0,em.nF)((e,t)=>{eR(e,t.modalData,t.query,t.userResources),e.dispatch(O.hq(t))});var eP=r(29188),eF=r(227276),eL=r(314979),eD=r(422444),eM=r(740495),eB=r(705693),eU=r(125952),e$=r(858541);let ej="file_move--main--fz-As",eW="file_move--iconContainer--2ExyP",eG="file_move--folderRowWrapper--R5vx1",eV="file_move--folderRow--ZBYjx",eH="file_move--horizontalDivider--g43mL";var ez=r(367542);function eY(e){let t=(0,e$.S)(),r=(0,n.d4)(e=>e.user),[l,o]=(0,a.useState)(""),i=e.dispatch,[s,c]=(0,a.useState)(!0),m=(0,eF.I7)("starter_team_loophole_experiment_m0"),u=(0,eF.I7)("starter_team_loophole_experiment_m1");return a.createElement("form",{onSubmit:t=>{t.preventDefault(),(0,d.trackEvent)("Create Team Inline",{trackingContext:e.trackingContextName}),l?(i((0,eB.KQ)({teamName:l,orgAccess:M.bU.PUBLIC,dontRedirect:!0})),c(!0),o("")):i(eL.s.error((0,I.t)("flash.team_name_cannot_be_empty")))}},a.createElement("div",{className:"file_move--teamCreateRow--GglhU file_move--folderRow--ZBYjx"},s?a.createElement("button",{type:"button",className:"file_move--rowButton--CSDNV",onClick:()=>{null!=r&&!e.orgId&&(0,eM.e5)({userId:r.id,teams:Object.values(e.teams),rolesByTeamId:e.rolesByTeamId,getM0Config:m.getConfig,getM1Config:u.getConfig})?(i(F.Ce()),i(eD.Dw({openInNewTab:!eP.eD}))):(c(!1),i(O.xH()))}},a.createElement(w.B,{className:"file_move--newProjectIconFileMove--V9037 sidebar--icon--wMzUY",svg:ez.A}),a.createElement("span",{className:t?"file_move--newFolderNameCustomSections--OqBS9 sidebar--sectionNameCustomSections--9e7LZ sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa":"file_move--newFolderName--mHXUY sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa"},(0,I.tx)("file_browser.inline_team_creation.button_text"))):a.createElement(a.Fragment,null,a.createElement("div",{className:eW},a.createElement(eU.pw,{size:16,shape:"SQUARE",color:"#E5E5E5"})),a.createElement("div",{className:"file_move--newTeamTitleText--cax1f file_move--teamTitleText--4XOM- ellipsis--ellipsis--Tjyfa"},a.createElement(E.ks,{value:l||"",onChange:e=>{o(e.target.value)},onBlur:()=>{c(!0)},className:"file_move--newTeamInput--0kCF4",maxLength:e.teamNameMaxWidth,placeholder:(0,I.t)("file_browser.inline_team_creation.placeholder"),autoFocus:!0})))))}var eK=r(7452),eq=r(578888),eJ=r(992724),eX=r(90724),eQ=r(8108),eZ=r(391205),e0=r(763016);let e1=(0,c.hG)(eg),e2="FileMoveModalContent";function e4(e){return"folder"===e.view||(0,V.K)(e)?"_self":"_blank"}function e8(e){return!!e.subscription||(0,j.VA)(e)}function e5(e){switch(e.type){case z.A.FILE:let t=e.file;return t?.folder_id||null;case z.A.REPO:let r=e.repo;return r?.folder_id||null;case z.A.FILE_IMPORT:return null;default:(0,l.xb)(e)}}function e3(e){let t=null;e.type===z.A.FILE?t=e.file.parent_org_id||null:e.type===z.A.REPO?t=e.repo.parent_org_id||null:e.type===z.A.FILE_IMPORT&&(t=e.orgId);let r=(0,n.d4)(e=>e.orgById),l=t?r[t]:null,o=(0,n.d4)(e=>e.fileMove),i=(0,n.d4)(e=>!!e.creatingNewFolder),s=(0,n.d4)(e=>e.dropdownShown),c=(0,n.d4)(e=>e.selectedView),m=e5(e),p=(0,x.R)(),g=(0,u.Rs)(G.Y9I,{projectId:m},{enabled:!!m}),E=(0,u.Rs)(G.G0Y,{orgId:t});"errors"===E.status&&(console.error("Loading AccessibleFolders from LiveGraph: "),console.error(E.errors));let b="loaded"===E.status&&("loaded"===g.status||e.type===z.A.FILE_IMPORT)?{fetched:E,transformed:function(e,t,r,a){let n={id:e.currentUser.id,student_validated_at:e.currentUser.studentValidatedAt&&e.currentUser.studentValidatedAt.toString()},l={},o={},i={},s={byFolderId:{},byTeamId:{}},d=(0,B.Um)(e.currentUser),c=[],m=e=>{o[e.id]={...e,canEdit:!0,canRename:!!e.path}};e.currentUser.allOrgUsers&&e.currentUser.allOrgUsers.forEach(e=>{i[e.orgId]={[e.userId]:{...e,type:U.Wd.ORG_USER,account_type:e.accountType,design_paid_status:e.accountType,id:e.id,org_id:e.orgId,user_id:e.userId,user:{id:e.user.id,email:e.user.email||void 0,img_url:e.user.imgUrl,name:e.user.name||void 0,handle:e.user.handle},permission:e.permission,drafts_folder_id:e.draftsFolderId,created_at:e.createdAt.toString(),updated_at:e.updatedAt?.toString()||"",disabled_at:e.disabledAt&&e.disabledAt.toString(),whiteboard_paid_status:e.whiteboardPaidStatus||M.El.STARTER,show_figjam_user_onboarding:null,has_shown_figjam_admin_launch_onboarding:null,has_shown_figjam_admin_onboarding:null,ecc_upgrading_locked:null,dev_mode_paid_status:e.devModePaidStatus||M.El.RESTRICTED,...a?{active_seat_type:(0,D.TA)(e.activeSeatTypeUpgrade?.billableProduct)}:void 0}},e.draftsProject&&(m(e.draftsProject),e.draftsProject.ownerRole&&(s.byFolderId[e.draftsProject.id]={[n.id]:(0,B.aU)(e.draftsProject.ownerRole,d,null,null)}))}),e.currentUser.teamEditRoles&&e.currentUser.teamEditRoles.forEach(e=>{if(!e.team)return;let{id:t,projects:r}=e.team;l[t]={...e.team,canView:e.level>=$.e6.VIEWER,canEdit:e.level>=$.e6.EDITOR,canAdmin:e.level>=$.e6.ADMIN,currentTeamUser:e.team.currentTeamUser,licenseGroup:null},s.byTeamId[t]={[n.id]:(0,B.aU)(e,d,null,null)},r&&r.forEach(e=>m(e))});let u=e&&e.org?e.org:null;if(u){if(t){let e=(0,_.oA)(t.project);e&&e.canEdit&&m(e)}u.teams&&u.teams.forEach(e=>{let{id:t,orgEditProjects:r}=e;if(!l[t]){let r=e.canEdit,a=e.canAdmin,n=e.licenseGroup;l[t]={...e,canView:!1,canEdit:r??!1,canAdmin:a??!1,licenseGroup:n||null},c.push(t)}let a=(0,_.oA)(r);a&&a.forEach(e=>{m(e)})})}return e.currentUser.teamRoles?.forEach(e=>{if(!e.team)return;let{id:t}=e.team;l[t]||(l[t]={...e.team,canEdit:!1,canAdmin:!1,canView:!1,currentTeamUser:e.team.currentTeamUser,licenseGroup:null},s.byTeamId[t]={[n.id]:B.aU(e,d,null,null)})}),e.currentUser.projectEditRoles&&e.currentUser.projectEditRoles.forEach(e=>{e.project&&(m(e.project),s.byFolderId[e.project.id]={[n.id]:(0,B.aU)(e,d,null,null)})}),e.currentUser.draftsProject&&(m(e.currentUser.draftsProject),e.currentUser.draftsProject.ownerRole&&(s.byFolderId[e.currentUser.draftsProject.id]={[n.id]:(0,B.aU)(e.currentUser.draftsProject.ownerRole,d,null,null)})),{org:u,user:n,teams:l,folders:o,roles:s,orgUsers:i,orgId:r,fileBrowserPreferences:e.currentUser.fileBrowserPreferences,implicitTeamRolesTeamIds:c}}(E.data,e.type!==z.A.FILE_IMPORT?g.data:null,t,p)}:null,v=null===b?{loaded:!1}:{loaded:!0,userResources:b.transformed},h=null==m||null===b?null:b.transformed.folders[m],y=h?h.teamId:null,w=(0,n.wA)();a.useEffect(()=>{v.loaded&&w(eA({modalData:e,userResources:v.userResources,currentFolderId:m,currentFolderTeamId:y}))},[b&&b.fetched]);let T=[];if(v.loaded&&!t)for(let e in v.userResources.teams){let t=v.userResources.teams[e];"ok"!==t.subscription&&T.push(t.id)}let I=function(e){let[t,r]=a.useState((0,_.Xm)()),n=e.join(",");return a.useEffect(()=>{if(0===n.length){r((0,_.gB)({}));return}r((0,_.Xm)());let e=!1;return(async()=>{let t=await Q.getTeamRestrictionsLists({teamIds:n});e||r((0,_.gB)(t.data.meta))})(),()=>{e=!0}},[n]),t}(T);if("loaded"===I.status&&v.loaded)for(let e in v.userResources.teams){let t=v.userResources.teams[e];I.data[e]&&(t.restrictionsList=I.data[e])}return(0,f.oY)("loaded"===E.status,e=>{(0,d.trackEvent)("file_move_modal_latency",{latency_ms:e},{forwardToDatadog:!0})}),a.createElement(e7,{creatingNewFolder:i,currentOrg:l,dispatch:w,dropdownShown:s,fileMove:o,fileMoveData:e,isBillingRemodelEnabled:p,modalId:e._modalId,selectedView:c,userResources:v})}function e6(e){let t=null!=e.orgId,r=e.subscription===M.Qh.INCOMPLETE||e.subscription===M.Qh.OK;return{id:e.id,subscription:e.subscription,starter_team:!t&&!r,pro_team:r,org_team:t,student_team:!!e.studentTeamAt,deleted_at:e.deletedAt?.toString()||null}}class e7 extends a.PureComponent{constructor(){super(...arguments),this.state={newFileName:""},this.FILE_MOVE_DROPDOWN="file-move-dropdown",this.setScrollContainer=e=>{this.scrollContainer=e},this.scrollContainerRef=a.createRef(),this.isMovePageToNewFile=(0,o.k)().move_page_to_new_file&&this.props.fileMoveData.isMovePageToNewFile,this.onScroll=()=>{clearTimeout(this.previousTimeOutKey),this.props.fileMove.upDownKeyPressed&&this.props.dispatch(O.Ww({canFocus:!1})),this.previousTimeOutKey=setTimeout(()=>{this.props.fileMove.canMouseFocus||this.props.dispatch(O.Ww({canFocus:!0}))},200)},this.onkeydown=e=>{if(!this.props.userResources.loaded||this.props.creatingNewFolder||this.props.fileMove.folderRenaming||this.props.fileMove.isSearchFocused)return;let t=document.getElementById(e2);if((0,Z.NB)(t))return;let{userResources:r}=this.props.userResources;switch(e.keyCode){case m.Uz.ESCAPE:this.onClose();break;case m.Uz.UP_ARROW:this.props.dispatch(O.zv());break;case m.Uz.DOWN_ARROW:this.props.fileMove.indexCount&&this.props.dispatch(O.TL({upperBound:this.props.fileMove.indexCount}));break;case m.Uz.ENTER:{if(-1===this.props.fileMove.focusedIndex)return;let e=this.props.fileMove.folderRows[this.props.fileMove.focusedIndex];if(e.type===z.b.NEW_FOLDER_TEAM){let t=e.id,a=r.teams[t];this.props.dispatch((0,N.SX)({where:this.props.modalId.type,team:{...(0,S.Ws)(a),canEdit:!0}}))}else if(e.type===z.b.FOLDER_ROW){let t=r.folders[e.id];if(!t)break;this.move(t)}}}},this.onClose=()=>{this.props.fileMoveData.displayBanner?this.props.dispatch(F.Lo()):this.props.dispatch(F.Ce())},this.openOrgView=e=>{this.props.dispatch(A.$T({view:"org",orgId:e,orgViewTab:Y.X.HOME}))},this.onOrgViewLinkClick=()=>{this.props.dispatch(F.Ce()),this.props.currentOrg&&this.openOrgView(this.props.currentOrg.id)},this.moveToSelectedFolder=()=>{let e=this.getFocusedFolder();if(!e)return;let t=()=>{this.move(e)};if(this.isMovePageToNewFile&&this.props.fileMoveData.type!==z.A.FILE_IMPORT){var r,a,n;this.onClose();let t=this.props.fileMoveData.type===z.A.FILE?this.props.fileMoveData.fileKey:this.props.fileMoveData.repoId;r=this.props.fileMoveData.page_id,a=e.id,n=this.state.newFileName,(0,er.ED)("startMovePagesJob","Send request to start move pages job."),ea.Ay.post(`/api/files/${t}/move_pages`,{folder_id:a,page_ids:r,file_name:n}).catch(e=>{(0,er.x1)("startMovePagesJob","Error with starting move pages job.",{err:e})}).then(()=>{(0,er.ED)("startMovePagesJob","Move pages job successfully started.")});return}let l=this.props.fileMoveData;if(l.type===z.A.FILE&&l.file.is_team_template&&(0,j.VA)(e)){this.props.dispatch(F.to({type:es.X0,data:{title:(0,I.tx)("templates.confirmation.move_to_drafts.title",{count:1}),content:(0,I.tx)("templates.confirmation.move_to_drafts.description"),confirmText:(0,I.tx)("templates.confirmation.move_to_drafts.button_v2"),destructive:!1,onConfirm:t}}));return}t()},this.move=s()(e=>{let t=this.props.fileMoveData;switch(t.type){case z.A.FILE:this.moveFile(e,t.file);break;case z.A.REPO:this.moveRepo(e,t.repo);break;case z.A.FILE_IMPORT:for(let r of t.files)this.props.dispatch((0,W.z)({name:r.name,blob:new Blob([r.contents]),folderId:e.id}));break;default:(0,l.xb)(t)}},2e3,{leading:!0,trailing:!1}),this.closeModal=()=>{this.props.dispatch(F.ES(this.props.modalId))},this.moveFile=(e,t)=>{if(e&&e.id!==t.folder_id){if(this.props.userResources.loaded){let r=this.props.userResources.userResources.teams[e.teamId||""]||null;this.closeModal(),this.props.dispatch(P.z({files:[t],folder:e,team:r,fromFileModal:!0,onFinishCallback:this.props.fileMoveData.afterFileMove?.callback}))}}else this.onClose()},this.moveRepo=(e,t)=>{if(e&&e.id!==t.folder_id){if(this.props.userResources.loaded){let r=this.props.userResources.userResources.teams[e.teamId||""]||null;this.closeModal(),this.props.dispatch(P.z({files:[],repos:[t],folder:e,team:r,fromFileModal:!0}))}}else this.onClose()},this.getModalTitle=()=>{let e=this.props.fileMoveData;if(this.isMovePageToNewFile)return(0,I.t)("file_browser.file_move.move_pages_to_new_file");if(e.type===z.A.FILE_IMPORT)return 1===e.files.length?(0,I.t)("file_browser.file_move.modal_header_import_file",{fileName:e.files[0].name}):(0,I.t)("file_browser.file_move.modal_header_import_files");{let t=e.type===z.A.FILE?e.file.name:e.repo.name;return(0,I.t)("file_browser.file_move.modal_header_move_file",{fileName:t})}},this.getFocusedFolder=()=>{if(!this.props.userResources.loaded)return null;let{userResources:e}=this.props.userResources,t=this.props.fileMove.folderRows[this.props.fileMove.focusedIndex];return t&&t.type===z.b.FOLDER_ROW?e.folders[t.id]:null},this.onFileMoveContextMenu=(e,t)=>{e.stopPropagation(),e.preventDefault(),this.props.fileMove.folderRenaming||this.props.dispatch(A.j7({type:this.FILE_MOVE_DROPDOWN,data:{folderId:t.id,position:{top:e.clientY,left:e.clientX,right:"auto",bottom:"auto"}}}))},this.handleInputChange=e=>{this.setState({newFileName:e.currentTarget.value})},this.renderViewerUpgradeAwarenessBanner=(e,t,r)=>{if(!this.props.userResources.loaded)return null;let{userResources:n}=this.props.userResources;if(!(0,j.VA)(t)||(0,j.VA)(r))return null;let l=this.props.fileMoveData.type===z.A.FILE?this.props.fileMoveData.fileKey:"";if(n.orgId){if(n.org?.k12GoogleOrg)return null;let t=n.orgUsers[n.orgId],r=t&&n.user?t[n.user.id]:null,o=!1;if(e===M._Y.DESIGN?o=r?.design_paid_status===M.El.STARTER:e===M._Y.WHITEBOARD&&(o=r?.whiteboard_paid_status===M.El.STARTER),o)return a.createElement(ei,{planName:this.props.currentOrg?.name,planType:K.O.ORG,planId:n.orgId,fileKey:l,upgradeReason:eo.MOVE_DRAFT})}else{let t=r?.teamId,o=t?n.teams[t]:null;if(o&&e6(o).pro_team){let t=!1;if(e===M._Y.DESIGN?t=o.currentTeamUser?.designPaidStatus===M.Zf.STARTER:e===M._Y.WHITEBOARD&&(t=o.currentTeamUser?.whiteboardPaidStatus===M.Zf.STARTER),t)return a.createElement(ei,{planName:o.name,planType:K.O.TEAM,planId:o.id,fileKey:l,upgradeReason:eo.MOVE_DRAFT})}}return null}}componentDidMount(){document.addEventListener("keydown",this.onkeydown),this.componentMountedAt=new Date}componentWillUnmount(){document.removeEventListener("keydown",this.onkeydown)}componentDidUpdate(e,t){!e.userResources.loaded&&this.props.userResources.loaded&&(this.props.fileMoveData.autoSelect&&this.props.dispatch(O.qb({fileMove:this.props.fileMove})),this.props.dispatch(O.YG({isSearchFocused:!0})));let r=this.props.fileMove.focusedIndex;if(this.props.fileMove.upDownKeyPressed&&e.fileMove.focusedIndex!==r){if(!this.scrollContainerRef.current||-1===r)return;let e=this.props.fileMove.folderRows[r].positionTop,t=this.scrollContainer.getScrollTop(),a=this.scrollContainerRef.current.clientHeight;e<t?0===r?this.scrollContainer.scrollToTop():this.scrollContainer.scrollTo(e):e+e1>t+a&&(null!=this.props.fileMove.indexCount&&r===this.props.fileMove.indexCount-1?this.scrollContainer.scrollToBottom():this.scrollContainer.scrollTo(e-a+e1))}this.props.fileMove.upDownKeyPressed&&this.props.dispatch(O.qM())}renderDropdown(){if(!this.props.userResources.loaded)return;let{userResources:e}=this.props.userResources,t=this.props.dropdownShown;if(!(t&&t.type===this.FILE_MOVE_DROPDOWN&&t.data&&t.data.folderId))return null;let r=e.folders[t.data.folderId];return r?a.createElement(tn,{folder:r,dropdownShown:this.props.dropdownShown,selectedView:this.props.selectedView,dispatch:this.props.dispatch}):null}render(){let e,t,r;let n=this.props.fileMoveData.modalWidth||288,o=this.getModalTitle();if(!this.props.userResources.loaded)return a.createElement(ee.XV,{title:o,fixedTop:!0,minWidth:n,maxWidth:n,onClose:this.onClose,truncateTitleText:!0},a.createElement("div",{className:ej},a.createElement(h.a_,{className:"file_move--spinner--eDfAF"})));let{userResources:i}=this.props.userResources,s=e5(this.props.fileMoveData),d=null==s?null:i.folders[s],c=this.getFocusedFolder();e=this.isMovePageToNewFile?null!=c&&0!==this.state.newFileName.length:this.props.fileMoveData.type===z.A.FILE_IMPORT?null!=c:null!=c&&null!=d&&c.id!==d.id;let m=0===this.props.fileMove.teamOrder.length,u=!this.props.fileMove.folderSearchQuery&&this.props.fileMove.userTeamCount&&this.props.fileMove.userTeamCount<=1&&this.props.fileMoveData.type!==z.A.FILE_IMPORT,_=this.props.fileMoveData;switch(_.type){case z.A.FILE:t={fileKey:_.fileKey,fileTeamId:_.file&&_.file?.team_id,fileMoveModalEmptyState:u,orgId:this.props.currentOrg&&this.props.currentOrg?.id},r=_.file.editor_type??M._Y.DESIGN;break;case z.A.REPO:t={repoId:_.repoId,fileMoveModalEmptyState:u,orgId:this.props.currentOrg&&this.props.currentOrg?.id},r=M._Y.DESIGN;break;case z.A.FILE_IMPORT:t={},r=null;break;default:(0,l.xb)(_)}return a.createElement(L.fu,{name:J.e0.FILE_MOVE_MODAL,properties:t},a.createElement(ee.XV,{title:o,fixedTop:!0,minWidth:n,maxWidth:n,onClose:this.onClose,truncateTitleText:!0},u?a.createElement("div",{className:"file_move--mainZeroState--HWbCa file_move--main--fz-As",id:e2},a.createElement("div",{className:"file_move--zeroStateModal--yrur1"},a.createElement("div",{style:{paddingTop:"100px"}},(0,I.tx)("file_browser.file_move.zero_state")),this.props.currentOrg&&a.createElement("div",{className:T.s.pt20.$},a.createElement(E.$$,{onClick:this.onOrgViewLinkClick},this.props.currentOrg.bigma_enabled?(0,I.t)("file_browser.file_move.view_workspaces"):(0,I.t)("file_browser.file_move.view_teams"))))):a.createElement("div",{className:ej,id:e2},this.isMovePageToNewFile?a.createElement(en,{newFileName:this.state.newFileName,onChange:this.handleInputChange}):a.createElement(a.Fragment,null,r&&d&&c&&!this.props.isBillingRemodelEnabled&&this.renderViewerUpgradeAwarenessBanner(r,d,c),a.createElement("div",{className:"file_move--searchWrapperNew--fSvPz"},a.createElement(e9,{fileMoveData:this.props.fileMoveData,folderCount:this.props.fileMove.indexCount,focusedIndex:this.props.fileMove.focusedIndex,getFocusedFolder:this.getFocusedFolder,searchQuery:this.props.fileMove.folderSearchQuery,moveFolder:this.move,dispatch:this.props.dispatch,userResources:i}))),a.createElement("div",{className:eH}),this.props.fileMoveData.displayBanner&&!this.isMovePageToNewFile&&a.createElement(a.Fragment,null,this.props.fileMoveData.displayBanner,a.createElement("div",{className:eH})),this.props.fileMove.folderSearchQuery&&!this.isMovePageToNewFile&&m?a.createElement("div",{className:"file_move--emptyModal--o-ei-"},(0,I.tx)("search.file_move.no_results_found",{folderSearchQuery:this.props.fileMove.folderSearchQuery})):a.createElement(y.P,{width:n,className:"file_move--teamSectionBody--jIFZO",ref:this.setScrollContainer,scrollContainerRef:this.scrollContainerRef,onScroll:this.onScroll},a.createElement(tr,{componentMountedAt:this.componentMountedAt,creatingNewFolder:this.props.creatingNewFolder,currentFolderId:s,dispatch:this.props.dispatch,fileEditorType:r,fileMove:this.props.fileMove,folders:i.folders,indexOffsets:this.props.fileMove.indexOffsets,onDoubleClick:this.moveToSelectedFolder,onFileMoveContextMenu:this.onFileMoveContextMenu,orgId:i.orgId,rolesByTeamId:i.roles.byTeamId,selectedView:this.props.selectedView,teamNameMaxWidth:n-88,teams:i.teams})),a.createElement("div",{className:"file_move--footer--pBClJ"},a.createElement(E.nR,{onClick:this.onClose},(0,I.tx)("modal.cancel")),a.createElement(E.vd,{disabled:!e,onClick:this.moveToSelectedFolder},this.props.fileMoveData.moveText||(0,I.t)("file_browser.file_move.move")))),this.renderDropdown(),a.createElement(tl,{fileMove:this.props.fileMove,creatingNewFolder:this.props.creatingNewFolder})))}}e7.displayName="FileMoveModal";class e9 extends a.PureComponent{constructor(e){super(e),this.onFocus=()=>{this.props.dispatch(O.xH()),this.props.dispatch(O.YG({isSearchFocused:!0}))},this.onBlur=()=>{this.props.dispatch(O.YG({isSearchFocused:!1}))},this.onChange=e=>{e.stopPropagation(),this.props.dispatch(eO({modalData:this.props.fileMoveData,query:e.currentTarget.value,userResources:this.props.userResources}))},this.onSearchKeyDown=e=>{e.stopPropagation();let t=this.searchInputRef.current;switch(e.keyCode){case m.Uz.DOWN_ARROW:t&&t.blur(),null!=this.props.folderCount&&this.props.dispatch(O.TL({upperBound:this.props.folderCount}));break;case m.Uz.UP_ARROW:t&&t.blur(),this.props.dispatch(O.zv());break;case m.Uz.ESCAPE:if(!t)break;t.value?(t.value="",this.props.dispatch(eO({modalData:this.props.fileMoveData,query:"",userResources:this.props.userResources}))):this.props.dispatch(F.Ce()),this.props.dispatch(O.xH());break;case m.Uz.TAB:t&&t.blur(),this.props.dispatch(O.xH());break;case m.Uz.ENTER:{t&&t.blur();let e=this.props.getFocusedFolder();e&&this.props.moveFolder(e)}}},this.searchInputRef=a.createRef()}componentDidMount(){let e=this.searchInputRef.current;e&&e.focus()}render(){return a.createElement("div",{className:"file_move--searchContainer--VZId9"},a.createElement("div",{className:eW},a.createElement(w.B,{svg:eX.A})),a.createElement(v.L,{ref:this.searchInputRef,placeholder:(0,I.t)("file_browser.file_move.search_placeholder"),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onSearchKeyDown,className:this.props.searchQuery?"file_move--searchInputNew--No-wL":"file_move--searchInputEmptyNew--Gv7eB file_move--searchInputNew--No-wL",value:this.props.searchQuery,onChange:this.onChange}))}}function te(e){let{team:t,teamId:r}=e,[n,{onMouseOver:l,onMouseOut:o}]=(()=>{let[e,t]=(0,a.useState)(!1),r=(0,a.useCallback)(()=>t(!0),[t]),n=(0,a.useCallback)(()=>t(!1),[t]);return(0,a.useMemo)(()=>[e,{onMouseOver:r,onMouseOut:n}],[e,r,n])})(),i=(0,u.Rs)(G.bel,{teamId:t?.id??""},{enabled:!!t?.id}),s=i.data?.team?.teamFileCounts||H.Cz,d=e.fileNotInTeam&&e.fileEditorType&&t&&!(0,H.aW)(t,{type:H.sK.ADD_FILE,editorType:e.fileEditorType,teamFileCounts:s});return a.createElement(a.Fragment,null,e.showTitle&&a.createElement("div",{className:"file_move--teamTitleNew--1hv9- text--fontPos12--YsUAh text--_fontBase--QdLsd",onMouseOver:l,onMouseLeave:o},(r===O.iK||r===O.HK)&&a.createElement("div",{className:eW},a.createElement(w.B,{svg:eZ.A})),a.createElement("div",{className:"file_move--teamTitleRow--hMU87"},a.createElement("div",{className:"file_move--teamName--Jmsoa"},a.createElement("div",{className:"file_move--teamTitleText--4XOM- ellipsis--ellipsis--Tjyfa",style:{maxWidth:e.teamNameMaxWidth}},r===O.iK||r===O.HK?(0,I.t)("file_browser.shared_projects"):t.name),d&&a.createElement("div",{className:"file_move--warningIcon--MVFCa"},a.createElement(w.B,{svg:eq.A,"data-tooltip-type":q.Ib.TEXT,"data-tooltip":(0,I.t)("file_browser.file_move.paywall_team_tooltip")}))),n&&t&&!d&&a.createElement("div",{className:"file_move--newProjButton--7b5Xq"},a.createElement(R,{team:t,isBackgroundTransparent:!0,trackingContextName:J.e0.FILE_MOVE_MODAL})))))}function tt(e){let t=(0,a.useRef)(null),[r,l]=(0,a.useState)(!1),o=(0,n.wA)();return(0,a.useEffect)(()=>{!r&&e.isTeamNew&&t.current&&e.hasFolderSection&&(o(O.Dp({indexAt:e.firstFolderFocusedIndex})),t.current.scrollIntoView(),l(!0))},[e.isTeamNew,e.hasFolderSection,e.firstFolderFocusedIndex,r,t,o]),a.createElement("div",{className:e.className,ref:t},e.children)}function tr(e){let{fileMove:t,teams:r,selectedView:n}=e,l=Object.values(r).map(e=>e6(e));return a.createElement("div",null,null!=t.teamOrder&&t.teamOrder.map(n=>{let l=n!==O.HK,o=n!==O.iK&&n!==O.HK,i=(t.foldersByTeamId?.[n]||[]).length>0;if(!(l||o||i))return null;let s=r[n];if(!s&&!(n===O.iK||n===O.HK)||n===O.HK&&!e.orgId)return null;let d=s?new Date(r[n].createdAt):void 0,c=d&&d>e.componentMountedAt,m=t.indexOffsets[n]+1,u=!!e.currentFolderId&&n!==e.folders[e.currentFolderId]?.teamId;return a.createElement(tt,{className:"file_move--teamSection--mI5yE",isTeamNew:c,firstFolderFocusedIndex:m,hasFolderSection:i,key:`Team Section ${n}`},a.createElement(te,{team:s,teamId:n,showTitle:l,isACustomTeam:o,fileNotInTeam:u,teamNameMaxWidth:e.teamNameMaxWidth,indexOffsets:e.indexOffsets,fileEditorType:e.fileEditorType}),i&&(t.foldersByTeamId[n]||[]).map((r,l)=>{let i=l+e.indexOffsets[n];return o&&(i+=1),a.createElement(ta,{key:`${r.teamId} ${r.id}`,currentFolderId:e.currentFolderId,focusedFolderIndex:t.focusedIndex,folder:r,folderBeingRenamed:t.folderRenaming,folders:e.folders,index:i,isSearchingFolders:!!t.isSearchResult,onDoubleClick:e.onDoubleClick,onFileMoveContextMenu:e.onFileMoveContextMenu,trackingContextName:J.e0.FILE_MOVE_MODAL})}))}),!e.orgId&&a.createElement(eY,{teamNameMaxWidth:e.teamNameMaxWidth,trackingContextName:J.e0.FILE_MOVE_MODAL,orgId:e.orgId,selectedView:n,teams:l,rolesByTeamId:e.rolesByTeamId,dispatch:e.dispatch}))}function ta(e){let t=(0,n.wA)(),r=(0,p.gY)(N.mq),l=(a,n)=>{(0,d.trackEvent)("Rename Folder",{trackingContext:e.trackingContextName}),r({folderId:a.id,folderName:n}),t(O.Mn())},o=(t,r)=>{e.onFileMoveContextMenu(r,t)},i=e.folderBeingRenamed===e.folder.id,s=e.focusedFolderIndex===e.index,c=e.folderBeingRenamed?eG:s?"file_move--folderRowWrapperFocusedNew--XWjyz file_move--folderRowWrapper--R5vx1":eG,{folder:m}=e;return a.createElement("div",{className:c,onMouseDown:()=>{t(O.Dp({indexAt:e.index}))},key:`${m.teamId} ${m.id}`,onContextMenu:e=>o(m,e),onDoubleClick:()=>{i||e.onDoubleClick()}},i?a.createElement("div",{className:eV},a.createElement(b.p,{key:`input ${m.id}`,className:"file_move--renameInput--WL-5T",placeholderValue:(0,j.CI)(m),submit:e=>l(m,e),cancel:()=>{t(O.Mn())}})):((t,r)=>{let n=e8(t)&&e.isSearchingFolders,l=e.focusedFolderIndex&&e.focusedFolderIndex>-1?r:e.currentFolderId===t.id,o=(0,j.jd)(t)?e0.A:eJ.A;return a.createElement("div",{className:eV},a.createElement("div",{className:eW},a.createElement(w.B,{svg:l?eK.A:o})),a.createElement("span",{className:"file_move--folderName--YbDNz ellipsis--ellipsis--Tjyfa"},(0,j.CI)(t)),a.createElement("div",{className:eW},n&&a.createElement(w.B,{svg:eQ.A})))})(m,s))}e9.displayName="FileMoveSearch";class tn extends a.PureComponent{constructor(){super(...arguments),this.renameFolder=()=>{this.props.dispatch(O.JG({folderId:this.props.folder.id}))}}render(){let e=this.props.folder,t=e.canRename,r=e4(this.props.selectedView);return a.createElement(g.ms,{className:"file_move--fileMoveContextMenu--47Rjw",style:this.props.dropdownShown.data.position},a.createElement(g.c$,{disabled:!t,onClick:this.renameFolder},(0,I.tx)("file_browser.file_move.context_menu_rename")),a.createElement(g.wv,null),a.createElement(g.c$,{href:(0,C.EE)(e.id,e.orgId),target:r},(0,I.tx)("file_browser.file_move.context_menu_show_in_files")))}}tn.displayName="FileMoveDropdown";class tl extends a.PureComponent{constructor(){super(...arguments),this.hiddenDivRef=e=>{this.hiddenDiv=e}}componentDidUpdate(){!this.props.fileMove||this.props.fileMove.folderRenaming||this.props.fileMove.isSearchFocused||this.props.creatingNewFolder||null==this.hiddenDiv||this.hiddenDiv.focus()}render(){return a.createElement("div",{ref:this.hiddenDivRef,tabIndex:0})}}tl.displayName="FileMoveHiddenDiv"},697920:(e,t,r)=>{r.r(t),r.d(t,{MoveDraftToProjectInterstitialModal:()=>E});var a=r(848318),n=r(301168),l=r(536384),o=r.n(l),i=r(133318),s=r(264478),d=r(967688),c=r(584026),m=r(31898),u=r(533737),_=r(863270),p=r(414607),f=r(289198),g=r(871493);function E(e){let t=(0,n.wA)(),r=()=>{t(u.b({dismissed_move_draft_to_project_interstitial_modal:!0})),t(m.Lo())};return a.createElement(_.fu,{name:"MoveDraftToProjectInterstitialModal"},a.createElement(p.aF,{title:(0,d.t)("file_browser.draft_to_project.title.plan_spaces"),titleClassName:f.wN,className:f.KP,size:320,popStack:!0,disableClickOutsideToHide:!0},a.createElement(i.Jn,{className:o()(g.J_,g.BQ),onClick:r}),a.createElement("span",null,(0,d.tx)("file_browser.draft_to_project.body.plan_spaces"),a.createElement("br",null)),a.createElement("div",{className:o()(f.v0,f.hF)},a.createElement("a",{target:"_blank",href:"https://help.figma.com/hc/articles/13838684089751-Starter-plan-permissions#drafts"},a.createElement(s.tM,null,(0,d.tx)("general.learn_more"))),a.createElement(s.vd,{className:f.pL,onClick:()=>{r(),(0,c.h)(e.file,e.repo,t,e.afterFileMove,e.moveFileModalData,e.bannerToDisplay)}},(0,d.tx)("file_browser.draft_to_project.move")))))}},942524:(e,t,r)=>{r.d(t,{cx:()=>l});var a=r(720300),n=r(878724);r(480572);let l=n.A.createLazyComponent(()=>Promise.all([r.e(570),r.e(8029),r.e(8658),r.e(1500),r.e(4372),r.e(7710),r.e(3994),r.e(8254),r.e(1552),r.e(5150),r.e(5163),r.e(6496),r.e(671),r.e(9220),r.e(9634),r.e(7900),r.e(8717)]).then(r.bind(r,480572)).then(e=>e.default),{loading:()=>null,error:a.H4.NONE,componentName:"FileBrowserOverlays"})},467452:(e,t,r)=>{r.r(t),r.d(t,{EduUpgradeModal:()=>E});var a=r(848318),n=r(301168),l=r(264478),o=r(967688),i=r(860935),s=r(695920),d=r(422444),c=r(31898),m=r(679617),u=r(863270),_=r(672940),p=r(253332),f=r(890257);function g({handleClose:e}){let t=(0,n.wA)(),r=a.useCallback(()=>{e(),t((0,d.Dw)({isEduTeam:!0}))},[t,e]);return a.createElement(l.Ph,{className:"edu_upgrade_modal--createTeamLink--CbJUX edu_upgrade_modal--link--Toy9f",onClick:r,trusted:!0},(0,o.tx)("edu.or_create_a_new_team"))}function E(){let e=(0,_.FC)(),t=(0,n.wA)(),r=(0,s.sx)(),E=a.useCallback(()=>{t(c.Ce())},[t]),b=a.useCallback(e=>{E(),t(m.Vm({teamId:e.id}))},[t,E]),v=a.useMemo(()=>(0,p.Kg)(e),[e]);return a.useLayoutEffect(()=>{0!==v.length||r||(E(),t((0,d.Dw)({isEduTeam:!0})))},[t,v.length,E,r]),a.createElement(u.fu,{name:"Edu Team Upgrade Modal"},a.createElement(f.XV,{title:(0,o.t)("edu.upgrade_teams.headline"),onClose:E},a.createElement("div",{className:"edu_upgrade_modal--container--i-0VV"},a.createElement("p",{className:"edu_upgrade_modal--bodyText--BXu7I"},(0,o.tx)("edu.upgrade_teams.body",{link:a.createElement(l.Ph,{className:"edu_upgrade_modal--link--Toy9f",href:"/pricing",target:"_blank",trusted:!0},(0,o.tx)("edu.upgrade_teams.body_link_text"))}),v.length>1&&a.createElement(a.Fragment,null," ",(0,o.tx)("edu.upgrade_teams.body_multiple_teams"))),a.createElement(i.I,{eligibleTeams:v,selectTeam:b,showEditorCount:!1,customUpgradeText:(0,o.t)("general.next")}),!r&&a.createElement(g,{handleClose:E}))))}},67580:(e,t,r)=>{r.r(t),r.d(t,{DowngradeSurveyModal:()=>P,DowngradeSurveyModalAdmin:()=>F,DowngradeSurveyModalLeaveTeam:()=>L});var a=r(848318),n=r(301168),l=r(998568),o=r(967688),i=r(198850),s=r(989232),d=r(264478),c=r(31898),m=r(209595),u=r(890257);function _({id:e,label:t,children:r,onChange:n}){let[l,o]=a.useState(!1);return a.createElement("fieldset",{name:e},a.createElement("div",{className:"survey_option--inputContainer---R-Fh"},a.createElement(d.tB,{id:e,checked:l,onChange:e=>{o(!l),n&&n(e)}}),a.createElement("label",{className:"survey_option--label--NqXEk",htmlFor:e},t)),l&&r&&a.createElement("div",{className:"survey_option--subContainer--Omjmy"},r))}var p=r(430385),f=r(536384),g=r.n(f),E=r(156974),b=r(509567),v=r(706488);function h(e){let[t,r]=a.useState(""),n=e=>{r(e.target.value)};return e.textarea?a.createElement(v.v,{value:t,onChange:n,...e}):a.createElement(d.ks,{id:e.id,className:"survey_text_input--input--Q1W-9",placeholder:e.placeholder,maxLength:100,value:t,onChange:n})}let y="downgrade_survey_modal_component_v2--surveyQuestions--E5X6t",w="downgrade_survey_modal_component_v2--researchContact--qGc3V",T="downgrade_survey_modal_component_v2--hiddenInput--04h5p",I="downgrade_survey_modal_component_v2--radio--xvUsz",x=[{id:"brl",shorthand:"BRL"},{id:"cad",shorthand:"CAD"},{id:"eur",shorthand:"EUR"},{id:"gbp",shorthand:"GBP"},{id:"jpy",shorthand:"JPY"}];function N({id:e,shorthand:t}){return a.createElement("div",{className:"downgrade_survey_modal_component_v2--currencyContainer--CoFln"},a.createElement("p",null,(0,o.tx)(`downgrade_survey.survey_option.too_expensive.${e}`)),a.createElement("p",{className:"downgrade_survey_modal_component_v2--currencyShorthand--xhQpy"},t))}let S=[{id:"too_expensive",value:"Too expensive",children:a.createElement(function(){let e="other_currency",[t,r]=a.useState(""),n=e=>{r(e.currentTarget.id)},l=[...x.map(({id:e,shorthand:t})=>a.createElement(E.c$,{id:e,key:e,onClick:n},a.createElement(N,{id:e,shorthand:t}))),a.createElement(E.wv,{key:"separator"}),a.createElement(E.c$,{id:e,onClick:n,key:e},(0,o.tx)("downgrade_survey.survey_option.too_expensive.other_currency"))];return a.createElement("fieldset",null,a.createElement(_,{id:"currency_conversion",label:(0,o.t)("downgrade_survey.survey_option.too_expensive.currency_conversion")},a.createElement("fieldset",{className:g()({"downgrade_survey_modal_component_v2--currencySelector__other--khpqx":t===e})},a.createElement(E.Ve,{label:t.length?(0,o.t)(`downgrade_survey.survey_option.too_expensive.${t}`):(0,o.t)("downgrade_survey.survey_option.too_expensive.currency_selector"),options:l}),a.createElement("input",{id:"currency",className:T,readOnly:!0,value:t}),t===e&&a.createElement(h,{id:"currency_input",placeholder:(0,o.t)("downgrade_survey.survey_option.too_expensive.specify_currency")}))))},null),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")),r=t.find(e=>"currency_conversion"===e.id),a=t.find(e=>"currency"===e.id),n=a?.value,l=t.find(e=>"currency_input"===e.id),o=l?.value||n||void 0;return{currencyConversion:r?.checked,currency:o}}},{id:"billing_structure_unclear",value:"Billing structure is unclear"},{id:"no_longer_using_figma_products",value:"No longer using Figma's products",children:a.createElement(function(){return a.createElement("fieldset",null,a.createElement("legend",{className:"downgrade_survey_modal_component_v2--additionalQuestion--HfKNO"},(0,o.tx)("downgrade_survey.survey_option.no_longer_using_figma_products.other_products")),a.createElement(h,{id:"other_products",placeholder:(0,o.t)("downgrade_survey.survey_option.no_longer_using_figma_products.text_area")}))},null),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")).find(e=>"other_products"===e.id);return{products:t?.value||void 0}}},{id:"project_inactive",value:"Project is over or no longer active"},{id:"accidental_upgrade",value:"Did not mean to upgrade"},{id:"switching_plans",value:"Switching to a different plan",children:a.createElement(function(){let[e,t]=a.useState("");return a.createElement(a.Fragment,null,a.createElement(b.z,{value:e,onChange:e=>t(e)},a.createElement(b.Z,{className:I,value:"Starter plan"},(0,o.tx)("downgrade_survey.survey_option.switching_plans.starter_plan")),a.createElement(b.Z,{className:I,value:"Organization plan"},(0,o.tx)("downgrade_survey.survey_option.switching_plans.organization_plan")),a.createElement(b.Z,{className:I,value:"Enterprise plan"},(0,o.tx)("downgrade_survey.survey_option.switching_plans.enterprise_plan")),a.createElement(b.Z,{className:I,value:"Education plan"},(0,o.tx)("downgrade_survey.survey_option.switching_plans.education_plan"))),a.createElement("input",{id:"new_plan",className:T,readOnly:!0,value:e}))},null),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")).find(e=>"new_plan"===e.id);return{newPlan:t?.value||void 0}}}],C={id:"other",value:"Other",children:a.createElement(function(){return a.createElement(h,{className:"downgrade_survey_modal_component_v2--otherTextArea--pS5MZ",placeholder:(0,o.t)("downgrade_survey.survey_option.other.text_area"),textarea:!0})},null),getSubOptions:e=>({explanation:e.getElementsByTagName("textarea")[0].value||void 0})},k=(0,p.k4)(S).concat(C);var R=r(639088),A=r(249555);function O({onSubmit:e}){let[t,r]=a.useState([]),l=e=>{let{id:a}=e.currentTarget;t.includes(a)?r(t.filter(e=>e!==a)):r([...t,a])},i=(0,n.wA)(),p=(0,m._6)().teamId;return a.createElement(u.XV,{title:(0,o.t)("downgrade_survey.header"),fixedTop:!0,minWidth:370,maxWidth:370,onClose:()=>{i(c.Ce())},dataTestId:"downgrade-survey-modal",isCloseHidden:!0,disableClickOutsideToHide:!0},a.createElement("form",{className:"downgrade_survey_modal_component_v2--modalBody--tYceI",onSubmit:r=>{r.preventDefault();let a=Array.from(r.currentTarget.getElementsByClassName(y)[0].getElementsByTagName("fieldset")),n=t.map(e=>{let t=a.find(t=>t.name===e),{value:r,getSubOptions:n}=k.find(t=>t.id===e);return{reason:r,...n&&n(t)}}),l=r.currentTarget.getElementsByClassName(w)[0].getElementsByTagName("input")[0].checked;(0,s.trackEvent)("Team Downgrade Survey",{teamId:p,canContact:l,selectedOptions:n.map(e=>JSON.stringify(e))}),e?.(),i(c.Ce())}},a.createElement("div",{className:"downgrade_survey_modal_component_v2--exitSurvey--9HRcF"},a.createElement("fieldset",{className:y},a.createElement("legend",null,(0,o.tx)("downgrade_survey.what_made_you_cancel_your_plan")),!t.length&&a.createElement("p",{className:A.Q},(0,o.tx)("downgrade_survey.select_one")),k.map(({id:e,children:t})=>a.createElement(_,{id:e,label:(0,o.t)(`downgrade_survey.survey_option.${e}`),key:e,onChange:l},t))),a.createElement("fieldset",{className:w},a.createElement("legend",null,(0,o.tx)("downgrade_survey.research_contact")),a.createElement(_,{id:"research",label:(0,o.t)("downgrade_survey.allow_research_contact")}))),a.createElement("div",{className:"downgrade_survey_modal_component_v2--buttonRow--Y15LH"},a.createElement(d.vd,{type:"submit",disabled:!t.length,className:R.pL,autoFocus:!1},(0,o.tx)("downgrade_survey.continue")))))}function P({context:e}){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.modalShown?.data.teamId),s=(0,n.d4)(e=>e.teams[r]),d="admin"===e?(0,o.t)("downgrade_survey.go_back"):(0,o.t)("downgrade_survey.do_not_leave_team"),c="leave-team"===e?()=>{(0,l.us)("User entered leave team survey"),t(i.yH({team:s,userInitiated:!0}))}:void 0;return a.createElement(O,{cancelText:d,onSubmit:c})}function F(){return a.createElement(P,{context:"admin"})}function L(){return a.createElement(P,{context:"leave-team"})}},158342:(e,t,r)=>{r.r(t),r.d(t,{FolderBatchAbandonedDraftDeleteConfirmModal:()=>m});var a=r(848318),n=r(301168),l=r(989232),o=r(329228),i=r(314979),s=r(967688),d=r(5990),c=r(414607);function m({folders:e}){let t=(0,n.wA)(),r=(0,o.gY)(d.U),m=e=>{e.forEach(e=>{(0,l.trackEvent)("Folder Batch Abandoned Draft Delete Confirmation Click",{folderId:e.id,teamId:e.teamId,orgId:e.orgId})}),r({folderIds:e.map(e=>e.id)}).catch(()=>{t(i.s.error((0,s.t)("file_browser.api_folder.error_when_deleting")))})};return a.createElement(c.Rw,{confirmationTitle:(0,s.t)("file_browser.delete_project.title"),destructive:!0,confirmText:(0,s.t)("file_browser.batch_delete_project.generic_confirm_label"),onConfirm:()=>{m(e)}},(0,s.tx)("file_browser.batch_delete_projects.confirm_text_trash_section",{numProjects:e.length}))}},78825:(e,t,r)=>{r.r(t),r.d(t,{FolderMoveModal:()=>M});var a=r(848318),n=r(301168);r(82433);var l=r(536384),o=r.n(l),i=r(637640),s=r(410725),d=r(748008),c=r(264478),m=r(136126),u=r(755534),_=r(720522),p=r(967688),f=r(647345),g=r(31898),E=r(863270),b=r(222556),v=r(5990),h=r(672940),y=r(55116),w=r(806349),T=r(679996),I=r(386252),x=r(213374),N=r(991675),S=r(890257),C=r(698656),k=r(812051),R=r(254028);let A="folder_move--iconContainer--nXjIY file_move--iconContainer--2ExyP",O="folder_move--warningContainer--MXpOB";var P=r(555288),F=r(7452),L=r(663128),D=r(254490);function M(e){let t,r;let l=(0,n.wA)(),o=(0,k.sy)(),f=(0,n.d4)(e=>e.currentUserOrgId),A=(0,n.d4)(e=>null!=f?e.orgById[f]:null),F=(0,s.Rs)(y.AbW,{currentOrgId:f,currentTeamId:null,folderId:e.folderId}),D=(0,n.d4)(t=>t.folders[e.folderId]),[M,$]=(0,a.useState)(void 0),[j,W]=(0,a.useState)(void 0),G="loaded"===F.status?{...F.data.currentUser}:null,V=b.h.useTrackingContext({trigger:T.b.FOLDER_MOVE_MODAL}),H={},z=[],Y=(0,h.FC)();if(G){let e=[];(G.teamRoles??[]).forEach(t=>{if(t.team?.orgId===f&&!t.team?.deletedAt&&!t.pending){if(t.team?.id===D?.team_id){r=t;return}e.push(t),t.team?.workspace?.id?(H[t.team.workspace?.id]=H[t.team.workspace?.id]??[],H[t.team.workspace?.id].push(t)):t.team&&z.push(t)}});let a=G.baseOrgUser?.workspaceUsers;t=a?.find(e=>e?.isMainWorkspace)?.workspaceId}let K=()=>{l(g.Ce())},q=(e,t)=>{$(e),W(t)},J=(0,a.useCallback)(()=>{if(M&&!j){let e=(0,I.bL)(M?.id,M.orgId);i.Ay.redirect(e,"_blank")}},[M,j]),X=(0,a.useCallback)(e=>{if(!A)return;let t={workspaceId:e??x.O,onSubmitReturnToPrevView:!1};l(g.to({type:C.Uc,data:t}))},[A,l]),Q=e=>a.createElement(a.Fragment,null,e.map(e=>a.createElement(U,{team:e.team,key:e.id,selectedTeamId:M?.id,onSelectTeam:q,permissionsState:Y}))),Z=e=>a.createElement(U,{team:e.team,key:e.id,selectedTeamId:M?.id,isCurrentTeam:!0,permissionsState:Y,onSelectTeam:q});if(!D)return null;let ee=Object.keys(H).length>0,et=M&&r&&r.team.id===M.id;return a.createElement(E.fu,{name:N.e0.FILE_MOVE_MODAL,properties:V},a.createElement(S.XV,{title:(0,p.t)("file_browser.folder_move.modal_header",{folderName:D.name}),fixedTop:!0,minWidth:288,maxWidth:288,onClose:K,truncateTitleText:!0},a.createElement("div",{className:"folder_move--main--TkW9w file_move--main--fz-As"},a.createElement(u.P,{className:"folder_move--teamSectionBody--LACBL file_move--teamSectionBody--jIFZO"},a.createElement("div",{className:"folder_move--teamSection---S02k file_move--teamSection--mI5yE"},ee?(function(e,t,r){let a=t?.team?.workspace?.id??null,n=[a];return r&&r!==a&&e[r]&&n.push(r),Object.keys(e).filter(e=>e!==a&&e!==r).sort((t,r)=>{let a=e[t][0]?.team?.workspace?.name?.toLocaleUpperCase()??"",n=e[r][0]?.team?.workspace?.name?.toLocaleUpperCase()??"";return a<n?-1:a>n?1:0}).forEach(e=>{n.push(e)}),null!==a&&n.push(null),n})(H,r,t).map(e=>{if(null===e){if(z.length>0)return a.createElement(a.Fragment,{key:"other_teams_key"},a.createElement(B,{headerName:(0,p.t)("sidebar.workspaces.other_teams"),onCreateNewTeamClick:X,workspaceId:null}),null!=r&&r.team?.workspace?.id==null&&Z(r),Q(z))}else if(H[e]){let t=H[e],n=t?t[0].team?.workspace??null:null;return a.createElement(a.Fragment,{key:e},a.createElement(B,{headerName:n?.name??"",onCreateNewTeamClick:X,workspaceId:n?.id??null}),null!=r&&r.team?.workspace?.id===e&&Z(r),Q(t))}}):a.createElement(a.Fragment,null,A&&a.createElement(B,{key:"org_teams_header",headerName:A.name,onCreateNewTeamClick:X,workspaceId:null}),null!=r&&Z(r),Q(z)))),a.createElement("div",{className:"x78zum5 xdt5ytf xv42yna"},M&&!j&&a.createElement("div",{className:O},a.createElement("div",{className:"folder_move--warningBanner--Tnfff"},a.createElement("div",{className:"folder_move--warningSectionIcon--gOcDL"},a.createElement(_.B,{svg:L.A})),a.createElement("div",null,(0,p.tx)("file_browser.folder_move.move_project_no_edit_access_warning"),a.createElement("div",{className:"folder_move--warningCTALink--f74xo",onClick:J,role:"link",tabIndex:0},(0,p.tx)("file_browser.folder_move.view_team"),a.createElement("div",{className:"folder_move--arrowRightIcon--xIk7X"},a.createElement(_.B,{svg:P.A})))))),(o||(0,R.aI)())&&!A&&M&&j&&"loaded"===F.status&&F.data?.project?.hasPublishedSite.status==="loaded"&&(0,d.oA)(F.data?.project?.hasPublishedSite)&&a.createElement("div",{className:O},a.createElement(m._,{dataTestId:"project-move-site-unpublish-banner",color:m.S.ERROR,text:(0,p.t)("file_browser.file_move.sites_unpublished_on_project_move_warning")})),a.createElement("div",{className:"folder_move--footer--jcEsZ file_move--footer--pBClJ"},a.createElement(c.nR,{onClick:K},(0,p.tx)("modal.cancel")),a.createElement(c.vd,{onClick:()=>{null!=M&&D?l((0,v.Nr)({folder:(0,w.Bp)(D),team:M,onSuccess:K})):K()},disabled:void 0===M||!j||!!et},(0,p.tx)("file_browser.folder_move.move_project")))))))}function B(e){let[t,r]=(0,a.useState)(!1);return a.createElement("div",{className:"folder_move--teamsHeaderRow--qZfbl text--fontPos12--YsUAh text--_fontBase--QdLsd",onMouseMove:()=>r(!0),onMouseLeave:()=>r(!1)},a.createElement("div",null,e.headerName),t&&a.createElement(f.f,{data_tooltip:(0,p.t)("file_browser.inline_team_creation.button_text"),data_onboarding_key:"new-team-button",innerText:(0,p.t)("file_browser.inline_team_creation.button_text"),onClick:()=>{e.onCreateNewTeamClick(e.workspaceId)}}))}function U(e){let{team:t}=e,r=t?.canEdit??!1;if(null==t)return a.createElement(a.Fragment,null);let n=o()(["folder_move--teamTitle--PwZow file_move--teamTitle--1IL8S text--fontPos12--YsUAh text--_fontBase--QdLsd",e.isCurrentTeam&&!e.selectedTeamId||e.selectedTeamId===e.team?.id?"folder_move--selectedTeamTitle---C1u4":""]);return a.createElement("div",{className:n,onClick:()=>{e.onSelectTeam&&e.onSelectTeam(t,r)},role:"button",tabIndex:0},a.createElement("div",{className:A},a.createElement(_.B,{svg:e.isCurrentTeam?F.A:D.A})),a.createElement("div",{className:"folder_move--teamTitleRow--6MpKM file_move--teamTitleRow--hMU87"},a.createElement("div",{className:"folder_move--teamName--fvmi0 file_move--teamName--Jmsoa"},t.name)),e.selectedTeamId===t.id&&!r&&a.createElement("div",{className:A},a.createElement(_.B,{svg:L.A})))}},617640:(e,t,r)=>{r.r(t),r.d(t,{FolderPermanentlyDeleteConfirmModal:()=>b});var a=r(848318),n=r(301168),l=r(162796),o=r(309488),i=r(93275),s=r(531788),d=r(989232),c=r(329228),m=r(297638),u=r(314979),_=r(967688),p=r(413798),f=r(5990),g=r(249726),E=r(735131);function b(e){var t;let r=(0,n.wA)(),b=l.hS(e),v=(0,c.gY)(f.Q4),h=(0,E.x)(e.folder.id,!0),y=a.createElement("span",{className:m.s.fontBold.$},(0,g.CI)(e.folder)),w=(0,_.t)("file_browser.delete_project.delete_project"),T="loaded"!==h.status?(0,_.tx)("file_browser.delete_project.generic_confirm_text_permanently_delete_folder",{folderName:y}):0===(t=h.data)?(0,_.tx)("file_browser.delete_project.zero_file_confirm_text_permanently_delete_folder",{folderName:y}):(0,_.tx)("file_browser.delete_project.plural_files_confirm_text_permanently_delete_folder",{folderName:y,numFiles:(0,p.t)(t)}),I="loaded"===h.status&&0===h.data?(0,_.tx)("file_browser.delete_project.once_deleted_this_project_can_no_longer_be_restored"):(0,_.tx)("file_browser.delete_project.once_deleted_this_project_and_its_files_can_no_longer_be_restored");return a.createElement(o.bL,{manager:b,width:"lg"},a.createElement(i.vo,null,a.createElement(i.Y9,null,a.createElement(i.hE,null,(0,_.tx)("file_browser.trash_project.delete_project_forever"))),a.createElement(i.nB,null,a.createElement("div",{className:m.s.mb16.$},T),a.createElement("div",null,I)),a.createElement(i.wi,null,a.createElement(i.jk,null,a.createElement(s.$n,{variant:"secondary",onClick:e.onClose},(0,_.tx)("modal.cancel")),a.createElement(s.$n,{variant:"destructive",onClick:()=>{(0,d.trackEvent)("Folder Permanently Delete Confirmation Click",{folderId:e.folder.id,teamId:e.folder.teamId,orgId:e.folderOrgId}),v({folderId:e.folder.id}).catch(()=>{r(u.s.error((0,_.t)("file_browser.api_folder.error_when_permanently_deleting_folder")))}),e.onClose()}},w)))))}},563055:(e,t,r)=>{r.r(t),r.d(t,{FolderTrashConfirmModal:()=>I});var a=r(848318),n=r(301168),l=r(660376),o=r(162796),i=r(93275),s=r(143823),d=r(309488),c=r(861424),m=r(531788),u=r(989232),_=r(329228),p=r(136126),f=r(297638),g=r(314979),E=r(967688),b=r(498808),v=r(413798),h=r(31898),y=r(5990),w=r(249726),T=r(735131);function I(e){let{folder:t}=e,r=o.hS(e),n=(0,T.N)(t.id),l="loaded"===n.status?a.createElement(x,{...e,numFiles:n.data.fileCount,hasPublishedSite:n.data.publishedSiteCount>0}):a.createElement(i.nB,{padding:{top:"1rem",bottom:"1rem"}},a.createElement("div",{className:f.s.flex.justifyCenter.$,"data-testid":"loading-spinner-container"},a.createElement(s.k,null)));return a.createElement(d.bL,{manager:r,width:"lg",height:"fixed"},a.createElement(i.vo,null,a.createElement(i.Y9,null,a.createElement(i.hE,null,(0,E.t)("file_browser.trash_project.move_project_to_trash"))),l))}function x(e){let t=(0,n.wA)(),r=(0,c.X)(),{folder:o,numFiles:s,hasPublishedSite:d}=e,T=a.createElement("span",{className:f.s.fontBold.$},(0,E.tx)("file_browser.tool_bar.trash")),I=(e=>{switch(e){case 0:return(0,E.t)("file_browser.trash_project.generic_confirm_label");case 1:return(0,E.t)("file_browser.trash_project.one_file_confirm_label");default:return(0,E.t)("file_browser.trash_project.plural_files_confirm_label",{numFiles:(0,v.t)(e)})}})(s),x=a.createElement("span",{className:f.s.fontBold.$},(0,w.CI)(o)),N=(e=>{switch(e){case 0:return(0,E.tx)("file_browser.trash_project.zero_file_confirm_text_trash_folder",{folderName:x});case 1:return(0,E.tx)("file_browser.trash_project.one_file_confirm_text_trash_folder",{folderName:x});default:return(0,E.tx)("file_browser.trash_project.plural_files_confirm_text_trash_folder",{folderName:x,numFiles:(0,v.t)(e)})}})(s),S=(0,_.gY)(y.Ct),C=e=>{(0,u.trackEvent)("Folder Trash Confirmation Click",{folderId:e.id,teamId:e.teamId,orgId:e.orgId}),S({folderId:e.id}).catch(()=>{t(g.s.error((0,E.t)("file_browser.api_folder.error_when_moving_to_trash")))}),t(h.Ce())};return a.createElement(a.Fragment,null,a.createElement(i.nB,null,e.folderState&&a.createElement("div",{className:f.s.mb12.$},a.createElement(p._,{dataTestId:"trash-folder-warning-banner",color:p.S.ERROR,text:(e=>{switch(e){case b.cm.PENDING_ASSET_TRANSFER:return(0,E.tx)("file_browser.trash_project.warning.pending_asset_transfer");case b.cm.PENDING_RESOURCE_CONNECTION:return(0,E.tx)("file_browser.trash_project.warning.pending_resource_connection");case b.cm.ACTIVE_RESOURCE_CONNECTION:return(0,E.tx)("file_browser.trash_project.warning.active_resource_connection");default:(0,l.xb)(e)}})(e.folderState)})),a.createElement("div",{className:f.s.mb12.$},N),d&&a.createElement("div",{className:f.s.mb12.$},(0,E.tx)("file_browser.trash_project.published_site_warning")),a.createElement("div",null,(0,E.tx)("file_browser.trash_project.description_restore",{trashStyled:T}))),a.createElement(i.wi,null,a.createElement(i.jk,null,a.createElement(m.$n,{variant:"secondary",onClick:()=>{e.onClose()},ref:r},(0,E.t)("modal.cancel")),a.createElement(m.$n,{variant:"destructive",onClick:()=>C(o)},I))))}},743002:(e,t,r)=>{r.r(t),r.d(t,{TeamChangePaymentModal:()=>h});var a=r(848318),n=r(301168),l=r(536384),o=r.n(l),i=r(14323),s=r(264478),d=r(345964),c=r(297638),m=r(967688),u=r(31898),_=r(708896),p=r(656320),f=r(773293),g=r(890257),E=r(840026),b=r(559083);function v({currency:e,customerInfo:t,defaultCountry:r,estimatedChargeCents:l,isReactivating:v,canSeeBillingAddressExp:h}){let y=v?(0,m.t)("change_payment.success.successfully_reactivated_subscription"):(0,m.t)("change_payment.success.successfully_updated_your_payment_method"),w=(0,n.d4)(e=>(0,p.Np)(e,{view:"teamAdminConsole",teamId:t.teamId,teamAdminConsoleViewTab:f.Iv.SETTINGS})),{createPaymentElement:T,unmountPaymentElement:I,savePayment:x,billingAddress:N,updateBillingAddress:S,nameOnPaymentMethod:C,setNameOnPaymentMethod:k,paymentMethodType:R,error:A}=(0,_.lo)({setupIntentParams:{redirect_url:w,subtotal_estimate:l,success_message:y,currency:e},paymentFlowSource:_.wn.PRO_CHANGE_PAYMENT,customerInfo:t,defaultCountry:r,currency:e,canSeeBillingAddressExp:h,isCheckout:!1}),[O,P]=a.useState(!1),[F,L]=a.useState(!1),[D,M]=a.useState(window.innerHeight),B=(0,n.wA)(),U=A?.code===_.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,$=()=>B(u.Ce());(0,i.P)(({height:e})=>{M(e)});let j=async e=>{e&&e.preventDefault(),L(!0),await x(),L(!1)};return a.createElement(g.XV,{title:h?(0,m.t)("change_payment.update_payment_details"):(0,m.t)("change_payment.enter_payment_method"),onClose:$,maxWidth:465,headerSize:"large"},a.createElement("div",{className:o()({[b.$J]:!O,[b.Un]:U})},a.createElement("form",{onSubmit:j},a.createElement("div",{className:b.KJ,style:{maxHeight:Math.min(D-49-65,652)}},O&&h&&a.createElement("div",{className:c.s.mb16.$},a.createElement("label",{htmlFor:"updatePaymentDetails",className:c.s.colorTextSecondary.$},(0,m.tx)("change_payment.update_payment_details_description_default"))),a.createElement(E.F,{billingAddress:N,canSeeBillingAddressExp:h,createPaymentElement:T,error:A,nameOnPaymentMethod:C,paymentElementEventHandlers:{ready:()=>P(!0)},paymentFlow:_.wn.PRO_CHANGE_PAYMENT,paymentMethodType:R,unmountPaymentElement:I,updateBillingAddress:S,updateNameOnPaymentMethod:k})),O&&!U&&a.createElement("div",{className:b.UD},F&&a.createElement(d.kt,{className:b.u1}),a.createElement(s.tM,{onClick:$},(0,m.tx)("change_payment.cancel")),a.createElement(s.vd,{tabIndex:0,type:"submit",disabled:F},(0,m.tx)("change_payment.save")))),U&&a.createElement(s.tM,{onClick:$},(0,m.tx)("change_payment.close_window"))))}function h({currency:e,customerInfo:t,defaultCountry:r,monthlySub:n,annualSub:l,isReactivating:o,canSeeBillingAddressExp:i}){let s=n?.estimated_amount_due??0,d=Math.max(l?.estimated_amount_due??0,s);return a.createElement(v,{currency:e,customerInfo:t,defaultCountry:r,estimatedChargeCents:d,isReactivating:o,canSeeBillingAddressExp:i})}},230242:(e,t,r)=>{r.r(t),r.d(t,{ChangeVatGstIdModal:()=>b});var a=r(848318),n=r(301168),l=r(536384),o=r.n(l),i=r(410725),s=r(264478),d=r(136126),c=r(967688),m=r(31898),u=r(318147),_=r(55116),p=r(890257),f=r(430526),g=r(289198);function E(e,t){return e&&"loaded"===t.status?t.data.org:e||"loaded"!==t.status?null:t.data.team}let b=a.memo(function(e){let t=(0,n.wA)(),{updateVatGstId:r}=e,l=!!e.org?.id,b=(0,i.Rs)(_.Wt6,{orgId:e.org?.id||""},{enabled:l}),v=(0,i.Rs)(_.xS7,{teamId:e.team?.id||""},{enabled:!l}),h=l?b:v,y=E(l,h),w=y?.taxIdVerificationStatus,[T,I]=a.useState(),[x,N]=a.useState(""),[S,C]=a.useState(""),[k,R]=a.useState(!1),[A,O]=a.useState({country:"",state:""}),[P,F]=a.useState(!1);a.useEffect(()=>{let e=y?.taxInfo;if(!P&&"loaded"===h.status&&e?.status==="loaded"){let t=E(l,h),r=e?.data;N(t?.vatGstId||""),C(r?.regionalVatGstId||""),R(r?.canUpdateRegionalVatGst||!1),O({country:r?.country||"",state:r?.state||""}),F(!0)}},[l,h,P,y?.taxInfo]);let L=()=>{t(m.Ce())};return a.createElement(p.XV,{onClose:L,title:(0,c.t)("change_vat_gst_id.input_id"),minWidth:344,maxWidth:344,fixedTop:!0},T&&a.createElement("div",{className:"change_vat_gst_id_modal--errorBanner--sqxNt","data-testid":"change-vat-gst-id-error"},a.createElement(d._,{color:d.S.ERROR,rounded:!1,text:T})),w===u.kI.VERIFIED&&a.createElement("div",{"data-testid":"change-vat-gst-id-information"},a.createElement(d._,{color:d.S.INFORMATION,rounded:!1,text:(0,c.t)("change_vat_gst_id.tax_id_verification_succeeded")})),w===u.kI.UNVERIFIED&&a.createElement("div",{"data-testid":"change-vat-gst-id-warning"},a.createElement(d._,{color:d.S.WARNING,rounded:!1,text:(0,c.t)("change_vat_gst_id.tax_id_verification_failed")})),a.createElement("div",{className:g.Dy},a.createElement("p",{className:"change_vat_gst_id_modal--description--6gdSL"},(0,c.tx)("change_vat_gst_id.description")),a.createElement("form",{onSubmit:e=>{e.preventDefault(),r(x,e=>I(e),k?S:"").then(e=>{e&&L()})},"data-testid":"change-vat-form"},P&&a.createElement(f.A,{onChange:N,country:A.country,vatId:x,isCommunityCheckout:!1}),k&&a.createElement(f.A,{onChange:C,country:A.country,region:A.state,vatId:S,isCommunityCheckout:!1,variant:"regional"}),a.createElement("div",{className:o()(g.v0,g.hF)},a.createElement(s.vd,{className:g.pL,type:"submit",disabled:!P},(0,c.tx)("change_vat_gst_id.save_id"))))))})},387213:(e,t,r)=>{r.r(t),r.d(t,{ConfirmDowngradeModal:()=>f});var a=r(848318),n=r(301168),l=r(536384),o=r.n(l),i=r(264478),s=r(967688),d=r(837593),c=r(31898),m=r(679617),u=r(890257),_=r(289198);let p=a.memo(function(e){let t=(0,n.wA)(),{teamId:r,billingEndDate:l}=e.modalShown.data,p=e.teams[r],f=()=>{t(c.Ce())},g=l?a.createElement(a.Fragment,null,(0,s.tx)("confirm_downgrade.team_name_will_be_downgraded_to_our_free_starter_plan",{teamName:p?.name})," ",(0,s.tx)("confirm_downgrade.any_seats_you_add",{billingEndDate:l})):(0,s.tx)("confirm_downgrade.on_your_next_billing_date_team_name_will_be_downgraded_to_our_free_starter_plan",{teamName:p?.name});return a.createElement(u.XV,{onClose:f,title:(0,s.t)("confirm_downgrade.cancel_professional_plan"),minWidth:344,maxWidth:344,dataTestId:"downgrade-confirmation-modal",fixedTop:!0},a.createElement("div",{className:_.Dy},a.createElement("p",null,g),a.createElement("div",{className:o()(_.v0,_.hF)},a.createElement(i.tM,{onClick:f},(0,s.tx)("confirm_downgrade.go_back")),a.createElement(i.qM,{className:_.pL,onClick:()=>{t(m.Wc({teamId:r})),t((0,c.to)({type:(0,d.l)()}))}},(0,s.tx)("confirm_downgrade.finish_cancellation")))))});function f(e){return a.createElement(p,{...e})}},849045:(e,t,r)=>{r.r(t),r.d(t,{TeamPermissionsModal:()=>Q});var a=r(848318),n=r(301168),l=r(176677),o=r(162796),i=r(309488),s=r(93275),d=r(989232),c=r(238444),m=r(857607),u=r(879263),_=r(345964),p=r(967688),f=r(407639),g=r(31898),E=r(863270),b=r(815078),v=r(700624),h=r(125761),y=r(318147),w=r(677334),T=r(474132),I=r(280255),x=r(89140),N=r(860790),S=r(588014),C=r(94831),k=r(825241),R=r(693476),A=r(948770),O=r(429446),P=r(36983),F=r(469999),L=r(256347),D=r(42701),M=r(155865),B=r(720522),U=r(125952),$=r(671e3),j=r(864848),W=r(372455),G=r(70690),V=r(401431),H=r(442539);function z(e){let t=e.canAdmin,r=a.createElement(B.B,{className:W.wk,svg:V.A});e.sharingAudienceControl===y.PQ.ORG_EDIT||e.sharingAudienceControl===y.PQ.ORG_VIEW?r=a.createElement("div",{className:W.AA},a.createElement(B.B,{svg:H.A})):(e.sharingAudienceControl===y.PQ.WORKSPACE_EDIT||e.sharingAudienceControl===y.PQ.WORKSPACE_VIEW)&&(r=a.createElement("div",{className:W.AA},e.workspace&&a.createElement(U.z6,{entity:e.workspace,size:24})));let n=e.sharingAudienceControl===y.PQ.INVITE_ONLY&&e.isTeamOrgBrowsable,l=n?W.Fl:W.Jt;return a.createElement("div",{className:t?l:W.zn,onClick:t?()=>e.changeModalView(1):void 0,role:"button","data-onboarding-key":$.F,tabIndex:0},r,a.createElement("div",{className:W.$S},a.createElement("div",null,e.sharingAudienceControl&&(0,j.ET)(e.sharingAudienceControl,e.org,e.workspace),n&&a.createElement("div",{className:W.JZ},(0,p.t)("team_creation.anyone_can_find_this_team"))),e.org&&a.createElement("div",{className:W.j7,"data-onboarding-key":$.F},e.sharingAudienceControl&&(0,j.mi)(e.sharingAudienceControl),t&&a.createElement(B.B,{svg:G.A,className:W.$w}),t&&a.createElement($.j,null))))}var Y=r(452988),K=r(989170),q=r(288683),J=r(538002);let X=a.memo(function({roles:e,virtualItems:t,totalSize:r,user:n,parentOrg:l,team:o,teamOrgDomains:i,canAdmin:s,canEdit:d,isCurrentUserTeamOwner:c}){let m=a.useMemo(()=>({team:o,type:y.vt.TEAM}),[o]);return a.createElement("div",{style:{height:`${r}px`,position:"relative"}},t.map(t=>{let r=t.index,u=e[r],_=(0,I.OL)(u,s,d);return a.createElement(K.O,{key:`role-row-${r}`,canEditRole:_,canMakeAdmin:s,currentOrg:l,currentUserOrgId:l?.id??null,isOwnerOfResource:c,orgDomains:i,readOnlyOverrideWarningMessage:null,resource:m,resourceName:o.name,role:u,user:n,virtualRowItem:t})}))});function Q(e){let t,{teamId:r,initialInviteLevel:B,prepopulateEmail:U,initialView:$}=e,j=(0,n.wA)(),W=(0,h.Pc)(),G=(0,n.d4)(e=>e.autocomplete),V=(0,n.d4)(e=>e.contacts),H=(0,n.d4)(e=>e.dropdownShown),K=w.M4.Team.useValue(r).data,Q=(0,v.dr)(r),Z=(0,v.eb)(r);(0,u.oY)("loaded"===Q.status&&"loaded"===Z.status,e=>{let t=Z.data?.length??0,r="unknown";r=t<=100?"small":t<=300?"medium":"large",(0,d.trackEvent)("share_modal_latency",{latency_ms:e,modal_type:"team",is_outlier:e>500,role_size:r},{forwardToDatadog:!0})});let ee=Q.data,et=ee&&ee.org,er=ee&&ee.teamSharingSettings,ea=et?et.id:null,en=ee&&ee.workspace,el=et&&et.org_domains?et.org_domains:S.ls,eo=a.useMemo(()=>Z.data?.sort((e,t)=>e.pending===t.pending?q.E4(e,V).toLocaleLowerCase()<q.E4(t,V).toLocaleLowerCase()?-1:1:e.pending?1:-1)??[],[V,Z]),ei=ee&&ee.pendingTeamRoleRequests?ee.pendingTeamRoleRequests:[],{default:es,inviteLevel:ed,setInviteLevel:ec}=(0,v.oU)({initialValue:B,teamId:r,teamPermissions:ee}),em=a.useMemo(()=>{let e=[];return ee?.canAdmin&&e.push(C.e6.ADMIN),ee?.canEdit&&e.push(C.e6.EDITOR),ee?.canRead&&e.push(C.e6.VIEWER),e},[ee]),{validateToken:eu,searchResultToken:e_}=(0,b.u)({parentOrg:et,prepopulatedEmail:U,orgDomains:el}),ep=e=>{let t=(0,k.Z)(e);j((0,x.rq)({emails:t,resourceType:y.vt.TEAM,resourceIdOrKey:r,level:ed,emailsToExclude:(0,N.bp)(V.usersByEmail,W,eo),source:"team_share_modal",orgName:et?et.name:void 0,teamId:r}))},ef=()=>{j(g.Ce()),j(f.cL())},[eg,eE]=a.useState($||0),eb=()=>0===eg?a.createElement("div",{className:J.DA},a.createElement("p",null,(0,p.tx)("team_view.team_permissions_modal.invite_other_members",{teamName:K?.name??""}))):a.createElement(L.w,{title:(0,p.t)("team_view.team_permissions_modal.share_settings"),onClick:()=>eE(0)}),ev=!!K&&!K.org_id,eh=o.hS(e),{sharingSuggestions:ey,sharingSuggestionIdsToExclude:ew,sharingSuggestionEmailsToExclude:eT}=(0,D.$)({orgId:ea,teamId:r,contacts:V.usersByEmail,roles:eo,user:W,autocompleteTokens:G.tokens}),eI=a.useCallback(()=>36,[]),ex=a.useRef(null),eN=(0,l.z)({size:eo.length,parentRef:ex,estimateSize:eI,overscan:10,paddingStart:0});return t=K&&ee?0===eg?ee?a.createElement(a.Fragment,null,a.createElement("div",{key:"container",onKeyDown:e=>{e.keyCode!==m.Uz.ESCAPE&&e.stopPropagation()}},ev&&a.createElement(a.Fragment,null,a.createElement(Y.i,{includeCopyLinkButton:!0,teamId:r,dropdownShown:H,initialInviteLevel:es,teamPermissions:{canAdmin:!!ee?.canAdmin,canEdit:!!ee?.canEdit}}),a.createElement("div",{className:J.Vq},(0,p.tx)("team_view.team_permissions_modal.invite_by_email"))),!!ee?.canAdmin&&a.createElement(F.$i,{teamId:r,teamRoleRequests:ei,teamRoles:eo}),(0,O.r)(W)?a.createElement(O.X,{resourceType:"team"}):a.createElement(a.Fragment,null,a.createElement("div",{className:J.Zk},a.createElement(R.e,{SearchResultComponent:A.o,TokenComponent:A.g,autocomplete:G,buttonText:(0,p.t)("team_view.team_permissions_modal.invite"),dispatch:j,dropdownKey:"permissions-invite-dropdown",dropdownShown:H,fixedAutocompleteResults:!0,getSearchResults:e=>(0,N.Wj)(e,V.usersByEmail,W,eo,ea,r,null,{inviteLevel:ed,source:"team-permissions-modal"}),getSelectText:I.C1,hideDropdownOnEmpty:!0,inviteLevel:ed,joinLinkShown:ev,onHideModal:ef,onInviteLevelChange:ec,onSubmit:e=>{if(et&&et.domain_capture&&el&&el.domains.length>0){let t=(0,k.Z)(e).filter(e=>(0,c.xf)(e)&&!(0,T.H_)(el.domains,e));if(et?.invite_whitelist_guest_invite_setting==null&&t.length>0){j(g.to({type:P.F,data:{emails:t,onConfirm:()=>{ep(e)},popStack:!0,orgName:et.name}}));return}}ep(e)},options:em,placeholderText:(0,p.t)("team_creation.add_a_name_or_email"),searchResultToken:e_,shouldAutoFocus:!ev,validateToken:eu,validateTokensAsEmail:!0})),a.createElement(D.t,{suggestions:ey??void 0,autocomplete:G,searchResultToken:e_,resourceType:"team",resourceId:r,idsToExclude:ew??void 0,emailsToExclude:eT??void 0})),et&&a.createElement("div",{className:J.st,ref:ex},a.createElement("div",{className:J.d3},a.createElement("div",{className:J.eF},(0,p.t)("file_permissions_modal.who_has_access")),a.createElement(z,{team:K,workspace:en,org:et,changeModalView:eE,sharingAudienceControl:er?.sharingAudienceControl,isTeamOrgBrowsable:er?.orgBrowsable,canAdmin:!!ee?.canAdmin}),a.createElement(X,{canAdmin:!!ee?.canAdmin,canEdit:!!ee?.canEdit,isCurrentUserTeamOwner:!!ee?.isOwner,parentOrg:et,roles:eo,team:K,teamOrgDomains:el,totalSize:eN.totalSize,user:W,virtualItems:eN.virtualItems}))))):a.createElement("div",{className:J.Lq},a.createElement(_.qc,null)):et?er&&a.createElement(M.nH,{team:K,workspace:en||void 0,org:et,teamSharingSettings:er,hideModal:ef,goBack:()=>eE(0)}):a.createElement(a.Fragment,null):a.createElement("div",{className:J.Lq},a.createElement(_.qc,null)),a.createElement(E.fu,{name:"Share Modal",properties:{resourceType:y.vt.TEAM,resourceId:r}},a.createElement(i.bL,{manager:eh,width:"lg"},a.createElement(s.vo,null,a.createElement(s.Y9,null,a.createElement(s.hE,null,eb())),a.createElement(s.nB,null,t))))}},801639:(e,t,r)=>{r.r(t),r.d(t,{TeamRenameModal:()=>d});var a=r(848318),n=r(301168),l=r(967688),o=r(705693),i=r(386252),s=r(224191);function d({team:e}){let t=(0,n.wA)();return a.createElement(s.c,{initialName:e.name,maxLength:i.qg,placeholder:(0,l.t)("resource_rename_modal.team.placeholder"),submitText:(0,l.t)("resource_rename_modal.team.submit"),onRename:r=>t((0,o.IA)({team:e,name:r}))})}},663867:(e,t,r)=>{r.d(t,{FileBrowserView:()=>b4});var a=r(848318),n=r(301168),l=r(19180),o=r(311129),i=r(942744),s=r(29188),d=r(637640),c=r(359822),m=r(865114),u=r(410725),_=r(329228),p=r(611057),f=r(238462),g=r(474337),E=r(656329),b=r(227276),v=r(217172),h=r(943845),y=r(621603),w=r(627416),T=r(406509),I=r(660376),x=r(297638),N=r(967688),S=r(87463),C=r(830344),k=r(247698),R=r(361397),A=r(398661),O=r(857607),P=r(146968),F=r(439525),L=r(938982),D=r(536384),M=r.n(D),B=r(992611),U=r(447651),$=r(740495),j=r(353231),W=r(983178),G=r(5990),V=r(353806),H=r(180294),z=r(131650),Y=r(125761),K=r(819624),q=r(222565),J=r(235169),X=r(282631),Q=r(748008),Z=r(264478),ee=r(851861),et=r(345964),er=r(755534),ea=r(149841),en=r(720522),el=r(744577),eo=r(382902),ei=r(918777),es=r(246508),ed=r(957872),ec=r(34542),em=r(517776),eu=r(403014),e_=r(263336),ep=r(391301),ef=r(556049),eg=r(136169);let eE="seen_org_admin_moved_unassigned_drafts_onboarding",eb=(0,ei.A)("2024-10-15").startOf("day"),ev=(0,em.r1)(eE);function eh(){let e=(0,eo.md)(ev),{show:t,isShowing:r,complete:l}=(0,ec.e)({overlay:eg.rv,priority:e_.N.DEFAULT_MODAL},[e]),o=(0,n.d4)(e=>(0,eu.xw)(e)),i=o?.created_at,s=!!i&&(0,ei.A)(i).isSameOrAfter(eb);return(0,c.h)(()=>{t({canShow:e=>!(e||s)})}),a.createElement(ep.rq,{arrowPosition:ef.F_.LEFT_TITLE,clickOutsideToHide:!0,description:(0,N.tx)("org_admin_onboarding.tooltip.moved_unassigned_drafts.body"),isShowing:r,onClose:l,primaryCta:{label:(0,N.tx)("general.got_it"),type:"button",onClick:l,ctaTrackingDescriptor:ed.c.DONE},secondaryCta:{label:(0,N.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/4420549259799",ctaTrackingDescriptor:ed.c.LEARN_MORE},shouldCenterArrow:ef.EL.FALLBACK,targetKey:es.sm,title:(0,N.tx)("org_admin_onboarding.tooltip.moved_unassigned_drafts.title"),trackingContextName:es.o8,userFlagOnShow:eE})}var ey=r(280255),ew=r(474935),eT=r(382293);function eI({project:e}){let t=(0,Y.iZ)(),r=(0,H.dq)(),a=(0,n.d4)(e=>e.currentTeamId),l="drafts"===e?r:e.team?.org?.id,o="drafts"===e?a:e.team?.id,i=(0,eT.vt)(o),s=(0,ew.jn)();return!(0,ey.R$)(t,l)&&!E.nW&&!(i||s)}var ex=r(228921),eN=r(828432),eS=r(453370),eC=r(209595);function ek(){let e=(0,n.wA)(),t=(0,eC.z3)();return a.createElement(eN.SidebarRow,{onClick:()=>{e(eS.$T({view:"recentsAndSharing"})),e(eS.Oe({clickedResourceType:"recentsAndSharing"}))},isSelected:"recentsAndSharing"===t,icon:a.createElement(ex.a,null),text:a.createElement(S.E,{truncate:!0},(0,N.tx)("sidebar.recents"))})}var eR=r(864907),eA=r(533737),eO=r(174882),eP=r(672940),eF=r(318147),eL=r(474132),eD=r(590705),eM=r(172050),eB=r(190243),eU=r(596510),e$=r(904337),ej=r(52495),eW=r(635600),eG=r(55116),eV=r(138528),eH=r(850768),ez=r(773293),eY=r(370715);let eK=(0,em.r1)("seen_connected_projects_admin_settings_overlay"),eq="connect_admin_settings_onboarding_key";function eJ(e){let t=(0,eo.md)(eK),{show:r,isShowing:n,complete:l}=(0,ec.e)({overlay:eg.kBq,priority:e_.N.DEFAULT_MODAL},[t]);return(0,c.h)(()=>{r({canShow:e=>!e})}),a.createElement(ep.rq,{arrowPosition:ef.F_.LEFT_TITLE,description:a.createElement("p",null,(0,N.tx)("resource_connection.onboarding.use_admin_settings_to_see_all_your_connected_projects")),emphasized:!0,isShowing:n,onClose:l,primaryCta:{label:(0,N.tx)("resource_connection.onboarding.show_me"),type:"button",onClick:()=>{e.openConnectedProjectsTab(),l()},ctaTrackingDescriptor:ed.c.DONE},targetKey:eq,trackingContextName:"Connected Projects Admin Settings Onboarding",width:350,zIndex:eY.R.MODAL})}function eX(e){let t=(0,n.wA)(),r=(0,eV.T5)("GoToAdminRow").unwrapOr(null),o=(0,u.Rs)(eG.sMZ,{name:"initiated_first_resource_connection"}),i=a.useMemo(()=>"loaded"===o.status&&!!o.data?.currentUser?.userFlagByName,[o])&&(0,l.k)().fc_initial_onboarding_enabled&&(r?.tier===eF.Ag.PRO||r?.tier===eF.Ag.ORG||r?.tier===eF.Ag.ENTERPRISE),s=a.createElement("div",{className:x.s.h24.w24.$},a.createElement(ej.I,null)),d=a.createElement(eQ,{badge:e.badge});return a.createElement(a.Fragment,null,a.createElement("div",{className:"go_to_admin_row--goToAdminRow--OPVDe"},a.createElement(eN.SidebarRow,{icon:s,text:a.createElement("div",{className:x.s.pr36.$,"data-onboarding-key":e.dataOnboardingKey},a.createElement(S.E,{truncate:!0},(0,N.tx)("sidebar.admin_dashboard"))),isSelected:e.isSelected,onClick:e.onClick,badge:d,dataTestId:e.dataTestId,"data-onboarding-key":eq})),i&&a.createElement(eJ,{openConnectedProjectsTab:()=>{r?.type===eF.OL.TEAM?t(eS.$T({view:"teamAdminConsole",teamId:r?.key.parentId??"",teamAdminConsoleViewTab:ez.Iv.CONTENT,teamAdminConsoleViewSecondaryTab:ez.F9.CONNECTED_PROJECTS})):t(eS.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:eH.J7.CONTENT,orgAdminSettingsViewSecondaryTab:eH.SN.CONNECTED_PROJECTS}))}}))}function eQ(e){return a.createElement(a.Fragment,null,a.createElement("div",{className:"go_to_admin_row--badgeContainer--U08cW"},e.badge),a.createElement("div",{className:"go_to_admin_row--iconContainer--tEzjQ"},a.createElement(eW.a,null)))}var eZ=r(421724),e0=r(980334),e1=r(637603),e2=r(738105),e4=r(359052),e8=r(860145),e5=r(28351);function e3(e){let t=(0,n.wA)(),r=e.orgUser.permission===eF._D.ADMIN,l=(0,e1.RG)(),o=(0,e1.MX)(),{groupsUserIsAdminOf:i}=(0,e1.EQ)(o,e.orgUser.user_id,!r),s=(0,eB.Xf)(e.org.id),d="loaded"===s.status?s.data?.invoices??[]:void 0;a.useEffect(()=>{t(eZ.Jt({forceRefetch:!1}))},[t,e.org.id]);let{groupsToReview:c}=(0,e1.Cz)(i,d),m=i[0]?.id,u=e.org.bigma_enabled&&l&&!!m,_=(0,K.NJ)(e.org.id).data??[],p=e.org.bigma_enabled&&_.length>0,f=(0,eU.ZY)({isIntendedAudience:e.org.bigma_enabled&&!r});if(!(r||u||p))return null;let g=function(e){switch(e.view){case"orgAdminSettings":case"billingGroupDashboard":return!0;case"licenseGroup":return e.subView===e8.GN.ADMIN;case"workspace":return e.subView===e5.V0.ADMIN;default:return!1}}(e.selectedView),E=a.createElement(e$.Mn,{org:e.org,orgUser:e.orgUser,selectedView:e.selectedView,isSelected:g});return a.createElement(eX,{badge:E,onClick:()=>{let e=d&&(0,e2.hX)(d);if(r){let e=eH.J7.DASHBOARD;t(eS.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:e})),t(eS.Oe({clickedResourceType:"orgAdminSettings"}))}else u?f?t(eS.$T({view:"billingGroupDashboard",selectedTab:e4.D.REQUESTS})):(t(eS.$T({view:"licenseGroup",subView:e8.GN.ADMIN,licenseGroupId:e&&c.length>0?c[0].id:m,selectedTab:(0,e0.g)(e&&c.length>0?e8.RM.MEMBERS:e8.Uu[0])})),t(eS.Oe({clickedResourceType:"licenseGroupAdminSettings"}))):p&&(t(eS.$T({view:"workspace",subView:e5.V0.ADMIN,workspaceId:_[0].id,selectedTab:e5._C})),t(eS.Oe({clickedResourceType:"workspaceAdminSettings"})))},dataTestId:"admin-settings-link",dataOnboardingKey:es.sm,isSelected:g})}var e6=r(356572),e7=r(422444);function e9(e){let t=(0,n.d4)(e=>e.currentTeamId),r=(0,n.wA)();return t?a.createElement(eN.SidebarRow,{isSelected:e.selectedView&&"team"===e.selectedView.view,onClick:()=>{r(e7.dm(t)),r(eS.Oe({clickedResourceType:"allProjects"}))},"data-onboarding-key":"ALL_PROJECTS_LINK_ONBOARIND_KEY",icon:a.createElement(e6.t,null),text:a.createElement(S.E,{truncate:!0},(0,N.tx)("sidebar.all_projects"))}):null}var te=r(52876),tt=r(563210),tr=r(430385),ta=r(256350),tn=r(66699),tl=r(480572),to=r(649051),ti=r(858541),ts=r(446951),td=r(414607);let tc=(0,ts.Ju)(function(e){let t=(0,n.wA)(),r=a.createElement("span",{className:x.s.fontBold.$},e.sectionName);return a.createElement(td.Rw,{onConfirm:()=>{t(eR.de({sidebarSectionId:e.sectionId}))},confirmationTitle:(0,N.t)("sidebar.delete_section"),titleClass:"confirm_section_delete_modal--title--8Haoy text--fontPos11--2LvXf text--_fontBase--QdLsd",confirmText:(0,N.t)("sidebar.delete"),destructive:!0,autoFocusCta:!1},a.createElement("p",{className:"confirm_section_delete_modal--content--BToo-"},(0,N.tx)("sidebar.if_you_delete_section_the_section",{item:e.count>1?(0,N.t)("sidebar.items"):(0,N.t)("sidebar.item"),section:r,count:e.count,pronoun:e.count>1?(0,N.t)("sidebar.them"):(0,N.t)("sidebar.it")})))},"CONFIRM_SECTION_DELETE_MODAL",ts.ZU.YES);var tm=r(31898),tu=r(442022);let t_="custom-section-header-context-menu";function tp(){let e=(0,n.d4)(e=>e.dropdownShown);return e&&e?.type===t_?e:null}function tf(e){let t=(0,n.wA)(),r=tp();if(null==r)return a.createElement(a.Fragment,null);let l=()=>{0===r.data.favoritesCount?t(eR.de({sidebarSectionId:r.data.customSection.id})):t((0,tm.to)({type:tc,data:{sectionId:r.data.customSection.id,sectionName:r.data.customSection.name,count:r.data.favoritesCount}}))},o=()=>{e.setRenamingSectionId(r.data.customSection.id)},i=[{displayText:(0,N.t)("sidebar.rename_section"),callback:()=>o()},{displayText:(0,N.t)("sidebar.delete_section"),callback:()=>l()}];return a.createElement(tu.j,{depth:0,dispatch:t,hidePointWhenContentOffScreen:!0,items:i,lean:"right",leanPadding:0,minWidth:162,onSelectItem:(e,r)=>{e.callback&&e.callback("",null,t)},parentRect:r.data.targetRect,showPoint:!r.data.isFromRightClick})}var tg=r(262234);let tE="favorited_section--emojiIcon--pDnB-",tb="favorited_section--isDragTarget--dQd5-",tv="favorited_section--previewContainer--4E-dF _overlayBase--_overlayBase--Rkj8l",th="favorited_section--previewContainerSidebarRowRedesigned--TewzL",ty="favorited_section--previewContainerNoDelay--buvES favorited_section--previewContainer--4E-dF _overlayBase--_overlayBase--Rkj8l",tw="favorited_section--favoriteClickTarget--Z9eur",tT="favorited_section--thumbnailContainer--C4PE-",tI="favorited_section--lowerContainer--9gDfQ",tx="favorited_section--lowerPartTitles--44fhW",tN="favorited_section--title--bWf4x ellipsis--ellipsis--Tjyfa",tS="favorited_section--fileIconContainer--u8cZj",tC="favorited_section--dialogTriggerButtonContainer--m7yPm";function tk(e){let t=(0,n.wA)(),r=(0,n.d4)(eL.wA);if(!r)return null;let l=a.createElement("span",{role:"link",tabIndex:0,onClick:()=>{t(eS.$T({view:"org",orgId:r.id,orgViewTab:tg.X.HOME}))},className:"favorited_section--browseOrgLink--BvX0-"},(0,N.tx)("sidebar.browse_org_custom_sections"));return a.createElement("div",{className:"favorited_section--customSectionsEmptyStateContent--Z6jKH"},(0,N.tx)("sidebar.just_click_the_on_files_projects_and_teams_to_add_and_organize_them_here"),l)}function tR(e){return a.createElement("div",{className:"favorited_section--customSectionsEmptyState--JcvfB favorited_section--customSectionsEmptyStateContent--Z6jKH"},a.createElement(tk,{setNewCustomSectionIndex:e.setNewCustomSectionIndex}))}var tA=r(353317),tO=r(658029),tP=r(408193),tF=r(150934),tL=r(226697),tD=r(467905),tM=r(952039),tB=r(235456),tU=r(912873),t$=r(792700),tj=r(94382),tW=r(386252),tG=r(511985),tV=r(792533),tH=r(807949),tz=r(699547),tY=r(594602),tK=r(257270),tq=r(765770),tJ=r(403253),tX=r(896156),tQ=r(633468),tZ=r(480945),t0=r(806349),t1=r(677334),t2=r(957845),t4=r(190731),t8=r(938907),t5=r(976032),t3=r(157777),t6=(e=>(e.FAVORITED_PROTOTYPE_CONTEXT_MENU="favorited-prototype-context-menu",e.FAVORITED_FILE_CONTEXT_MENU="favorited-file-context-menu",e.FAVORITED_PROJECT_CONTEXT_MENU="favorited-project-context-menu",e.FAVORITED_TEAM_CONTEXT_MENU="favorited-team-context-menu",e.FAVORITED_WORKSPACE_CONTEXT_MENU="favorited-workspace-context-menu",e))(t6||{});let t7="sidebar context menu";function t9(e,t,r,a){if(t.stopPropagation(),t.preventDefault(),"file"in e&&e.file){let t=e.file;r(tH.yJ({file:{key:t.key,team_id:t.teamId,file_repo_id:t.fileRepoId,folder_id:t.folderId}}));let a=(0,tG.QJ)(e);a&&r(tz.bE({repo:a}))}r(eS.j7({type:a,data:{resource:{...e},targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1}}}))}let re=(e,t,r,a={})=>e?[{displayText:t?t():"",callback:r,...a}]:[],rt=[{displayText:"",separator:!0}];function rr(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.selectedView),l=(0,tX.p)(),i=e.favoritedFile.file,d=t1.M4.useFile(i?.key).data,c=i?.project?.canView,m=(0,n.d4)(e=>e.dropdownShown),u=(0,t3.e)();if(null==m||null==i)return null;let _=i.editorType===eF._Y.FIGMAKE&&!u,p="favorited-file-context-menu"===m.type,f=[...re(!0,()=>(0,N.t)("tile.dropdown.open"),()=>{(0,tL.DF)("open"),(0,tL.LP)(i.key,eF.bk.FILE,e.favoritedFile?.sidebarSectionId??void 0,t7,i.editorType??void 0),(0,tK.Tq)(t,i)}),...re(!s.eD&&!(0,o.ce)(),()=>(0,N.t)("tile.dropdown.open_new_tab"),()=>{(0,tK.nz)((0,tQ.jN)({file:i,allowDefaulting:!0}),i.key,r,t),(0,tL.LP)(i.key,eF.bk.FILE,e.favoritedFile?.sidebarSectionId??void 0,t7,i.editorType),(0,tL.DF)("open_in_new_tab")}),...rt,...e.organizeFavoriteOptions,...rt,...re(!0,()=>(0,N.t)("file_browser.copy_link"),()=>{t(tH.S({fileKey:i.key,url:(0,tQ.jN)({file:i,attributionContext:(0,tZ.b)(l,tZ.d.FAVORITED_FILE_CONTEXT_MENU),allowDefaulting:!0}),source:tZ.d.FAVORITED_FILE_CONTEXT_MENU})),t(eS.oB())}),...re(!_,()=>(0,N.t)("sidebar.share"),()=>{(0,tL.DF)("share"),t((0,tm.to)({type:t5.g_,data:{fileKey:i.key,source:tq.nk.fileBrowserFavoritedContextMenu}}))}),...re(!0,()=>(0,N.t)("tile.dropdown.show_in_project"),()=>{if((0,tL.DF)("show_in_project"),t(eS.$T({view:"folder",folderId:e.folderId})),t(tY.an()),i.fileRepoId){let r=(0,tG.QJ)(e.favoritedFile);null!=r&&t(tY.y$({type:t8.F.REPOS,tiles:[{type:tJ.nb.REPO,repo:r,branches:[],selectedBranchKey:""}]}))}else{if(!d)return;t(tY.y$({type:t8.F.FILES,tiles:[(0,tJ.fA)(d)]}))}},{disabled:!(p&&c)})];return a.createElement(tu.j,{items:f,parentRect:m.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorite-file-dropdown",dispatch:t,onSelectItem:(e,r)=>{e.callback?.("",{},t,r)}})}function ra(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.dropdownShown);if(null==r)return null;let l=[...e.organizeFavoriteOptions,...rt,...re(!0,()=>(0,N.t)("file_browser.copy_link_to_team"),()=>{let r=(0,tW.bL)(e.teamId,e.orgId);t(tV.S({url:r})),t(eS.oB())})];return a.createElement(tu.j,{items:l,parentRect:r.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorite-file-dropdown",dispatch:t,onSelectItem:(e,r)=>{e.callback?.("",{},t,r)}})}function rn(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.dropdownShown);if(null==r)return null;let l=[...e.organizeFavoriteOptions,...rt,...re(null!==e.orgId,()=>(0,N.t)("file_browser.copy_link_to_workspace"),()=>{if(null!==e.orgId){let r=(0,t2.fO)(e.workspaceId,e.orgId);t(tV.S({url:r}))}t(eS.oB())})];return a.createElement(tu.j,{items:l,parentRect:r.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,r)=>{e.callback?.("",{},t,r)}})}function rl(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.dropdownShown);if(null==r)return null;let l=[...e.organizeFavoriteOptions,...rt,...re(!0,()=>(0,N.t)("file_browser.copy_link_to_project"),()=>{let r=(0,t4.EE)(e.projectId,e.orgId);t(tV.S({url:r})),t(eS.oB())})];return a.createElement(tu.j,{items:l,parentRect:r.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,r)=>{e.callback?.("",{},t,r)}})}function ro(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.dropdownShown);if(null==r)return null;let l=[...e.organizeFavoriteOptions,...rt,...re(!0,()=>(0,N.t)("file_browser.copy_link"),()=>{let r=(0,t0._3)(e.prototype.fileKey,e.prototype.file?.name,e.prototype.pageId);t(tV.S({url:r})),t(eS.oB())})];return a.createElement(tu.j,{items:l,parentRect:r.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,r)=>{e.callback?.("",{},t,r)}})}var ri=r(254490);function rs(e){let t=(0,n.wA)(),r=e.orgId,l=(0,n.d4)(e=>e.currentTeamId),o=e.favorite.team,i=(0,n.d4)(e=>e.dropdownShown),s=a.useMemo(()=>i&&i.type===t6.FAVORITED_TEAM_CONTEXT_MENU&&i.data.teamId===o.id,[i,o.id]),c=a.useCallback((e,r)=>{(0,tL.LP)(r.team?.id,eF.bk.TEAM,r.sidebarSectionId??void 0,tL.vg);let a=(0,tW.bL)(r.resourceId,r.orgId);(0,O.oJ)(e)?(d.Ay.redirect(a,"_blank"),e.stopPropagation()):(t(e7.dm(r.resourceId)),e.preventDefault())},[t]),m=a.useCallback(e=>{e.stopPropagation(),e.preventDefault();let r={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(eS.j7({type:t6.FAVORITED_TEAM_CONTEXT_MENU,data:{teamId:o.id,targetRect:r}}))},[t,o]),u=(0,tj.x)({currentOrgId:r,currentTeamId:l,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eF.bk.TEAM,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(r,a)=>{let n={entrypoint:"sidebar",sectionId:a,team:{id:o.id},favoriteId:e.favorite.id,resourceType:eF.bk.TEAM};r?t(eR.V1(n)):t(eR.ox(n))}});return a.createElement(a.Fragment,null,a.createElement(eN.SidebarRow,{isSelected:e.isSelected,onClick:t=>c(t,e.favorite),showGrabber:e.showGrabber,onContextMenu:m,icon:o.imgUrl?a.createElement("div",{className:x.s.colorIcon.$},a.createElement(tU.nl,{shape:"ROUNDED_SQUARE",size:{imgSize:tU.Pf.SMALL,fallbackSize:tU.Pf.SMALL},fallbackDisplay:t$.U.HIDDEN,team:{...o,imgUrl:o.imgUrl},fallbackSvg:ri.A})):a.createElement(tB.U,null),text:a.createElement(S.E,{truncate:!0},o.name)}),s&&a.createElement(ra,{teamId:o.id,orgId:o.orgId,organizeFavoriteOptions:u}))}var rd=r(489),rc=r(779388),rm=r(532511),ru=r(279144),r_=r(999556),rp=r(373011),rf=r(249726);let rg=e=>a.createElement("div",{className:tE},e);function rE(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.currentUserOrgId),o=(0,n.d4)(e=>e.currentTeamId),i=(0,n.d4)(e=>e.dropdownShown),s=e.favorite.file,c=t1.M4.useFile(s.key).data,m=(0,ru.NN)(),u=null!==r,_=!!o,p=a.useMemo(()=>i&&i.type===t6.FAVORITED_FILE_CONTEXT_MENU&&i.data.fileKey===s.key,[i,s]),f=a.useMemo(()=>i&&i.type===t_,[i]),g=a.useCallback(e=>{c||t(tH.yJ({file:{key:s.key,team_id:s.teamId,file_repo_id:s.fileRepoId,folder_id:s.folderId,library_key:s.libraryKey}})),e.stopPropagation(),e.preventDefault();let r={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(eS.j7({type:t6.FAVORITED_FILE_CONTEXT_MENU,data:{fileKey:s.key,targetRect:r}}))},[t,s,c]),E=(0,tQ.jN)({file:s,allowDefaulting:!0}),b=(e,r)=>{(0,tL.LP)(r.file?.key,eF.bk.FILE,r.sidebarSectionId??void 0,tL.vg,r.file?.editorType??void 0),(0,O.oJ)(e)?(t(e7.UN({fileKey:r.file?.key??"",entrypoint:tL.vg})),e.stopPropagation()):e.preventDefault(),r.file&&(d.Ay.redirect(E,"_blank"),t(e7.UN({fileKey:r.file.key,entrypoint:tL.vg})))},v=()=>{t(eR.qP({file:{key:s.key,editorType:s.editorType??eF._Y.DESIGN},repoId:s.fileRepoId??void 0,entrypoint:"sidebar",favoriteId:e.favorite.id}))},h=(0,tj.x)({currentOrgId:r,currentTeamId:o,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eF.bk.FILE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(r,a)=>{if(r&&c){let r={entrypoint:"sidebar",sectionId:a,favoriteId:e.favorite.id,resourceType:eF.bk.FILE};t(eR.V1(r))}else r||v()}}),y=s.name,w=(0,rp.AE)(y),T=e.favorite.file?m(e.favorite.file):ru.y1.DESIGN,I=w?rg(w):a.createElement(ru.w4,{size:16,type:T}),x=w?(0,rp.Nn)(y,w):y,C=e.favorite.file?.project?.path,k=(0,rf.S)(C),R=k?tN:"favorited_section--titleWithoutSubtitle--BXdOW ellipsis--ellipsis--Tjyfa text--fontPos13--xW8hS text--_fontBase--QdLsd";return a.createElement("div",{className:tw},a.createElement(eN.SidebarRow,{isSelected:e.isSelected,showGrabber:e.showGrabber,onContextMenu:u||_?g:r=>{t9(e.favorite,r,t,t6.FAVORITED_FILE_CONTEXT_MENU)},onClick:t=>b(t,e.favorite),icon:I,text:""!==x?a.createElement(S.E,{truncate:!0,showTooltipWhenTruncated:!1},x):a.createElement(S.E,{truncate:!0},(0,N.tx)(e.favorite.file?.editorType==="whiteboard"?"sidebar.fig_jam_file":e.favorite.file?.editorType==="slides"?"sidebar.slides_file":"sidebar.design_file")),isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED}),!p&&!f&&a.createElement("div",{className:M()(e.showPreviewDelay?tv:ty,{[th]:(0,l.k)().file_browser_sidebar_row_ui}),style:{transform:`translateY(${-e.previewYOffset}px)`}},a.createElement("div",{className:tT},a.createElement(r_.NM,{file:s,noBorder:!0})),a.createElement("div",{className:tI},a.createElement("div",{className:tS},a.createElement(ru.w4,{size:16,type:T})),a.createElement("div",{className:tx},a.createElement("div",{className:R},e.favorite.file?.name),k&&a.createElement("div",{className:"favorited_section--subtitle--sQ1zI ellipsis--ellipsis--Tjyfa"},k)))),(u||_)&&p&&s.folderId&&a.createElement(rr,{favoritedFile:e.favorite,folderId:s.folderId,organizeFavoriteOptions:h}))}var rb=r(573556),rv=r(981733),rh=r(21113);let ry=e=>a.createElement("div",{className:tE},e);function rw(e){let t=(0,n.wA)(),r=e.favorite.project,l=(0,n.d4)(e=>e.currentTeamId),o=(0,n.d4)(e=>e.currentUserOrgId),i=(0,n.d4)(e=>e.dropdownShown),s=a.useMemo(()=>i&&i.type===t6.FAVORITED_PROJECT_CONTEXT_MENU&&i.data.projectId===r.id,[i,r.id]),d=a.useCallback(e=>{e.stopPropagation(),e.preventDefault();let a={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(eS.j7({type:t6.FAVORITED_PROJECT_CONTEXT_MENU,data:{projectId:r.id,targetRect:a}}))},[t,r.id]),c=(0,rh.E)(),m=a.useCallback((e,t)=>{(0,tL.LP)(t.project?.id,eF.bk.FOLDER,t.sidebarSectionId??void 0,tL.vg),c(t.resourceId,e)},[c]),u=(0,tj.x)({currentOrgId:o,currentTeamId:l,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eF.bk.FOLDER,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(a,n)=>{let l={entrypoint:"sidebar",sectionId:n,folder:r,favoriteId:e.favorite.id};a?t(eR.Mv(l)):t(eR.jv(l))}}),_=(0,rp.AE)(r.path),p=_?(0,rp.Nn)(r.path,_):r.path,f=e.favorite.project.activeProjectResourceConnections?.[0];return a.createElement("div",null,a.createElement(eN.SidebarRow,{onContextMenu:d,isSelected:e.isSelected,onClick:t=>m(t,e.favorite),icon:_?a.createElement("div",null,ry(_)):a.createElement(rb.e,null),showGrabber:e.showGrabber,text:a.createElement(S.E,{truncate:!0},p),isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,badge:f?a.createElement(rv.W,{hostPlanName:f.hostPlanName,connectedPlanName:f.connectedPlanName}):void 0}),s&&a.createElement(rl,{projectId:r.id,orgId:r.orgId,organizeFavoriteOptions:u}))}var rT=r(114905),rI=r(316528),rx=r(555772),rN=r(229498);function rS({thumbnailUrl:e,isLocked:t,...r}){return t?a.createElement(rI.N,{thumbnailType:rN.F.PROTOTYPE,...r}):a.createElement(rx.V,{thumbnailUrl:e,thumbnailType:rN.F.PROTOTYPE,...r})}function rC(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.currentTeamId),o=(0,n.d4)(e=>e.currentUserOrgId),i=(0,n.d4)(e=>e.dropdownShown),s=a.useMemo(()=>i&&i.type===t6.FAVORITED_PROTOTYPE_CONTEXT_MENU&&i.data.resource.prototype.id===e.favorite.prototype.id,[i,e.favorite.prototype.id]),c=a.useMemo(()=>i&&i.type===t_,[i]),m=(0,ti.S)(),u=(0,t0._3)(e.favorite.prototype.fileKey,e.favorite.prototype.file?.name,e.favorite.prototype.pageId),_=(e,t)=>{if((0,tL.LP)(t.prototype?.fileKey,eF.bk.PROTOTYPE,t.sidebarSectionId??void 0,tL.vg),(0,O.oJ)(e)){e.stopPropagation();return}e.preventDefault(),d.Ay.redirect(u,"_blank")},p=(r,a)=>{r||t(eR.X7({prototype:{file_key:e.favorite.prototype.fileKey,page_id:e.favorite.prototype.pageId},entrypoint:"sidebar",favoriteId:a}))},f=(0,tj.x)({currentOrgId:o,currentTeamId:r,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eF.bk.PROTOTYPE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(r,a)=>{if(r){let r={entrypoint:"sidebar",sectionId:a,favoriteId:e.favorite.id,resourceType:eF.bk.PROTOTYPE};t(eR.V1(r))}else p(!1,e.favorite.id)}});return a.createElement("div",{className:tw},a.createElement(eN.SidebarRow,{isSelected:e.isSelected,onContextMenu:r=>{t9(e.favorite,r,t,t6.FAVORITED_PROTOTYPE_CONTEXT_MENU)},showGrabber:e.showGrabber,onClick:t=>_(t,e.favorite),icon:a.createElement(rT.F,null),text:a.createElement(S.E,{truncate:!0,showTooltipWhenTruncated:!1},e.favorite.prototype.file?.name),isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED}),!s&&!c&&a.createElement("div",{className:M()(e.showPreviewDelay?tv:ty,{[th]:(0,l.k)().file_browser_sidebar_row_ui}),style:{transform:`translateY(${-e.previewYOffset}px)`}},a.createElement("div",{className:tT},a.createElement(rS,{isLocked:!!e.favorite.prototype.file?.hasProtoLinkPassword&&e.favorite.prototype.file?.hasProtoLinkPassword,thumbnailUrl:e.favorite.prototype.thumbnailUrl,noBorder:!0})),a.createElement("div",{className:tI},a.createElement("div",{className:tS},a.createElement(rT.F,null)),a.createElement("div",{className:tx},a.createElement("div",{className:tN},e.favorite.prototype.file?.name)))),m&&s&&e.favorite.prototype&&a.createElement(ro,{prototype:e.favorite.prototype,organizeFavoriteOptions:f}))}var rk=r(125952);function rR(e){let t=(0,n.wA)(),r=e.orgId,l=(0,n.d4)(e=>e.currentTeamId),o=(0,n.d4)(e=>e.dropdownShown),i=e.favorite.workspace,s=a.useMemo(()=>o&&o.type===t6.FAVORITED_WORKSPACE_CONTEXT_MENU&&o.data.workspaceId===i.id,[o,i.id]),d=a.useCallback((e,r)=>{let a=r.workspace;(0,tL.LP)(a?.id,eF.bk.WORKSPACE,r.sidebarSectionId??void 0,tL.vg),a&&t(eS.$T({view:"workspace",subView:e5.V0.DIRECTORY,workspaceId:a.id,selectedTab:e5.dN.TEAMS}))},[t]),c=a.useCallback(e=>{e.stopPropagation(),e.preventDefault();let r={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(eS.j7({type:t6.FAVORITED_WORKSPACE_CONTEXT_MENU,data:{workspaceId:i.id,targetRect:r}}))},[t,i]),m=(0,tj.x)({currentOrgId:r,currentTeamId:l,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eF.bk.WORKSPACE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(r,a)=>{let n={workspace:{id:i.id,name:i.name??"",imgUrl:i.imgUrl??null},entrypoint:"sidebar",sectionId:a,favoriteId:e.favorite.id};r?t(eR.ZW(n)):t(eR.if(n))}}),u=e.favorite.workspace?a.createElement(rk.z6,{entity:e.favorite.workspace,size:16}):a.createElement(e6.t,{className:x.s.colorIcon.$});return a.createElement("div",null,a.createElement(eN.SidebarRow,{isSelected:e.isSelected,showGrabber:e.showGrabber,onClick:t=>d(t,e.favorite),onContextMenu:c,icon:u,text:a.createElement(S.E,{truncate:!0}," ",i.name)}),s&&a.createElement(rn,{workspaceId:i.id,orgId:e.favorite.orgId,organizeFavoriteOptions:m}))}var rA=r(7086);let rO=(e,t)=>{let r=e.cloneNode(!0),a=document.createElement("div");return a.className="favorited_generic_row--favorite--vFcy4 favorited_generic_row--_favorite--jiaJX sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd",Object.assign(a.style,{position:"absolute",top:"-100%",left:"-100%",width:`${e.clientWidth}px`,height:`${e.clientHeight}px`,overflow:"hidden",zIndex:-1}),t&&(r.classList.add(t),r.classList.add(x.s.colorText.$)),a.appendChild(r),document.body.appendChild(a),a};function rP(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.dragState),l=(0,n.d4)(e=>e.currentUserOrgId),{hasPendingRequest:o,getUpgradePathway:i,getUpgradeEligibility:s,getPlanAndPlanUser:d,getHasProvisionalAccess:c,getShouldShowCurf:m,getShouldShowScim:u,getIsUpgradeHandlerLoading:_,getIsEligibleForProvisionalAccess:p}=(0,rm.wH)({folderId:e.favorite.resourceType===eF.bk.FOLDER?e.favorite.resource.project?.id??null:null,isDraftsMove:!0}),f=(0,rc.f4)((0,eo.md)(rc.yH)),[g,E]=a.useState(!1),b=e.favorite.resourceType,v=(0,eC._6)(),[h,y]=a.useState(!1),w=e.rearrangeDragState?.draggedOverFavoriteId===e.favorite.resource.id&&!h,[T,x]=a.useState(!1),N=a.useRef(null),S=(0,ti.S)(),C=g&&!S,k=(0,t3.e)(),R=e.isSelected||(()=>{switch(b){case eF.bk.FOLDER:return"folder"===v.view&&v.folderId===e.favorite.resource.resourceId;case eF.bk.TEAM:return"team"===v.view&&v.teamId===e.favorite.resource.resourceId;case eF.bk.WORKSPACE:return"workspace"===v.view&&v.subView===e5.V0.DIRECTORY&&v.workspaceId===e.favorite.resource.resourceId;default:return!1}})(),A=(t,r)=>{let a=_();return(0,rc.Zm)({files:t,repos:r,isDestinationDrafts:e.favorite.resourceType===eF.bk.FOLDER&&e.favorite.resource.project?.path==="",enabledForOrgOnly:!1,originFolderIdToPath:f,hasPendingRequest:o,getUpgradePathway:i,getUpgradeEligibility:s,getPlanAndPlanUser:d,getHasProvisionalAccess:c,getShouldShowCurf:m,getShouldShowScim:u,loading:a,getIsEligibleForProvisionalAccess:p})};return a.createElement("div",{className:w?e.rearrangeDragState?.dropBefore?"favorited_generic_row--dropBefore--xZvBN sidebar--dropBefore--wZDYO":e.rearrangeDragState?.dropInto?"favorited_generic_row--dropInto--VKuX5":"favorited_generic_row--dropAfter--a64Ax sidebar--dropAfter--JEX7d":void 0},a.createElement(ta.Y,{key:e.favorite.resource.resourceId,isDragTarget:e=>{let t=new rd.le(e);return y(t.isFile()),r.type!==eM.R.SidebarSection&&!t.isFile()},onTargetDragEnter:(t,a)=>{let n=new rd.le(t),l=!1;(r.type===eM.R.Favorite||n.isFigFiles()||n.isRepos()||n.isPrototypes()||n.isTiles())&&((n.isFigFiles()||n.isRepos()||n.isTiles())&&(l=e.favorite.resourceType===eF.bk.FOLDER),e.updateRearrangeDragState({draggedOverFavoriteId:e.favorite.resource.id,dropBefore:l?a.upperQuarter:a.upper,dropInto:l&&a.middleVerticalHalf,draggedOverSectionId:e.favorite.resource.sidebarSectionId}),x(l))},onTargetDragLeave:t=>{let a=new rd.le(t);(r.type===eM.R.Favorite||a.isFigFiles()||a.isRepos()||a.isPrototypes()||a.isTiles()&&w)&&(e.clearRearrangeDragState(e.favorite.resource.id),x(!1))},onTargetDrop:a=>{let n=new rd.le(a);if(e.rearrangeDragState?.dropInto&&e.favorite.resourceType===eF.bk.FOLDER&&e.favorite.resource.project)(0,rA.A)(t,e.favorite.resource.project,e.favorite.resource.project.team,n,A,k),t(to.T());else if(n.isFigFiles()||n.isRepos()||n.isPrototypes()||n.isTiles())e.onSetResourceFavoriteDragDrop(a);else if(r.type===eM.R.Favorite&&w){let a=r.data;e.reorderOrInsertFavorite(a.resource.id,a.resourceType),t(to.T())}e.clearRearrangeDragState(e.favorite.resource.id),x(!1)},onTargetDragQuadrantUpdate:t=>{e.updateRearrangeDragState({draggedOverFavoriteId:e.favorite.resource.id,dropBefore:T?t.upperQuarter:t.upper,dropInto:T&&t.middleVerticalHalf,draggedOverSectionId:e.favorite.resource.sidebarSectionId})},draggable:!1},a.createElement("div",{onMouseEnter:()=>{e.preventHoverStyle||E(!0)},onMouseLeave:()=>{e.setShowPreviewDelay(!1),E(!1)},onDragStart:r=>{r.dataTransfer.effectAllowed="move";let a=new rd.le(r.dataTransfer);a.setArbitraryData(e.favorite.resource.id);let n=r.currentTarget.firstElementChild;if(null===n)return;let l=n.getBoundingClientRect(),o=r.clientX-l.left,i=r.clientY-l.top;N.current=rO(n,"favorited_generic_row--draggable--QinZd"),a.setDragImage(N.current,o,i),t(to.v({type:eM.R.Favorite,data:e.favorite}))},onDragEnd:r=>{N.current&&N.current.remove(),t(to.T()),e.clearRearrangeDragState(e.favorite.resource.id),x(!1)},draggable:!e.isFavoritesToMove_DEPRECATED},(()=>{switch(b){case eF.bk.FILE:if(!e.favorite.resource.file)return null;return a.createElement(rE,{favorite:e.favorite.resource,isHover:g,showGrabber:C,isSelected:R,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED});case eF.bk.PROTOTYPE:if(!e.favorite.resource.prototype)return null;return a.createElement(rC,{favorite:e.favorite.resource,isHover:g,showGrabber:C,isSelected:R,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED});case eF.bk.FOLDER:if(!e.favorite.resource.project)return null;return a.createElement(rw,{favorite:e.favorite.resource,isHover:g,showGrabber:C,isSelected:R,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED});case eF.bk.TEAM:if(!e.favorite.resource.team||!l)return null;return a.createElement(rs,{favorite:e.favorite.resource,orgId:l,isHover:g,showGrabber:C,isSelected:R,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections});case eF.bk.WORKSPACE:if(!e.favorite.resource.workspace||!l)return null;return a.createElement(rR,{favorite:e.favorite.resource,orgId:l,isHover:g,showGrabber:C,isSelected:R,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections});default:(0,I.xb)(b)}})())))}var rF=r(887645),rL=r(523860),rD=r(85206);function rM(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.currentTeamId),l=(0,H.dq)()??null,o=(0,W.sb)(e.favorites,e.order),i=(0,eC._6)(),[s,d]=a.useState(!1),c=(0,n.d4)(e=>e.favorites.movingResource),u=(0,ti.S)(),_=(0,n.d4)(e=>e.favorites.collapsedCustomSections),p=u&&e.section?!_.has(e.section?.id):!_.has("favorited"),[f,g]=a.useState(!1),[E,b]=a.useState(),[v,h]=a.useState(),y=(0,n.d4)(e=>e.dragState),w=(0,m.ZC)(y);a.useEffect(()=>{y.type===eM.R.None&&w&&w.type!==eM.R.None&&h(void 0)},[y,w]),a.useEffect(()=>{!e.isCurrentHoveredSection&&y.type===eM.R.SidebarSection&&v&&h(void 0)},[e.isCurrentHoveredSection,v,y]);let[T,I]=a.useState(void 0),[S,C]=a.useState(!0),k=a.useRef(null),R=tp();a.useEffect(()=>{T===v?.draggedOverFavoriteId&&h(void 0),I(void 0)},[v,h,T,I]);let A=a.useCallback(r=>{e.section?.id&&(r.dataTransfer.effectAllowed="move",new rd.le(r.dataTransfer).setArbitraryData(e.section.id),t(to.v({type:eM.R.SidebarSection,data:e.section.id})))},[t,e.section]),O=a.useCallback(()=>{(0,tL.xs)(!p);let r=new Set(_);u&&e.section?(rF.Fp({type:"topLevel",id:"custom",orgId:l,sectionId:e.section?.id},!p),p?r.add(e.section.id):r.delete(e.section.id)):(rF.Fp({type:"topLevel",id:"favorited",orgId:l},!p),p?r.add("favorited"):r.delete("favorited")),t(eR.U6({collapsedCustomSections:r}))},[p,l,e.section,_,u,t]),P=(r,a)=>{let n;let l=o.map(e=>e.resource.id);if(!v?.draggedOverFavoriteId)return l;let i=-1!==l.indexOf(r);if(i)n=(0,tr.Pe)(l,r,v.draggedOverFavoriteId,v.dropBefore);else{let e=l.indexOf(v.draggedOverFavoriteId);v.dropBefore||(e+=1),n=[...l.slice(0,e),r,...l.slice(e)]}if((0,tL.hp)(),b(r),e.section?.id){i?t(eR.vg({sectionId:e.section.id,orderedFavoriteIds:n})):t(eR.V1({favoriteId:r,sectionId:e.section.id,resourceType:a,orderedFavoriteIds:n}));return}i||t(eR.V1({favoriteId:r,sectionId:void 0,resourceType:a})),t(U.yJ({prefs:{id:e.fileBrowserPreferences?.id||"optimistic-id",orderedFavoritedResourceIds:n,orderedTeamIds:e.fileBrowserPreferences?.orderedTeamIds,orderedLicenseGroupIds:e.fileBrowserPreferences?.orderedLicenseGroupIds},userInitiated:!0}))},F=a.useCallback(e=>{e.stopPropagation(),E&&b(void 0)},[E]),L=a.useCallback(()=>{C(!0)},[]),D=a.useCallback(e=>{let t=new rd.le(e);return d(t.isFile()),t.isFigFiles()||t.isRepos()||t.isPrototypes()||t.isTiles()},[]),B=a=>{let n=new rd.le(a),s=[],d=[],c=[];if(g(!1),n.isFigFiles()){if(!(s=n.getData()))return!1}else if(n.isPrototypes()){if(!(c=n.getData()))return!1}else if(n.isRepos()){let e=n.getReposData();if(!e)return!1;d=e.repos}else if(n.isTiles()){let e=n.getTilesData();if(!e)return!1;s=e.files,d=e.repos,c=e.prototypes}s=s.filter(e=>!e.is_favorited),d=d.filter(e=>!e.is_favorited),c=c.filter(e=>!e.is_favorited);let m=o.map(e=>e.resource.id),u=s.length+d.length+c.length,_=(0,W.kK)(l);if(u+o.length>_)return t(tM.F.enqueue({message:(0,N.t)("tile.favoriting.max_favorites",{maxFavorites:_})})),!1;let p=null;return v&&(p=m.indexOf(v.draggedOverFavoriteId)+(v.dropBefore?0:1)),t(eR.N9({files:s,repos:d,prototypes:c,orgId:l,teamId:r,selectedView:i.view,entrypoint:"sidebar",insertAtIndex:p,orderedFavorites:m,sectionId:e.section?.id,fileBrowserPrefs:e.fileBrowserPreferences})),!0},$=a.useCallback(()=>{g(!0)},[]),j=a.useCallback(()=>{g(!1)},[]),G=M()([x.s.relative.$,"favorited_section--showsCaret--vjo7-",f||v?.draggedOverSectionId&&e.section&&!s&&v.draggedOverSectionId===e.section.id?tb:""]),V=u?e.section?.name===""||e.section?.name===void 0?(0,N.tx)("sidebar.starred"):e.section.name:(0,N.tx)("sidebar.favorite_files"),z=R?.data?.customSection?.id===e.section?.id,Y=e.isCreatingNewSection||e.isRenaming,K=M()({"favorited_section--sectionHeaderContainer--otgqF sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa":!0,"favorited_section--actionButtonsVisibleOnHover--AOJ8E":!Y,"favorited_section--actionButtonsVisible--Ey4QI":z&&!Y}),q=e.section?.name===void 0?(0,N.t)("sidebar.new_section"):(0,W.R3)(e.section)?(0,N.t)("sidebar.starred"):e.section.name;return a.createElement(ta.Y,{className:G,isDragTarget:D,draggable:!1,onTargetDrop:B,onTargetDragEnter:$,onTargetDragLeave:j},a.createElement("div",null,a.createElement("div",{draggable:!0,onDragStart:A,className:K,onClick:O,onContextMenu:r=>{r.stopPropagation(),r.preventDefault();let a={top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1};t(eS.j7({type:t_,data:{customSection:e.section,favoritesCount:o.length,isFromRightClick:!0,targetRect:a}}))},role:"button",tabIndex:0},a.createElement(en.B,{className:u?"favorited_section--expandCaretCustomSections--SUjwA":"favorited_section--expandCaret--LgAK5 sidebar--expandCaret--eXGWm",svg:p?rL.A:rD.A}),a.createElement("div",{className:"favorited_section--sectionName--PrU2k ellipsis--ellipsis--Tjyfa","data-onboarding-key":1===e.allSections.length?null:"FAVORITES_ONBOARDING_KEY"},e.isRenaming?a.createElement(tD.p,{className:"favorited_section--input--8x-Vh",placeholderValue:q,submit:r=>{e.isCreatingNewSection?(c?t(eR.yH({name:r,insertAtIndex:e.sectionIndex,currentOrderedSections:e.allSections.map(e=>e.id),prefs:e.fileBrowserPreferences??void 0,newResourceForSection:c})):t(eR.YI({name:r,insertAtIndex:e.sectionIndex,currentOrderedSections:e.allSections.map(e=>e.id),prefs:e.fileBrowserPreferences??void 0})),e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(void 0)):e.section&&(t(eR.vg({sectionId:e.section.id,name:r.trim()})),e.setRenamingSectionId&&e.setRenamingSectionId(void 0))},cancel:()=>{e.isCreatingNewSection?(e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(void 0),c&&t(eR.to({movingResource:void 0}))):e.setRenamingSectionId&&e.setRenamingSectionId(void 0)},maxLength:25}):V),l&&a.createElement("div",{className:"favorited_section--actionButtons--VZ6Er"},a.createElement("div",{className:tC},a.createElement(tA.d,{"aria-expanded":!!R,"aria-label":(0,N.t)("favorited_resources.settings_tooltip"),onClick:r=>{R?t(eS.oB()):k.current&&t(eS.j7({type:t_,data:{targetRect:k.current.getBoundingClientRect(),customSection:e.section,favoritesCount:o.length}})),r.stopPropagation(),r.preventDefault()},ref:k},a.createElement(tP.J,null))),a.createElement(rB,{newCustomSectionIndex:e.sectionIndex,setNewCustomSectionIndex:e.setNewCustomSectionIndex})))),a.createElement("div",{className:p?void 0:x.s.hidden.$},(()=>{if(0===o.length){let t=1===e.allSections.length&&(0,W.R3)(e.allSections[0]);return u||e.isCreatingNewSection?u&&t&&!e.isCreatingNewSection?a.createElement(tk,{setNewCustomSectionIndex:e.setNewCustomSectionIndex}):a.createElement(a.Fragment,null):a.createElement(rU,{setNewCustomSectionIndex:e.setNewCustomSectionIndex})}return a.createElement("div",{onMouseMove:F,onMouseLeave:L},o.map(t=>{let r=E===t.resource.id;return a.createElement(rP,{key:t.resource.resourceId,clearRearrangeDragState:I,favorite:t,isSelected:r,onSetResourceFavoriteDragDrop:B,preventHoverStyle:void 0!==E,previewYOffset:e.previewYOffset,rearrangeDragState:v,reorderOrInsertFavorite:P,sections:e.allSections,setShowPreviewDelay:C,showPreviewDelay:S,updateRearrangeDragState:h})}))})()))}function rB(e){return a.createElement("div",{className:tC},a.createElement(tO.K,{"aria-label":(0,N.t)("favorited_resources.create_a_new_section_tooltip"),htmlAttributes:{"data-tooltip":(0,N.t)("favorited_resources.create_a_new_section_tooltip"),"data-tooltip-type":"text"},onClick:t=>{t.stopPropagation(),e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(e.newCustomSectionIndex)}},a.createElement(tF.x,null)))}function rU(e){return a.createElement("div",{className:"favorited_section--favoritedSectionEmptyState--Xhxgt sidebar--emptySection--SKfhv sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,N.tx)("sidebar.to_favorite_files_you_use_often"))}function r$(e){let t=(0,W.ds)(e.favoritedFiles,e.favoritedPrototypes,e.favoritedProjects,e.favoritedTeams,e.favoritedWorkspaces);return a.createElement(rM,{favorites:t,order:e.fileBrowserPreferences?.orderedFavoritedResourceIds??void 0,fileBrowserPreferences:e.fileBrowserPreferences,allSections:e.userSidebarSections??[],sectionIndex:0,previewYOffset:e.previewYOffset})}function rj(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.dragState),l=(0,n.d4)(e=>e.favorites.newCustomSectionIndex),o=(0,n.d4)(e=>e.favorites.favoritesCount),i=(0,W.ds)(e.favoritedFiles,e.favoritedPrototypes,e.favoritedProjects,e.favoritedTeams,e.favoritedWorkspaces),[s,d]=a.useState(),[c,m]=a.useState(),[u,_]=a.useState(!1),p=(0,ti.S)(),f=a.useMemo(()=>(0,W.t$)(e.userSidebarSections??[],e.fileBrowserPreferences?.orderedSidebarSections??void 0),[e.userSidebarSections,e.fileBrowserPreferences?.orderedSidebarSections]);a.useMemo(()=>{o&&o<15&&i.length>=15&&(0,tn.YQ)({id:tl.FAVORITES_COUNT_CROSSED_THRESHOLD_EVENT}),t(eR.lF({favoritesCount:i.length}))},[o,i.length,t]);let g={},E=[];i.forEach(e=>{e.resource.sidebarSectionId?g[e.resource.sidebarSectionId]?g[e.resource.sidebarSectionId].push(e):g[e.resource.sidebarSectionId]=[e]:E.push(e)});let b=a.useCallback(()=>r.type===eM.R.Favorite||r.type===eM.R.SidebarSection,[r]),v=a.useCallback(e=>{r.type===eM.R.SidebarSection&&_(e.upper)},[r]),h=a.useCallback(()=>{let a="starred"===s?void 0:s;if(r.type===eM.R.Favorite){let e=r.data;t(eR.V1({favoriteId:e.resource.id,sectionId:a,resourceType:e.resourceType}))}else if(r.type===eM.R.SidebarSection&&a){let n=f.map(e=>e.id)??[],l=(0,tr.Pe)(n,r.data,a,u);t(U.yJ({prefs:{id:e.fileBrowserPreferences?.id||"optimistic-id",orderedFavoritedResourceIds:e.fileBrowserPreferences?.orderedFavoritedResourceIds,orderedTeamIds:e.fileBrowserPreferences?.orderedTeamIds,orderedLicenseGroupIds:e.fileBrowserPreferences?.orderedLicenseGroupIds,orderedSidebarSections:l},userInitiated:!0}))}_(!1),d(void 0),t(to.T())},[s,t,r,u,f,e.fileBrowserPreferences]),y=a.useCallback(e=>()=>{d(e)},[]),w=a.useCallback(()=>{d(void 0)},[]),T=a.useCallback(e=>{t(eR.pS({newCustomSectionIndex:e}))},[t]);if(0===f.length&&p&&void 0===l)return a.createElement(tR,{setNewCustomSectionIndex:T});let I=a.createElement("div",{className:x.s.mb8.$},a.createElement(rM,{allSections:f,favorites:[],fileBrowserPreferences:e.fileBrowserPreferences,isCreatingNewSection:!0,isRenaming:!0,order:[],previewYOffset:e.previewYOffset,sectionIndex:l||0,setNewCustomSectionIndex:T,setRenamingSectionId:m}));return a.createElement("div",{className:x.s.mt8.$},0===l&&I,f.map((t,n)=>{let o=r.type===eM.R.Favorite?tb:u?"favorited_section--dropBefore--6poyi sidebar--dropBefore--wZDYO":"favorited_section--dropAfter--7G6L7 sidebar--dropAfter--JEX7d",i=M()([s===t.id?o:"",x.s.mb8.$]);return a.createElement("div",{key:t.id},a.createElement(ta.Y,{className:i,isDragTarget:b,draggable:!1,onTargetDragQuadrantUpdate:v,onTargetDrop:h,onTargetDragEnter:y(t.id),onTargetDragLeave:w},a.createElement(rM,{allSections:f,favorites:g[t.id]??[],isCurrentHoveredSection:s===t.id,isRenaming:c===t.id,order:t.orderedFavoritedResourceIds??[],previewYOffset:e.previewYOffset,section:t,sectionIndex:n,setNewCustomSectionIndex:T,setRenamingSectionId:m})),l===n+1&&I)}),p&&a.createElement(tf,{setRenamingSectionId:m}))}var rW=r(129170),rG=r(214014),rV=r(863270),rH=r(17753),rz=r(991675),rY=r(534033),rK=r(572073),rq=r(329748),rJ=r(890257),rX=r(824007);let rQ=(0,ts.Ju)(function(e){let[t,r]=(0,a.useState)(null),l=(0,n.wA)(),o=(0,rY.Gs)(),i=(0,Y.TA)(),s=(0,n.d4)(e=>e.teamUserByTeamId),d=(0,n.d4)(e=>i?e.authedUsers.byId[i]?.plans?.filter(e=>!e.is_org):null),c=(0,N.t)("file_browser.planless_favorites.add_favorites_to_modal_title"),m=()=>l(tm.Ce()),u={};i&&(0,rq._)(s,i).forEach(e=>{e.drafts_folder_id&&(u[e.team_id]=e.drafts_folder_id)});let _=(e,t)=>{t&&l(rK.Cy({files:e,folderName:"",folderId:t,isDraftsToMove:!0,fromFileModal:!0}))};return a.createElement(rJ.XV,{title:c,fixedTop:!0,minWidth:480,maxWidth:480,onClose:m,truncateTitleText:!0},a.createElement("div",{className:"move_favorites_modal--modalBody---Rdx2"},d&&a.createElement(er.P,{width:480},a.createElement("div",{className:x.s.pl8.pr8.$},d.map(e=>a.createElement(rZ,{key:e.plan_id,planId:e.plan_id,name:e.name,imgUrl:e.img_url,checked:t?.plan_id===e.plan_id,onSelect:()=>r(t?.plan_id===e.plan_id?null:e)})))),a.createElement("div",{className:"move_favorites_modal--footer--ERUeX"},a.createElement(Z.nR,{onClick:m},(0,N.tx)("modal.cancel")),a.createElement(Z.vd,{disabled:!t,onClick:()=>{let r=t?.is_org?null:t?.plan_id,a=e.favorites.reduce((e,t)=>t.resourceType===eF.bk.FILE&&t.resource.file?.key?{...e,[t.resource.file?.key]:!0}:e,{}),n={},i=o.filter(e=>{let t=!!a[e.key];return t&&(n[e.key]=!0),t}),s=e.favorites.filter(e=>!(e.resourceType===eF.bk.FILE&&e.resource.file?.key)||!n[e.resource.file?.key]).map(e=>e.resource.id);l(eR.Ic({favoriteIds:s,teamId:r})),r&&_(i,u[r]),m()}},(0,N.t)("modal.confirm")))))},"MoveFavoritesModal");function rZ(e){return a.createElement("button",{"data-testid":`${e.name}-button`,className:M()("move_favorites_modal--teamRow--qNRGf",e.checked?x.s.colorBgSelected.$:""),onClick:e.onSelect},a.createElement("div",{className:"move_favorites_modal--iconContainer--oDATP"},e.checked?a.createElement(en.B,{className:x.s.colorIcon.$,svg:rX.A}):a.createElement(tU.nl,{size:tU.Pf.MEDIUM,shape:"CIRCLE",fallbackDisplay:t$.U.HIDDEN,team:{id:e.planId,imgUrl:e.imgUrl}})),a.createElement("div",{className:"move_favorites_modal--teamName--pVqcu ellipsis--ellipsis--Tjyfa"},a.createElement("span",{className:"move_favorites_modal--destinationHeading--mwxLX"},e.name)))}var r0=r(507015);let r1="favorited_drafts_to_move";function r2(e){let t=(0,n.wA)(),[r,l]=a.useState(!0),o=(0,Y.TA)(),i=(0,n.d4)(e=>e.favorites.collapsedCustomSections),s=e.teamUser?.planlessFavoritedFiles?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedFilesKeySet.has(t.resourceId)),d=e.teamUser?.planlessFavoritedPrototypes?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedPrototypesIdSet.has(t.resourceId)),c=e.teamUser?.planlessFavoritedProjects?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedFoldersIdSet.has(t.resourceId)),m=(0,W.ds)(s,d,c),u=!i.has(r1),_=a.useCallback(()=>{rF.Fp({type:"topLevel",id:r1,orgId:null},!u),u?i.add(r1):i.delete(r1),t(eR.U6({collapsedCustomSections:i}))},[u,i,t]),p=a.useCallback(()=>{t(eR.vr({favoriteIds:m.map(e=>e.id)}))},[t,m]);if(0===m.length)return a.createElement(a.Fragment,null);let g=m.map(t=>a.createElement(rP,{key:t.resource.resourceId,clearRearrangeDragState:f.lQ,favorite:t,isFavoritesToMove_DEPRECATED:!0,isSelected:!1,onSetResourceFavoriteDragDrop:f.lQ,preventHoverStyle:!1,previewYOffset:e.previewYOffset,rearrangeDragState:void 0,reorderOrInsertFavorite:f.lQ,sections:[],setShowPreviewDelay:l,showPreviewDelay:r,updateRearrangeDragState:f.lQ}));return a.createElement(rV.fu,{name:rz.e0.FAVORITES_TO_MOVE_SECTION,properties:{userId:o,numFiles:m.length}},a.createElement("div",{className:M()("favorited_section--moveFavoritesContainer--qp39R",x.s.pt4.pb4.ml8.mr8.mb8.$)},a.createElement("div",{className:M()(x.s.flex.itemsCenter.justifyBetween.pl8.pr8.$,"favorited_section--favoriteToMoveHeaderContainer--2RB9p favorited_section--sectionHeaderContainer--otgqF sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa")},a.createElement("div",{onClick:_,className:x.s.flex.itemsCenter.justifyBetween.$,role:"button",tabIndex:0},a.createElement(en.B,{className:M()(x.s.flex.itemsCenter.p6.mr12.colorIcon.$,"favorited_section--moveFavoritesContainerHeaderLeftBlockItems--pl1Hf"),svg:u?rL.A:rD.A}),(0,N.tx)("sidebar.move_these_starred_items"),a.createElement(en.B,{svg:r0.A,className:M()("favorited_section--helpIcon--vfl5Y",x.s.flex.itemsBaseline.ml4.$),"data-tooltip-type":rH.Ib.TEXT,"data-tooltip":(0,N.t)("file_browser.planless_favorites.your_favorited_items_tooltip"),"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200})),u?null:a.createElement(rW.Ex,{text:m.length>99?"99+":`${m.length}`,color:rW.zE.DEFAULT,className:x.s.mr8.colorText.colorBgSelectedSecondary.$})),u?a.createElement("div",{className:"favorited_section--favoritesToMoveContentContainer--xYv6p"},g,a.createElement("div",{className:x.s.flex.justifyBetween.m8.h24.$},a.createElement(rG.$$,{className:"favorited_section--favoritesToMoveActionButtons--FUt77",onClick:()=>{t(tm.to({type:rQ,data:{favorites:m}}))}},(0,N.tx)("file_browser.planless_favorites.add_to_sidebar")),a.createElement(rG.nR,{className:"favorited_section--unstarAllButton--Rhy3- favorited_section--favoritesToMoveActionButtons--FUt77",onClick:p},(0,N.tx)("file_browser.planless_favorites.unstar_all")))):null))}function r4(e){let t=(0,n.d4)(e=>e.currentTeamId),r=(0,n.wA)();return t?a.createElement(eN.SidebarRow,{isSelected:e.selectedView&&"limitedTeamSharedProjects"===e.selectedView.view,onClick:()=>{r(e7.eP()),r(eS.Oe({clickedResourceType:"limitedTeamSharedProjects"}))},icon:a.createElement(e6.t,null),text:a.createElement(S.E,{truncate:!0},(0,N.tx)("sidebar.all_shared_projects"))}):null}var r8=r(571211);function r5(e){return e?(0,N.t)("sidebar.browse.all_workspaces"):(0,N.t)("sidebar.browse.all_teams")}function r3(){let e=(0,n.d4)(e=>e.currentUserOrgId),t=(0,n.d4)(t=>e?t.orgById[e]:null),r=(0,K.c4)(e).data??!1;return t&&e?a.createElement(a.Fragment,null,r5(r)):null}function r6({hasWorkspaces:e}){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.currentUserOrgId),l=(0,n.d4)(e=>e.selectedView),o=(0,ti.S)(),i=(0,n.d4)(e=>r?e.orgById[r]:null),s="org"===l.view&&l.orgId===r,d=r5(e);return i&&r&&d?a.createElement(eN.SidebarRow,{isSelected:s,onClick:()=>{t(eS.$T({view:"org",orgId:r,orgViewTab:tg.X.HOME})),t(eS.Oe({clickedResourceType:"org",resourceIdOrKey:r}))},icon:o?a.createElement(e6.t,{className:x.s.colorIcon.$}):a.createElement(r8.Y,null),text:a.createElement(S.E,{truncate:!0},d)}):null}var r7=r(618856),r9=r(460396);let ae="seen_team_admin_moved_unassigned_drafts_onboarding",at=(0,em.r1)(ae);function ar(){let e=(0,eo.md)(at),{show:t,isShowing:r,complete:n}=(0,ec.e)({overlay:eg.tZO,priority:e_.N.DEFAULT_MODAL},[e]);return(0,c.h)(()=>{t({canShow:e=>!e})}),a.createElement(ep.rq,{arrowPosition:ef.F_.LEFT_TITLE,clickOutsideToHide:!0,description:(0,N.tx)("team_admin.onboarding.unassigned_drafts.description"),isShowing:r,onClose:n,primaryCta:{label:(0,N.tx)("general.got_it"),type:"button",onClick:n,ctaTrackingDescriptor:ed.c.DONE},secondaryCta:{label:(0,N.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/4420549259799",ctaTrackingDescriptor:ed.c.LEARN_MORE},shouldCenterArrow:ef.EL.FALLBACK,targetKey:ai,title:(0,N.tx)("team_admin.onboarding.unassigned_drafts.title"),trackingContextName:r9.o8,userFlagOnShow:ae})}var aa=r(499668),an=r(613733),al=r(253332),ao=r(407638);let ai="PRO_ADMIN_SETTINGS_LINK_ONBOARING_KEY";function as(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.currentTeamId),l=(0,n.d4)(e=>e.teams),o=(0,n.d4)(ao.getPermissionsState),i=!!r&&(0,ao.hasAdminRoleAccessOnTeam)(r,o),s=(0,eV.px)(),d=(0,eV.W8)(s),c=(0,an.MF)({label:an.A5.ProAdminSettingsLink.canAdmin,oldValue:p.Qw.useMemoizedLoaded(i),newValue:d,enableFullRead:(0,aa.DQ)(aa.Pw.GROUP_5)}).unwrapOr(!1),m=r?l[r]:null,u=p.Qw.useMemoizedLoaded({isProTeam:!!m&&m.pro_team,hasProAccess:!!m&&(0,al.w5)(m)}),_=(0,eV.No)(),f=(0,a.useMemo)(()=>_.transform(({tier:e})=>({isProTeam:e===eF.Ag.PRO,hasProAccess:e===eF.Ag.PRO||e===eF.Ag.STUDENT})),[_]),g=(0,an.MF)({label:an.A5.ProAdminSettingsLink.teamTierData,oldValue:u,newValue:f,enableFullRead:(0,aa.DQ)(aa.Pw.GROUP_5)});if("loaded"!==g.status)return null;let E=g.data;if(!r||!c||!E.hasProAccess)return null;let b=e.selectedView&&"teamAdminConsole"===e.selectedView.view,v=a.createElement(e$.e9,{planType:eU.ps.TEAM,planId:r,isSelected:b,isDataLoaded:!0,isOrgAdmin:!1});return a.createElement(a.Fragment,null,a.createElement(eX,{badge:E.isProTeam?v:void 0,isSelected:b,dataTestId:"admin-settings-link",dataOnboardingKey:ai,onClick:()=>{t(eS.$T({view:"teamAdminConsole",teamId:r,isProTeam:E.isProTeam,teamAdminConsoleViewTab:E.isProTeam?ez.Iv.DASHBOARD:ez.Iv.MEMBERS})),t(eS.Oe({clickedResourceType:"teamAdminSettings",resourceIdOrKey:r}))}}),a.createElement(ar,null))}var ad=r(116920),ac=r(615233),am=r(790840),au=r(187782),a_=r(174121),ap=r(845037),af=r(752181),ag=r(679996),aE=(e=>(e.STUDENT="student",e.EDUCATOR="educator",e.ADMINISTRATOR="administrator",e.EMPTY="",e))(aE||{}),ab=(e=>(e.K12="k12",e.HIGHER_ED="higher_ed",e.BOOTCAMP_OR_ONLINE="bootcamp_or_online",e.EMPTY="",e))(ab||{}),av=(e=>(e.GENERAL_EDUCATION="General Education",e.SOCIAL_STUDIES="Social Studies",e.ENGLISH_LANGUAGE_ARTS="English Language Arts",e.COMPUTER_SCIENCE_ENGINEERING_TECHNOLOGY="Computer Science / Engineering / Technology",e.CAREER_AND_TECHNICAL_EDUCATION="Career and Technical Education",e.MATH="Math",e.SCIENCE="Science",e.ART_GRAPHIC_DESIGN="Art / Graphic Design",e.LIBRARIES="Libraries",e.FOREIGN_LANGUAGE="Foreign Language",e.HUMAN_COMPUTER_INTERACTION="Human-Computer Interaction",e.GRAPHIC_VISUAL_DESIGN="Graphic / Visual Design",e.COMPUTER_SCIENCE="Computer Science",e.ENTREPRENEURSHIP="Entrepreneurship",e.UX_UI_OR_INTERACTION_DESIGN="UX/UI or Interaction Design",e.INFORMATION_SCIENCE="Information Science",e.OTHER="Other",e))(av||{});a.createContext({});var ah=r(133318),ay=r(178806),aw=r(359567);function aT(){return a.createElement("div",{className:"base_upgrade_section--divider--k-uOp sidebar--divider--sHsz4"})}function aI(e){return a.createElement(rV.fu,{name:e.trackingContext,properties:e.trackingProperties},a.createElement("div",{className:e.demure?"base_upgrade_section--contentMindful--eOyhd base_upgrade_section--content--95XrT":"base_upgrade_section--content--95XrT"},e.onDismiss&&a.createElement(ah.Jn,{className:"base_upgrade_section--closeButton--cbjWt",onClick:e.onDismiss}),e.header&&a.createElement("div",{className:x.s.wFull.if(e.demure,x.s.font13.lh24,x.s.mb12).$},e.header,!e.demure&&a.createElement(aT,null)),!!e.icon&&e.icon,e.countDownDaysLeft&&a.createElement("div",{className:"base_upgrade_section--countdownTicker--6YLVt"},a.createElement(S.E,{children:e.countDownDaysLeft,fontWeight:"medium",fontSize:14})),a.createElement("div",{className:e.demure?"base_upgrade_section--textContainerMindful--CttjJ":"base_upgrade_section--textContainer--ObHaO"},e.titleText&&a.createElement("p",{className:"base_upgrade_section--title--MLhT1"},e.titleText),a.createElement("p",null,e.bodyText)),a.createElement(aw.hK,{height:12}),a.createElement(ay.Ih,{onClick:e.onClickCTA,"data-testid":e.ctaDataTestId,disabled:e.disabled,trackingProperties:e.ctaTrackingProperties},e.ctaText)))}let ax="upgrade_section--upgradeTextEmphasized--aQCr9";var aN=(e=>(e[e.UPGRADE=0]="UPGRADE",e[e.CREATE=1]="CREATE",e))(aN||{});function aS(e){let t=(0,n.wA)(),r=e.type,l=a.createElement("span",{className:ax},(0,N.t)("edu.sidebar_section.verified"));return a.createElement(aI,{trackingContext:0===r?"Edu Upgrade Section":"Edu Create Section",icon:a.createElement(am.o,null),bodyText:a.createElement(a.Fragment,null,l," ",0===r?(0,N.t)("edu.sidebar_section.upgrade"):(0,N.t)("edu.sidebar_section.create_team")),ctaText:0===r?(0,N.t)("edu.choose_team"):(0,N.t)("edu.create_free_team"),onClickCTA:0===r?()=>{t((0,tm.to)({type:ap.q}))}:()=>{t(e7.Dw({isEduTeam:!0}))},onDismiss:()=>{t(eA.b({dismissed_edu_sidebar:!0}))},ctaDataTestId:"edu-upgrade-cta"})}function aC({daysLeft:e}){let t=(0,n.wA)(),r=(0,u.Rs)(eG.UpR,{},{enabled:!(0,l.k)().edu_bootcamps_reverification}),o=(0,$.H5)(),i=!!(0,af.f)("edu_hide_verification");if((0,l.k)().edu_bootcamps_reverification||(i=(r.data?.currentUser?.schoolType?.status===Q.tT.Loaded?r.data.currentUser.schoolType.data:null)===ab.BOOTCAMP_OR_ONLINE&&o()),e<0)return null;let s=()=>{t((0,tm.to)({type:a_.V,data:{upsellSource:ag.b.EDU_UPGRADE_SECTION}}))},c=a.createElement(Z.eM,{onClick:()=>d.Ay.redirect("/education/apply",E.Ay.isIpadNative?void 0:"_blank")},(0,N.tx)("edu.sidebar_section.verify_your_education_status"));return e>0?a.createElement(aI,{trackingContext:"Universal Upgrade Section Education Plan Countdown",countDownDaysLeft:e,titleText:(0,N.tx)("edu.sidebar_section.education_plan_expires_in_days",{daysLeft:e}),bodyText:i?(0,N.tx)("edu.sidebar_section.bootcamp_users_after_that_you_ll_need_to_upgrade_your_team"):(0,N.tx)("edu.sidebar_section.after_that_you_ll_need_to_upgrade_your_team_or_verify",{verify:c}),ctaText:(0,N.tx)("upgrade.upgrade_to_professional"),onClickCTA:s}):a.createElement(aI,{trackingContext:"Universal Upgrade Section Education Plan Expired",icon:a.createElement(au.e,null),titleText:(0,N.tx)("edu.sidebar_section.education_plan_expired"),bodyText:i?(0,N.tx)("edu.sidebar_section.bootcamp_users_to_keep_editing_upgrade_your_team"):(0,N.tx)("edu.sidebar_section.to_keep_editing_upgrade_your_team",{verify:c}),ctaText:(0,N.tx)("upgrade.upgrade_to_professional"),onClickCTA:s})}var ak=r(870567),aR=r(314979),aA=r(531919),aO=r(583940);let aP="dismissed_limited_team_space_uub";function aF(e){let t=(0,n.wA)(),[r,l]=a.useState(!1),o=(0,u.Rs)(eG.qOl,{teamId:e.team.id}),i=(0,Y.iZ)(),s="loaded"===o.status&&(0,ak.oA)(o.data?.teamRoleRequest),d=!!s&&"pending"===s.status,c=!!s&&"approved"===s.status,m=!!s&&"denied"===s.status;if(a.useEffect(()=>{d&&l(!0)},[d]),"loaded"!==o.status||c||m)return null;let _=async()=>{try{await aO.$.requestTeamRole({teamId:e.team.id}),t(tM.F.enqueue({message:(0,N.t)("view_permissions.request_sent"),type:"request-team-membership"})),(0,j.uE)("limited_team_plan_request_upgrade_clicked",{user:i},{teamId:e.team.id}),l(!0)}catch(e){t(aR.s.error("Failed to request team role",e))}};return a.createElement(aI,{bodyText:(0,N.tx)("upgrade.to_get_unlimited_files_must_be_member",{currentTeamName:e.team.name}),ctaText:r?(0,N.tx)("upgrade.access_requested"):(0,N.tx)("upgrade.request_full_access"),ctaTrackingProperties:{},demure:"very",disabled:d||r,header:(0,N.tx)("upgrade.limited_access_in_this_team"),onClickCTA:_,onDismiss:()=>{t(aA.bE({all_team_flags:[{team_id:e.team.id,flags:{[aP]:!0}}]}))},trackingContext:"Limited Team Space Dismissable Upgrade Section",trackingProperties:{teamId:e.team.id}})}var aL=r(105500),aD=r(631177),aM=r(51377);function aB({orgUpsellEligibility:e}){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.userFlags),l=e===aM.VY.SINGLE_TEAM?(0,N.tx)("upgrade.access_cross_team_design_libraries_sso_and_more"):(0,N.tx)("upgrade.centralize_your_teams_and_share_design_libraries"),o=`${e===aM.VY.SINGLE_TEAM?"Single-Team":"Multi-Team"} Dismissible Org Upgrade Section`;return a.createElement(aI,{trackingContext:o,icon:a.createElement(aL.L,null),bodyText:l,ctaText:(0,N.tx)("upgrade.view_plans"),onClickCTA:()=>{e===aM.VY.SINGLE_TEAM&&t((0,tm.to)({type:aD.HS,data:{upsellSource:ag.b.ORG_UPGRADE_SECTION}})),e===aM.VY.MULTIPLE_TEAMS&&t((0,tm.to)({type:aD.u3,data:{upsellSource:ag.b.ORG_UPGRADE_SECTION}}))},onDismiss:()=>t((0,aM.CJ)(r)),ctaDataTestId:"org-upgrade-cta"})}var aU=r(99739),a$=r(222556);let aj="dismissed_paid_free_space_uub";function aW(e){let t=(0,n.wA)(),r=a$.h.useTrackingContext({trigger:ag.b.UNIVERSAL_UPGRADE_SECTION}),{open:l}=(0,aU.OC)(),o=a.createElement(Z.eM,{onClick:()=>{l()},trackingProperties:{trackingDescriptor:ed.c.WORK_IN_ONE_OF_YOUR_PAID_TEAMS}},(0,N.tx)("upgrade.work_in_one_of_your_paid_teams")),i=(0,N.tx)("upgrade.to_get_unlimited_files_and_features_link_switch_teams_or_upgrade_this_team_s_plan",{linkSwitchTeams:o});return a.createElement(aI,{trackingContext:"Paid Free Space Dismissible Upgrade Section",trackingProperties:{teamId:e.team.id,...r},header:(0,N.tx)("upgrade.this_team_is_on_a_free_plan"),bodyText:i,ctaText:(0,N.tx)("upgrade.view_all_plans"),onClickCTA:()=>{t((0,tm.to)({type:a_.V,data:{upsellSource:ag.b.UNIVERSAL_UPGRADE_SECTION}}))},ctaTrackingProperties:{trackingDescriptor:ed.c.VIEW_ALL_PLANS},onDismiss:()=>{t(aA.bE({all_team_flags:[{team_id:e.team.id,flags:{[aj]:!0}}]}))},demure:"very"})}var aG=r(817502),aV=r(925085),aH=r(914515),az=r(800802);let aY="pro_trials_upgrade_section--divider--0tBoX sidebar--divider--sHsz4";function aK(){let e=(0,n.wA)();return a.createElement(aI,{trackingContext:"Universal Upgrade Section Pro Trial Entry",trackingProperties:az.ng.getTrackingProperties(),icon:a.createElement(aG.K,null),titleText:a.createElement(S.E,null,(0,N.tx)("upgrade.free_professional_team_trial")),bodyText:a.createElement(S.E,null,(0,N.tx)("upgrade.enjoy_our_best_design_features_for_14_days")),ctaText:a.createElement(S.E,null,(0,N.tx)("upgrade.try_the_professional_plan")),onClickCTA:()=>e((0,tm.to)({type:aH.m})),ctaDataTestId:"redesigned-upgrade-button-pro-trial-entry-upgrade",ctaTrackingProperties:az.ng.getTrackingProperties("Try the Professional Plan")})}function aq({team:e}){return a.createElement(aV.Y,{spacing:8,dataTestId:"team-info"},a.createElement(tU.nl,{size:tU.Pf.SMALL,team:e,fallbackDisplay:t$.U.HIDDEN,shape:"ROUNDED_SQUARE"}),a.createElement(S.E,{children:e.name,fontWeight:"medium",fontSize:11,truncate:"end"}))}function aJ({daysLeft:e,trialTeam:t,onClickCTA:r}){var n;let l=a.createElement(Z.eM,{onClick:r,dataTestId:"pro_trial_inline_upgrade",trackingProperties:az.ng.getTrackingProperties()},(0,N.tx)("upgrade.pro_trial_inline_upgrade_cta"));return a.createElement(rV.fu,{name:"Universal Upgrade Section Pro Trial Countdown",properties:az.ng.getTrackingProperties()},a.createElement("div",{className:aY}),a.createElement("div",{className:"pro_trials_upgrade_section--redesignedUpgradeSection--E-f1E"},a.createElement("div",{className:"pro_trials_upgrade_section--countdownInfo--sN5Pd"},a.createElement(aq,{team:t})),a.createElement("div",{className:aY}),a.createElement("div",{className:"pro_trials_upgrade_section--countdownDaysTicker--rDpWO"},a.createElement(S.E,{children:e,color:e<=2?"danger":"default",fontWeight:"medium",fontSize:24})),a.createElement("div",{className:"pro_trials_upgrade_section--countdownDaysLeftText--a-ppM"},a.createElement(S.E,{color:e<=2?"danger":"default",fontWeight:"medium",fontSize:13},(0,N.tx)("upgrade.days_left_in_trial",{days:e}))),a.createElement("div",{className:"pro_trials_upgrade_section--redesignedUpgradeText--ho-7F"},a.createElement(S.E,{children:(n=e)>=14?a.createElement(S.E,null,(0,N.tx)("upgrade.pro_trial_uub_countdown.this_counter_will_help_you_keep_track",{upgrade:l})):n>=10?a.createElement(S.E,null,(0,N.tx)("upgrade.pro_trial_uub_countdown.if_you_are_enjoying_your_trial",{upgrade:l})):n>=4?a.createElement(S.E,null,(0,N.tx)("upgrade.pro_trial_uub_countdown.try_out_these_features")):n>=2?a.createElement(S.E,null,(0,N.tx)("upgrade.pro_trial_uub_countdown.you_will_miss_these_files")):n>=1?a.createElement(S.E,null,(0,N.tx)("upgrade.pro_trial_uub_countdown.just_a_memory")):null})),e<=9&&a.createElement(Z.vd,{className:"pro_trials_upgrade_section--redesignedUpgradeButton--SP1nz",onClick:r,dataTestId:"redesigned-upgrade-button-pro-trial-countdown-upgrade",trackingProperties:az.ng.getTrackingProperties()},a.createElement(S.E,null,(0,N.tx)("upgrade.upgrade_to_professional")))))}function aX(e){return a.createElement(aI,{trackingContext:"Universal Upgrade Section Pro Trial Expired",trackingProperties:az.ng.getTrackingProperties(),titleText:a.createElement(S.E,null,(0,N.tx)("upgrade.currently_on_starter_plan")),bodyText:a.createElement(S.E,null,(0,N.tx)("upgrade.your_trial_has_ended")),ctaText:a.createElement(S.E,null,(0,N.tx)("upgrade")),onClickCTA:e.onClickCTA,ctaDataTestId:"redesigned-upgrade-button-pro-trial-expired-upgrade",ctaTrackingProperties:az.ng.getTrackingProperties(),header:a.createElement(aq,{team:e.team})})}function aQ(e){let t=(0,n.wA)(),{ongoingUpgradableTrials:r,expiredUpgradableTrials:l}=e,o=(0,n.d4)(e=>e.teams),i=e=>{t((0,tm.to)({type:a_.V,data:{teamId:e,upsellSource:ag.b.PRO_TRIAL_UPSELL_MODAL}}))};return l.length>0?a.createElement(aX,{team:o[l[0].teamId],onClickCTA:()=>i(l[0].teamId)}):r.length>0?a.createElement(aJ,{trialTeam:o[r[0].teamId],daysLeft:r[0].daysLeft,onClickCTA:()=>i(r[0].teamId)}):null}var aZ=(e=>(e.PRO_TRIALS_ENTRY="Pro Trials Entry",e.PRO_TRIALS_UPGRADE="Pro Trials Upgrade",e.LIMITED_TEAM_SPACE="Limited Team Space",e.EDU_EXPIRY="EDU Expiry",e.EDU_UPGRADE="EDU Upgrade",e.ORG_UPGRADE="Org Upgrade",e.PAID_FREE_SPACE="Paid Free Space",e.UNIVERSAL="Universal",e))(aZ||{}),a0=(e=>(e.BETWEEN_CONTENT="between_content",e.AFTER_CONTENT="after_content",e.IN_FOOTER="in_footer",e))(a0||{});function a1({onTeam:e,hitFileLimit:t}){let r=(0,n.wA)(),l=a$.h.useTrackingContext({trigger:ag.b.UNIVERSAL_UPGRADE_SECTION}),o=t?a.createElement(a.Fragment,null,a.createElement("span",{className:ax},(0,N.tx)("upgrade.running_out_of_files_in_your_free_team"))," ",(0,N.tx)("upgrade.upgrade_to_give_your_ideas_and_designs_room_to_grow_without_limits")):(0,N.tx)("upgrade.ready_to_go_beyond_free_plan_upgrade_for_premium_features");return a.createElement(aI,{trackingContext:"Universal Upgrade Section",trackingProperties:{onTeam:e,hitFileLimit:t,...l},icon:a.createElement(aL.L,null),bodyText:o,ctaText:(0,N.tx)("upgrade.view_plans"),ctaTrackingProperties:{trackingDescriptor:ed.c.UPGRADE},ctaDataTestId:"redesigned-upgrade-button",onClickCTA:()=>{r((0,tm.to)({type:a_.V,data:{upsellSource:ag.b.UNIVERSAL_UPGRADE_SECTION}}))}})}var a2=r(317720),a4=r(813009),a8=r(987591),a5=r(709292),a3=r(986761),a6=r(468787),a7=r(361053),a9=r(231159);let ne=(0,eo.eU)(e=>{let t=e(nt);return!!t&&[eF.P4.FILES_LIMITED,eF.P4.FILES_LIMITED_LEGACY,eF.P4.WHITEBOARD_FILES_LIMITED,eF.P4.WHITEBOARD_FILES_LIMITED_BETA,eF.P4.SLIDE_FILES_LIMITED,eF.P4.SLIDE_FILES_LIMITED_BETA,eF.P4.GLOBAL_FILES_LIMITED_LEGACY,eF.P4.GLOBAL_FILES_LIMITED].some(e=>t?.restrictions_list?.includes(e))}),nt=(0,a9.bt)(e=>{let t=e.currentTeamId;return t?e.teams[t]:null});function nr(){return a.createElement(P.tH,{boundaryKey:"SidebarUpgradeSection",fallback:P.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:L.e.MONETIZATION_UPGRADES}},a.createElement(na,null))}function na(){let e=nl();return null===e?null:a.createElement(nn,{...e})}function nn(e){switch(e.type){case aZ.PRO_TRIALS_ENTRY:return a.createElement(aK,null);case aZ.PRO_TRIALS_UPGRADE:return a.createElement(aQ,{ongoingUpgradableTrials:e.props.ongoingUpgradableTrials,expiredUpgradableTrials:e.props.expiredUpgradableTrials});case aZ.EDU_EXPIRY:return a.createElement(aC,{daysLeft:e.props.daysLeft});case aZ.EDU_UPGRADE:return a.createElement(aS,{type:e.props.type});case aZ.ORG_UPGRADE:return a.createElement(aB,{orgUpsellEligibility:e.props.orgUpsellEligibility});case aZ.PAID_FREE_SPACE:return a.createElement(aW,{team:e.props.team});case aZ.LIMITED_TEAM_SPACE:return a.createElement(aF,{team:e.props.team});case aZ.UNIVERSAL:default:return a.createElement(a1,{onTeam:e.props.onTeam,hitFileLimit:e.props.hitFileLimit})}}function nl(){let e=function(){let e=(0,eP.FC)(),t=(0,Y.TA)(),r=(0,af.f)(az.Jy),a=(0,a6.xX)(),l=(0,n.d4)(e=>e.userTeamFlags),o=(0,eV.D6)("useProTrialsUpgradeSectionProps"),i=(0,eV.fh)(o).unwrapOr(!1);if(az.ng.uxEnabled()&&!i){let{ongoingTrials:n,expiredTrials:o}=az.ng.getUpgradableProTrials(l,e),i=o.filter(az.ng.canSeeProTrialExpiryUx);if(n.length>0||i.length>0)return{type:aZ.PRO_TRIALS_UPGRADE,props:{ongoingUpgradableTrials:n,expiredUpgradableTrials:i}};if(r&&a.length>0&&az.ng.isUserInVariant(t))return{type:aZ.PRO_TRIALS_ENTRY}}return null}(),t=function(){let e=(0,Y.iZ)(),t=(0,a7.ol)(),r=(0,eP.FC)(),a=(0,u.Rs)(eG.UpR,{}),o=a.data?.currentUser?.eduPeriodEnd,i=(0,n.d4)(e=>e.userFlags),s=(0,eV.D6)("useEduUpgradeSectionProps"),d=(0,eV.fh)(s).unwrapOr(!1);if(!e||"loaded"!==a.status)return null;let c=(0,a8.x$)(o,(0,a8.cn)(e)),m=c>0&&c!==1/0&&(0,a8.cn)(e)&&t?.student_team_state===eF.kU.STUDENT_TEAM_CURRENT,_=0===c&&t?.student_team_state===eF.kU.STUDENT_TEAM_EXPIRED&&(0,al.oc)(t.id,r);if((0,l.k)().edu_offboarding_experience&&(m||_))return{type:aZ.EDU_EXPIRY,props:{daysLeft:c}};if(!i.dismissed_edu_sidebar&&(0,a8.cn)(e)&&!d){let e=(0,al.Kg)(r).length>0;return{type:aZ.EDU_UPGRADE,props:{type:e?aN.UPGRADE:aN.CREATE}}}return null}(),r=function(){let e=(0,Y.iZ)(),t=(0,n.d4)(e=>e.teams),r=(0,a7.ol)(),a=(0,eo.md)(ne),l=(0,eo.md)(a5.Lm),o=(0,u.Rs)(eG.kQI,{id:r?.id??""},{enabled:!!r}),i=(0,eT.vt)(),s=(0,ew.jn)();return e&&r&&"loaded"===o.status&&o.data.team?.hasPermission&&"loaded"===l.status&&l.data?!r||(0,a8.cn)(e)||(0,al.w5)(t[r.id])||i||s?null:{type:aZ.UNIVERSAL,props:{onTeam:Object.keys(t).length>0,hitFileLimit:a}}:null}(),a=function(){let e=(0,n.d4)(e=>e.userFlags),t=function(){let e=(0,eP.FC)(),t=(0,a4.R)(e=>({orgUsersByOrgId:e.orgUsersByOrgId,user:e.user,userFlags:e.userFlags,teams:e.teams,currentTeamId:e.currentTeamId})),r=(0,u.Rs)((0,eG.yQw)((0,aa._X)(aa.Pw.GROUP_6)&&t.currentTeamId?{teamId:t.currentTeamId}:null));return(0,aa._X)(aa.Pw.GROUP_6)&&t.currentTeamId?r.transform(({team:r})=>(0,aM.hF)(t,e,r)):a2.Qw.loaded((0,aM.hF)(t,e))}(),r=(0,aM.j)(e);return t.transform(e=>e===aM.VY.NONE||r?null:{type:aZ.ORG_UPGRADE,props:{orgUpsellEligibility:e}})}(),o=function(){let e=(0,Y.iZ)(),t=(0,n.d4)(e=>e.teams),r=(0,a7.ol)(),a=(0,eo.md)(a5.Lm),l=(0,n.d4)(e=>e.userTeamFlags),o=(0,u.Rs)(eG.kQI,{id:r?.id??""},{enabled:!!r}),i=(0,$.Mi)();return!e||!r||"loaded"!==a.status||a.data||(0,a8.cn)(e)||(0,al.w5)(t[r.id])||"loaded"!==o.status||!o.data.team?.hasPermission||!i()?null:(0,a3.gY)(l,aj,r.id,7776e6)?null:{type:aZ.PAID_FREE_SPACE,props:{team:r},overrideLocation:a0.IN_FOOTER}}(),i=function(){let e=(0,Y.iZ)(),t=(0,a7.ol)(),r=(0,q.d)(),a=(0,n.d4)(e=>e.userTeamFlags);return e&&t&&r?(0,a3.gY)(a,aP,t.id,7776e6)?null:{type:aZ.LIMITED_TEAM_SPACE,props:{team:t},overrideLocation:a0.IN_FOOTER}:null}();return null!==e?e:null!==i?i:null!==t?t:null!==r?r:"loaded"===a.status&&a.data?a.data:null!==o?o:null}var no=r(773511),ni=r(947135),ns=r(782073),nd=r(82433),nc=r(989232);let nm=(0,eo.eU)(!1);function nu(){let[e,t]=(0,eo.fp)(nm),r=(0,eo.md)(o.Bb);if(!r)return null;let n=async()=>{t(!0);let e=await r.prompt();"dismissed"===e.outcome&&t(!1),(0,nc.trackEvent)("add_to_chromebook_clicked",{installed:"accepted"===e.outcome})};return a.createElement(no.E,{...nd.xk(n_.container,e&&n_.containerFadeOut),onClick:n},a.createElement("span",{className:"x2lah0s"},a.createElement(ni.z,null)),a.createElement(S.E,{truncate:!0,color:"default"},a.createElement("span",{...nd.xk(n_.text)},(0,N.tx)("file_browser.tool_bar.add_to_chromebook"))))}let n_={container:{width:"xh8yej3",display:"x78zum5",alignItems:"x6s0dn4",opacity:"x1hc1fzr",padding:"xtdwleo",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,gap:"x167g77z",rowGap:null,columnGap:null,":focus-visible_boxShadow":"x1icplyp",$$css:!0},containerFadeOut:{opacity:"xg01cxk",pointerEvents:"x47corl",transition:"x177bw73",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,$$css:!0},text:{...ns.g.textBodyMedium,$$css:!0}};var np=r(760893),nf=r(376771),ng=r(855965),nE=r(580181),nb=r(660948),nv=r(522258),nh=r(792694);function ny(){let e=(0,n.wA)(),t=(0,n.d4)(e=>e.userFlags),r=(0,nE.Om)(),l=(0,nE.tv)();return t[nv.w3]?null:a.createElement(rV.fu,{name:rz.e0.COMMUNITY_MOVED_TO_RESOURCE_HUB_BANNER},a.createElement("div",{className:"x15dj09p"},a.createElement(np.cV,{icon:a.createElement(ng.U,null),variant:"default",onDismiss:()=>{e(eA.b({[nv.w3]:!0}))}},a.createElement(nf.Q,{title:(0,N.t)("community.resource_hub.a_new_place_to_explore_community")},a.createElement("div",{className:"x1n0bwc9"},(0,N.t)("community.resource_hub.introducing_templates_and_tools"))),a.createElement(no.E,{"aria-label":(0,N.t)("community.resource_hub.take_me_there"),...nd.xk(nw.button),onClick:()=>{d.Ay.push(new nE.au({...r,tab:nb.N$.COMMUNITY},l).href),(0,nh.lz)()}},a.createElement("div",null,(0,N.t)("community.resource_hub.take_me_there"))))))}let nw={button:{color:"x1quhyk7",...ns.g.textBodyMediumStrong,$$css:!0}};var nT=r(983104),nI=r(318717);function nx(){let e=(0,n.wA)(),t=()=>{(0,nc.trackEvent)("community_browser_sidebar_action_clicked"),e(eS.$T({view:"communityHub",subView:"searchAndBrowse",data:(0,nI.Gu)()}))};return a.createElement(rV.L0,{trackingEventName:"community_browser_sidebar_action_clicked",className:M()(x.s.flex.flexRow.itemsCenter.gap12.h48.pl12.pr12.colorText.cursorDefault.$,"explore_community_button--hoverColor--mDUIs"),"data-onboarding-key":nv.vM,onClick:e=>{e.preventDefault(),e.stopPropagation(),t()}},a.createElement(nT.J,null),a.createElement(S.E,null,(0,N.tx)("sidebar.explore_community")))}function nN(e){let t=(0,eD.Fz)(),r=(0,eV.T5)("SidebarFooter"),n=(0,eD.LQ)(r),l=function(){let e=(0,o.lH)(),t=(0,eo.md)(o.Bb);return!!E.Ay.chromeos&&!!E.Ay.chrome&&!e&&!!t}(),i=!(0,ac.sL)(),s=i&&t&&!n&&"loaded"===r.status,d=i&&(!t||n)&&"loaded"===r.status;return a.createElement("div",{className:x.s.sticky.bottom0.colorBg.zIndex1.if(e.hasTopBorder,x.s.bt1.colorBorder.bSolid).$},e.shouldShowUUBInFooter&&a.createElement("div",{className:x.s.pb10.pt12.$},a.createElement(nr,null)),l&&a.createElement(nu,null),s&&a.createElement(ny,null),d&&a.createElement(nx,null))}var nS=r(254395),nC=r(887710);function nk(e){return a.createElement("div",{className:x.s.flex.flexColumn.colorBg.if(e.hasBottomBorder,x.s.bb1.colorBorder.bSolid).$},a.createElement(nC.Xg,null),a.createElement(nS.Zn,null))}var nR=r(305755);function nA(e){let t=(0,n.wA)(),r=(0,eC._6)(),l=(0,n.d4)(e=>e.currentUserOrgId),o=(0,n.d4)(e=>e.teamFeedBellStates),i=!!(l&&o[l]),s="teamFeed"===r.view;return a.createElement(eN.SidebarRow,{onClick:()=>{t(eS.$T({view:"teamFeed"})),t(eS.Oe({clickedResourceType:"teamFeed"}))},isSelected:s,icon:a.createElement(nR.h,null),text:a.createElement("span",{className:"team_feed_page_link--sectionNameCustomSections--dPwog sidebar--sectionNameCustomSections--9e7LZ sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa"},a.createElement("div",{className:"team_feed_page_link--sectionNameCustomSectionsLeft--MLMFK"},(0,N.tx)("fig_feed.feed"),i&&a.createElement("div",{className:"team_feed_page_link--redDot--t6QPY red_dot--baseRedDot--pgZV7"})))})}var nO=r(498808);function nP({selectedView:e,teamFolderId:t,teamFolderName:r}){let l=(0,n.wA)();return t&&r?a.createElement(eN.SidebarRow,{isSelected:e&&"folder"===e.view&&e.folderId===t,onClick:()=>{l(e7.gN(t)),l(eS.Oe({clickedResourceType:"folder"}))},icon:a.createElement(rb.e,null),text:a.createElement(S.E,{truncate:!0,showTooltipWhenTruncated:!1},r),"data-onboarding-key":nO.Jo}):null}var nF=r(557102);function nL(){let e=(0,n.wA)(),t="deletedFiles"===(0,n.d4)(e=>e.selectedView).view;return a.createElement(a.Fragment,null,a.createElement(eN.SidebarRow,{isSelected:t,onClick:()=>{e(eS.$T({view:"deletedFiles"})),e(eS.Oe({clickedResourceType:"deletedFiles"}))},icon:a.createElement(nF.z,null),text:a.createElement("div",{className:x.s.pr36.$},a.createElement(S.E,null,(0,N.tx)("file_browser.tool_bar.trash")))}))}let nD="sidebar--section--COZVK",nM="sidebar--loading--AITp2",nB="sidebar--divider--sHsz4";var nU=r(821527);function n$(e){let t=(0,n.wA)(),r=(0,H.dq)(),o=(0,n.d4)(e=>e.currentTeamId),i=(0,n.d4)(e=>e.userFlags),s=(0,eP.FC)(),d=(0,n.d4)(e=>e.userStateLoaded),c=(0,eC._6)(),m=(0,n.d4)(e=>e.dragState),u=eI({project:"drafts"}),[_,p]=a.useState(0),[f,g]=a.useState(!1),[b,v]=a.useState(!1),[h,y]=a.useState(!1),w=e=>{t(eA.b({show_create_new_section_banner:!1}))},T=e=>{t(eR.pS({newCustomSectionIndex:0})),w(e)},I=!!o,S=(0,q.d)(),C=(0,eL.wA)(s),k=(0,eO.a9)(),R=k&&k.permission===eF._D.ADMIN,A=(0,eD.Fz)(),O=(0,W.D6)(r),P=()=>d?a.createElement(nr,null):null,F=I?e.dataDriftCorrectedTeamResources?.favoritedFiles:e.sidebarUser?.favoritedFiles,L=I?e.dataDriftCorrectedTeamResources?.favoritedPrototypes:e.sidebarUser?.favoritedPrototypes,D=I?e.dataDriftCorrectedTeamResources?.favoritedProjects:e.sidebarUser?.favoritedProjects;D&&e.FBGNavigationUpdatesTreatment!==$.ih.CONTROL&&(D=D.filter(t=>t.project?.id!==e.teamFolderId));let B=F?.length===0&&L?.length===0&&D?.length===0,U=e.FBGNavigationUpdatesTreatment===$.ih.CONTROL||!B,j=nl(),G={[$.ih.CONTROL]:a0.BETWEEN_CONTENT,[$.ih.VARIANT_A]:a0.IN_FOOTER,[$.ih.VARIANT_B]:a0.AFTER_CONTENT}[e.FBGNavigationUpdatesTreatment],V=j?.overrideLocation??G,z=!!m.data&&(m.type===eM.R.Folder||m.type===eM.R.Team||m.type===eM.R.Favorite),Y=C&&a.createElement("div",{className:nD},i.show_create_new_section_banner?a.createElement("div",{className:"sidebar--betaAnnouncementContainer--FfmFT"},a.createElement("div",{className:"sidebar--betaAnnouncementHeader--g6Qzz"},a.createElement("div",{className:"sidebar--betaAnnouncementHeaderTitle--AyDjm"},(0,N.tx)("favorited_resources.custom_sections_banner_header")),a.createElement("div",{role:"button",tabIndex:0,className:"sidebar--closeX---nRcN",onClick:e=>w(e)},a.createElement(en.B,{svg:nU.default}))),a.createElement("div",{className:"sidebar--betaAnnouncementBodyContainer--8u60g"},a.createElement("p",null,(0,N.tx)("favorited_resources.custom_sections_banner_body")),a.createElement("br",null),a.createElement("p",null,a.createElement(Z.tM,{className:"sidebar--betaAnnouncementButton--RCpKp",onClick:e=>T(e)},(0,N.tx)("favorited_resources.custom_sections_banner_create_new_section_button"))))):null),K=!(e.showLoadingState||e.showingFileBrowserLoader);return a.createElement(ee.A,{loadingElementId:"filebrowser-loading-sidebar",loaded:K},a.createElement(X.J,null,a.createElement("div",{className:x.s.flex.flexColumn.wFull.$},a.createElement(nk,{hasBottomBorder:h}),a.createElement(er.P,{className:"sidebar--sidebarScrollContainer--Z95XT",innerClassName:x.s.hFull.$,scrollingDisabled:!1,onScroll:e=>p(e)},a.createElement(ea.a,{onIntersectionChange:t=>{y(!t.isIntersecting),t.isIntersecting||f||(e.trackScroll(),g(!0))}}),a.createElement("div",{className:M()("sidebar--navContent--15V3f",{"sidebar--grabbingCursor--6rbhU":z},{"sidebar--navContentRedesigned--npUNY":(0,l.k)().file_browser_sidebar_row_ui})},a.createElement("div",{className:x.s.flexGrow1.flex.flexColumn.$},a.createElement(a.Fragment,null,a.createElement(ek,null),a.createElement(tt.r,{selectedView:c,dispatch:t}),A&&a.createElement(ad.w,null),a.createElement("div",{className:nB}),a.createElement("div",{className:x.s.mr8.mt2.mb2.$},a.createElement(r7.b,null)),(0,l.k)().xr_debounce_threshold&&C&&k&&k.permission!==eF._D.GUEST?a.createElement(nA,null):null,e.draftsProject&&a.createElement(te.s,{folder:e.draftsProject,selectedView:c,dispatch:t,shouldHideCreateFileButton:!u}),I&&a.createElement(a.Fragment,null,S?a.createElement(a.Fragment,null,a.createElement(r4,{selectedView:c}),a.createElement(nL,null)):a.createElement(a.Fragment,null,a.createElement(e9,{selectedView:c}),a.createElement(nL,null),a.createElement(as,{selectedView:c}),e.FBGNavigationUpdatesTreatment!==$.ih.CONTROL&&a.createElement(nP,{selectedView:c,teamFolderId:e.teamFolderId,teamFolderName:e.teamFolderName}))),V===a0.BETWEEN_CONTENT&&a.createElement("div",{className:nD},!!j&&a.createElement("div",{className:x.s.my8.mx0.h1.$,style:el.sx.add({backgroundColor:"var(--color-border)"}).$}),P()),k&&C&&(d?a.createElement(a.Fragment,null,a.createElement(r6,{hasWorkspaces:e.isOrgWithWorkspaces}),a.createElement(nL,null),C&&k&&!E.Ay.mobile&&a.createElement(a.Fragment,null,a.createElement(e3,{selectedView:c,org:C,orgUser:k}),R&&a.createElement(eh,null))):a.createElement("div",{className:nM},a.createElement(et.kt,null))),O&&Y,a.createElement("div",{className:nB}),d?a.createElement(a.Fragment,null,r?a.createElement(rj,{fileBrowserPreferences:e.sidebarUser?.fileBrowserPreferences,favoritedFiles:F,favoritedPrototypes:L,favoritedProjects:D,favoritedTeams:e.sidebarUser?.favoritedTeams??null,favoritedWorkspaces:e.sidebarUser?.favoritedWorkspaces??null,userSidebarSections:e.sidebarUser?.userSidebarSections?(0,Q.oA)(e.sidebarUser.userSidebarSections):[],previewYOffset:_}):a.createElement(a.Fragment,null,U&&a.createElement(r$,{fileBrowserPreferences:e.sidebarUser?.fileBrowserPreferences,favoritedFiles:F,favoritedPrototypes:L,favoritedProjects:D,favoritedTeams:null,favoritedWorkspaces:null,previewYOffset:_})),I&&a.createElement(r2,{teamUser:e.sidebarUser?.currentTeamUser??null,dataDriftCorrectedTeamResources:e.dataDriftCorrectedTeamResources,previewYOffset:_})):a.createElement("div",{className:nM},a.createElement(et.kt,null)),V===a0.AFTER_CONTENT&&a.createElement("div",{className:x.s.sticky.bottom0.colorBg.pb10.pt12.$},P()))),a.createElement(ea.a,{onInitialLoad:e=>{v(!e)},onIntersectionChange:e=>{v(!e.isIntersecting)}}))),a.createElement(nN,{hasTopBorder:V===a0.BETWEEN_CONTENT&&(b||h),shouldShowUUBInFooter:V===a0.IN_FOOTER}))))}function nj(e){let t=(0,Y.iZ)(),r=(0,H.dq)(),l=(0,q.d)(),o=(0,n.d4)(e=>e.currentTeamId),i=(0,n.wA)(),s=(0,J.Q)({currentOrgId:r,currentTeamId:o||null}),d="loaded"===s.status?s.data:null,c="loaded"!==s.status;(0,g.WX)({markName:"Sidebar",isLoaded:!c});let m=(0,Y.TA)(),u=(0,n.d4)(e=>m?e.authedUsers.byId[m]?.plans:null),[{status:p,data:f}]=(0,_.IT)((0,G.Xg)({teamId:o||void 0}),{enabled:!l}),E="loaded"===p&&f?.length===1?f[0]:null,b=E?.id,v=E?.name,h=null,y=(0,a.useMemo)(()=>d?{...d.currentUser}:null,[d]),w=(0,K.Zr)(d?.org??null),T=a.useMemo(()=>{if(y&&y.currentTeamUser&&o)return(0,W.TF)(y,o,u)},[y,o,u]),I=e.showingFileBrowserLoader;if(a.useEffect(()=>{if(o&&y&&y?.currentTeamUser){let e=y.currentTeamUser;!e.fileBrowserPreferences&&y.fileBrowserPreferences&&i(U.Sh({prefs:y.fileBrowserPreferences,orderedFolderSubscriptions:y.fileBrowserSectionPreferences?.filter(e=>e.teamId===o)[0]?.orderedFolderIds??[],teamUser:e}))}},[o,y,i]),y){if(r&&y.baseOrgUser){let e=y.baseOrgUser;y.fileBrowserPreferences=e.fileBrowserPreferences,y.fileBrowserSectionPreferences=e.fileBrowserSectionPreferences}else o&&y.currentTeamUser&&(y.fileBrowserPreferences=y.currentTeamUser?.fileBrowserPreferences);o?h=y.currentTeamUser?.draftsProject??null:r&&(h=y.baseOrgUser?.draftsProject??null)}return a.createElement(n$,{FBGNavigationUpdatesTreatment:(0,$.fn)(),dataDriftCorrectedTeamResources:T,draftsProject:h,isOrgWithWorkspaces:w,showLoadingState:c,showingFileBrowserLoader:I,sidebarUser:y,teamFolderId:b,teamFolderName:v,trackScroll:()=>(0,j.uE)("Sidebar Scrolled",{user:t})})}var nW=(e=>(e.FILE_BROWSER="FileBrowserSidebar",e.ADMIN="AdminSettingsSidebar",e))(nW||{});let nG={FileBrowserSidebar:L.e.WAYFINDING,AdminSettingsSidebar:L.e.SCALE};function nV(e){let t=(0,n.d4)(e=>e.mobileNavShown),r=(0,z.n)()?"AdminSettingsSidebar":"FileBrowserSidebar";return a.createElement("nav",{className:M()("sidebar--navDefault--pYuzm",{"sidebar--navDefaultRedesigned--pttVx":(0,l.k)().file_browser_sidebar_row_ui,"sidebar--showMobileNav--YiFit":t,"sidebar--showMobileNavRedesigned--h3sJb":t&&(0,l.k)().file_browser_sidebar_row_ui})},a.createElement(P.tH,{sentryTags:{area:nG[r]},boundaryKey:r,fallback:a.createElement(B.R,null),hasCustomWASMBuild:V.y4},"FileBrowserSidebar"===r?a.createElement(nj,{...e}):a.createElement(R.ay,null)))}var nH=r(913026),nz=r(162299),nY=r(411910),nK=r(175957),nq=r(67470),nJ=r(680655),nX=r(78144),nQ=r(448841),nZ=r(742379),n0=r(410441),n1=r(610543),n2=r(32731),n4=r(186606),n8=r(141760),n5=r(206639),n3=r(716793),n6=r(877994);let n7=(0,eo.eU)(void 0),n9=(0,eo.eU)(!1),le=(0,n5.H0)("#2c2c2c");function lt(e){let t=(0,eo.md)(n7);if(!e||"unset"===t)return;let r=(e.colorConfig?.colors??[])[0];return t?(0,n8.colorToHex)(t):r}function lr(e){return!!e&&"unset"!==e}var la=r(620964);function ln(e){return e.rightSideActions?a.createElement(ll,{headerLabel:e.label,rightSideActions:e.rightSideActions}):e.label}function ll(e){return a.createElement("div",{className:"x78zum5 x1qughib xh8yej3 x6s0dn4 x40hh3e"},a.createElement("div",{className:"x2lah0s"},e.headerLabel),a.createElement("div",{className:"x78zum5 x167g77z xeuugli"},e.rightSideActions))}function lo(e){let t=(0,H.dq)(),r=(0,K.P)(t,(0,n.d4)(la.o)),l=lt("Unassigned"===r.data?null:r.data);return a.createElement("div",{...nd.xk(li.desktopHeader,e.showNavigationChevrons&&li.desktopHeaderWithChevrons,!!e.pageHeaderContent&&!e.pageHeaderDividerHidden&&li.desktopHeaderBorder),style:{backgroundColor:l},"data-testid":"file-browser-desktop-header"},e.showNavigationChevrons&&a.createElement(nZ.J,{parentBackgroundColor:l}),e.pageHeaderContent&&a.createElement("span",{className:"xeuugli xh8yej3"},a.createElement(ln,{label:e.pageHeaderContent,rightSideActions:e.pageHeaderActions})))}let li={desktopHeader:{display:"x78zum5",flexDirection:"x1q0g3np",flexShrink:"x2lah0s",gap:"x167g77z",rowGap:null,columnGap:null,alignItems:"x6s0dn4",height:"xsdox4t",paddingLeft:"x1tudf5h",paddingRight:"x1m2p0i2",paddingInlineStart:null,paddingInlineEnd:null,$$css:!0},desktopHeaderWithChevrons:{paddingLeft:"x5tiur9",paddingInlineStart:null,paddingInlineEnd:null,$$css:!0},desktopHeaderBorder:{borderBottom:"x1n5zjp5",borderBottomWidth:null,borderBottomStyle:null,borderBottomColor:null,$$css:!0}};var ls=r(27776);let ld=(0,n0.jz)(ls.tgj);function lc(e){return a.createElement(a.Fragment,null,a.createElement(n1.z,{query:`(min-width: ${ld}px)`,defaultClass:x.s.sticky.top0.colorBg.zIndexTopBar.$},a.createElement(lo,{pageHeaderContent:e.pageHeaderContent?a.createElement("h1",{className:"x193iq5w xuxw1ft xb3r6kr xlyipyv x13saxwh xg4jxnz x39l7i4 x1uvdjgy xo1l8bm"},e.pageHeaderContent):void 0,pageHeaderDividerHidden:e.pageHeaderDividerHidden,pageHeaderActions:e.pageHeaderActions,showNavigationChevrons:e.showNavigationChevrons})),e.pageHeaderContent&&a.createElement(n2.i,{tabs:[a.createElement("h1",{key:"mobilePageHeaderKey",className:"x193iq5w xuxw1ft xb3r6kr xlyipyv x13saxwh xg4jxnz x39l7i4 x1uvdjgy xo1l8bm"},e.pageHeaderContent)]}))}function lm(e){let t=a.useRef(null),r=(0,n.d4)(({selectedView:e})=>e),i=(0,nZ.E)(),d=(0,nX.K)(),c=(0,H.sZ)(),m=d&&c&&!nK.T8.includes(r.view);!function(){let e=(0,n.Pj)();a.useEffect(()=>{let t=e.getState(),r=(0,ao.getPermissionsState)(t),a=(0,nz.vp)(r.user,r.currentUserOrgId,r.currentTeamId);a&&(0,nY.Y9)(a.userId,(0,nH.d9)(t.selectedView),a.orgId,void 0,a.teamId)},[e])}();let u=(0,z.n)()||"litmus"===r.view,_=!e.showingFileBrowserLoader&&!u&&(!!s.eD||(0,o.ce)()||e.pageHeaderContent);return a.useEffect(()=>{let e=e=>{e.keyCode===O.Uz.PERIOD&&document.activeElement?.tagName==="BODY"&&(0,l.k)().internal_only_debug_tools&&(0,l.k)().figment_debugger&&(0,nJ.Y)()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),a.createElement("div",{className:x.s.flex.flexRow.flexGrow1.$,ref:t},a.createElement(nV,{showLoadingState:!1,showingFileBrowserLoader:e.showingFileBrowserLoader}),a.createElement("div",{className:"file_browser_layout--fileBrowserPageViewContainer--m7oe2"},_&&a.createElement(P.tH,{boundaryKey:"FileBrowserPageHeader",fallback:P.H4.NONE_I_KNOW_WHAT_IM_DOING,hasCustomWASMBuild:V.y4},a.createElement(lc,{pageHeaderContent:e.pageHeaderContent,pageHeaderActions:e.pageHeaderActions,showNavigationChevrons:i,pageHeaderDividerHidden:e.pageHeaderDividerHidden})),a.createElement(P.tH,{boundaryKey:"FileBrowserLayout-content",fallback:a.createElement(B.R,null),hasCustomWASMBuild:V.y4},!e.showingFileBrowserLoader&&(m?a.createElement(nQ.H,{org:c,isInFileBrowser:!0}):a.createElement(F.z,{layoutRef:t},e.children)))),a.createElement(nq.G,{entryPoint:nq.Q.FILE_BROWSER}))}var lu=r(564564),l_=r(106355),lp=r(657174),lf=r(830119),lg=r(610345),lE=r(548277),lb=r(213374),lv=r(698656),lh=r(38217);function ly({orgTeamsQuery:e,workspaceId:t,onLoad:r}){let l=(0,n.wA)(),{currentOrgUser:o,teams:i,user:s,roles:d,orgId:c,orgName:m}=(0,a4.R)(e=>({currentOrgUser:e.orgUsersByOrgId[e.currentUserOrgId]?.[e.user.id],teams:e.teams,user:e.user,roles:e.roles,orgId:e.currentUserOrgId,orgName:e.orgById[e.currentUserOrgId].name})),{canCreateTeam:u}=(0,K.LM)(c?{id:c}:null,t),_="loaded"===e.status;a.useEffect(()=>{_&&r?.()},[r,_]);let p=a.useMemo(()=>{let t=e.data??[],r=t.length<tr.Tw;return(0,tr.KQ)(t,"name",{useExpensiveNaturalComparison:r}),t},[e]),f=o&&o.permission===eF._D.GUEST,g=Object.keys((0,lE.t)(d.byTeamId,s.id)).filter(e=>i[e]);if(f){let e=g.map(e=>i[e]).filter(e=>e.org_id===c);return a.createElement(l_.h,{teams:e,onLeave:e=>{l(tm.to({type:lh.p,data:{teamId:e.id}}))},orgName:m})}return _?a.createElement("div",{className:x.s.mt24.$},a.createElement(lf.w,{orgTeams:p,orgTeamStatus:e.status,onCreateTeam:u?()=>{let e={workspaceId:t??lb.O};l(tm.to({type:lv.Uc,data:e}))}:void 0,emptyView:t&&!u?(0,N.t)("team_tile.no_teams.empty_workspace"):void 0})):a.createElement(lp.X,{isLoading:!0})}let lw=(0,eo.eU)(()=>a2.Qw.loaded([]));function lT({workspaceId:e,onlyJoinedTeams:t}){let r=(0,eP.FC)(),n=(0,eV.X$)("useFilteredOrgTeamsQuery").unwrapOr(null),l=(0,eV.H3)(n),o=!(0,ao.canMemberOrg)(l??null,r),i=(0,eo.md)(o?lw:lu.EK);return a.useMemo(()=>i.transform(a=>a.filter(a=>{if(t)return(0,ao.hasViewerRoleAccessOnTeam)(a.id,r);if(null===e){if(a.workspace_id)return!1}else if(e&&a.workspace_id!==e)return!1;return(0,lg.ox)(a,r)})),[i,r,t,e])}function lI({children:e}){return a.createElement("section",{"aria-label":(0,N.t)("file_browser.teams")},a.createElement("div",{className:x.s.mx32.textBodyLargeStrong.$},a.createElement("div",null,(0,N.t)("file_browser.teams"))),e)}var lx=r(518052);function lN({avatar:e,title:t,rightSideActions:r,rightSideOfTitleAction:n,pageHeaderIcon:l,textColor:o,badge:i}){return a.createElement("div",{className:M()(x.s.mx32.mb20.$,"page_header--marginMobile--ocPfX")},a.createElement("div",{className:x.s.flex.mt8.itemsCenter.justifyBetween.$},a.createElement("div",{className:x.s.flex.itemsCenter.h40.minW0.$},e,a.createElement("div",{className:x.s.wFull.overflowHidden.$,style:el.sx.if(e&&!l,el.sx.ml16).$},a.createElement("span",{className:x.s.flex.itemsCenter.$},l,a.createElement("div",{style:{wordBreak:"break-word"}},a.createElement(S.E,{color:o,fontSize:24,truncate:"line-clamp",lineClamp:2},t," ")),a.createElement("div",{className:x.s.ml8.$},i),n&&n.element))),a.createElement("div",{className:x.s.flex.ml16.gap8.$},r?.map(e=>a.createElement(lx.K,{action:e,key:e.key})))))}function lS(e){let{belowHeaderItem:t,...r}=e;return a.createElement(a.Fragment,null,a.createElement(lN,{...r}),t)}var lC=r(746571),lk=r(990140),lR=r(531788),lA=r(996202);function lO(e){return a.createElement(lR.$n,{variant:"secondary",disabled:!0,htmlAttributes:{"data-tooltip-type":rH.Ib.TEXT,"data-tooltip":e.tooltipText,"data-tooltip-show-immediately":!0,onPointerEnter:e.onMouseEnter},"aria-describedby":e.tooltipText},e.text)}function lP({backgroundColor:e}){let t=(0,lA.NV)(j.WL),r=(0,n.d4)(e=>e.selectedView.view),l=(0,N.t)("license_group_view.toolbar.new_team_button"),o=()=>{t(j.jd,{placement:r})};return e?a.createElement("button",{className:M()("button_custom--buttonBase--H2KEL button--buttonBase---72nl",(0,n5.kx)(e)?"button_custom--buttonColorsForDarkBackground--CiydL":"button_custom--buttonColorsForLightBackground--wejKf","button_custom--buttonHugContents--Ntibj"),"data-tooltip-type":rH.Ib.TEXT,"data-tooltip":(0,N.t)("license_group_view.toolbar.create_team_disabled"),"data-tooltip-show-immediately":!0,onMouseEnter:o,disabled:!0},a.createElement(S.E,{fontSize:11,fontWeight:"medium",truncate:!0},l)):a.createElement(lO,{text:l,tooltipText:(0,N.t)("license_group_view.toolbar.create_team_disabled"),onMouseEnter:o})}var lF=(e=>(e.NEW_FILE="NEW_FILE",e.NEW_RESOURCE="NEW_RESOURCE",e.PROJECT_OVERFLOW_MENU="PROJECT_OVERFLOW_MENU",e.NEW_TEAM="NEW_TEAM",e.NEW_PROJECT="NEW_PROJECT",e.IMPORT="IMPORT",e.INVITE="INVITE",e.SHARE="SHARE",e.FAVORITE="FAVORITE",e.LOG_OUT="LOG_OUT",e.CLAIM="CLAIM",e.NEW_WHITEBOARD_FILE="NEW_WHITEBOARD_FILE",e.VIEW_COMMUNITY_PROFILE="VIEW_COMMUNITY_PROFILE",e.REQUEST_TO_EDIT="REQUEST_TO_EDIT",e.JOIN_TEAM="JOIN_TEAM",e.UPGRADE_TO_TEAM_ADMIN="UPGRADE_TO_TEAM_ADMIN",e.DROPDOWN="DROPDOWN",e.VIEW_MEMBERS="VIEW_MEMBERS",e.TEAM_OVERFLOW_MENU="TEAM_OVERFLOW_MENU",e.VIEW_LIBRARIES="VIEW_LIBRARIES",e.NEW_SITE_FILE="NEW_SITE_FILE",e.NEW_SLIDES_FILE="NEW_SLIDES_FILE",e.NEW_FIGMAKE_FILE="NEW_FIGMAKE_FILE",e.GET_DESKTOP_APP="GET_DESKTOP_APP",e.ADD_TO_CHROMEBOOK="ADD_TO_CHROMEBOOK",e.REQUEST_SENT_DESIGN="REQUEST_SENT_DESIGN",e.REQUEST_SENT_WHITEBOARD="REQUEST_SENT_WHITEBOARD",e.REQUEST_SENT_ALL="REQUEST_SENT_ALL",e.SETTINGS="SETTINGS",e))(lF||{});function lL(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.currentUserOrgId),a=(0,eC._6)();return()=>{r?t(tm.to({type:lv.Uc,data:{workspaceId:e??lb.O}})):t(e7.Dw({previousView:a}))}}function lD({workspace:e,org:t}){let{canCreateTeam:r,cannotCreateTeamReason:n}=(0,K.LM)(t,e?.id??null),l=lt(e),o=lL(e?.id);return n===K.z4.TEAM_CREATION_CONTROL?{kind:lx.A.CUSTOM,key:lF.NEW_TEAM,element:a.createElement(lP,{backgroundColor:l})}:r?{kind:lx.A.CUSTOM,key:lF.NEW_TEAM,element:a.createElement(ay.c,{"aria-label":(0,N.t)("license_group_view.toolbar.new_team_button_aria_label"),variant:"primary",onClick:o,iconPrefix:a.createElement(lk.e,null)},(0,N.t)("license_group_view.toolbar.new_team_button"))}:null}function lM(){let e=(0,H.sZ)(),t=lD({org:e,workspace:null}),r=lT({workspaceId:null,onlyJoinedTeams:!1});return a.createElement(lC.r,{header:a.createElement(lS,{title:(0,N.t)("license_group_view.meta.unassigned_title",{orgName:e.name}),rightSideActions:t?[t]:void 0}),content:a.createElement("div",{className:x.s.flex.flexColumn.my24.$},a.createElement(lI,null,a.createElement(ly,{orgTeamsQuery:r,workspaceId:null})))})}var lB=r(383592),lU=r(143823),l$=r(531711),lj=r(710070),lW=r(730455),lG=r(952647),lV=r(202272);function lH(e){let t=(0,n.wA)(),r=a.useRef(null),l=(0,n.d4)(({dropdownShown:e})=>e),o=!!(e.dropdownKey&&e.dropdownOptions&&l&&l.type===e.dropdownKey&&l.data&&l.data.targetRect),i=(0,rV.j6)();return a.createElement("div",{className:"x1iog12x"},a.createElement(tA.d,{ref:r,"aria-expanded":o,"aria-label":e.buttonAriaLabel,onClick:()=>{if(r.current){if(l){t(eS.oB());return}t(eS.j7({type:e.dropdownKey,data:{targetRect:r.current.getBoundingClientRect()}}))}},"data-onboarding-key":e.dataOnboardingKey},a.createElement(lV.k,null)),o&&(0,rV.T8)(a.createElement(tu.j,{parentRect:l?.data?.targetRect,minWidth:224,rootAndSubmenuMaxWidth:224,items:e.dropdownOptions,dispatch:t,onSelectItem:e=>{e.callback&&e.callback("",null,t),e.trackingProperties&&(0,j.Cu)({...i.properties,trackingContext:i.name,...e.trackingProperties})},showPoint:!0}),rz.e0.PAGE_HEADER_DROPDOWN))}var lz=r(220133),lY=r(7373),lK=r(97790),lq=r(926198),lJ=r(358847),lX=r(224191);let lQ=t1.M4.Mutation(async e=>{await lJ.u.updateDescription(e)}),lZ=(0,ts.Ju)(function({workspace:e}){let t=(0,n.wA)(),r=(0,t1.gY)(lQ);return a.createElement(lX.c,{title:(0,N.t)("workspace_view.description_modal.title"),subtitle:a.createElement("div",{className:x.s.mb16.$},a.createElement(S.E,{color:"secondary"},(0,N.tx)("workspace_view.description_modal.subtitle",{allWorkspacesText:a.createElement("span",{className:x.s.fontSemiBold.$},(0,N.t)("sidebar.browse.all_workspaces"))}))),initialName:e.description??"",placeholder:(0,N.t)("workspace_view.description.placeholder"),submitText:(0,N.t)("workspace_view.description.save"),onRename:a=>r({workspaceId:e.id,description:a}).then(()=>t(tM.F.enqueue({message:(0,N.t)("workspace_view.description_update_updated")})),()=>{let e=(0,N.t)("workspace_view.description_update_error");t(aR.s.error(e)),console.error(e)})})},"UpdateWorkspaceDescriptionModal");function l0(){let e=(0,n.wA)(),t=(0,Y.TA)();return a.useCallback(r=>{let a=r.workspace.admins.some(e=>e.baseOrgUser?.user.id===t),n=[];return a&&n.push({displayText:(0,N.t)("workspace_view.toolbar.admin_settings"),callback:()=>{e(eS.$T({view:"workspace",subView:e5.V0.ADMIN,workspaceId:r.workspace.id,selectedTab:e5._C}))}}),n.length>0&&n.push({displayText:"",separator:!0}),n.push({displayText:(0,N.t)("file_browser.copy_link"),callback:()=>{let t=(0,t2.fO)(r.workspace.id,r.org.id);e(tV.S({url:t}))}}),r.workspace.canAdmin&&n.push({displayText:(0,N.t)("license_group_view.toolbar.change_icon"),callback:()=>{e((0,lq.X)({entity:r.workspace,entityType:lY.ck.WORKSPACE,shape:"SQUARE"}))}}),n},[e,t])}var l1=r(156974),l2=r(506428),l4=r(289520),l8=r(782288),l5=r(747174),l3=(e=>(e.SOLID="solid",e.NO_FILL="no_fill",e))(l3||{});function l6({selectedFillOption:e,onSelectFillOption:t}){let r={solid:(0,N.t)("workspace_view.toolbar.solid"),no_fill:(0,N.t)("workspace_view.toolbar.no_fill")};return a.createElement(l1.Ve,{className:x.s.ml8.colorTextMenuSecondary.colorIconMenuSecondary.$,dropdownButton:function({onClick:t}){return a.createElement(l8.$n,{className:x.s.ml4.mr4.$,role:"combobox",onClick:t,caret:"down"},a.createElement("span",{className:x.s.minW32.mr8.$},r[e]))},dropdownOptionsClassName:x.s.mt4.$,options:["solid","no_fill"].map((e,n)=>a.createElement(l1.c$,{className:x.s.colorTextMenuSecondary.$,key:n,id:e,onClick:()=>{t(e)}},r[e])),optionsBelowSelector:!0,noBorder:!0})}let l7=t1.M4.Mutation(async e=>{await lJ.u.updateColor(e)});function l9({workspace:e,onClose:t}){let r=(0,n.wA)(),l=(0,t1.gY)(l7),o=[{option:le},...(0,n6.TS)("base").filter(e=>!(0,n5.DA)(e,(0,n6.BV)(n4.daH.BLACK,"base"))).map(e=>({option:e})),...(0,n6.TS)("baseLight").map(e=>({option:e}))],i=a.useRef(null),[s,d]=a.useState(!1),c=(0,l2.DP)(),m=function(e){try{if(e)return(0,n5.H0)(e)}catch(e){console.error(e)}}((e?.colorConfig?.colors??[])[0]),[u,_]=a.useState(m?"solid":"no_fill"),[p,f]=(0,eo.fp)(n7);return a.useEffect(()=>(f(m),()=>{f(void 0)}),[]),a.useEffect(()=>{if(!s){let e=e=>{"Escape"===e.key&&t()},r=e=>{i.current&&!i.current.contains(e.target)&&t()};return document.addEventListener("keydown",e),document.addEventListener("pointerdown",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("pointerdown",r)}}},[s,t]),a.createElement(a.Fragment,null,a.createElement("div",{role:"button","aria-label":(0,N.t)("common.close"),tabIndex:0,className:x.s.absolute.wFull.hFull.top0.left0.zIndexTertiaryModal.$,onClick:t}),a.createElement("div",{className:x.s.absolute.flex.h40.justifyCenter.alignCenter.flexShrink0.bRadius4.colorBgMenu.elevation400.mt8.ml32.zIndexModal.$,ref:i},a.createElement(l6,{selectedFillOption:u,onSelectFillOption:e=>{if(_(e),"solid"===e){let e="dark"===c?le:n5.UE;f(m??e)}else f("unset")}}),lr(p)&&a.createElement(a.Fragment,null,a.createElement(l8.wv,null),a.createElement(l4.qW,{buttonClassName:x.s.ml2.mr2.$,buttonSize:"xsmall",dropperDisabled:!0,fixedNumColumns:9,hasNonWhiteboardColors:!0,isColorPopoverOpen:s,onColorChange:e=>{f(e.option)},optionSize:"medium",options:o,paletteType:"base",positionX:()=>0,positionY:(e,t)=>(0,l5.DH)(e,t,4),setIsColorPopoverOpen:d,shouldCustomColorPopoverCloseOnEscape:!0,shouldDisableDataTooltip:!0,value:{option:p}})),a.createElement(l8.wv,null),a.createElement(l8.$n,{className:x.s.ml4.mr2.$,onClick:t},a.createElement("span",{className:x.s.mr1.colorTextToolbarSecondary.$},(0,N.t)("workspace_view.color.toolbar.cancel"))),a.createElement(l8.$n,{className:x.s.mr8.$,onClick:()=>{l({workspaceId:e.id,colors:lr(p)?[(0,n8.colorToHex)(p)]:[],onfulfilled:()=>r(tM.F.enqueue({message:(0,N.t)("workspace_view.toolbar.workspace_color_updated")})),onrejected:()=>{let e=(0,N.t)("workspace_view.toolbar.workspace_color_update_error");r(aR.s.error(e)),console.error(e)}}),t()}},a.createElement("span",{className:x.s.colorTextOnbrand.$},(0,N.t)("workspace_view.color.toolbar.save")))))}var oe=r(162796),ot=r(879169),or=r(309488),oa=r(93275),on=r(847240),ol=r(391205);let oo=(0,n.Ng)(e=>({currentUserId:e.user?.id}))(function(e){let t=t=>{t.stopPropagation(),e.canLeave&&e.onLeaveClick()},r=e.members.length,n=e.membersToShow||10;return a.createElement("div",null,!e.removeHeader&&a.createElement("div",{className:x.s.font13.fontMedium.mb12.$},e.label||(0,N.t)("file_browser.team_overview.member_label")),e.members.slice(0,n).map(r=>{let n=r.id===e.currentUserId,l=e.showAdminBadge&&e.showAdminBadge(r);return a.createElement(rk.az,{key:r.id,size:24,entity:r,className:e.customAvatarRowStyle?e.customAvatarRowStyle:x.s.font13.mb16.$,showIsMe:n,onClick:e.onMemberClick,badge:l?{color:rW.zE.DEFAULT,text:(0,N.t)("file_browser.badge_label.admin")}:void 0,includeUserEmailAddress:e.shouldIncludeUserEmailAddress},e.canLeave&&n&&a.createElement("span",{onClick:t,className:"members_preview--leaveLink--v8vxs text--fontPos13--xW8hS text--_fontBase--QdLsd blue_link--blueLink--9rlnd"},(0,N.tx)("file_browser.team.leave_confirm")))}),r>n&&(e.customOverflowRow||a.createElement("div",{className:"members_preview--totalMemberCountContainer--wYQwX",onClick:e.onClickShowMore},a.createElement(en.B,{svg:ol.A,className:"members_preview--teamIcon--UFW2s"}),a.createElement("div",{className:"members_preview--totalMemberCount--D3Q8a text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,N.tx)("file_browser.team_overview.num_others",{numMembers:r-n})))))});var oi=r(493571),os=(e=>(e.MEMBERS="MEMBERS",e.ADMINS="ADMINS",e))(os||{});function od(e){return a.createElement("div",{className:"workspace_members_modal--searchContainer--KGPrU modal--searchContainer--EA8ib"},a.createElement(on.IW,{className:"workspace_members_modal--searchBar--z110d",focusOnMount:!0,query:e.query,clearSearch:()=>{e.onChange("")},onChange:e.onChange,hideXIcon:!0,hasTransparentBackground:!0,iconClassName:"workspace_members_modal--searchIcon--7DSd4",placeholder:(0,N.t)("workspace_view.members_modal.search_placeholder")}))}function oc(e){return a.createElement("div",{className:"workspace_members_modal--emptyContainer--bTf-s"},a.createElement("div",{className:"workspace_members_modal--emptyState--IwqA2 text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.content))}let om=(e,t)=>null===e.baseOrgUser?-1:null===t.baseOrgUser?1:e.baseOrgUser.user.handle.localeCompare(t.baseOrgUser.user.handle),ou=(0,ts.Ju)(function(e){let t=oe.hS(e),[r,n]=(0,a.useState)(""),[l,o,i]=ot.t.useTabs({MEMBERS:!0,ADMINS:!0});a.useEffect(()=>{n("")},[n,i.activeTab]);let s=e.workspace.members.slice().sort(om),d=e.workspace.admins.slice().sort(om),c={};s.forEach(e=>{e.baseOrgUser&&(c[e.baseOrgUser.user.id]=e.permission)});let m=e=>c[e.id]===eF.bp.ADMIN&&"MEMBERS"===i.activeTab;return a.createElement(or.bL,{manager:t,width:"lg",height:"fixed"},a.createElement(oa.vo,null,a.createElement(oa.Y9,null,a.createElement(oa.r1,null,(0,N.t)("workspace_view.members_modal.title")),a.createElement(ot.t.TabStrip,{manager:i},a.createElement(ot.t.Tab,{...l.MEMBERS},(0,N.t)("workspace_view.members_modal.members")),a.createElement(ot.t.Tab,{...l.ADMINS},(0,N.t)("workspace_view.members_modal.admins")))),a.createElement(oa.nB,{scrolling:"none",padding:0},(l.MEMBERS.display?s:d).length>0&&a.createElement(od,{query:r,onChange:n}),a.createElement(er.P,{className:"workspace_members_modal--outerContainer--in03x",innerClassName:"workspace_members_modal--membersContainer--16pMi"},a.createElement("div",{className:"workspace_members_modal--modalContainer--3d9wu"},a.createElement(ot.t.TabPanel,{...o.MEMBERS},0===s.length?a.createElement(oc,{content:(0,N.tx)("workspace_view.members_modal.no_members",{workspaceName:e.workspace.name})}):a.createElement(o_,{getShouldShowAdminBadge:m,query:r,users:s})),a.createElement(ot.t.TabPanel,{...o.ADMINS},0===d.length?a.createElement(oc,{content:(0,N.tx)("workspace_view.members_modal.no_admins",{workspaceName:e.workspace.name})}):a.createElement(o_,{getShouldShowAdminBadge:m,query:r,users:d})))))))},"WORKSPACE_MEMBERS_MODAL",ts.ZU.YES);function o_({getShouldShowAdminBadge:e,query:t,users:r}){let l=(0,n.wA)(),o=a.useCallback((e,t)=>{l(eS.$T({view:"user",userId:t.id,userViewTab:oi.o.INTERNAL_PROFILE})),l(tm.Ce())},[l]),i=r.filter(e=>{let r=e.baseOrgUser?.user,a=t.toLocaleLowerCase();return!!r?.email?.toLocaleLowerCase().includes(a)||!!r?.handle.toLocaleLowerCase().includes(a)}).map(e=>{let t=e.baseOrgUser.user;return{id:t.id,handle:t.handle,img_url:t.imgUrl,email:t.email}})||[];return 0===i.length?a.createElement(oc,{content:(0,N.tx)("workspace_view.members_modal.no_results",{query:t})}):a.createElement(oo,{members:i,showAdminBadge:e,membersToShow:i.length,canLeave:!1,customAvatarRowStyle:"workspace_members_modal--memberPopup--y5bbv text--fontPos13--xW8hS text--_fontBase--QdLsd admin_settings_page--avatarWithHandle--awCiS ellipsis--ellipsis--Tjyfa",onMemberClick:o,removeHeader:!0,shouldIncludeUserEmailAddress:!0})}function op(e){let{workspace:t,org:r}=e,l=(0,n.wA)(),o=(0,n.d4)(e=>e.currentUserOrgId),i=(0,n.d4)(e=>e.avatarEditorState),s=t.canAdmin,[d,c]=(0,eo.fp)(n9),{canCreateTeam:m}=(0,K.LM)(r,t.id),u=(0,ti.S)(),_=window.innerWidth<=(0,n0.hG)(ls.tgj),p=t?t.id:lb.O,f=lt(t),g=function(e){if(e&&"unset"!==e)return(0,n5.kx)(e)?"dark":"light"}(f),E=t?.members||[],b=(0,lW.GA)(),v=lL(t.id),h=a.useCallback((e,r,a)=>{if(t){let n={workspace:{id:t.id,name:t.name??"",imgUrl:t.imgUrl},entrypoint:"workspace_page_view",sectionId:a,favoriteId:r};e?l(eR.ZW(n)):l(eR.if(n))}},[l,t]),y={kind:lx.A.CUSTOM,key:lF.VIEW_MEMBERS,element:a.createElement(ay.c,{variant:"secondary",onClick:()=>{l(tm.to({type:ou,data:{workspace:e.workspace,tab:os.MEMBERS}}))},iconPrefix:a.createElement(l$._,null),htmlAttributes:{"data-tooltip-type":rH.Ib.TEXT,"data-tooltip":(0,N.t)("file_browser.team.view_members")},"aria-label":(0,N.t)("file_browser.team.view_members")},e.isWorkspaceMembersLoading?a.createElement(lU.k,null):a.createElement(a.Fragment,null,E.length.toString()))},w=a.useMemo(()=>a.createElement(lz.i,{setFavorite:h,favoriteType:eF.bk.WORKSPACE,resourceId:p,orgId:o,monochrome:!!f,size:"lg"}),[p,h,o,f]),T=function(){let e=l0(),t=(0,n.wA)(),[r,l]=(0,eo.fp)(n9);return a.useCallback(r=>{let a=e(r);return r.workspace.canAdmin&&(a.push({displayText:(0,N.t)("workspace_view.toolbar.change_color"),callback:()=>l(!0)}),a.push({displayText:(0,N.t)("workspace_view.description.title"),callback:()=>{t(tm.to({type:lZ,data:{workspace:r.workspace}}))}})),a},[e,t,l])}(),I=t&&r?T({workspace:t,org:r}):m&&_?[{displayText:(0,N.t)("org_view.new_team"),callback:v}]:void 0,x=[],S=lD({workspace:t,org:r});if(S&&x.push(S),e.showMembersButton&&x.push(y),u&&t&&x.push({kind:lx.A.CUSTOM,key:lF.FAVORITE,element:w}),!t)return a.createElement(lS,{title:(0,N.t)("license_group_view.meta.unassigned_title",{orgName:r.name}),rightSideActions:x});let C=I?{kind:lx.A.CUSTOM,key:lF.DROPDOWN,element:a.createElement(lH,{buttonAriaLabel:(0,N.t)("org_view.page_header_dropdown_label"),dropdownKey:`workspace-context-${t.id}`,dropdownOptions:I,dropdownColorClassName:f?(0,n5.kx)(f)?"workspace_page_header--dropdownColorsForDarkBackground--OIHSt":"workspace_page_header--dropdownColorsForLightBackground--uH-aL":void 0})}:void 0;return a.createElement("div",{style:{backgroundColor:f}},a.createElement(lG.J,{mode:f?g:b.color},a.createElement(lS,{avatar:s?a.createElement(lK.j,{avatarEditorState:i,entityType:lY.ck.WORKSPACE,entity:t,dispatch:l,size:40}):a.createElement(rk.z6,{entity:t,size:40}),title:a.createElement("span",{className:"workspace_page_header--titleColorForBackground--e6EH9"},t.name),badge:t.orgAccess===eF.bU.SECRET?a.createElement("div",{"data-tooltip-type":rH.Ib.TEXT,"data-tooltip":(0,N.t)("workspace_table.secret_workspace_lock_tooltip"),"data-tooltip-subtext":(0,N.t)("workspace_table.secret_workspace_lock_tooltip_subtext"),"data-tooltip-timeout-delay":500,"data-tooltip-max-width":300},a.createElement(lj.$,{className:"workspace_page_header--iconColorForBackground--QSzJh"})):void 0,rightSideActions:x,rightSideOfTitleAction:C,belowHeaderItem:d?a.createElement(l9,{workspace:t,onClose:()=>c(!1)}):void 0})))}function of(e){let t=(0,n.wA)(),r=e.workspace.members,l=a.useMemo(()=>r||[],[r]),o=a.useMemo(()=>l.slice(0).sort(()=>Math.random()-.5),[l]),i={};return l.forEach(e=>{e.baseOrgUser&&(i[e.baseOrgUser.user.id]=e.permission)}),a.createElement("div",{className:x.s.my24.mr8.ml24.$},a.createElement("div",{className:"workspace_page_meta_content--membersHeader--0jaJ3 text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,N.t)("workspace_view.sidebar.members")),a.createElement(oo,{removeHeader:!0,members:o.map(e=>e.baseOrgUser?.user).filter(e=>!!e),onMemberClick:(e,r)=>{t(eS.$T({view:"user",userId:r.id,userViewTab:oi.o.INTERNAL_PROFILE}))},canLeave:!1,showAdminBadge:e=>i[e.id]===eF.bp.ADMIN,customOverflowRow:a.createElement(a.Fragment,null,a.createElement("button",{className:"workspace_page_meta_content--seeAllMembers--mIOar text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:()=>{t(tm.to({type:ou,data:{workspace:e.workspace,tab:os.MEMBERS}}))}},(0,N.t)("workspace_view.sidebar.see_all_members")))}))}var og=r(755595),oE=r(523669);function ob({isExpanded:e,fill:t,onClick:r}){return a.createElement("div",{role:"button",tabIndex:-1,className:M()("expand_caret--animation--GOE8s",{"expand_caret--expanded--MmsW9":e}),onClick:r},a.createElement(oE.In,{icon:"caret-right-16",fill:t}))}function ov({isOpen:e,toggleIsOpen:t,collapseHeader:r,content:n}){return a.createElement("div",{className:x.s.flex.flexColumn.wFull.$},a.createElement("div",{className:x.s.flex.flexRow.gap4.itemsCenter.wFull.$},a.createElement(ob,{isExpanded:e,fill:"secondary",onClick:t}),r),a.createElement("div",{className:x.s.grid.ml20.$,"aria-hidden":!e,style:el.sx.add({transition:"grid-template-rows 0.3s ease"}).if(e,el.sx.add({gridTemplateRows:"1fr"}),el.sx.add({gridTemplateRows:"0fr"})).$},a.createElement("div",{className:x.s.if(!e,x.s.overflowHidden).$},n)))}var oh=r(813321),oy=r(810505),ow=r(769642),oT=r(858839),oI=r(430163);function ox({title:e,confirmText:t,emptyStateText:r,onSelectFile:n,onSubmit:l,files:o,tileClassName:i,renderFileTile:s,query:d,setQuery:c,gridText:m,shouldDisableTile:u}){let[_,p]=a.useState(null),g=a.useCallback(()=>{_&&l(_)},[l,_]),E=a.useCallback(e=>{if(e.length>0){let t=e[0].key;n?.(t),p(t)}else p(null)},[n]);return a.createElement(oN,{title:e,onSubmit:g,confirmText:t,isDisabled:!_,query:d,onSearchChange:c,clearSearch:()=>c(""),searchPlaceholder:(0,N.t)("file_browser.choose_file_modal.search_for_a_file")},0===o.length?a.createElement("div",{className:"x78zum5 x1q0g3np x195vfkc x6s0dn4 xl56j7k x1n0bwc9 x5yr21d xh8yej3 x1iyjqo2 x2b8uid"},r):a.createElement(a.Fragment,null,m&&a.createElement("span",{className:"x1n0bwc9"},m),a.createElement(oI.g,{canSelectItem:e=>!u?.(e),containerStyle:oS.grid,doNotFocusOnLoad:!0,getAriaLabel:e=>e.name,handleContextMenu:f.lQ,isDraggable:!1,items:o,keepSelectionOnFocusLost:!0,multiselectDisabled:!0,onSelection:E,renderTile:s,renderTileFooter:()=>a.createElement(a.Fragment,null),tileClassName:i})))}function oN({title:e,confirmText:t,onSubmit:r,isDisabled:n,children:l,query:o,onSearchChange:i,clearSearch:s,searchPlaceholder:d}){return a.createElement(rJ.Eo,{title:e,confirmText:t,onSubmit:r,disabled:n,maxWidth:1024,useRedesign:!0,fullWidthContent:!0},a.createElement(on.IW,{className:M()(x.s.px16.py8.colorBg.wFull.bb1.bSolid.colorBorder.borderBox.$,"choose_file_modal--heightOverride--QTue5"),hasTransparentBackground:!0,placeholder:d,focusOnMount:!0,query:o,onChange:i,clearSearch:s,iconClassName:x.s.colorIcon.$,hideXIcon:!0}),a.createElement(er.P,{className:"choose_file_modal--gridMaxHeight--8NKvW",innerClassName:x.s.hFull.gap12.flex.flexColumn.pt16.px24.borderBox.$},l))}let oS={grid:{paddingBottom:"x1l90r2v",$$css:!0}};var oC=r(566371),ok=r(348040);function oR({file:e,isDisabled:t,orgName:r}){let n=(0,ru.NN)();return a.createElement(ok.i,{thumbnail:a.createElement(r_.NM,{file:e,noBorder:!0}),bottomLeftIcon:a.createElement(ru.w4,{size:16,type:n(e)}),title:a.createElement("div",{className:"x78zum5 x1q0g3np x1jnr06f x1jud9m8 x6s0dn4"},a.createElement("span",{...nd.xk(oA.truncate,t&&oA.secondaryText)},e.name),t&&r&&a.createElement("span",{"data-tooltip-type":"text","data-tooltip":(0,N.t)("file_browser.pinning.choose_file_to_pin_modal.file_not_workspace_visible.tooltip",{orgName:r}),"data-tooltip-show-immediately":!0,"data-tooltip-show-above":!0,"data-tooltip-max-width":500},a.createElement(oC.B,{className:"xmauxvm"}))),subtitle:e.project?.name})}let oA={truncate:{whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,textOverflow:"xlyipyv",$$css:!0},secondaryText:{color:"x1n0bwc9",$$css:!0}},oO=(0,ts.Ju)(function({workspaceId:e}){let t=(0,n.wA)(),r=(0,eV.T5)("ChooseFileToPinModal").unwrapOr(null),l=r?.name??null,[o,i]=a.useState(""),[s]=(0,oh.A)(o,400),[d,c]=a.useState(null),m=a.useCallback(e=>{c(e)},[]);(0,u.Rs)(eG.wtK,{fileKey:d??""},{enabled:!!d});let _=function({searchQuery:e,workspaceId:t}){let r=a2.Qw.useTransformShallowEqual((0,u.Rs)(eG.z07,{}),e=>{if(!e.currentUser.recentFiles2)return[];let t=[];for(let{file:r}of e.currentUser?.recentFiles2)r&&t.push(r);return t}),a=function({searchQuery:e,workspaceId:t}){let r=(0,H.dq)();(0,I.vA)(!!r,"currentUserOrgId must be defined in useSearchWorkspaceFilesQuery");let a=(0,u.Rs)(eG.Imb,{query:e,workspaceId:t,orgId:r,sort:"relevancy",desc:"true"},{enabled:!!e});return a2.Qw.useTransformShallowEqual(a,e=>{let t=[];for(let r of e.searchWorkspaceFiles)r.file&&t.push(r.file);return t})}({searchQuery:e,workspaceId:t}),n="disabled"!==a.status?a:r;return(0,ow.z1)(n,t)}({searchQuery:s,workspaceId:e}),p=a2.Qw.useTransformShallowEqual(_,e=>e.map(e=>e.key)),g=(0,ow.H6)(p.unwrapOr([])),E=a.useCallback(e=>{t(tm.ES(oO)),t(tm.to({type:(0,oy.a)(),data:{fileKey:e,source:o?"add_file_modal_search":"add_file_modal_suggested"}}))},[t,o]);a.useEffect(()=>(t(oT.Dy({entryPoint:"file_browser:file_picker_modal"})),t(oT.Rz({workspaceFilter:e})),()=>{t(oT.Rz({workspaceFilter:null})),t(oT.ky())}),[t,i,e]);let b=a.useCallback(e=>{i(e)},[]);if("loaded"!==g.status||"loaded"!==_.status)return a.createElement(oN,{title:(0,N.t)("file_browser.pinning.pin_modal.pin_file_to_workspace"),confirmText:(0,N.t)("general.next"),isDisabled:!0,query:o,onSearchChange:b,clearSearch:f.lQ,searchPlaceholder:(0,N.t)("file_browser.choose_file_modal.search_for_a_file")},a.createElement("div",{className:M()(x.s.flex.itemsCenter.justifyCenter.wFull.hFull.flexGrow1.$)},a.createElement(et.qc,null)));let v=e=>{let t=g.data.get(e.key);return!!t&&!t?.canPinFileToWorkspace};return a.createElement(ox,{confirmText:(0,N.t)("general.next"),emptyStateText:o?(0,N.tx)("file_browser.workspace_pinning.no_files_matching_query",{searchQuery:a.createElement("div",{className:x.s.colorText.fontMedium.truncate.$},o)}):(0,N.t)("file_browser.workspace_pinning.no_suggested_files"),files:_.data,gridText:o?void 0:(0,N.t)("file_browser.pinning.suggested"),onSelectFile:m,onSubmit:E,query:o,renderFileTile:(e,t)=>a.createElement(oR,{file:e,orgName:l,isDisabled:v(e)}),setQuery:b,shouldDisableTile:v,tileClassName:"choose_file_to_pin_modal--showOnHoverContainer--DO9-h",title:(0,N.t)("file_browser.pinning.pin_modal.pin_file_to_workspace")})},"ChooseFileToPinModal");var oP=r(484169),oF=r(687113),oL=r(89853),oD=r(944539),oM=r(344132),oB=r(568681),oU=r(244417),o$=r(106340),oj=r(970320);let oW={open:!0,openNewTab:!0,showInFolder:!0,copyLink:!0,pinToWorkspace:!0};function oG({suggestedFiles:e}){let t=e.slice(0,8),r=(0,eC._6)(),l=(0,n.wA)(),{showing:o,show:i,data:s}=(0,oM.L)(),c=a.useCallback((e,t)=>{d.Ay.redirect((0,tQ.r1)(e)),(0,j.k1)(e.key,{selectedViewName:r.view,entrypoint:"suggested_files_empty_state"}),t.stopPropagation(),t.preventDefault()},[r.view]),m=a.useCallback((e,t)=>{c(e,t)},[c]),u=a.useCallback((e,t,r)=>{let a=e[0];a&&i({data:{tile:(0,ow.bn)(a),targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:r}})},[i]);return a.createElement(a.Fragment,null,a.createElement("div",{className:"x1n0bwc9 xlyipyv xuxw1ft xb3r6kr"},(0,N.t)("file_browser.pinning.suggested")),a.createElement(oU.A,{items:t,multiselectDisabled:!0,isDraggable:!1,handleOpenItem:m,onSelection:e=>{l(tY.an()),l(tY.PW({type:t8.F.FILES,keys:e.map(e=>e.key)}))},handleContextMenu:u,gridViewProps:{containerStyle:oH.grid,renderTile:e=>a.createElement("div",{className:"x1dmp6jm xkib98w xbyyjgo x12oqio5 xgk9eko xb3r6kr"},a.createElement(r_.NM,{file:e,noBorder:!0,size:rN.y.SMALL})),tileBorderRadius:8,tileBorderStyle:"dashed",tileFooterPosition:"right",renderTileFooter:(e,{isSelected:t,isHovered:r})=>a.createElement(oV,{file:e,isHovered:r,isSelected:t})},viewType:oj.XU.GRID}),o&&s?.tile?a.createElement(oB.i,{tileActions:oW,openTile:e=>c(s.tile.file,e),tile:s.tile,selectedTiles:[s.tile],dropdownVisible:o}):null)}function oV({file:e,isHovered:t,isSelected:r}){let l=(0,n.wA)(),o=a.useCallback(t=>{l(tm.to({type:(0,oy.a)(),data:{fileKey:e.key,source:"suggested_files_empty_state"}})),t.stopPropagation(),t.preventDefault()},[l,e]),i=e.project?.name;return a.createElement("div",{className:"x78zum5 xdt5ytf x195vfkc x1iyjqo2 xl56j7k xb3r6kr xq1n1xh"},a.createElement("div",{...nd.xk(oH.fileName)},e.name),t||r||E.Ay.mobile||E.Ay.tablet?a.createElement("div",{role:"button",tabIndex:0,className:"x1quhyk7 xlyipyv xuxw1ft xb3r6kr x1ypdohk",onClick:o},(0,N.t)("file_browser.pinning.pin_file")):i?a.createElement("div",{className:"x1n0bwc9 xlyipyv xuxw1ft xb3r6kr"},i):null)}let oH={fileName:{...ns.g.textBodyMedium,textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,$$css:!0},grid:{gridTemplateColumns:"xem2tbl",gap:"xou54vl",rowGap:null,columnGap:null,$$css:!0}};function oz({workspaceId:e}){let t;let r=function(e){let t=a2.Qw.useTransform((0,u.Rs)(eG.m28,{}),e=>{if(!e.currentUser.recentFiles2)return[];let t=[];for(let{file:r}of e.currentUser?.recentFiles2)r&&t.push(r);return t});return(0,ow.z1)(t,e)}(e);return t="loaded"!==r.status?a.createElement("div",{className:x.s.py1.h20.wFull.$},a.createElement(et.qc,null)):r.data.length>0?a.createElement(oG,{suggestedFiles:r.data}):a.createElement("span",{className:x.s.colorTextSecondary.truncate.textBodyLarge.alignCenter.$},(0,N.t)("file_browser.pinning.no_pinned_files")),a.createElement("div",{className:x.s.bRadius8.colorBgSecondary.px32.py24.flex.flexColumn.gap16.mt8.$},t)}var oY=r(891627),oK=r(376852),oq=r(879378),oJ=r.n(oq),oX=r(398612),oQ=r(459633),oZ=r(952401),o0=r(173926),o1=r(239851),o2=r(289297),o4=r(806362);function o8({pinnedFile:e}){let t=(0,ow.bn)(e.file),r=(0,o1.l)(e.file.folderId),n=(0,o2.C)(t);return a.createElement("div",{className:x.s.bRadius8.borderBox.p16.flex.flexColumn.gap16.colorBg.colorText.b1.bSolid.colorBorder.elevation300.flexGrow1.$,style:el.sx.add({width:"422px",overflowY:"auto",overflowX:"hidden"}).$},a.createElement("div",{className:x.s.flex.flexRow.gap16.$},a.createElement("div",{className:x.s.flexBasisAuto.$},a.createElement(o4.e,{entity:{id:e.creator.id,img_url:e.creator.imgUrl,name:e.creator?.name??void 0,handle:e.creator?.handle}})),a.createElement("div",{className:x.s.flex.flexColumn.overflowHidden.$},a.createElement("div",{className:x.s.flex.flexRow.gap8.textBodyLarge.$},a.createElement(S.E,{fontWeight:"semi-bold",truncate:!0},e.creator.name),a.createElement("span",{className:x.s.flexBasisAuto.flexGrow1.flexShrink0.$},a.createElement(S.E,{color:"secondary"},a.createElement(o0.h1,{date:e.createdAt})))),a.createElement("div",{className:x.s.textBodyLarge.overflowBreakWord.$,dangerouslySetInnerHTML:{__html:(0,oZ.p)((0,oP.sP)(e.description))}}))),a.createElement("div",{className:x.s.flex.flexColumn.$},a.createElement("div",{className:x.s.bRadius8.b1.colorBorder.bSolid.wFull.overflowHidden.$},a.createElement("div",null,a.createElement(oF.e,{tile:t,noBorder:!0})),a.createElement("div",{className:x.s.flex.flexRow.gap8.itemsCenter.bt1.bSolid.colorBorder.p16.$},a.createElement("div",{className:"x78zum5 x1q0g3np x1v2ro7d x6s0dn4"},a.createElement(ru.w4,{size:16,type:n}),a.createElement("div",{className:x.s.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.cursorDefault.$},a.createElement("div",{...nd.Ay.props(o6.title)},e.file.name),"loaded"===r.status&&r.data?a.createElement("div",{...nd.Ay.props(o6.subtitle)},r.data):null))))))}let o5={width:0,height:0};function o3({pinnedFile:e,targetRef:t,shouldHide:r}){let n=(0,oQ.s)(t),[l,o]=(0,oQ.M)(),[i,s]=a.useState(o5),[d,c]=a.useState(!1),u=a.useCallback(()=>{if(!t.current)return;let e=(0,oX.E)(t.current.getBoundingClientRect()),r=window.innerWidth,a=window.innerHeight,n=a-e.top-8,l=n>100;if(r-e.right>438&&l){s({transform:`translate(${e.right+8}px, ${e.top}px)`,maxHeight:n});return}if(e.left>438&&l){s({transform:`translate(${e.left-430}px, ${e.top}px)`,maxHeight:n});return}let o=430-(r-e.left),i=a-e.bottom-16;if(i>100){s({transform:`translate(${(0,oK.qE)(e.left-o,0,e.left)}px, ${e.bottom+8}px)`,maxHeight:i});return}let d=e.top-16;s({top:"auto",bottom:"100vh",transform:`translate(${(0,oK.qE)(e.left-o,0,e.left)}px, ${e.top-8}px)`,maxHeight:d})},[t,s]),_=!r&&(n||o),p=(0,m.ZC)(_);if(a.useEffect(()=>{if(!p&&_)u();else if(p&&!_){c(!0);let e=setTimeout(()=>{c(!1)},(0,n0.XB)("150ms"));return()=>{clearTimeout(e)}}},[_,p,u]),a.useEffect(()=>{let e=oJ()(u),t=()=>{_&&e()};return document.addEventListener("scroll",t,!0),()=>{document.removeEventListener("scroll",t,!0)}},[_,u]),!t.current)return null;let f=a.createElement("div",{className:"pinned_files_hover--hoverCardOverflowWrapper--VaAZM"},a.createElement("div",{className:M()("pinned_files_hover--hoverCard--MLJbb",_&&"pinned_files_hover--makeVisible--QrDF7"),style:i,ref:l,role:"tooltip",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()}},(_||d)&&a.createElement(o8,{pinnedFile:e})));return oY.createPortal(f,document.body)}let o6={title:{...ns.g.textBodyMediumStrong,$$css:!0},subtitle:{...ns.g.textBodyMedium,$$css:!0}},o7={open:!0,openNewTab:!0,showInFolder:!0,copyLink:!0,share:!0,duplicateToDrafts:!0,pinToWorkspace:!0,publishOrgTemplate:!0,favoriteFile:!0,unfavoriteFile:!0},o9=[];function ie({workspace:e}){let t=(0,n.wA)(),r=(0,eC._6)(),l=(0,Y.TA)(),{showing:o,show:i,data:s}=(0,oM.L)(),d=(0,oD.v)(),c=a.useCallback((t,a,n,l)=>{d(t,n),(0,j.E9)(j.gH,a.file,{entrypoint:l,selectedView:r.view,resourceType:"workspace",resourceId:e.id,pinDescription:(0,oP._Z)(a.description)})},[d,r.view,e.id]),m=a.useCallback((e,t)=>{c((0,ow.bn)(e.file),e,t,"pinned files")},[c]),u=e.pinnedFiles??o9,_=a.useCallback(r=>{let a=r[0];a&&(e.canAdmin||a.creator?.id===l)&&t(tm.to({type:(0,oL.I)(),data:{pinnedFileId:a.id}}))},[e.canAdmin,l,t]),p=a.useMemo(()=>u.filter(({file:e})=>!!e).map(e=>(0,ow.bn)(e.file)),[u]),f=(0,tJ.nw)(p),g=a.useMemo(()=>u.sort((e,t)=>e.createdAt>t.createdAt?1:-1),[u]);return a.createElement(a.Fragment,null,u.length>0?a.createElement(oU.A,{doNotFocusOnLoad:!0,getAriaLabel:e=>e.file.name,gridViewProps:{containerStyle:ia.grid,renderTile:e=>a.createElement(it,{pinnedFile:e,isDropdownOpen:o}),renderTileFooter:e=>a.createElement(ir,{pinnedFile:e}),renderTileDragImage:e=>a.createElement(r_.NM,{file:e.file,noBorder:!0})},handleContextMenu:(e,r,a)=>{t(tY.an());let n=e.map(e=>e.file).filter(e=>null!==e);t(tY.PW({type:t8.F.FILES,keys:n.map(e=>e.key)}));let l=n[0];l&&i({data:{tile:(0,ow.bn)(l),targetRect:{top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1},index:a}})},handleDeleteKey:_,handleDragDataTransfer:(e,t)=>{t.setFigFilesData(e.map(e=>o$.F.toSinatra(e.file)))},handleOpenItem:m,isDraggable:!0,items:g,viewType:oj.XU.GRID}):a.createElement(oz,{workspaceId:e.id}),(()=>{let e=s?.tile??null,t=s?.index??0;return a.createElement(oB.i,{tile:e,selectedTiles:f,tileActions:o7,openTile:r=>{e&&c(e,u[t],r,"pinned files: context menu")},dropdownVisible:o})})())}function it({pinnedFile:e,isDropdownOpen:t}){let r=a.useRef(null),n=(0,ow.bn)(e.file);return a.createElement(a.Fragment,null,a.createElement(o3,{pinnedFile:e,targetRef:r,shouldHide:t}),a.createElement("div",{ref:r},a.createElement(oF.e,{tile:n,noBorder:!0,size:rN.y.SMALL})))}function ir({pinnedFile:e}){return a.createElement("div",{className:"x1y1aw1k x78zum5 xdt5ytf"},a.createElement("span",{...nd.xk(ia.fileName)},e.file.name),a.createElement(S.E,{truncate:!0,showTooltipWhenTruncated:!0,color:"secondary"},(0,N.t)("tile.file_tile.pinned_by_user",{name:e.creator?.name??""})))}let ia={fileName:{...ns.g.textBodyLargeStrong,textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,$$css:!0},grid:{paddingTop:"xyamay9",gridTemplateColumns:"x1g5i94c",userSelect:"x87ps6o",$$css:!0}},il=(0,eo.Iz)(e=>(0,eo.E2)(`file_browser.workspace.pinned_section_open.${e}`,!0,og.z.boolean()));function io({workspace:e,isAssignedWorkspace:t,onLoad:r}){a.useEffect(()=>{r?.()},[r]);let[l,o]=(0,eo.fp)(il(e.id)),i=a.useCallback(()=>o(e=>!e),[o]),s=(0,n.wA)(),d=e.pinnedFiles?.length??0,c=t||e.canAdmin,m=d>=ow.D1,u=c||d>0,_=a.useCallback(()=>{s(tm.to({type:oO,data:{workspaceId:e.id}}))},[s,e.id]);return a.createElement(a.Fragment,null,u&&a.createElement(ov,{isOpen:l,toggleIsOpen:i,collapseHeader:a.createElement("div",{className:x.s.flex.justifyBetween.itemsCenter.wFull.$},a.createElement("div",{"aria-expanded":l,role:"button",tabIndex:0,className:x.s.flex.flexRow.gap4.itemsCenter.textBodyLargeStrong.cursorDefault.$,onClick:i},(0,N.t)("file_browser.pinning.pinned_files")),c&&a.createElement(lR.$n,{variant:"link",onClick:_,disabled:m,htmlAttributes:{"data-tooltip":m?(0,N.t)("file_browser.pinning.max_files.add_button_tooltip",{maxPins:ow.D1}):void 0,"data-tooltip-type":rH.Ib.TEXT,"data-tooltip-show-above":!0}},(0,N.t)("file_browser.pinning.add_file"))),content:a.createElement(ie,{workspace:e})}))}function ii({workspaceId:e}){let t=(0,H.sZ)(),r=(0,u.Rs)(eG.aON,{orgId:t.id,workspaceId:e}),n=(0,u.Rs)(eG.nD$,{workspaceId:e}).transform(e=>e.workspace?.members??null),l=lT({workspaceId:e,onlyJoinedTeams:!1}),o=function(){let e=a.useRef(void 0);e.current||(e.current=performance.now());let t=a.useRef("hidden"===document.visibilityState),r=a.useRef(!1===navigator.onLine);return a.useEffect(()=>{let e=new AbortController;return document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&(t.current=!0)},{signal:e.signal}),window.addEventListener("offline",()=>{r.current=!0},{signal:e.signal}),()=>{e.abort()}},[]),a.useCallback(a=>{t.current||r.current||nc.definedAnalyticsHandler.trackDefinedEvent("file_browser.workspace_page_load_time",{type:a,durationMs:Math.round(performance.now()-e.current)})},[])}();if("loading"===r.status)return a.createElement(et.qc,null);if("loaded"!==r.status)return a.createElement(lB.S,{resourceType:nK.Ft.WORKSPACE});let i=r.data.workspace;if(!i||!i.canView)return a.createElement(lB.S,{resourceType:nK.Ft.WORKSPACE});let s=(0,K.eO)(r.data.currentUser)===i.id;return a.createElement(is,{org:t,workspace:i,workspaceMembersQuery:n,workspaceOrgTeamsQuery:l,isAssignedWorkspace:s,trackPerfEvent:o})}function is({org:e,workspace:t,workspaceMembersQuery:r,workspaceOrgTeamsQuery:n,isAssignedWorkspace:l,trackPerfEvent:o}){(0,tK.hL)(t.name);let i={...t,members:r.data??[]},s=r.transform(e=>!!e&&e.length>0),d=t.admins.length>0,c=s.transform(e=>e||d).unwrapOr(!0);a.useEffect(()=>{o("initial_load")},[o]),a.useEffect(()=>{"loaded"===r.status&&o("members_load")},[r.status,o]);let m=a.useCallback(()=>{o("pinned_files_load")},[o]),u=a.useCallback(()=>{o("teams_load")},[o]);return(0,g.kF)("Workspace"),(0,g.WX)({markName:"MainBodyContent",isLoaded:"loaded"===n.status,contextArgs:{numTeams:n.transform(e=>e.length).unwrapOr(null)}}),a.createElement(lC.r,{header:a.createElement(op,{workspace:i,org:e,isWorkspaceMembersLoading:"loading"===r.status,showMembersButton:c}),content:a.createElement("div",{className:x.s.flex.flexColumn.gap24.my24.$},a.createElement("section",{"aria-label":(0,N.t)("file_browser.pinning.pinned_files"),className:x.s.pl12.pr32.borderBox.wFull.$},a.createElement(io,{workspace:t,isAssignedWorkspace:l,onLoad:m})),a.createElement(lI,null,a.createElement(ly,{orgTeamsQuery:n,workspaceId:t.id,onLoad:u}))),metaContent:s.unwrapOr(!1)?a.createElement(of,{workspace:i}):void 0})}var id=r(956494),ic=r(118287),im=r(852314),iu=r(434289),i_=r(129723),ip=r(26435),ig=r(603592),iE=r(66325),ib=r(352185),iv=r(580213),ih=r(69862),iy=r(577888),iw=r(3649),iT=r(84257),iI=r(499578),ix=r(627062),iN=r(628875);function iS({tab:e}){return a.createElement("div",null,a.createElement("h1",{...nd.xk(iC.headerText)},(0,N.t)("community.resource_hub.browse_resources")),a.createElement("div",{...nd.xk(iC.subHeaderText)},e===nb.N$.INTERNAL?(0,N.t)("community.resource_hub.browse_resources_internal_subheader"):(0,N.t)("community.resource_hub.browse_resources_community_subheader")))}let iC={headerText:{...ns.g.textHeadingMedium,paddingTop:"xz9dl7a",$$css:!0},subHeaderText:{...ns.g.textBodyMedium,paddingTop:"x1y1aw1k",color:"x1n0bwc9",$$css:!0}};var ik=r(661915),iR=r(935528),iA=r(700660),iO=r(582261),iP=r(536549),iF=r(221511);let iL=new Set([iO.LJ.uiKits,iO.LJ.wireframes,iO.LJ.designTemplates,iO.LJ.mobileApps,iO.LJ.portfolios,iO.LJ.resumes,iO.LJ.visualAssets,iO.LJ.illustrations,iO.LJ.icons,iO.LJ.shapesColors]),iD=new Set([iO.LJ.brainstorming,iO.LJ.diagramming,iO.LJ.funGames,iO.LJ.teamMeetings,iO.LJ.whiteboarding,iO.LJ.strategicPlanning]),iM=new Set([iO.LJ.editingEffects,iO.LJ.fileOrganization,iO.LJ.development,iO.LJ.whiteboarding,iO.LJ.designTools,iO.LJ.importExport,iO.LJ.accessibility,iO.LJ.prototypingAnimation]),iB=new Set([iO.LJ.presentations]),iU=new Set([iO.LJ.desktopAppsWebsites]),i$={DESIGN_RESOURCES:"designResources",PLUGINS_AND_WIDGETS:"pluginsAndWidgets",WHITEBOARDING:"whiteboarding",PRESENTATIONS:"presentations",WEBSITES:"websites"};function ij(e){let t=(0,nE.Om)(),r=(0,nE.tv)();return(0,a.useMemo)(()=>Object.fromEntries(e.map(({key:e,category:a,resource_type:n,editor_type:l,tag:o})=>[e,new iv.Dv({...t,categorySlug:a,tagSlug:o},{resource_type:n??iF.L.BrowseResourceTypes.FILES,editor_type:l??void 0,...r})])),[e,t,r])}var iW=(e=>(e.marketing="marketing",e.product="product",e.pitchDeck="pitch-deck",e.sales="sales",e.landingPages="landing-pages",e.portfolio="portfolio",e.ecommerce="ecommerce",e.blog="blog",e.wedding="wedding",e.photography="photography",e))(iW||{});function iG(e,t,r){let a=t?({marketing:(0,N.t)("community.resource_hub.categories.marketing_presentations"),product:(0,N.t)("community.resource_hub.categories.product_presentations"),"pitch-deck":(0,N.t)("community.resource_hub.categories.pitch_decks"),sales:(0,N.t)("community.resource_hub.categories.sales_presentations"),"landing-pages":(0,N.t)("community.resource_hub.categories.landing_pages"),portfolio:(0,N.t)("community.resource_hub.categories.portfolio"),ecommerce:(0,N.t)("community.resource_hub.categories.ecommerce"),blog:(0,N.t)("community.resource_hub.categories.blog"),wedding:(0,N.t)("community.resource_hub.categories.wedding"),photography:(0,N.t)("community.resource_hub.categories.photography")})[t]:void 0;if(a)return a;let n=r?function(e,t){let r={[iO.LJ.whiteboarding]:{[iF.L.BrowseResourceTypes.WIDGETS]:(0,N.t)("categories.widgets")},[iO.LJ.designTools]:{[iF.L.BrowseResourceTypes.PLUGINS]:(0,N.t)("community.view_bar.plugins")}};return r[e]?.[t]}(e,r):void 0;return n?n:({[iO.LJ.mobileApps]:(0,N.t)("community.resource_hub.categories.mobile_app_templates"),[iO.LJ.desktopAppsWebsites]:(0,N.t)("community.resource_hub.categories.websites")})[e]||(0,iP.xF)(e)}var iV=r(168323),iH=r(88706),iz=r(478538);let iY="category_menu_button--buttonText--0inUk";function iK({defaultText:e,iconPrefix:t,categorySlug:r,tagSlug:n,resourceType:l,getTriggerProps:o,isSelected:i}){let s=r?iG(r,n,l):void 0;return a.createElement(no.E,{"aria-pressed":i,className:M()(iz.x6,iz.Mg,i&&iz.wH),...o()},a.createElement("span",{className:iz.IO},t,a.createElement("span",{className:iY},s||e),a.createElement(iH.r,null)))}function iq({parentDropdown:e,defaultText:t,iconPrefix:r,menuItemsByGroup:n}){let{getTriggerProps:l,manager:o}=iV.b(),i=(0,ix.Rd)(iv.Dv),s=i?.categorySlug,c=i?.tagSlug,m=(0,ix.vA)(iv.Dv),u=m?.resource_type,_=s&&(s?s===iO.LJ.whiteboarding?u===iF.L.BrowseResourceTypes.WIDGETS?i$.PLUGINS_AND_WIDGETS:i$.WHITEBOARDING:iD.has(s)?i$.WHITEBOARDING:iM.has(s)?i$.PLUGINS_AND_WIDGETS:iL.has(s)?i$.DESIGN_RESOURCES:iB.has(s)?i$.PRESENTATIONS:iU.has(s)?i$.WEBSITES:null:null)===e;return a.createElement(iV.bL,{manager:o},a.createElement(iK,{defaultText:t,iconPrefix:r,categorySlug:_?s:void 0,tagSlug:c,resourceType:u,getTriggerProps:l,isSelected:o.isOpen}),a.createElement(iV.mc,null,n.map((e,t)=>a.createElement(iV.YJ,{key:t},e.map((e,t)=>a.createElement(iV.q7,{key:t,onClick:()=>{(0,nh.pt)(e?.href??""),d.Ay.push(e?.href??"")}},e.text))))))}function iJ(){let e=ij([{key:"uikitRoute",category:iO.LJ.uiKits},{key:"wireframesRoute",category:iO.LJ.wireframes},{key:"socialMediaTemplatesRoute",category:iO.LJ.socialMediaTemplates,editor_type:iA.k.Editors.COOPER},{key:"cardTemplatesRoute",category:iO.LJ.cardTemplates,editor_type:iA.k.Editors.COOPER},{key:"designTemplatesRoute",category:iO.LJ.designTemplates},{key:"mobileAppRoute",category:iO.LJ.mobileApps},{key:"portfolioRoute",category:iO.LJ.portfolios},{key:"resumeRoute",category:iO.LJ.resumes},{key:"visualAssetsRoute",category:iO.LJ.visualAssets},{key:"illustrationsRoute",category:iO.LJ.illustrations},{key:"iconsRoute",category:iO.LJ.icons},{key:"shapesColorsRoute",category:iO.LJ.shapesColors}]),t=[[{href:e.uikitRoute?.href,text:(0,N.t)("categories.ui_kits")},{href:e.wireframesRoute?.href,text:(0,N.t)("categories.wireframes")}],[{href:e.socialMediaTemplatesRoute?.href,text:(0,N.t)("categories.social_media_templates")},{href:e.cardTemplatesRoute?.href,text:(0,N.t)("categories.cards_and_invites")}],[{href:e.mobileAppRoute?.href,text:(0,N.t)("community.resource_hub.categories.mobile_app_templates")},{href:e.resumeRoute?.href,text:(0,N.t)("categories.resume_templates")},{href:e.portfolioRoute?.href,text:(0,N.t)("categories.portfolio_templates")},{href:e.designTemplatesRoute?.href,text:(0,N.t)("community.resource_hub.see_more")}],[{href:e.iconsRoute?.href,text:(0,N.t)("categories.icons")},{href:e.illustrationsRoute?.href,text:(0,N.t)("categories.illustrations")},{href:e.shapesColorsRoute?.href,text:(0,N.t)("categories.shapes_colors")},{href:e.visualAssetsRoute?.href,text:(0,N.t)("community.resource_hub.see_more")}]].filter(e=>e.length>0);return a.createElement(iq,{parentDropdown:i$.DESIGN_RESOURCES,menuItemsByGroup:t,defaultText:(0,N.t)("community.homepage.figma_section.header"),iconPrefix:a.createElement(iR.n,null)})}var iX=r(80145);function iQ(){let e=ij([{key:"editingEffectsRoute",category:iO.LJ.editingEffects,resource_type:iF.L.BrowseResourceTypes.PLUGINS},{key:"fileOrganizationRoute",category:iO.LJ.fileOrganization,resource_type:iF.L.BrowseResourceTypes.PLUGINS},{key:"developmentRoute",category:iO.LJ.development,resource_type:iF.L.BrowseResourceTypes.PLUGINS},{key:"widgetsRoute",category:iO.LJ.whiteboarding,resource_type:iF.L.BrowseResourceTypes.WIDGETS},{key:"pluginsRoute",category:iO.LJ.designTools,resource_type:iF.L.BrowseResourceTypes.PLUGINS},{key:"importExportRoute",category:iO.LJ.importExport,resource_type:iF.L.BrowseResourceTypes.PLUGINS},{key:"accessibilityRoute",category:iO.LJ.accessibility,resource_type:iF.L.BrowseResourceTypes.PLUGINS},{key:"prototypingAnimationRoute",category:iO.LJ.prototypingAnimation,resource_type:iF.L.BrowseResourceTypes.PLUGINS}]),t=[[{href:e.fileOrganizationRoute?.href,text:(0,N.t)("categories.file_organization")},{href:e.developmentRoute?.href,text:(0,N.t)("categories.navbar.development")},{href:e.editingEffectsRoute?.href,text:(0,N.t)("categories.editing_effects")},{href:e.importExportRoute?.href,text:(0,N.t)("categories.import_export")},{href:e.accessibilityRoute?.href,text:(0,N.t)("categories.accessibility_tools")},{href:e.prototypingAnimationRoute?.href,text:(0,N.t)("categories.prototyping_animation")}],[{href:e.widgetsRoute?.href,text:(0,N.t)("community.resource_hub.categories.see_all_widgets")},{href:e.pluginsRoute?.href,text:(0,N.t)("community.resource_hub.categories.see_all_plugins")}]];return a.createElement(iq,{parentDropdown:i$.PLUGINS_AND_WIDGETS,defaultText:(0,N.t)("community.resource_hub.categories.plugins_and_widgets"),iconPrefix:a.createElement(iX.u,null),menuItemsByGroup:t})}var iZ=r(901948);function i0(){let e=ij([{key:"marketingRoute",category:iO.LJ.presentations,tag:iW.marketing,editor_type:iA.k.Editors.SLIDES},{key:"productRoute",category:iO.LJ.presentations,tag:iW.product,editor_type:iA.k.Editors.SLIDES},{key:"pitchDecksRoute",category:iO.LJ.presentations,tag:iW.pitchDeck,editor_type:iA.k.Editors.SLIDES},{key:"salesRoute",category:iO.LJ.presentations,tag:iW.sales,editor_type:iA.k.Editors.SLIDES},{key:"presentationsRoute",category:iO.LJ.presentations,editor_type:iA.k.Editors.SLIDES}]),t=[[{href:e.marketingRoute?.href,text:(0,N.t)("community.resource_hub.categories.marketing_presentations")},{href:e.productRoute?.href,text:(0,N.t)("community.resource_hub.categories.product_presentations")},{href:e.pitchDecksRoute?.href,text:(0,N.t)("community.resource_hub.categories.pitch_decks")},{href:e.salesRoute?.href,text:(0,N.t)("community.resource_hub.categories.sales_presentations")}],[{href:e.presentationsRoute?.href,text:(0,N.t)("community.resource_hub.see_more")}]];return a.createElement(iq,{parentDropdown:i$.PRESENTATIONS,menuItemsByGroup:t,defaultText:(0,N.t)("categories.presentations"),iconPrefix:a.createElement(iZ.l,null)})}function i1(){let e=ij([{key:"websitesRoute",category:iO.LJ.desktopAppsWebsites,editor_type:iA.k.Editors.SITES},{key:"landingPagesRoute",category:iO.LJ.desktopAppsWebsites,tag:iW.landingPages,editor_type:iA.k.Editors.SITES},{key:"portfolioRoute",category:iO.LJ.desktopAppsWebsites,tag:iW.portfolio,editor_type:iA.k.Editors.SITES},{key:"ecommerceRoute",category:iO.LJ.desktopAppsWebsites,tag:iW.ecommerce,editor_type:iA.k.Editors.SITES},{key:"blogRoute",category:iO.LJ.desktopAppsWebsites,tag:iW.blog,editor_type:iA.k.Editors.SITES},{key:"weddingRoute",category:iO.LJ.desktopAppsWebsites,tag:iW.wedding,editor_type:iA.k.Editors.SITES},{key:"photographyRoute",category:iO.LJ.desktopAppsWebsites,tag:iW.photography,editor_type:iA.k.Editors.SITES}]),t=[[{href:e.landingPagesRoute?.href,text:(0,N.t)("community.resource_hub.categories.landing_pages")},{href:e.portfolioRoute?.href,text:(0,N.t)("community.resource_hub.categories.portfolio")},{href:e.ecommerceRoute?.href,text:(0,N.t)("community.resource_hub.categories.ecommerce")},{href:e.blogRoute?.href,text:(0,N.t)("community.resource_hub.categories.blog")},{href:e.weddingRoute?.href,text:(0,N.t)("community.resource_hub.categories.wedding")},{href:e.photographyRoute?.href,text:(0,N.t)("community.resource_hub.categories.photography")}],[{href:e.websitesRoute?.href,text:(0,N.t)("community.resource_hub.see_more")}]];return a.createElement(iq,{parentDropdown:i$.WEBSITES,menuItemsByGroup:t,defaultText:(0,N.t)("community.resource_hub.categories.websites"),iconPrefix:a.createElement(nT.J,null)})}var i2=r(763276);function i4(){let e=ij([{key:"brainstormingRoute",category:iO.LJ.brainstorming},{key:"diagrammingRoute",category:iO.LJ.diagramming},{key:"funGamesRoute",category:iO.LJ.funGames},{key:"teamMeetingsRoute",category:iO.LJ.teamMeetings},{key:"whiteboardingRoute",category:iO.LJ.whiteboarding},{key:"strategicPlanningRoute",category:iO.LJ.strategicPlanning}]),t=[[{href:e.diagrammingRoute?.href,text:(0,N.t)("categories.diagramming")},{href:e.brainstormingRoute?.href,text:(0,N.t)("categories.brainstorming")},{href:e.funGamesRoute?.href,text:(0,N.t)("categories.fun_games")},{href:e.teamMeetingsRoute?.href,text:(0,N.t)("categories.team_meetings")},{href:e.strategicPlanningRoute?.href,text:(0,N.t)("categories.strategic_planning")}],[{href:e.whiteboardingRoute?.href,text:(0,N.t)("community.resource_hub.see_more")}]];return a.createElement(iq,{parentDropdown:i$.WHITEBOARDING,menuItemsByGroup:t,defaultText:(0,N.t)("categories.whiteboarding"),iconPrefix:a.createElement(i2.D,null)})}function i8(){return a.createElement(ik.a,{mode:"match"},a.createElement("div",{className:"x78zum5 x1q0g3np x167g77z x1a02dak"},a.createElement(iJ,null),a.createElement(iQ,null),a.createElement(i0,null),a.createElement(i4,null),a.createElement(i1,null)))}var i5=r(986336),i3=r(897163);function i6({limit:e,resourceType:t,category:r,editorType:a,caller:n,includeContent:l}){let[{data:o,status:i}]=(0,_.IT)(i3.a.ResourcesPaginatedQuery({resourceType:[t],category:r,editorType:a,caller:n,pageSize:e,includeContent:l}));return{resources:o,loading:"loading"===i}}var i7=r(238445),i9=r(805608),se=r(972382),st=r(413927),sr=r(491383),sa=r(230618);let sn={card:{borderRadius:"x1mxnbhz",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},cardShadow:{boxShadow:"x1u3p76b",$$css:!0},cardWidth:{width:"xamxeob",$$css:!0},cardTransition:{transition:"x1el4u5y",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,$$css:!0}};function sl({imageSources:e,isHovered:t}){return a.createElement("div",{className:"x10l6tqk x1y0lptx xxbcxho x78zum5 x1q0g3np x1v2ro7d x1g75g36"},e.map((e,r)=>a.createElement(sa.oW,{key:r,...nd.xk(so.image,sn.card,t&&so.hoveredImage),src:(0,ac.ck)(e),alt:""})))}let so={image:{...sn.cardShadow,transition:"x1i5byms",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,flexGrow:"x1iyjqo2",aspectRatio:"xacr46v",$$css:!0},hoveredImage:{transform:"xqc4caa",$$css:!0}};function si({imageSources:e,isHovered:t}){return a.createElement(a.Fragment,null,a.createElement(sa.oW,{...nd.xk(ss.image,ss.frontImage,sn.card,t&&ss.frontImageHovered),src:(0,ac.ck)(e[0]),alt:""}),a.createElement(sa.oW,{...nd.xk(ss.image,ss.backImage,sn.card,t&&ss.backImageHovered),src:(0,ac.ck)(e[1]),alt:""}))}let ss={image:{...sn.cardWidth,...sn.cardShadow,...sn.cardTransition,position:"x10l6tqk",left:"x1nrll8i",insetInlineStart:null,insetInlineEnd:null,$$css:!0},frontImage:{transform:"xkz1y4k",bottom:"x874rk5",$$css:!0},backImage:{transform:"xpdgo6v",bottom:"x1y0lptx",$$css:!0},frontImageHovered:{transform:"xcvh5f3",$$css:!0},backImageHovered:{transform:"xgz6438",$$css:!0}};function sd({imageSource:e,isHovered:t}){return a.createElement("div",{className:"x10l6tqk x1d9swqr x5yr21d"},a.createElement(sa.oW,{...nd.xk(sc.image,t&&sc.hoveredImage),src:(0,ac.ck)(e),alt:""}))}let sc={image:{...sn.cardTransition,position:"x1n2onr6",height:"xlxyqfn",bottom:"x1y0lptx",$$css:!0},hoveredImage:{transform:"xeybphm",$$css:!0}};function sm({imageSource:e,containerStyle:t,isHovered:r}){let n="sheetStyle"===t?su.hoveredSheetImage:su.hoveredWidgetImage;return a.createElement("div",{...nd.xk(su[t])},a.createElement(sa.oW,{...nd.xk(su.image,r&&n),src:(0,ac.ck)(e),alt:""}))}let su={sheetStyle:{...sn.cardWidth,...sn.cardShadow,left:"x1nrll8i",insetInlineStart:null,insetInlineEnd:null,transform:"xv9q2wl",position:"x10l6tqk",$$css:!0},hoveredSheetImage:{transform:"xfx47b9",$$css:!0},widgetCardStyle:{height:"x5yr21d",top:"x8l1umf",right:"x3m8u43",insetInlineStart:null,insetInlineEnd:null,opacity:"x1us6l5c",position:"x10l6tqk",$$css:!0},hoveredWidgetImage:{transform:"x1bao77f",$$css:!0},image:{...sn.cardTransition,width:"xh8yej3",height:"x5yr21d",$$css:!0}};function s_({imageSources:e,isHovered:t}){return a.createElement(a.Fragment,null,a.createElement(sa.oW,{...nd.xk(sp.image,sp.bottomImage),src:(0,ac.ck)(e[0]),alt:""}),a.createElement(sa.oW,{...nd.xk(sp.image,sp.middleImage,t&&sp.hoveredMiddleImage),src:(0,ac.ck)(e[1]),alt:""}),a.createElement(sa.oW,{...nd.xk(sp.image,sp.topImage,t&&sp.hoveredTopImage),src:(0,ac.ck)(e[2]),alt:""}))}let sp={image:{...sn.cardWidth,...sn.cardTransition,position:"x10l6tqk",left:"x1nrll8i",insetInlineStart:null,insetInlineEnd:null,transform:"xuuh30",bottom:"x1y0lptx",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},bottomImage:{width:"xqjhr6n",boxShadow:"x1u3p76b",$$css:!0},middleImage:{width:"x8uc0wx",bottom:"x1g84rlc",boxShadow:"x1wu5q8a",$$css:!0},topImage:{bottom:"x1otreau",$$css:!0},hoveredMiddleImage:{transform:"xbtikzi",$$css:!0},hoveredTopImage:{transform:"x16ui88a",$$css:!0}};function sf({header:e,route:t,content:r,showSeeMore:n}){let l=t&&n?a.createElement(ay.e6,{"aria-label":(0,N.t)("community.resource_hub.see_more"),onClick:()=>{(0,nh.CA)(t.pathname),d.Ay.push(t.href)},className:"x78zum5 x8rdmch x6s0dn4 x19y5rnk x1d4akdp"},a.createElement("h3",{...nd.xk(sg.headerText),"data-testid":"section-header"},e),a.createElement(eW.a,null)):a.createElement("h3",{...nd.xk(sg.headerText),"data-testid":"section-header"},e);return a.createElement("div",null,a.createElement("div",{className:"x78zum5 x6s0dn4 x1y1aw1k xwib8y2 x1jnr06f"},l),r)}let sg={headerText:{...ns.g.textBodyLarge,lineHeight:"x1o2sk6j",$$css:!0}};var sE=(e=>(e.BRAINSTORMING="brainstorming",e.CARD_TEMPLATES="cardTemplates",e.CLASSROOM_ACTIVITIES="classroomActivities",e.DATA_TEMPLATES="dataTemplates",e.DESIGN_TUTORIALS="designTutorials",e.DEVELOPMENT="development",e.DIAGRAMMING="diagramming",e.EDITING_EFFECTS="editingEffects",e.FILE_ORGANIZATION="fileOrganization",e.PRESENTATIONS_LARGE="presentationsLarge",e.PRESENTATIONS_SMALL="presentationsSmall",e.RESUMES="resumes",e.STRATEGIC_PLANNING="strategicPlanning",e.TEAM_MEETINGS_SMALL="teamMeetingsSmall",e.TEAM_MEETINGS_LARGE="teamMeetingsLarge",e.UI_KITS="uiKits",e.VISUAL_ASSETS="visualAssets",e.WIDGETS="widgets",e.WIREFRAMES="wireframes",e.WORKSHOP_TEMPLATES="workshopTemplates",e))(sE||{});let sb={brainstorming:{category:iO.LJ.brainstorming,size:"large",art:e=>a.createElement(sl,{imageSources:["f01ed35801ea5830119fbe503b42f18f8b8fa6bb","d96670e9dd7d8f500b1d82f97d4d08ca5762f014","25a7262271550cf605425ae1f9dbb3186df9e938","75319ef48f81cc1e0f733b2a9ee834ae20ad7383","1d6892175c739459b51f88450efd4fd63647a2d6","0e81b3f80cb2491aac0675bd33fbbbb79db59ddd"],isHovered:e}),backgroundColor:sr.Tj.bgFigjamTertiary,brand:"seascape"},cardTemplates:{category:iO.LJ.cardTemplates,editorType:iA.k.Editors.COOPER,size:"small",art:e=>a.createElement(sm,{imageSource:"2c4bc9301e89bc080dbadbdb33df70febe9bf82f",containerStyle:"sheetStyle",isHovered:e}),backgroundColor:sr.Tj.bgBrandTertiary,brand:"cooper"},classroomActivities:{category:iO.LJ.classroomActivities,size:"small",art:e=>a.createElement(si,{imageSources:["ad9ed6524f8541f00d3968f21e59fcc627be04a6","9633b9c063fd07075008ee206a4ea712c2931994"],isHovered:e}),backgroundColor:sr.Tj.bgFigjamTertiary,brand:"seascape"},dataTemplates:{category:iO.LJ.dataTemplates,size:"small",art:e=>a.createElement(si,{imageSources:["85c247027dd036bb720dbaac9ecf63318e138266","55da4072453228deaa707a61fac742fd6b8a1022"],isHovered:e}),backgroundColor:sr.Tj.bgFigjamTertiary,brand:"seascape"},designTutorials:{category:iO.LJ.designTutorials,size:"large",art:e=>a.createElement(sl,{imageSources:["f341d1cb6464b9ff5d2eb63c89eb380249fc7c78","985e74dda7ed515202f6b7a55ffc2e1562c9ff94","d48320278ece5f694fe686c2c971bcb9c5381f88","1864952e1f5b8fbc94fe85f548d41b77458dcc87","deb79a32eabbdaed5b86904ec9c4adda486345fb","3e63b05276c55b2d9e95c49e90969cc51023344b"],isHovered:e}),backgroundColor:sr.Tj.bgSecondary},development:{category:iO.LJ.development,resourceType:iF.L.BrowseResourceTypes.PLUGINS,size:"small",art:e=>a.createElement(sd,{isHovered:e,imageSource:"6ce1bcbe88b8f4f202e4307f0de131f8fb6cf61e"}),backgroundColor:sr.Tj.bgBrandTertiary,brand:"design"},diagramming:{category:iO.LJ.diagramming,size:"large",art:e=>a.createElement(sl,{imageSources:["378c5389dc551daa4f2a3daa5f4e4748fa811eb9","f5fa32f34d57e6b4b01f67f10c13fa4ced6fa20f","82cc8e76b689ad016a0e4871ad99f68fe7c67864","b1f9c2bb18232dd55c41e0528227a2a82ecdd151","37903eb6b345c31cc1ad0967dc6ff8a541a16b90","9f70f6b78199251bb1213c6f3e5e00df8fc0572b"],isHovered:e}),backgroundColor:sr.Tj.bgFigjamTertiary,brand:"seascape"},editingEffects:{category:iO.LJ.editingEffects,resourceType:iF.L.BrowseResourceTypes.PLUGINS,size:"small",art:e=>a.createElement(sd,{imageSource:"6ce1bcbe88b8f4f202e4307f0de131f8fb6cf61e",isHovered:e}),backgroundColor:sr.Tj.bgBrandTertiary,brand:"design"},fileOrganization:{category:iO.LJ.fileOrganization,resourceType:iF.L.BrowseResourceTypes.PLUGINS,size:"small",art:e=>a.createElement(sd,{imageSource:"2f1dc06209ebe620cb42e03cdb85da7ef9d9efa0",isHovered:e}),backgroundColor:sr.Tj.bgBrandTertiary,brand:"design"},presentationsLarge:{category:iO.LJ.presentations,size:"large",art:e=>a.createElement(sl,{imageSources:["0b6a114955ffe1c7a56e993323f212990422a525","0b8f4c7881cf0404fb105a1a680d74564205bc8c","b9d5d2df7dfd58ee29a44ecd72c83dbb6f6588c0","1eb484ec6df2d5d6874b92bae0b221fcbbebc79c","ed0ab6a51ef9b7275a9c123994db37df3188fee7","b616eae234aeefb2ad7c62d5f0bd84c843c3d86d"],isHovered:e}),backgroundColor:sr.Tj.bgBrandTertiary,brand:"piper"},presentationsSmall:{category:iO.LJ.presentations,size:"small",art:e=>a.createElement(s_,{imageSources:["8b73180892c70a676c567732411c422e46f1fcae","4963a5a549df301b0ba8dbdc788c2c3424c4217e","e66ce4f446be08f56a330a9b39c5e9c72e6d3338"],isHovered:e}),backgroundColor:sr.Tj.bgBrandTertiary,brand:"piper"},teamMeetingsLarge:{category:iO.LJ.teamMeetings,size:"large",art:e=>a.createElement(sl,{imageSources:["b7e05a6d6b76b8b377e5c4f0eb006dfe99e5875d","61830de70c1cec8ae28737c1f9c36ff5a7b07d18","742fbce6b78404d48f62e39a6be510dce4cae699","6405c322fda966de6578a55cb0c861d2fb774b84","d22c05d35fc088e4d089e814f42379b395b86e26","89d7df8b21116cbf283086a5056f305de01f91a4"],isHovered:e}),backgroundColor:sr.Tj.bgFigjamTertiary,brand:"seascape"},teamMeetingsSmall:{category:iO.LJ.teamMeetings,size:"small",art:e=>a.createElement(si,{imageSources:["742fbce6b78404d48f62e39a6be510dce4cae699","b7e05a6d6b76b8b377e5c4f0eb006dfe99e5875d"],isHovered:e}),backgroundColor:sr.Tj.bgFigjamTertiary,brand:"seascape"},resumes:{category:iO.LJ.resumes,size:"small",art:e=>a.createElement(sm,{imageSource:"ba7504eb5c18069ca8c0455768fcf46c6bc4ee52",containerStyle:"sheetStyle",isHovered:e}),backgroundColor:sr.Tj.bgBrandTertiary,brand:"design"},strategicPlanning:{category:iO.LJ.strategicPlanning,size:"small",art:e=>a.createElement(si,{imageSources:["3b212f16a905705728bf1dc973fa25001844b4bc","28c8e9a68927b0f9f55a41efd6df2251b8823eea"],isHovered:e}),backgroundColor:sr.Tj.bgFigjamTertiary,brand:"seascape"},uiKits:{category:iO.LJ.uiKits,size:"small",art:e=>a.createElement(si,{imageSources:["52e2511dc978b4b6aad9ad3799dd2fb75139cb2a","fc614bae349b646e1ea8ffe00e5b6e723ec9f13f"],isHovered:e}),backgroundColor:sr.Tj.bgBrandTertiary,brand:"design"},visualAssets:{category:iO.LJ.visualAssets,size:"large",art:e=>a.createElement(sd,{imageSource:"a9b2bb97699222fc52104170706120e06c6f971a",isHovered:e}),backgroundColor:sr.Tj.bgBrandTertiary,brand:"design"},widgets:{category:iO.LJ.whiteboarding,resourceType:iF.L.BrowseResourceTypes.WIDGETS,size:"large",art:e=>a.createElement(sm,{imageSource:"c14d817322fb0a630ceb76de93d5669b91e6bce1",containerStyle:"widgetCardStyle",isHovered:e}),backgroundColor:sr.Tj.bgFigjamTertiary,brand:"seascape"},wireframes:{category:iO.LJ.wireframes,size:"large",art:e=>a.createElement(sl,{imageSources:["4c787218f1399d78e7035575c6041d05b7c51abf","4a119c09ddc4e5a598728b3121b81e7df52f30f0","d380df1c57eb9d1c6d963673d2c718d515b69e9e","c04936ee5bd33d718c78e37fd42e4f8dbe058f35","c8e4c4f9dd45d76797e4c8f1a7515fbbb0f49a61","448ad0f1bc089057cf63f983b7fe865ae1395a56"],isHovered:e}),backgroundColor:sr.Tj.bgBrandTertiary,brand:"design"},workshopTemplates:{category:iO.LJ.workshopTemplates,size:"small",art:e=>a.createElement(si,{imageSources:["c6bfc0d07a504cbb9daa39452cb5d1afa29f4e36","6899629efb49a4e0cb289017a2a6c8380e494fae"],isHovered:e}),backgroundColor:sr.Tj.bgFigjamTertiary,brand:"seascape"}};function sv({size:e,title:t,description:r,art:n,backgroundColor:l,brand:o,route:i,userJobTitle:s}){let[c,m]=(0,a.useState)(!1);return a.createElement(st.v,{mode:o},a.createElement(no.E,{"aria-label":t,...nd.xk(sh.card,o?sh.cardBrandBorder:sh.cardStrongBorder,"large"===e?sh.largeCard:sh.smallCard),onClick:()=>{i&&((0,nh.rC)(s,i.href),d.Ay.push(i.href))},htmlAttributes:{onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1)},style:{backgroundColor:l},key:t},a.createElement("div",{className:"x78zum5 xdt5ytf x10l6tqk x13vifvy x1nejdyq x7eqkm1"},a.createElement("div",{...nd.xk(sh.title)},t),a.createElement("div",{className:"x1n0bwc9"},r)),n(c)))}let sh={smallCard:{flexBasis:"xhnlq4v",flexGrow:"x1iyjqo2",$$css:!0},largeCard:{flexBasis:"x4pfjvb",flexGrow:"xgyuaek",$$css:!0},card:{position:"x1n2onr6",display:"x1lliihq",placeItems:"x1hd2rbs",alignItems:null,justifyItems:null,borderRadius:"x1mxnbhz",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,height:"x5yr21d",overflow:"xb3r6kr",overflowX:null,overflowY:null,textAlign:"x1yc453h",$$css:!0},cardBrandBorder:{border:"xehbxol x1fz536k",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},cardStrongBorder:{border:"xehbxol x12jpku1",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},title:{...ns.g.textHeadingSmall,fontWeight:"xk50ysn",$$css:!0}};function sy(){let e=(0,se.w)(),t=function(e){let t={designer:["visualAssets","presentationsSmall","editingEffects"],developer:["diagramming","development","teamMeetingsSmall"],"product-manager":["widgets","presentationsSmall","teamMeetingsSmall"],marketer:["brainstorming","cardTemplates","resumes"],researcher:["diagramming","teamMeetingsSmall","strategicPlanning"],education:["classroomActivities","designTutorials","workshopTemplates"],"ux-writer":["uiKits","teamMeetingsLarge","fileOrganization"],data:["dataTemplates","presentationsLarge","strategicPlanning"],other:["wireframes","presentationsSmall","uiKits"],unknown:["wireframes","presentationsSmall","uiKits"]};return(t[e]||t.unknown).map(e=>sb[e]).filter(e=>void 0!==e)}(e),r=ij(t.map(e=>({key:e.category,category:e.category,resource_type:e.resourceType||void 0,editor_type:e.editorType||void 0}))),n=t.map(t=>({...function(e){switch(e){case iO.LJ.brainstorming:return{title:(0,N.t)("categories.brainstorming"),description:(0,N.t)("community.resource_hub.category_description.brainstorming")};case iO.LJ.cardTemplates:return{title:(0,N.t)("community.resource_hub.featured_categories.invites_templates"),description:(0,N.t)("community.resource_hub.category_description.card_templates")};case iO.LJ.classroomActivities:return{title:(0,N.t)("community.resource_hub.featured_categories.classroom_activities"),description:(0,N.t)("community.resource_hub.category_description.classroom_activities")};case iO.LJ.dataTemplates:return{title:(0,N.t)("community.footer.data_templates"),description:(0,N.t)("community.resource_hub.category_description.data_templates")};case iO.LJ.designTutorials:return{title:(0,N.t)("community.resource_hub.featured_categories.design_tutorials"),description:(0,N.t)("community.resource_hub.category_description.design_tutorials")};case iO.LJ.development:return{title:(0,N.t)("community.resource_hub.featured_categories.plugins_for_development"),description:(0,N.t)("community.resource_hub.category_description.development")};case iO.LJ.diagramming:return{title:(0,N.t)("categories.diagramming"),description:(0,N.t)("community.resource_hub.category_description.diagramming")};case iO.LJ.editingEffects:return{title:(0,N.t)("community.resource_hub.featured_categories.plugins_for_editing_and_effects"),description:(0,N.t)("community.resource_hub.category_description.editing_effects")};case iO.LJ.fileOrganization:return{title:(0,N.t)("community.resource_hub.featured_categories.plugins_for_file_organization"),description:(0,N.t)("community.resource_hub.category_description.file_organization")};case iO.LJ.presentations:return{title:(0,N.t)("categories.presentations"),description:(0,N.t)("community.resource_hub.category_description.presentations")};case iO.LJ.resumes:return{title:(0,N.t)("categories.resume_templates"),description:(0,N.t)("community.resource_hub.category_description.resumes")};case iO.LJ.strategicPlanning:return{title:(0,N.t)("categories.strategic_planning"),description:(0,N.t)("community.resource_hub.category_description.strategic_planning")};case iO.LJ.teamMeetings:return{title:(0,N.t)("community.resource_hub.featured_categories.team_meetings"),description:(0,N.t)("community.resource_hub.category_description.team_meetings")};case iO.LJ.uiKits:return{title:(0,N.t)("categories.ui_kits"),description:(0,N.t)("community.resource_hub.category_description.ui_kits")};case iO.LJ.visualAssets:return{title:(0,N.t)("community.resource_hub.featured_categories.assets"),description:(0,N.t)("community.resource_hub.category_description.visual_assets")};case iO.LJ.whiteboarding:return{title:(0,N.t)("categories.widgets"),description:(0,N.t)("community.resource_hub.category_description.widgets")};case iO.LJ.wireframes:return{title:(0,N.t)("categories.wireframes"),description:(0,N.t)("community.resource_hub.category_description.wireframes")};case iO.LJ.workshopTemplates:return{title:(0,N.t)("community.resource_hub.featured_categories.workshop_templates"),description:(0,N.t)("community.resource_hub.category_description.workshop_templates")};default:(0,I.xb)(e)}}(t.category),size:t.size,art:t.art,backgroundColor:t.backgroundColor,brand:t.brand,route:r[t.category],userJobTitle:e})),l=(0,a.useRef)(null),[o,i]=(0,a.useState)(0);(0,a.useEffect)(()=>{let e=new ResizeObserver(e=>{i(e[0]?.contentRect.width??0)});return l.current&&(i(l.current.clientWidth),e.observe(l.current)),()=>{e.disconnect()}},[l]);let s=(0,a.useMemo)(()=>{let e=[],t=0;return n.forEach(r=>{let a="large"===r.size?420:210;t+a<=o&&(e.push(r),t+=a)}),e},[o,n]);return a.createElement(sf,{header:(0,N.t)("community.resource_hub.featured_categories"),content:a.createElement("div",{className:"x78zum5 x1q0g3np x1665zp3 xc6p2dh",ref:l},s.map(e=>a.createElement(sv,{key:e.title,...e}))),showSeeMore:!1})}var sw=r(350021),sT=(e=>(e.BRAINSTORMING="brainstorming",e.COOPER_TEMPLATE="cooperTemplate",e.DATA_TEMPLATE="dataTemplate",e.DESIGN_TEMPLATE="designTemplate",e.DESIGN_TOOLS="designTools",e.DIAGRAMMING="diagramming",e.EDUCATION="education",e.FIGJAM_TEMPLATE="figJamTemplate",e.FUN_AND_GAMES="funAndGames",e.PRESENTATION_TEMPLATE="presentationTemplate",e.SITE_TEMPLATE="siteTemplate",e.STRATEGIC_PLANNING="strategicPlanning",e.UI_KITS="uiKits",e.WEBSITE_TEMPLATE="websiteTemplate",e.WHITEBOARDING="whiteboarding",e.WIREFRAMES="wireframes",e))(sT||{});function sI({sizingInfo:e,resourceImpressionTracking:t}){let r=(function(e){let t={brainstorming:{key:"brainstorming",header:(0,N.t)("categories.brainstorming"),categoryForQuery:iO.LJ.brainstorming,categorySlug:iO.LJ.brainstorming,resourceType:i7.vt.FIGJAM_TEMPLATE},cooperTemplate:{key:"cooperTemplate",header:(0,N.t)("categories.social_media_templates"),categoryForQuery:iO.LJ.socialMediaTemplates,categorySlug:iO.LJ.socialMediaTemplates,resourceType:i7.vt.COOPER_TEMPLATE_FILE,resourceEditorType:i9.q.COOPER,apiEditorType:iA.k.Editors.COOPER},dataTemplate:{key:"dataTemplate",header:(0,N.t)("community.footer.data_templates"),categoryForQuery:iO.LJ.dataTemplates,categorySlug:iO.LJ.dataTemplates,resourceType:i7.vt.DESIGN_TEMPLATE},designTemplate:{key:"designTemplate",header:(0,N.t)("categories.design_templates"),categorySlug:iO.LJ.designTemplates,resourceType:i7.vt.DESIGN_TEMPLATE},designTools:{key:"designTools",header:(0,N.t)("community.view_bar.plugins"),categorySlug:iO.LJ.designTools,resourceType:i7.vt.PLUGIN,isPlugin:!0},diagramming:{key:"diagramming",header:(0,N.t)("categories.diagramming"),categoryForQuery:iO.LJ.diagramming,categorySlug:iO.LJ.diagramming,resourceType:i7.vt.FIGJAM_TEMPLATE},education:{key:"education",header:(0,N.t)("categories.education"),categoryForQuery:iO.LJ.education,categorySlug:iO.LJ.education,resourceType:i7.vt.DESIGN_TEMPLATE},figJamTemplate:{key:"figJamTemplate",header:(0,N.t)("community.resource_hub.figjam_templates"),categorySlug:iO.LJ.whiteboarding,resourceType:i7.vt.FIGJAM_TEMPLATE,resourceEditorType:i9.q.WHITEBOARD,apiEditorType:iA.k.Editors.FIGJAM},funAndGames:{key:"funAndGames",header:(0,N.t)("categories.fun_games"),categoryForQuery:iO.LJ.funGames,categorySlug:iO.LJ.funGames,resourceType:i7.vt.WIDGET,apiResourceType:iF.L.BrowseResourceTypes.WIDGETS},presentationTemplate:{key:"presentationTemplate",header:(0,N.t)("community.footer.presentations"),categoryForQuery:iO.LJ.presentations,categorySlug:iO.LJ.presentations,resourceType:i7.vt.SLIDE_TEMPLATE,resourceEditorType:i9.q.SLIDES,apiEditorType:iA.k.Editors.SLIDES},siteTemplate:{key:"siteTemplate",header:(0,N.t)("categories.website_templates"),categoryForQuery:iO.LJ.websiteTemplates,categorySlug:iO.LJ.websiteTemplates,resourceType:i7.vt.SITE_TEMPLATE,resourceEditorType:i9.q.SITES,apiEditorType:iA.k.Editors.SITES},strategicPlanning:{key:"strategicPlanning",header:(0,N.t)("categories.strategic_planning"),categoryForQuery:iO.LJ.strategicPlanning,categorySlug:iO.LJ.strategicPlanning,resourceType:i7.vt.FIGJAM_TEMPLATE},uiKits:{key:"uiKits",header:(0,N.t)("categories.ui_kits"),categoryForQuery:iO.LJ.uiKits,categorySlug:iO.LJ.uiKits,resourceType:i7.vt.DESIGN_TEMPLATE},websiteTemplate:{key:"websiteTemplate",header:(0,N.t)("categories.website_templates"),categoryForQuery:iO.LJ.websiteTemplates,categorySlug:iO.LJ.websiteTemplates,resourceType:i7.vt.DESIGN_TEMPLATE,resourceEditorType:i9.q.DESIGN},whiteboarding:{key:"whiteboarding",header:(0,N.t)("categories.whiteboarding"),categoryForQuery:iO.LJ.whiteboarding,categorySlug:iO.LJ.whiteboarding,resourceType:i7.vt.FIGJAM_TEMPLATE},wireframes:{key:"wireframes",header:(0,N.t)("categories.wireframes"),categoryForQuery:iO.LJ.wireframes,categorySlug:iO.LJ.wireframes,resourceType:i7.vt.DESIGN_TEMPLATE}},r={designer:["siteTemplate","uiKits","figJamTemplate","designTools","cooperTemplate"],developer:["siteTemplate","wireframes","whiteboarding","uiKits","cooperTemplate"],"product-manager":["brainstorming","strategicPlanning","dataTemplate","uiKits","siteTemplate"],marketer:["cooperTemplate","presentationTemplate","strategicPlanning","uiKits","whiteboarding"],researcher:["brainstorming","presentationTemplate","dataTemplate","uiKits","cooperTemplate"],education:["education","presentationTemplate","funAndGames","uiKits","siteTemplate"],"ux-writer":["brainstorming","presentationTemplate","wireframes","cooperTemplate","siteTemplate"],data:["diagramming","brainstorming","uiKits","siteTemplate","cooperTemplate"],other:["brainstorming","cooperTemplate","designTools","uiKits","siteTemplate"],unknown:["brainstorming","cooperTemplate","designTools","uiKits","siteTemplate"]};return(r[e]||r.unknown||[]).map(e=>t[e]).filter(e=>void 0!==e)})((0,se.w)()).map(e=>({key:e.key,header:e.header,categoryForQuery:e.categoryForQuery,categorySlug:e.categorySlug,resourceType:e.resourceType,resourceEditorType:e.resourceEditorType,apiResourceType:e.apiResourceType,apiEditorType:e.apiEditorType,isPlugin:e.isPlugin}));return a.createElement("div",{className:"x78zum5 xdt5ytf xh8yej3 x5yr21d x1665zp3"},r.map((r,n)=>a.createElement("div",{key:n},2===n&&a.createElement("div",{className:"x1hq5gj4"},a.createElement(sy,null)),r.isPlugin?a.createElement(sN,{key:r.key,header:r.header,categorySlug:r.categorySlug,resourceImpressionTracking:t}):a.createElement(sx,{key:r.key,header:r.header,categoryForQuery:r.categoryForQuery,categorySlug:r.categorySlug,resourceType:r.resourceType,resourceEditorType:r.resourceEditorType,apiResourceType:r.apiResourceType,apiEditorType:r.apiEditorType,sizingInfo:e}))))}function sx({header:e,categoryForQuery:t,categorySlug:r,resourceType:n,resourceEditorType:l,apiResourceType:o,apiEditorType:i,sizingInfo:s}){let{resources:d,loading:c}=i6({limit:nb.u8,resourceType:n,editorType:l,category:t,caller:i3.z.RESOURCE_HUB,includeContent:!1}),m=ij([{key:"categoryRoute",category:r,resource_type:o,editor_type:i}]);return c||d&&0!==d.length?a.createElement(sf,{header:e,route:m.categoryRoute,content:a.createElement(sw.T,{resources:(d&&d.slice(0,s.numberOfTiles))??[],loadingTileCount:s.numberOfTiles,isLoading:c}),showSeeMore:!0}):null}function sN({header:e,categorySlug:t,resourceImpressionTracking:r}){let{resources:n,loading:l}=i6({limit:nb.l_,resourceType:i7.vt.PLUGIN,category:t,caller:i3.z.RESOURCE_HUB,includeContent:!0}),o=ij([{key:"pluginsRoute",category:t,resource_type:iF.L.BrowseResourceTypes.PLUGINS}]);return l||n&&0!==n.length?a.createElement(sf,{header:e,route:o.pluginsRoute,content:a.createElement(i5.M,{plugins:(n??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),onIntersectionChange:r,isOrgTeamBrowsing:!1,isLoading:l,loadingRowCount:nb.l_}),showSeeMore:!0}):null}var sS=r(469508);function sC({currentOrgId:e}){return a.createElement(rV.fu,{name:rz.e0.RESOURCE_HUB_COMMUNITY_TAB_DISABLED_PAGE,properties:{orgId:e}},a.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k"},a.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 x14o0rcq"},a.createElement(sa.oW,{className:"x193iq5w xl1xv1r",src:(0,ac.ck)("8b7c6fb3e353c1972267681e37a56765b96f5b3c"),alt:(0,N.t)("community.resource_hub.your_admins_have_restricted_access"),loading:"lazy"})),a.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3 xycev2y xo3t2mw x6s0dn4 x1nhvcw1"},a.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s"},a.createElement("div",{...nd.xk(sk.heading)},(0,N.t)("community.resource_hub.your_admins_have_restricted_access")),a.createElement("div",{...nd.xk(sk.description)},(0,N.tx)("community.resource_hub.looking_for_inspiration_you_can",{link:a.createElement(sS.N,{href:"/community",newTab:!0},(0,N.t)("community.resource_hub.community_link"))})))),a.createElement("div",{className:"x78zum5 xdt5ytf xjwf9q1 x98rzlu"})))}let sk={heading:{color:"x1akne3o",...ns.g.textHeadingMedium,textAlign:"x2b8uid",$$css:!0},description:{color:"x1n0bwc9",...ns.g.textBodyMedium,textAlign:"x2b8uid",$$css:!0}};function sR(){let e=(0,a.useRef)(null),[t,r]=(0,a.useState)(0),n=(0,a.useCallback)(e=>{r(Math.floor((e-4+32)/304))},[]);return(0,a.useLayoutEffect)(()=>{let t=e.current;if(!t)return;n(t.clientWidth);let r=new ResizeObserver(e=>{n(e[0]?.target.clientWidth??0)});return r.observe(e.current),()=>r.disconnect()},[e,n]),(0,a.useMemo)(()=>({numberOfTiles:t,sizeRef:e}),[t,e])}function sA({currentOrgId:e,isCommunityTabDisabledForOrg:t}){let r=sR(),{trackResourceImpression:n}=(0,iN.GS)(),l=(0,a.useCallback)((e,t)=>{t&&n(e)},[n]);return t?a.createElement(sC,{currentOrgId:e}):a.createElement(rV.fu,{name:rz.e0.RESOURCE_HUB_COMMUNITY_RESOURCES_HOME_PAGE},a.createElement("div",{className:"x78zum5 xdt5ytf xh8yej3 x5yr21d x1665zp3",ref:r.sizeRef},a.createElement(iS,{tab:nb.N$.COMMUNITY}),a.createElement(i8,null),a.createElement(sI,{sizingInfo:r,resourceImpressionTracking:l})))}var sO=r(652021),sP=r(324747);function sF(e,t){let r={orgId:e??void 0,teamId:t??void 0,isInternal:!0},{trackResourceImpression:n,flushAndResetResourceImpressions:l}=(0,iN.GS)({extraProperties:r}),{trackResourceImpression:o,flushAndResetResourceImpressions:i}=(0,iN.r4)({extraProperties:r}),{trackResourceImpression:s,flushAndResetResourceImpressions:d}=(0,iN.FD)({extraProperties:r});return{onIntersectionChange:(0,a.useCallback)((e,t)=>{t&&((0,sO.o_)(e)?o(e):(0,sO.ws)(e)?n(e):(0,sP.I0)(e)&&s(e))},[n,o,s]),flushAndResetImpressions:(0,a.useCallback)(()=>{l(),i(),d()},[l,i,d])}}var sL=r(506752),sD=r(589853),sM=r(97481),sB=r(171506),sU=r(419791),s$=r(372240),sj=r(911433);let sW=new Set([eF._Y.COOPER,eF._Y.SLIDES,eF._Y.WHITEBOARD]),sG=new Set([eF._Y.COOPER,eF._Y.SLIDES]);function sV({newFileFrom:e,contextClicked:t,forceOpenNewTab:r}){let a=(0,n.d4)(e=>e.user?.drafts_folder_id),{data:l,status:o}=(0,sM.nt)(a),i=(0,sB.h)(l),s=(0,eV.T5)("useTemplatesOmnicreateMenuItemsProps"),d=i.filter(({editorType:e})=>{switch(s.data?.tier){case eF.Ag.STUDENT:case eF.Ag.PRO:return sG.has(e);case eF.Ag.ORG:case eF.Ag.ENTERPRISE:return sW.has(e);case eF.Ag.STARTER:default:return!0}}),[c,m]=(0,eo.fp)(sj.bW),u=m({showOrgTemplateView:!0}),_=(0,s$.E)({isDraftsFolder:!0,newFileFrom:e,forceOpenNewTab:r,newFileDataLocalStorageKey:u}),p="loading"===o||"loading"===s.status;return{newFiles:d.map(({editorType:e,canCreate:r})=>(0,sU.p)({editorType:e,isDisabled:!r,isLoading:p,onClick:_({editorType:e,contextClicked:t})})),import:null}}var sH=r(207496);function sz({planTier:e}){let t;let{color:r}=(0,lW.GA)();t=e===eF.Ag.ORG||e===eF.Ag.ENTERPRISE?"dark"===r?(0,ac.ck)("156640b467fc94700549db25a70310582e3ef24b"):(0,ac.ck)("923655d3d7ad0e0261946e6b8175911e0daceff3"):"dark"===r?(0,ac.ck)("199fc5fd43ab7b8cdb2208db7a7a1c8b4f039119"):(0,ac.ck)("363ceafa11ccd8ba7b2d9fe2b9aba1f8f8477596");let n=sV({newFileFrom:iu.f6.RESOURCE_HUB_FEW_TEMPLATES_UPSELL,contextClicked:rz.e0.RESOURCE_HUB_FEW_TEMPLATES_UPSELL,forceOpenNewTab:!0});return a.createElement(rV.fu,{name:rz.e0.RESOURCE_HUB_FEW_TEMPLATES_UPSELL},a.createElement("div",{className:"x78zum5 x1q0g3np xh8yej3 xeq9io7 xgqmno8 x3s0vfn"},a.createElement("div",{className:"x3nfvp2 x13a6bvl xgqmno8 xb3r6kr"},a.createElement(sa.oW,{className:"xnq0rdo x15elv7b x1sy10c2 x1d6c7ev xl1xv1r",src:t,alt:(0,N.t)("community.resource_hub.get_more_done"),loading:"lazy"})),a.createElement("div",{className:"x1iyjqo2 x1264ykn xmcgfsh"}),a.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3 x1d3hk7y x1cy8zhl xw8ila8 x1n2onr6"},a.createElement("div",{className:"x78zum5 xdt5ytf xl56j7k x1cy8zhl x167g77z xkh2ocl xh8yej3 x2lah0s"},a.createElement("div",{...nd.xk(sY.heading)},(0,N.t)("community.resource_hub.get_more_done")),a.createElement("div",{...nd.xk(sY.description)},(0,N.t)("community.resource_hub.create_custom_templates_to_add"))),a.createElement(sH.a,{menuItems:n}))))}let sY={heading:{color:"x1akne3o",...ns.g.textHeadingMedium,$$css:!0},description:{color:"x1n0bwc9",...ns.g.textBodyMedium,$$css:!0}};function sK({planTier:e,isTemplatesPublishingDisabledForOrg:t}){let r;let n=(0,nE.Om)(),l=(0,nE.tv)(),{color:o}=(0,lW.GA)();r=e===eF.Ag.ORG||e===eF.Ag.ENTERPRISE?t?(0,ac.ck)("ceafb20933e03362e3d3f6c8191e892c8321d3db"):"dark"===o?(0,ac.ck)("156640b467fc94700549db25a70310582e3ef24b"):(0,ac.ck)("923655d3d7ad0e0261946e6b8175911e0daceff3"):"dark"===o?(0,ac.ck)("199fc5fd43ab7b8cdb2208db7a7a1c8b4f039119"):(0,ac.ck)("363ceafa11ccd8ba7b2d9fe2b9aba1f8f8477596");let i=sV({newFileFrom:iu.f6.RESOURCE_HUB_NO_RESOURCES_UPSELL,contextClicked:rz.e0.RESOURCE_HUB_NO_RESOURCES_UPSELL,forceOpenNewTab:!0}),s=new nE.au({...n,tab:nb.N$.COMMUNITY},l),d=t?(0,N.t)("community.resource_hub.template_publishing_has_been_disabled"):(0,N.t)("community.resource_hub.streamline_your_work_with_custom");return a.createElement(rV.fu,{name:rz.e0.RESOURCE_HUB_NO_RESOURCES_UPSELL},a.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k"},a.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xvue9z xwbyk0q x2lah0s xk1l47c"},a.createElement(sa.oW,{className:"x193iq5w xl1xv1r xetamn0",src:r,alt:d,loading:"lazy"})),a.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3 xz84dc7 xo3t2mw x6s0dn4"},a.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s"},a.createElement("div",{...nd.xk(sq.heading)},d),a.createElement("div",{...nd.xk(sq.description)},(0,N.t)("community.resource_hub.create_templates_to_keep_up"))),a.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xou54vl xkh2ocl xh8yej3 x2lah0s"},!t&&a.createElement(sH.a,{menuItems:i}),a.createElement(rV.o3,{...nd.xk(sq.browseResourcesFromCommunity),to:s.to,trackingEventName:nh.HH.RESOURCE_HUB_BROWSE_COMMUNITY_CLICKED,trackingProperties:{route:s.pathname}},(0,N.t)("community.resource_hub.browse_resources_from_community"))))))}let sq={heading:{color:"x1akne3o",...ns.g.textHeadingMedium,textAlign:"x2b8uid",$$css:!0},description:{color:"x1n0bwc9",...ns.g.textBodyMedium,textAlign:"x2b8uid",$$css:!0},browseResourcesFromCommunity:{color:"x1quhyk7",...ns.g.textBodyMedium,textAlign:"x2b8uid",cursor:"x1ypdohk",$$css:!0}};var sJ=r(679617),sX=r(872240);function sQ({teamId:e}){let t=(0,n.wA)(),r=(0,nE.Om)(),l=(0,nE.tv)(),{color:o}=(0,lW.GA)(),i=new nE.au({...r,tab:nb.N$.COMMUNITY},l);return a.createElement(rV.fu,{name:rz.e0.RESOURCE_HUB_UPGRADE_UPSELL,properties:{planTier:eF.Ag.STARTER,teamId:e}},a.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k"},a.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xvue9z xwbyk0q x2lah0s xk1l47c"},a.createElement(sa.oW,{className:"x193iq5w xl1xv1r xetamn0",src:"dark"===o?(0,ac.ck)("199fc5fd43ab7b8cdb2208db7a7a1c8b4f039119"):(0,ac.ck)("363ceafa11ccd8ba7b2d9fe2b9aba1f8f8477596"),alt:(0,N.t)("community.resource_hub.custom_templates_for_your_team"),loading:"lazy"})),a.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3 xz84dc7 xo3t2mw x6s0dn4"},a.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s"},a.createElement("div",{...nd.xk(sZ.heading)},(0,N.t)("community.resource_hub.custom_templates_for_your_team")),a.createElement("div",{...nd.xk(sZ.description)},(0,N.t)("community.resource_hub.upgrade_to_the_professional_plan"))),a.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xou54vl xkh2ocl xh8yej3 x2lah0s"},a.createElement(ay.$z,{onClick:()=>{t(sJ.WX({teamId:e,entryPoint:sX.TN.RESOURCE_HUB,openInNewTab:!1}))}},(0,N.t)("community.resource_hub.upgrade_to_professional")),a.createElement(rV.o3,{...nd.xk(sZ.browseResourcesFromCommunity),to:i.to,trackingEventName:nh.HH.RESOURCE_HUB_BROWSE_COMMUNITY_CLICKED},(0,N.t)("community.resource_hub.browse_resources_from_community"))))))}let sZ={heading:{color:"x1akne3o",...ns.g.textHeadingMedium,textAlign:"x2b8uid",$$css:!0},description:{color:"x1n0bwc9",...ns.g.textBodyMedium,textAlign:"x2b8uid",$$css:!0},browseResourcesFromCommunity:{color:"x1quhyk7",...ns.g.textBodyMedium,textAlign:"x2b8uid",cursor:"x1ypdohk",$$css:!0}};var s0=r(660434),s1=r(103959);function s2({resourceTypeSlugs:e}){return a.createElement("div",{className:"x78zum5 x167g77z x1a02dak"},e.map(e=>a.createElement("div",{className:"x167g77z x4vwp2a",key:e},a.createElement(s4,{resourceTypeSlug:e}))))}function s4({resourceTypeSlug:e}){let t=(0,nE.Om)(),r=(0,nE.tv)(),n=(0,eD.i_)(e),l=function(e){switch(e){case ih.M.PLUGINS:return a.createElement(iX.u,null);case ih.M.FIGJAM_TEMPLATES:return a.createElement(i2.D,null);case ih.M.WIDGETS:return a.createElement(s0.v,null);case ih.M.SLIDE_TEMPLATES:return a.createElement(iZ.l,null);case ih.M.LIBRARIES:break;case ih.M.COOPER_TEMPLATES:return a.createElement(s1.W,null);case ih.M.RECENTLY_ADDED_TEMPLATES:break;default:(0,I.S9)(e,null)}return null}(e);return a.createElement(no.E,{"aria-label":n,className:M()(iz.x6,iz.Mg,iz.pU),onClick:()=>{let a=new ih.U({...t,resourceTypeSlug:e},r);(0,nh.ng)(e),d.Ay.push(a.href)}},a.createElement("span",{className:iz.IO},l,a.createElement("span",{className:iY},n)))}function s8({planTier:e,isTemplatesPublishingDisabledForOrg:t,currentOrgId:r,currentTeamId:n}){let o;let i=sR(),{onIntersectionChange:s}=sF(r??void 0,n??void 0),d=(0,sD.er)(e,n??null,!!t),c=(0,sD.NQ)(e,r??null,!!t),{[eF._Y.COOPER]:{templates:m,isLoading:u,hasMoreTemplates:_},[eF._Y.WHITEBOARD]:{templates:p,isLoading:f,hasMoreTemplates:g},[eF._Y.SLIDES]:{templates:E,isLoading:b,hasMoreTemplates:v}}=r?c:d,{resources:h,loading:y,hasNextPage:w}=(0,sD.wO)({limit:6,caller:i3.z.RESOURCE_HUB,orgId:r,includeContent:!0}),{resources:T,loading:I,hasNextPage:x}=(0,sD.GO)({resourceType:i7.vt.WIDGET,orgId:r,teamId:n,planTier:e,sortBy:sL.e.Browse.ALL_TIME,isTemplatesPublishingDisabledForOrg:!!t});if(u||f||b||y||I)return a.createElement("div",{className:"x78zum5 xl56j7k x6s0dn4 xg87l8a",ref:i.sizeRef},a.createElement(lU.k,null));let N=(0,l.k)().cooper,S=(h??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),C=[];if([...N?[{resources:m,slug:ih.M.COOPER_TEMPLATES}]:[],{resources:p,slug:ih.M.FIGJAM_TEMPLATES},{resources:E,slug:ih.M.SLIDE_TEMPLATES},{resources:S,slug:ih.M.PLUGINS},{resources:T,slug:ih.M.WIDGETS}].forEach(({resources:e,slug:t})=>{e&&e.length>0&&C.push(t)}),e===eF.Ag.STARTER&&n)return a.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3",ref:i.sizeRef},a.createElement(sQ,{teamId:n}));let k=0===S.length&&0===T.length,R=m.length+p.length+E.length;if(t&&k||0===R&&k)return a.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3",ref:i.sizeRef},a.createElement(sK,{planTier:e,isTemplatesPublishingDisabledForOrg:t}));if(!t){if(0===R)o=a.createElement("div",{className:"x78zum5 xdt5ytf xw7yly9"},a.createElement(sz,{planTier:e}));else if(R<4){let t=[...m,...p,...E];o=a.createElement(a.Fragment,null,a.createElement(s5,{resourceImpressionTracking:s,numberOfTiles:i.numberOfTiles,resources:t??[]}),a.createElement("div",{className:"x78zum5 xdt5ytf xw7yly9"},a.createElement(sz,{planTier:e})))}else o=a.createElement(a.Fragment,null,N&&a.createElement(s3,{resourceImpressionTracking:s,numberOfTiles:i.numberOfTiles,resources:m,hasNextPage:_}),a.createElement(s7,{resourceImpressionTracking:s,numberOfTiles:i.numberOfTiles,resources:p,hasNextPage:g}),a.createElement(s6,{resourceImpressionTracking:s,numberOfTiles:i.numberOfTiles,resources:E,hasNextPage:v}),1===C.length&&a.createElement("div",{className:"x78zum5 xdt5ytf xw7yly9"},a.createElement(sz,{planTier:e})))}return a.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3",ref:i.sizeRef},a.createElement(rV.fu,{name:rz.e0.RESOURCE_HUB_INTERNAL_RESOURCES_HOME_PAGE},a.createElement(iS,{tab:nb.N$.INTERNAL}),C.length>1&&a.createElement("div",{className:"x78zum5 x1qughib x6s0dn4 x1a02dak xou54vl"},a.createElement(s2,{resourceTypeSlugs:C})),o,a.createElement(s9,{resourceImpressionTracking:s,resources:S??[],hasNextPage:w}),a.createElement(de,{resourceImpressionTracking:s,numberOfTiles:i.numberOfTiles,resources:T??[],hasNextPage:x})))}function s5({resourceImpressionTracking:e,numberOfTiles:t,resources:r}){return a.createElement(dt,{resourceTypeSlug:ih.M.RECENTLY_ADDED_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:!1})}function s3({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:n}){return a.createElement(dt,{resourceTypeSlug:ih.M.COOPER_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:n})}function s6({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:n}){return a.createElement(dt,{resourceTypeSlug:ih.M.SLIDE_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:n})}function s7({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:n}){return a.createElement(dt,{resourceTypeSlug:ih.M.FIGJAM_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:n})}function s9({resourceImpressionTracking:e,resources:t,hasNextPage:r}){let n=(0,nE.Om)(),l=(0,nE.tv)();return t&&0!==t.length?a.createElement(sf,{header:(0,eD.i_)(ih.M.PLUGINS),route:new ih.U({...n,resourceTypeSlug:ih.M.PLUGINS},l),content:a.createElement(i5.M,{plugins:t,onIntersectionChange:e,isOrgTeamBrowsing:!1,isLoading:!1,loadingRowCount:6,layoutV1:"twoColumn"}),showSeeMore:!!r}):null}function de({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:n}){return a.createElement(dt,{resourceTypeSlug:ih.M.WIDGETS,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:n})}function dt({resourceTypeSlug:e,resources:t,hasNextPage:r,resourceImpressionTracking:n,numberOfTiles:l}){let o=(0,nE.Om)(),i=(0,nE.tv)();if(0===t.length)return null;let s=!!r||t.length>l;return a.createElement(sf,{header:(0,eD.i_)(e),route:new ih.U({...o,resourceTypeSlug:e},i),content:a.createElement(sw.T,{resources:t.slice(0,l),resourceImpressionTracking:n}),showSeeMore:s})}let dr="resource_hub--pageContainer--0k53S";function da({planTier:e,isTemplatesPublishingDisabledForOrg:t,currentOrgId:r,currentTeamId:n,isCommunityTabDisabledForOrg:l}){let o;let{tab:i}=(0,ix.RA)(nE.au);switch(i){case nb.N$.INTERNAL:o=a.createElement(s8,{planTier:e,currentOrgId:r??void 0,currentTeamId:n??void 0,isTemplatesPublishingDisabledForOrg:t});break;case nb.N$.COMMUNITY:o=a.createElement(sA,{currentOrgId:r??void 0,isCommunityTabDisabledForOrg:l});break;default:(0,I.xb)(i)}return a.createElement("div",{className:dr},o)}var dn=r(767281),dl=r(425835);function di(){let e=(0,eV.T5)("useTeamTemplatesPageData"),{templatesTeamId:t,resourceTypeSlug:r}=(0,ix.Rd)(ih.U)??{},a=null;if(r)try{let e=(0,eD.W6)(r);e.length>0&&e[0]&&(a=(0,sO.J2)(e[0]))}catch{}let n=e.data?.type===eF.OL.ORG?t:e.data?.key.parentId;return(0,dl.li)({teamId:n??null,editorType:a,enabled:!!a&&!!n&&"loaded"===e.status})}function ds(){let{requestLoadMoreForTeam:e,templatesByTeam:t,isLoading:r}=di(),{onIntersectionChange:n}=sF(void 0,t?.teamId),l=(0,a.useRef)(null),o=(0,a.useRef)(null);return((0,dn.X)({containerRef:l,targetRef:o,onIntersectionChange:e}),r||!t)?null:a.createElement("div",{ref:l},a.createElement(sw.T,{resources:t?.templates??[],resourceImpressionTracking:n}),a.createElement("div",{ref:o}))}function dd({resourceType:e,planTier:t,orgId:r,internalResourcesRoute:n,resourceImpressionTracking:l}){let o;let i=(0,sO.J2)(e),s=sR(),{onIntersectionChange:d}=sF(r??void 0,void 0),{teamTemplates:c,isLoading:m,requestLoadMoreForOrg:u}=(0,dl.e2)({orgId:r,areWorkspacesEnabled:t===eF.Ag.ENTERPRISE,numTemplatesPerTeam:nb.u8+1,editorType:i,filterByIds:null,enabled:!!i}),_=c?.[c.length-1]?.teamId??null,p=(0,a.useRef)(null);return(0,dn.X)({containerRef:s.sizeRef,targetRef:p,targetKey:_,onIntersectionChange:u}),o=m?null:0===c.length?a.createElement(sK,{planTier:t}):c.map(e=>{let t=e.teamName??"",r=e.templates.length>s.numberOfTiles,l=e.templates.slice(0,s.numberOfTiles).map(e=>e.template),o=n.copyWith({templatesTeamId:e.teamId},void 0);return a.createElement("div",{key:e.teamId,ref:e.teamId===_?p:null},a.createElement(sf,{header:(0,N.t)("community.resource_hub.internal_tab",{orgOrTeamName:t}),route:o,content:a.createElement(sw.T,{resources:l,resourceImpressionTracking:d}),showSeeMore:r}))}),a.createElement(er.P,{scrollContainerRef:s.sizeRef},a.createElement("div",{className:"x78zum5 xdt5ytf xou54vl x1120s5i"},o))}function dc({planTier:e,currentOrgId:t,currentTeamId:r,fallbackRedirectRoute:n}){let o;let i=(0,l.k)().cooper,s=(0,ix.a4)(ih.U),{resourceTypeSlug:c,templatesTeamId:m}=s.params,{onIntersectionChange:u,flushAndResetImpressions:_}=sF(t??void 0,r??void 0);if(a.useEffect(()=>{_()},[c,_]),!c)return d.Ay.redirect(n.href),null;let p=(0,eD.W6)(c).filter(e=>i||e!==i7.vt.COOPER_TEMPLATE_FILE);return 0===p.length?null:(p[0]&&(0,eD.Pe)(e,p[0])&&(o=p[0]===i7.vt.PLUGIN?a.createElement(d_,{orgId:t??void 0,resourceImpressionTracking:u,planTier:e}):p[0]===i7.vt.WIDGET||c===ih.M.RECENTLY_ADDED_TEMPLATES?a.createElement(du,{resourceTypes:p,orgId:t??void 0,teamId:r??void 0,resourceImpressionTracking:u,planTier:e}):r||m?a.createElement(ds,null):a.createElement(dd,{resourceType:p[0],planTier:e,orgId:t??"",internalResourcesRoute:s,resourceImpressionTracking:u})),a.createElement(rV.fu,{name:rz.e0.RESOURCE_HUB_INTERNAL_RESOURCES_PAGE},a.createElement("div",{className:dr},o)))}function dm({hasNextPage:e,fetchNextPage:t,isFetchingNextPage:r,loading:n,containerRef:l}){return(0,a.useEffect)(()=>{l.current&&e&&!r&&!n&&l.current.scrollHeight<window.innerHeight&&t()},[e,r,t,n,l]),a.createElement(a.Fragment,null,e&&a.createElement("div",{className:"resource_hub--loadingSpinner--wxRsE"},a.createElement(lU.k,null),a.createElement(ea.a,{onIntersectionChange:e=>{e.isIntersecting&&t()}})))}function du({resourceTypes:e,orgId:t,teamId:r,resourceImpressionTracking:n,planTier:l}){let o=sR(),{resources:i,loading:s,hasNextPage:d,fetchNextPage:c,isFetchingNextPage:m}=(0,sD.yH)({resourceTypes:e,limit:nb.u8,caller:i3.z.RESOURCE_HUB,orgId:t,teamId:r,includeContent:!0,sortBy:e.some(e=>[i7.vt.SLIDE_TEMPLATE,i7.vt.COOPER_TEMPLATE_FILE,i7.vt.FIGJAM_TEMPLATE].includes(e))?sL.e.Browse.PUBLISHED_AT:sL.e.Browse.ALL_TIME});if(!s&&(!i||0===i.length))return a.createElement(sK,{planTier:l});let u=o.numberOfTiles;return a.createElement("div",{ref:o.sizeRef},a.createElement(sw.T,{resources:i??[],isLoading:s,loadingTileCount:u*nb.Z_,resourceImpressionTracking:n}),a.createElement(dm,{hasNextPage:d,fetchNextPage:c,isFetchingNextPage:m,loading:s,containerRef:o.sizeRef}))}function d_({orgId:e,resourceImpressionTracking:t,planTier:r}){let{resources:n,loading:l,hasNextPage:o,isFetchingNextPage:i,fetchNextPage:s}=(0,sD.wO)({limit:10,caller:i3.z.RESOURCE_HUB,orgId:e,includeContent:!0}),d=(0,a.useRef)(null);return l||n&&0!==n.length?a.createElement("div",{ref:d},a.createElement(i5.M,{plugins:(n??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),onIntersectionChange:t,isOrgTeamBrowsing:!1,isLoading:l}),a.createElement(dm,{hasNextPage:o,fetchNextPage:s,isFetchingNextPage:i,loading:l,containerRef:d})):a.createElement(sK,{planTier:r})}var dp=r(389571),df=r(738342),dg=r(700574),dE=r(90290),db=r(735343),dv=r(500365),dh=r(502310),dy=r(10855);function dw({text:e,isSelected:t,onClick:r}){return a.createElement(no.E,{"aria-label":e,"aria-pressed":t,className:M()(iz.x6,iz.Mg,"category_link_pill--tagPill--vb98J",t&&iz.wH),onClick:r},a.createElement("span",{className:M()(iz.IO,"category_link_pill--tagPillContent--tADeA")},e))}function dT({links:e}){let t=(0,ix.a4)(iv.Dv),{tagSlug:r}=(0,ix.RA)(iv.Dv),n=a.useRef(null),[l,o]=a.useState(!1),[i,s]=a.useState(!1),c=(0,dy.l)(),[m,u]=a.useState(0),[_,p]=a.useState(0);return a.useLayoutEffect(()=>{if(!n.current)return;let t=Array.from(n.current.children).filter(e=>!e.className.includes("expansionButton"));if(i)t.every(e=>0===e.offsetTop)&&s(!1),n.current.scrollWidth>n.current.clientWidth&&(s(!1),u(-1));else if(n.current.scrollWidth>n.current.clientWidth){let e=n.current.clientWidth-83,r=Array.from(t).findIndex(t=>t.offsetLeft+t.offsetWidth>e)-1;if(u(r),r<0){o(!1);return}p(t[r].offsetLeft+t[r].offsetWidth+8),o(!0)}else u(e.length-1),o(!1)},[i,l,c,e]),a.createElement(a.Fragment,null,a.createElement("div",{...nd.xk(dI.container,i?dI.expandedContainer:dI.collapsedContainer),ref:n},e.map(({to:e,translatedTitle:n,categorySlug:l,tagSlug:o},s)=>{let c=!!(o&&r&&o===r),u=i||s<=m;return a.createElement("div",{...nd.xk(dI.pillContainer,!u&&dI.hiddenPill),key:e},a.createElement(dw,{text:n,categoryTagSlug:o,onClick:()=>{if(c){let e=t.copyWith({categorySlug:l,tagSlug:void 0}).href;(0,nh.uo)(t.href,e),d.Ay.push(e)}else(0,nh.uo)(t.href,e),d.Ay.push(e)},isSelected:c}))}),(l||i)&&a.createElement(no.E,{className:"expansion-button",...nd.xk(dI.expansionButton),style:l?{left:`${_}px`,position:"absolute"}:{},onClick:()=>{o(!l),s(!i)}},l?(0,N.t)("community.shelves.show_more"):(0,N.t)("community.detail_view.show_less"))))}let dI={collapsedContainer:{flexWrap:"xozqiw3",$$css:!0},expandedContainer:{flexWrap:"x1a02dak",$$css:!0},container:{display:"x78zum5",gap:"x167g77z",rowGap:null,columnGap:null,maxWidth:"x193iq5w",$$css:!0},pillContainer:{flex:"xkz0k9k",flexGrow:null,flexShrink:null,flexBasis:null,$$css:!0},hiddenPill:{visibility:"xlshs6z",$$css:!0},expansionButton:{whiteSpace:"xuxw1ft",color:"x1n0bwc9",outlineWidth:"x1qgsegg",outlineStyle:"xaatb59",outlineColor:"xru40mv",borderRadius:"x1sxf85j",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,padding:"xdqdrvq",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,outlineOffset:"x1g40iwv",...ns.g.textBodyMedium,":hover_backgroundColor":"x133fa97",$$css:!0}};function dx({category:e,showTags:t=!1}){let r=(0,ix.a4)(iv.Dv),n=(0,dh.S)(e.url_slug,iO.LJ);if(!n)return null;let l=(0,dv.m)(e,n,t,r);return a.createElement("div",{className:"x78zum5 x167g77z xgp1u7p"},a.createElement(dT,{links:l}))}var dN=r(227953),dS=r(167759),dC=r(393287),dk=r(373728);function dR({context:e,filterState:t,allowedEditorTypes:r}){let{resourceType:n,editorType:l=(0,dk.MF)(n),price:o}=t,i=(0,ix.RA)(nE.au).tab;return a.createElement(rV.fu,{name:rz.e0.RESOURCE_HUB_FEED_FILTERS},a.createElement(ik.a,{mode:"match"},a.createElement("div",{className:"x78zum5"},a.createElement(dN.Z,{context:e,resourceType:n,editorType:l,allowedEditorTypes:r}),e===db.g.CATEGORY&&a.createElement(dC.y,{context:e,resourceType:n,editorType:l}),i!==nb.N$.INTERNAL&&a.createElement(dS.OQ,{context:e,price:o}))))}function dA(){let e=sR(),t=(0,ix.a4)(iv.Dv);(0,iv.pj)(t);let r=t.params,{categorySlug:n,tagSlug:l}=r,[o,i]=a.useState(null),s=t.search,[{data:d,status:c}]=(0,_.IT)((0,dE.Zp)({categorySlug:n,tagSlug:l})),m="loading"===c;a.useEffect(()=>{d&&!m&&i(d)},[d,m]);let u=(0,df.V)(r,s,nb.u8),p=u.filterState;return a.createElement(rV.fu,{name:rz.e0.RESOURCE_HUB_CATEGORY,properties:{category:n,tag:l}},a.createElement("div",{className:"x78zum5 xdt5ytf xou54vl x1gan7if",ref:e.sizeRef},o?a.createElement(a.Fragment,null,a.createElement("div",{className:"x78zum5 x1qughib x1cy8zhl xozqiw3 xou54vl"},a.createElement("div",{className:"x78zum5 xdt5ytf x1n2onr6 x12lumcd xeuugli"},a.createElement(dx,{category:o,showTags:!!o.tags.length})),a.createElement("div",{className:"x78zum5 x13a6bvl x3psx0u xuxw1ft"},a.createElement(dR,{context:db.g.CATEGORY,filterState:p,allowedEditorTypes:o.editor_types}))),a.createElement("div",{className:"xw7yly9"},a.createElement(dp.e,{category:o,categoryPageData:u,numTilesPerRow:e.numberOfTiles}))):a.createElement("div",{className:"x7z7khe"},a.createElement(dg.y$,null))))}var dO=r(311615),dP=r(645838);let dF="resource_hub_community_tab";function dL({selectedTab:e,orgOrTeamName:t}){let r=(0,n.wA)(),l=(0,ix.a4)(nE.au),o=(0,n.d4)(e=>e.userFlags),i=e=>{e!==nb.N$.COMMUNITY||o[nv.w3]||r(eA.b({[nv.w3]:!0})),(0,nh._K)(e),d.Ay.push(l.copyWith({tab:e}).href)},[s,c,m]=ot.t.useManagedTabs({[nb.N$.INTERNAL]:!0,[nb.N$.COMMUNITY]:!0},e,e=>{i(e)}),u=Object.keys(nb.N$).map(e=>{let r=nb.N$[e]===nb.N$.COMMUNITY;return a.createElement(ot.t.Tab,{key:e,...s[nb.N$[e]],...r&&{"data-onboarding-key":dF}},function(e,t){switch(e){case nb.N$.INTERNAL:if(t)return(0,N.t)("community.resource_hub.internal_tab",{orgOrTeamName:t});return(0,N.t)("community.resource_hub.internal_tab_default");case nb.N$.COMMUNITY:return(0,N.t)("community.resource_hub.community_tab");default:(0,I.xb)(e)}}(nb.N$[e],t))});return a.createElement(ot.t.TabStrip,{manager:m},u)}let dD=(0,em.r1)(nv.xH);function dM({isCommunityTabDisabledForOrg:e}){let t=(0,eo.md)(dD),r=(0,dP.P)()===nb.N$.COMMUNITY,{show:n,isShowing:l,complete:o}=(0,ec.e)({overlay:eg.cvy,priority:e_.N.DEFAULT_MODAL},[t]);return(0,c.h)(()=>{n({canShow:t=>!t&&!r&&!e})}),a.createElement(ep.rq,{arrowPosition:ef.F_.TOP,clickOutsideToHide:!0,description:a.createElement(a.Fragment,null,a.createElement(Z.Kz,{direction:"y",multiple:1}),(0,N.tx)("community.resource_hub.see_what_community_has_to_offer"),a.createElement(Z.Kz,{direction:"y",multiple:2})),emphasized:!0,isShowing:l,onClose:o,primaryCta:{label:(0,N.tx)("community.resource_hub.got_it"),type:"button",onClick:()=>o(),ctaTrackingDescriptor:ed.c.GOT_IT},targetKey:dF,title:(0,N.tx)("community.resource_hub.get_more_inspiration"),trackingContextName:nh.HH.COMMUNITY_TAB_ONBOARDING_OVERLAY,userFlagOnShow:nv.xH,width:240})}var dB=r(134573),dU=r(617215),d$=r(877770),dj=r(347701);function dW({text:e,getTriggerProps:t}){return a.createElement(no.E,{"aria-label":(0,N.t)("community.search.select_search_scope"),...t(),className:"x1sxf85j xsb15dp x1qfvsp xxk0z11 xmzs88n xd8780z x1db2dqx x78zum5 xl56j7k x6s0dn4 xt0e3qv"},a.createElement("span",{className:"x78zum5 x6s0dn4"},a.createElement(d$.h,null),e,a.createElement(dj.O,{className:"xet2fuk"})))}function dG({onSelect:e,orgOrTeamName:t}){let{getTriggerProps:r,manager:n}=iV.b(),l=(0,dO.v)(),o=(0,nE.Om)(),i=(0,nE.tv)(),s=(0,ix.RA)(nE.au).tab,[c,m]=(0,a.useState)(s);(0,a.useEffect)(()=>{m(s),e?.(s)},[s,e]);let u=c===nb.N$.COMMUNITY?(0,N.t)("community.community"):t;return a.createElement(iV.bL,{manager:n},a.createElement(dW,{text:u,getTriggerProps:r}),a.createElement(iV.mc,null,a.createElement(dU.z6,{title:a.createElement(iV.hE,null,(0,N.t)("community.search.search_in")),onChange:t=>{if(t!==c&&(m(t),e?.(t),l&&o&&i)){let e=new(t===nb.N$.INTERNAL?iT.IQ:iT.bP)(o,{...i,query:l.search.query});d.Ay.push(e.href)}},value:c},a.createElement(dU.CU,{value:String(nb.N$.INTERNAL)},t),a.createElement(dU.CU,{value:String(nb.N$.COMMUNITY)},(0,N.t)("community.community")))))}function dV(){let{onSubmit:e,setSelectedDropdownTab:t}=function(){let e=(0,ix.RA)(nE.au).tab,[t,r]=(0,a.useState)(e),n=t===nb.N$.INTERNAL?iT.IQ:iT.bP,l=(0,dO.v)(),o=!!l,i=(0,nE.Om)(),s=(0,nE.tv)();return{onSubmit:e=>{let r;if(r=l?l.copyWith({},{query:e}).href:new n(i,{...s,query:e}).href,e.length)d.Ay.push(r);else if(o){let e=new nE.au({...i,tab:t},s).href;d.Ay.push(e)}},setSelectedDropdownTab:r}}(),r=(0,ic.Fm)(),n=(0,eV.T5)("ResourceHubApp"),l=(0,eD.LQ)(n),o=n.data?.name||"",i=r&&"loaded"===n.status&&!l;return a.createElement("div",{className:"resource_hub_search_bar--searchInputContainer--6WP25"},a.createElement(dB.S,{onSubmit:e,isMobile:!1,dropdownSelector:i?a.createElement(dG,{orgOrTeamName:o,onSelect:t}):null}))}function dH({orgOrTeamName:e,isCommunityTabDisabledForOrg:t}){let{tab:r}=(0,ix.RA)(nE.au),n=!!(0,ix.ed)(iw.jT),l=r===nb.N$.COMMUNITY&&!t&&!n&&!(0,ic.Fm)(),o=a.createElement("div",{className:"xqyf9gi"},a.createElement(dV,{key:"resource-hub-search-bar"}));return a.createElement("div",null,a.createElement(nS.g2,{leftSide:a.createElement(dz,{selectedTab:r||nb.N$.INTERNAL,orgOrTeamName:e}),rightSide:l?[o]:[]}),a.createElement(dM,{isCommunityTabDisabledForOrg:t}))}function dz({selectedTab:e,orgOrTeamName:t}){let r=!!(0,dO.v)(),n=!!(0,ix.ed)(iw.jT),l=(0,ix.ed)(iv.Dv),o=(0,ix.ed)(ih.U),{templatesByTeam:i}=di();if(n)return null;let s="";return r||l||o?(r?s=e===nb.N$.INTERNAL?t?(0,N.t)("community.search.search_results_from_org_or_team",{orgOrTeamName:t}):(0,N.t)("community.search.search_results"):(0,N.t)("community.search.search_results_from_community"):o?(s=(0,eD.i_)(o.params.resourceTypeSlug),o.params.templatesTeamId&&(s=i?.teamName?(0,N.t)("community.resource_hub.internal_tab",{orgOrTeamName:i.teamName}):"")):l&&(s=iG(l.params.categorySlug,void 0,l.search.resource_type)||""),a.createElement("h1",{...nd.xk(dY.headerText)},s)):a.createElement(dL,{selectedTab:e,orgOrTeamName:t})}let dY={headerText:{...ns.g.textHeadingMedium,$$css:!0}};var dK=r(352483),dq=r(870401),dJ=r(621813),dX=r(775204),dQ=r(568510),dZ=r(549260);function d0(){let e=(0,n.wA)(),t=(0,ix.RA)(iw.jT),r=t.apiResourceType,l=t.resourceId,[o]=(0,_.IT)((0,dQ.Z)({apiResourceType:r,id:l})),i=o.data,s=i&&(0,sO.XW)(i)?(0,sO.qY)(i):i;a.useEffect(()=>{s&&(0,dZ.S)(e,s)},[e,s]);let d=(0,dK.eJ)(),c=(0,dX.Jm)(),m=(0,dX.BY)(),u=(0,nh.W6)(r,l,c,m);return i&&s?a.createElement(rV.fu,{name:rz.e0.RESOURCE_HUB_COMMUNITY_RESOURCE_DETAIL_PAGE,properties:u},a.createElement("div",null,a.createElement(dJ.Y,{resource:i,resourceContent:s}),a.createElement(dq.X,{resource:i,resourceContent:s,rdpImpressionId:d}))):a.createElement(a.Fragment,null)}var d1=r(431272),d2=r(624490),d4=r(140630),d8=r(874328);function d5({selectedTab:e,resultsByType:t,filtersControlState:r}){let n=(0,dO.e)(),l=n instanceof iT.bP?nb.N$.COMMUNITY:nb.N$.INTERNAL,o=(0,nE.tv)(),i=(0,d8.v)(t),s=(e,t)=>{let r=n.copyWith({},{...o,resource_type:t}).href;d.Ay.push(r),(0,nc.trackEvent)("resource_type_filter_changed",{resource_type:t,from:e})},[c,m,u]=ot.t.useManagedTabs({[iF.t.FILES]:!0,[iF.t.PLUGINS]:!0,[iF.t.WIDGETS]:!0},e,t=>{s(e,t)}),_=Object.keys(iF.t).map(e=>{let{count:t=0,hasMore:r}=i[iF.t[e]];return a.createElement(ot.t.Tab,{key:e,...c[iF.t[e]]},a.createElement("span",null,function(e,t){switch(e){case iF.t.FILES:if(t===nb.N$.COMMUNITY)return(0,N.t)("community.view_bar.files_and_templates_tab");return(0,N.t)("community.view_bar.templates_tab");case iF.t.PLUGINS:return(0,N.t)("community.view_bar.plugins");case iF.t.WIDGETS:return(0,N.t)("community.view_bar.widgets");default:(0,I.xb)(e)}}(iF.t[e],l)),a.createElement("span",null,` (${t??0}${r?"+":""})`))});return a.createElement("div",null,a.createElement(nS.g2,{leftSide:a.createElement(ot.t.TabStrip,{manager:u},_),rightSide:[a.createElement(dR,{key:"filters",context:db.g.SEARCH,filterState:r})]}))}let d3=e=>({query:e.search.query??"",editor_type:e.search.editor_type??iA.k.Editors.ALL,price:e.search.price??d2.C.Price.ALL,resource_type:e.search.resource_type??iF.t.FILES});function d6({currentOrgId:e,currentTeamId:t}){let r=(0,dO.e)();(0,dk._4)(r);let n=d3(r),l=n.resource_type,{trackResourceImpression:o,flushAndResetResourceImpressions:i}=(0,iN.GS)({extraProperties:{resourceType:n.resource_type}}),s=(0,a.useMemo)(()=>({resourceType:n.resource_type,editorType:n.editor_type,price:n.price,sortBy:(0,sL.H)()}),[n]);a.useEffect(()=>{i()},[n.resource_type,n.query,n.editor_type,n.price,i]);let{resultsByType:d,loadedStatusByType:c}=(0,d1._w)((0,a.useMemo)(()=>({query:n.query,editor_type:n.editor_type,price:n.price,sort_by:sL.e.Search.RELEVANCY,org_id:e,team_id:t}),[n.query,n.editor_type,n.price,e,t]),l),m=sR();return a.createElement(rV.fu,{name:rz.e0.RESOURCE_HUB_SEARCH},a.createElement("div",{className:dr,ref:m.sizeRef},a.createElement(d5,{selectedTab:l,resultsByType:d,filtersControlState:s}),a.createElement(d4.G,{searchParams:n,trackResourceImpression:o,resultsByType:d,isLoadingThisView:!c[l],numTilesPerRow:m.numberOfTiles})))}function d7(){let e=(0,n.wA)(),t=(0,nE.Om)(),r=(0,nE.tv)(),l=(0,eV.T5)("ResourceHubApp"),o=(0,eD.LQ)(l),i=(0,ic.a0)(),s=(0,ic.Fm)(),d=(0,ic.CS)(),c=l.data?.type===eF.OL.ORG?l.data?.key.parentId:void 0,m=l.data?.type===eF.OL.TEAM?l.data?.key.parentId:void 0,u=(0,eD.Fz)(),_=l.data?.type!==eF.OL.ORG||(0,Q.oA)(l.data.customTemplatesAllowed),p=(0,a.useMemo)(()=>{let e=nb.N$.INTERNAL;return"loaded"===l.status&&l.data?.tier===eF.Ag.STARTER&&(e=nb.N$.COMMUNITY),new nE.au({...t,tab:e},r)},[t,r,l]);return"loading"!==l.status&&t?(u||e(eS.$T({view:"recentsAndSharing"})),a.createElement(rV.fu,{name:rz.e0.RESOURCE_HUB},a.createElement(ib.Rj.Provider,{value:ib.mk.RESOURCE_HUB},a.createElement(X.J,null,a.createElement(iE.qh,{path:nE.VR},a.createElement("div",{className:"xv90nub x78see"},a.createElement(dH,{orgOrTeamName:l.data?.name,isCommunityTabDisabledForOrg:o}),a.createElement(iE.dO,null,a.createElement(iE.qh,{path:iy.qL.path},!o&&d?a.createElement(iI.P,{fallbackRedirectRoute:p}):a.createElement(iE.rd,{to:p.to})),a.createElement(iE.qh,{path:iw.jT.path},!o&&i?a.createElement(d0,null):a.createElement(iE.rd,{to:p.to})),a.createElement(iE.qh,{path:iT.bP.path},o?a.createElement(iE.rd,{to:p.to}):a.createElement(d6,null)),a.createElement(iE.qh,{path:iT.IQ.path},s&&(c||m)?a.createElement(d6,{currentOrgId:c,currentTeamId:m}):a.createElement(iE.rd,{to:p.to})),a.createElement(iE.qh,{path:ih.U.path},a.createElement(dc,{planTier:l.data?.tier??null,currentOrgId:c,currentTeamId:m,fallbackRedirectRoute:p})),a.createElement(iE.qh,{path:iv.Dv.path},o?a.createElement(iE.rd,{to:p.to}):a.createElement(dA,null)),a.createElement(iE.qh,{path:nE.au.path},a.createElement(da,{planTier:l.data?.tier??null,currentOrgId:c,currentTeamId:m,isCommunityTabDisabledForOrg:o,isTemplatesPublishingDisabledForOrg:!_})),a.createElement(iE.rd,{to:p.to})))))))):null}var d9=r(823898);function ce(){let e=(0,nE.Om)(),t=(0,nE.tv)();return e?a.createElement(ct,{sharedRouteParams:e,sharedSearchParams:t}):null}function ct({sharedRouteParams:e,sharedSearchParams:t}){let[r,n]=a.useState(null),[l,o]=a.useState(null),[i,s]=a.useState(null),{templatesByTeam:c}=di(),m=[],u=ix.Rd(nE.au)?.tab||nb.N$.INTERNAL,p=u===nb.N$.COMMUNITY?(0,N.t)("community.resource_hub.templates_and_tools_from_community"):(0,N.t)("sidebar.templates_and_tools");m=[{text:p,to:new nE.au({...e,tab:u},t).href,trackingProperties:{name:nh.HH.RESOURCE_HUB_HOME_BREADCRUMB_CLICKED,text:p}}];let f=(0,ix.ed)(iv.Dv),g=!!f,E=(0,ix.ed)(iw.jT),b=!!E,v=g||b;a.useEffect(()=>{v||(n(null),s(null),o(null))},[v]);let h=E?.params.apiResourceType,y=E?.params.resourceId,[w]=(0,_.IT)((0,dQ.Z)({apiResourceType:h,id:y}),{enabled:b&&!!h&&!!y}),T=f?.params.categorySlug||w.data?.category_slug||"",I=f?.params.tagSlug||"",[{data:x,status:S}]=(0,_.IT)((0,dE.Zp)({categorySlug:T,tagSlug:I}),{enabled:v});a.useEffect(()=>{if("loaded"===S){s(x?.selected_tag||null);let{parent_category:e}=x||{parent_category:null};o(e||null),n(x)}},[x,S]),v&&r&&(m=[...m,...function({currentCategory:e,currentParentCategory:t,currentTag:r,sharedRouteParams:a,sharedSearchParams:n,categoryRoute:l}){if(!e)return[];let o=(0,dh.S)(t?.url_slug,iO.LJ),i=(0,dh.S)(e.url_slug,iO.LJ);return[t&&o&&{text:iG(o,void 0,l?.search.resource_type)||(0,N.Yd)(t.i18n_meta?.title,t.title),to:l?l.copyWith({categorySlug:o,tagSlug:void 0}).href:new iv.Dv({...a,categorySlug:o},{...n}).href,trackingProperties:{name:nh.HH.RESOURCE_HUB_CATEGORY_BREADCRUMB_CLICKED,text:iG(o,void 0,l?.search.resource_type)||(0,N.Yd)(t.i18n_meta?.title,t.title),category_slug:o}},e&&i&&{text:iG(i,void 0,l?.search.resource_type)||(0,N.Yd)(e.i18n_meta?.title,e.title),to:l?l.copyWith({categorySlug:i,tagSlug:void 0}).href:new iv.Dv({...a,categorySlug:i},{...n}).href,trackingProperties:{name:nh.HH.RESOURCE_HUB_CATEGORY_BREADCRUMB_CLICKED,text:iG(i,void 0,l?.search.resource_type)||(0,N.Yd)(e.i18n_meta?.title,e.title),category_slug:i}},r&&{text:(0,N.Yd)(r.i18n_meta?.text,r.text)}].filter(Boolean)}({currentCategory:r,currentParentCategory:l,currentTag:i,sharedRouteParams:e,sharedSearchParams:t,categoryRoute:g?f:void 0})]);let C=w.data;if(b&&C&&(r||!C.category_slug)){let e={text:(0,d9.K2)(C)||""};m=[...m,e]}if((0,dO.v)()){let e={text:(0,N.t)("community.resource_hub.search_breadcrumb")};m=[...m,e]}let k=(0,ix.ed)(ih.U);if(k){let e=k.params.resourceTypeSlug,t={text:(0,eD.i_)(e)};if(m=[...m,t],k?.params.templatesTeamId){t.to=k.copyWith({templatesTeamId:void 0}).href,t.trackingProperties={name:nh.HH.RESOURCE_HUB_INTERNAL_RESOURCE_TYPE_BREADCRUMB_CLICKED,text:(0,eD.i_)(e)};let r=c?.teamName;r&&(m=[...m,{text:r}])}}return a.createElement(id.A5,null,...m.map((e,t)=>a.createElement(id.J5,{text:e.text,onClick:()=>{e.to&&d.Ay.push(e.to),e.trackingProperties&&(0,nh.Ox)(e.trackingProperties)},hasTrailingDivider:t<m.length-1,key:`resource_hub_breadcrumb_${t}`,disabled:t===m.length-1})))}function cr(){let e=a.createElement(ce,null);return(0,ic.Fm)()?a.createElement(nS.g2,{leftSide:e,rightSide:[a.createElement(ib.Rj.Provider,{key:"resource-hub-context",value:ib.mk.RESOURCE_HUB},a.createElement("div",{className:"x1mu97ne"},a.createElement(dV,{key:"resource-hub-search-bar"})))]}):e}var ca=r(996982),cn=r(631684),cl=r(841807),co=r(942524),ci=r(170954),cs=r(176677),cd=r(304756);let cc=new class{markFeedVisited(e){return cd.Ay.post(`/api/feed_visited/${e.currentOrgId}`)}};var cm=r(355739),cu=r(343651),c_=r(287498),cp=r(412865),cf=r(511067),cg=r(259939);let cE=new class{markFeedViewed(e){cd.Ay.post(`/api/feed_posts/${e.publicUuid}/mark_viewed`)}vote(e){cd.Ay.post(`/api/feed_posts/${e.publicUuid}/vote`,{vote_option:e.voteOption})}};var cb=r(387594),cv=r(16808),ch=r(539454),cy=r(524767),cw=r(483337),cT=r(311139),cI=r(809651),cx=r(298944);let cN="feed_tile--commentPillText--goQ26",cS="feed_tile--feedPostHoverContainerSelectable--rhPI9";var cC=r(505e3);function ck(e){let t=(0,n.wA)(),r=a.useRef(null),[l,o]=(0,oQ.M)(),[i,s]=(0,oQ.M)(),{requestToOpenPostByFeedIdx:d}=e,c=a.useCallback((r,a)=>{r?.stopPropagation();let n=e.itemIdx+1;(0,nc.trackEvent)("Team Feed Tile Clicked",{postUuid:e.post.publicUuid,feedRank:n}),t((0,tm.to)({type:cm.K,data:{postUuid:e.post.publicUuid,initialPreloadedPost:e.post,feedIdx:e.feedIdx,requestToOpenPostByFeedIdx:d,autofocusCommentInput:a?.autofocusCommentInput,selectedContentIdx:a?.selectedContentIdx,onSetSelectedContentIdx:a?.onSetSelectedContentIdx}}))},[e.itemIdx,e.post,t,e.feedIdx,d]),{refSetter:m}=function(e){let t=a.useRef(null),r=a.useRef(e);r.current=e;let n=a.useMemo(()=>new ResizeObserver(()=>{r.current(t.current)}),[]);return a.useEffect(()=>()=>{n.disconnect()},[n]),{refSetter:a.useCallback(e=>{null!==t.current&&n.unobserve(t.current),t.current=e,null!==t.current&&n.observe(t.current)},[n])}}(e.virtualRowItem.measureRef),u={position:"absolute",top:e.virtualRowItem.start,left:0,right:0},_=e.feedListRef.current?.getBoundingClientRect().left??0,p=Math.max(0,(r.current?.getBoundingClientRect().left??0)-_),f=a.createElement("div",{className:"feed_tile--caughtUpContainer--5uyiy"},a.createElement("div",{className:"feed_tile--caughtUpTitle--PVabL"},(0,N.t)("fig_feed.youre_all_caught_up")),a.createElement("div",{className:"feed_tile--caughtUpSubtitle--j2qKn"},(0,N.t)("fig_feed.come_back_later_for_more_posts")));return a.createElement("div",{className:"feed_tile--postContainer--jD-OA",ref:e=>{m(e),e&&(r.current=e,l(e))},style:u},a.createElement("div",{className:"feed_tile--hoverExtension--aYeAh",ref:i}),a.createElement("div",{className:"feed_tile--tileContainer---NbBK"},a.createElement(cR,{feedPost:e.post,feedIdx:e.feedIdx,onTileMouseDown:c,horizontalMargin:p,isHovered:o||s}),e.mostRecentUnviewed&&f))}function cR(e){let t=parseInt(e.feedPost.numComments,10),r=(0,cp.o8)(e.feedPost.descriptionMeta),n=[...new Map(e.feedPost.comments.map(e=>[e.user.id,e.user])).values()],l=a.createElement("div",{className:"feed_tile--commentPill--ZWfdc feed_reactions_section--reactionPill--qE8nJ reactions--reaction--BGfYE text--fontPos11--2LvXf text--_fontBase--QdLsd",onMouseDown:t=>e.onTileMouseDown(t,{autofocusCommentInput:!0}),role:"button",tabIndex:0},t>0?a.createElement(a.Fragment,null,a.createElement(c_.u,{users:n,totalNum:n.length,numAvatarsToDisplay:4}),a.createElement("div",{className:cN},(0,N.tx)("fig_feed.num_comments",{numComments:t}))):a.createElement("div",{className:cN},(0,N.tx)("fig_feed.add_comment"))),[o,i]=a.useState(!1),s=a.useRef(null);a.useEffect(()=>{let e=s.current;e&&i(e.scrollHeight>e.offsetHeight)},[]);let d=a.useMemo(()=>(r.length>0&&(r[0].t=r[0].t?.trimStart(),r[r.length-1].t=r[r.length-1].t?.trimEnd()),r),[r]),c=(0,cg.q)(),m=a.useCallback((e=[],t)=>e?e.map((e,r)=>{let n=(e.user_annotated?e.user_annotated.handle:e.t)||"",l=(0,oZ.F)(n),o=null,i=e.link&&(0,cb.xT)(e.link);if(e.user_annotated&&l)o=a.createElement("span",{onMouseDown:e=>e.stopPropagation(),role:"link",tabIndex:0},a.createElement(cb.E4,{href:`/files${c}/user/${e.user_id}`,userId:e.user_annotated.id,handle:l,imgUrl:e.user_annotated.img_url}));else if(i&&l&&(0,ch.$)(i))o=a.createElement("span",{onMouseDown:e=>e.stopPropagation(),role:"link",tabIndex:0},a.createElement(cb.Rk,{text:l,hyperlink:i}));else{let e=(0,cu.x6)(l?.replace(/\n\s*\n/g,"\n").split("\n").join(" ")||"");o=a.createElement("span",null,e)}return a.createElement(a.Fragment,{key:`${t}-${r}`},o,e.children?.length&&e.styles?.length&&e.children.map((n,l)=>a.createElement(a.Fragment,{key:`${t}-${r}-${l}`}," ",e.styles.includes("ol")?`${l+1}. `:"\u2022 ",m(n.children,`${t}-${r}-${l}`)," ")))}):[a.createElement(a.Fragment,null)],[c]),u=a.useMemo(()=>m(d,e.feedPost.id),[d,m,e.feedPost.id]),{onTileMouseDown:_}=e,p=a.useMemo(()=>a.createElement("div",{className:"feed_tile--postDescriptionContainer--xP5Fz",onMouseDown:_,role:"button",tabIndex:0},a.createElement("div",{className:"feed_tile--postTitle--DY-Hh"},e.feedPost.title),a.createElement("div",{className:"feed_tile--postDescription--PiaCx","data-testid":"feed-post-description",ref:s},a.createElement("div",{className:M()("feed_tile--postDescriptionMessage--6ThT1 comment_message--commentMessage--kZCzD","feed_tile--collapsed--ruER6",o&&"feed_tile--hasShowMore--6Nm-e")},u),o&&a.createElement("div",{onMouseDown:e=>{e.stopPropagation(),_()},className:"feed_tile--viewMore--o-NxF",role:"button",tabIndex:0},a.createElement("div",{className:"feed_tile--viewMoreEllipsis--k1nCe"},"..."),a.createElement("div",{className:"feed_tile--viewMoreText--WpL2K"},(0,N.t)("fig_feed.see_more"))))),[o,s,e.feedPost,_,u]),f=(0,cy.DG)(e.feedPost.publicUuid,cy.dy.TILE),g=(0,cf.Um)(),E=e.isHovered||g?.type===(0,cx.j8)(cx.Hx.USER,e.feedPost.publicUuid,cy.Zp.TILE);return a.createElement(a.Fragment,null,a.createElement("div",{className:"feed_tile--topRowUGC--oWJxs"},a.createElement("div",{className:"feed_tile--avatarFloat--h-EFM"},a.createElement(cT.A,{user:e.feedPost.creator,size:tU.Pf.LARGE,noHandle:!0})),a.createElement(cT.B,{user:e.feedPost.creator,date:e.feedPost.createdAt,onTileMouseDown:e.onTileMouseDown,noAvatar:!0}),a.createElement("div",{className:x.s.flex.flexRow.$},a.createElement(cx.Wu,{hideTarget:!E,feedPost:e.feedPost,source:cy.Zp.TILE}),E&&a.createElement(cv.K0,{"data-tooltip-type":rH.Ib.TEXT,"data-tooltip":(0,N.t)("fig_feed.copy_link_to_post"),onClick:f},a.createElement(oE.In,{icon:"hyperlink-32"})))),p,a.createElement(cA,{feedPost:e.feedPost,feedIdx:e.feedIdx,backgroundColor:e.feedPost.backgroundColor,onTileMouseDown:e.onTileMouseDown,horizontalMargin:e.horizontalMargin}),a.createElement("div",{className:"feed_tile--bottomRow--CTXwC"},a.createElement(cI.Q$,{type:cI.Us.FULL,source:cI.zY.TILE_POST,postUuid:e.feedPost.publicUuid,postId:e.feedPost.id,feedReactions:e.feedPost.reactions,prependToList:[l]})))}function cA(e){let t=a.useRef(null),r=e.feedPost.content.map(e=>JSON.parse(e)),[n,l]=a.useState(!1),[o,i]=a.useState(!1),[s,d]=a.useState(0);a.useEffect(()=>{0!==s&&cE.markFeedViewed({publicUuid:e.feedPost.publicUuid})},[s,e.feedPost.publicUuid]);let c=(0,cI.mz)({type:"post",id:e.feedPost.publicUuid},cI.zY.TILE_CONTENT),m=r.length>1,u=M()(m?"feed_tile--feedPostHoverContainerWithThumbnails--pAnNB feed_tile--feedPostHoverContainer--238j6":"feed_tile--feedPostHoverContainer--238j6",!(n||o||c)&&"feed_tile--hidden--9bafI"),_={selectedContentIdx:s,onSetSelectedContentIdx:d},{fileData:p,fileIcon:f,fileLoaded:g,openFile:E}=(0,cy.rS)(e.feedPost.publicUuid,r,e.feedPost.fileKey);return a.createElement("div",{ref:e=>{e&&(t.current=e)},className:M()("feed_tile--fullHeightContentSection--qE0UO feed_tile--contentSection--1-urk",m&&"feed_tile--fullHeightContentSection_WithThumbnails--l-If7")},a.createElement(cw.x,{contentItems:r,feedPostIdx:e.feedIdx,feedPostUuid:e.feedPost.publicUuid,onContentHover:e=>l(e),onSelectedTileMouseDown:t=>e.onTileMouseDown(t,_),pageBackgroundColor:e.backgroundColor||void 0,selectedContentIdx:s,setSelectedContentIdx:d,source:cy.Zp.TILE,staticContent:!0}),g&&a.createElement("button",{className:M()(u,cS,"feed_tile--hoverTopLeft--zVWFQ"),onClick:E,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},a.createElement(ru.w4,{type:f,size:16}),a.createElement("div",null,p.name)),a.createElement("button",{className:M()(u,cS,"feed_tile--hoverTopRight---lyoe"),onMouseDown:t=>e.onTileMouseDown(t,_),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},a.createElement(en.B,{svg:cC.A})))}function cO(e){let t=(0,n.wA)(),r=a.useRef(null),l=(0,Y.iZ)(),o=(0,n.d4)(e=>e.teamFeedRefreshNonce),[i,s]=a.useState(null),d=(0,eC._6)(),c="teamFeed"===d.view,_="user"===d.view;a.useEffect(()=>{c&&(cc.markFeedVisited({currentOrgId:e.currentOrgId}).then(e=>{s(e.data.meta?new Date(e.data.meta):null)}),t(eA.b({has_visited_feed:!0})))},[e.currentOrgId,o,t,c]);let p=(0,u.Rs)(eG.KhA,{orgId:e.currentOrgId,firstPageSize:50,feedFilter:JSON.stringify({creator_id:e.selectedUser?.id??null}),refreshNonce:o}),f=(0,m.ZC)(o);f&&f!==o&&r.current&&(r.current.scrollTop=0),a.useEffect(()=>{"errors"===p.status&&t(tM.F.enqueue({message:(0,N.t)("general.an_error_occurred"),error:!0}))},[t,p.status]);let g=a.useMemo(()=>"loaded"===p.status?{isLoadingNextPage:p.data.feedPosts.isLoadingNextPage,hasNextPage:p.data.feedPosts.hasNextPage,loadNext:p.data.feedPosts.loadNext}:null,[p]),E=a.useMemo(()=>"loaded"===p.status?{...p,data:p.data.feedPosts.filter(e=>!!e.feedPost)}:p,[p]),b="loaded"===E.status&&"loaded"===p.status,v=a.useCallback(()=>512,[]),h=E.data?E.data.length:0,y=(0,cs.z)({size:h,parentRef:r,estimateSize:v,overscan:15,paddingStart:0}),w=a.useRef(0);a.useEffect(()=>{w.current=E.data?.length??0},[b,E.data?.length]),a.useEffect(()=>{b&&(0,nc.trackEvent)("Team Feed Posts Rendered",{numPosts:w.current,view:d.view,selectedUserId:e.selectedUser?.id},{forwardToDatadog:!0})},[e.selectedUser,w,b,d.view]);let[T,I]=a.useState(!1),S=a.useCallback((e,t)=>{e>0&&!T&&((0,nc.trackEvent)("Team Feed User Scrolled Down"),I(!0));let r=h/50,a=e+t.trackHeight,n=t.scrollHeight;1-(n-a)/(n/r)>=.5&&g&&!g.isLoadingNextPage&&g.hasNextPage()&&g.loadNext(50)},[T,g,h]),C=a.useMemo(()=>{let e={};return E.data&&E.data.forEach((t,r)=>{e[t.publicUuid]=r}),e},[E]),[k,R]=a.useState(void 0),A=a.useCallback(e=>{R(e)},[]);a.useEffect(()=>{if(void 0===k||(R(void 0),k<0)||(k>=.5*h&&g&&g.loadNext(50),k>=h))return;let e=E.data[k];t(tm.hm({type:cm.K.type,data:{postUuid:e.publicUuid,initialPreloadedPost:e.feedPost,feedIdx:k,requestToOpenPostByFeedIdx:A}}))},[k,t,E,A,g,h]);let O=a.useMemo(()=>{if(!i||!E.data)return null;let e=0,t=E.data.length-1,r=-1,a=0;for(;e<=t;){let n=Math.floor((e+t)/2);if(new Date(E.data[n].createdAt)>i?(r=n,e=n+1):t=n-1,(a+=1)>50)break}for(;r>=0&&l&&E.data[r].feedPost?.creator.id===l.id;)r-=1;return r},[i,E.data,l]),P=b&&E.data&&0===E.data.length&&e.selectedUser;return a.createElement(er.P,{scrollContainerRef:r,className:"feed_list_view--scrollContainer--84INP main_feed_view--scrollContainer--BunJg",innerClassName:M()("feed_list_view--scrollContainerInner--8Le-r",_&&"feed_list_view--scrollContainerInnerProfile--izApr"),onScroll:S},a.createElement("div",{className:"feed_list_view--feedListContainer--2BMds"},P?a.createElement("div",{className:"feed_list_view--noPostsFound--COpgM"},a.createElement("div",{className:x.s.fontMedium.$},(0,N.tx)("fig_feed.no_posts_found_title")),a.createElement("div",{className:x.s.colorTextSecondary.$},(0,N.tx)("fig_feed.no_posts_found_description"))):a.createElement("div",{style:{margin:"0 8px",height:`${y.totalSize}px`,position:"relative"}},y.virtualItems.map(e=>{let t=e.index;if(!E.data||!E.data[t].feedPost)return null;let n=E.data[t].feedPost;return a.createElement(ck,{post:n,key:e.key,virtualRowItem:e,feedListRef:r,itemIdx:t,feedIdx:C[n.publicUuid],requestToOpenPostByFeedIdx:A,mostRecentUnviewed:c&&C[n.publicUuid]===O})}))))}function cP(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.teamFeedRefreshNonce);return a.useEffect(()=>{t(ci.yu({orgId:e.currentOrgId,bellActive:!1}))},[t,r,e.currentOrgId]),a.createElement(cO,{...e})}let cF="new_post_indicator--icon--uvRMg";var cL=r(185333);function cD(e){return a.createElement("div",{className:"new_post_indicator--notification--NxIRJ text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l"},a.createElement("div",{className:"new_post_indicator--leftSide--Y7k6-",onClick:e.onRefresh,role:"button",tabIndex:0},a.createElement(en.B,{svg:cL.A,className:cF}),(0,N.tx)("fig_feed.new_posts")),a.createElement("div",{className:"new_post_indicator--dismiss--BAIvc",onClick:e.onDismiss,role:"button",tabIndex:0},a.createElement(en.B,{svg:nU.default,className:cF})))}function cM(e){let t=(0,n.wA)();a.useEffect(()=>((0,nc.trackEvent)("Team Feed Posts List View Visited"),t(ci.yu({orgId:e.currentOrgId,bellActive:!1})),()=>{(0,nc.trackEvent)("Team Feed List View Closed")}),[t,e.currentOrgId]);let r=a.useCallback(()=>t(ci.Y9()),[t]),l=a.useCallback(()=>{r()},[r]),o=(0,n.d4)(t=>t.teamFeedBellStates[e.currentOrgId]),[i,s]=a.useState(!1),d=(0,m.ZC)(o);return a.useEffect(()=>{o&&!1===d?s(!0):d&&!1===o&&s(!1)},[o,d,t]),a.useEffect(()=>{e.initialPostUuidToShow&&t((0,tm.to)({type:cm.K,data:{postUuid:e.initialPostUuidToShow}}))},[t,e.initialPostUuidToShow]),a.createElement(a.Fragment,null,i&&a.createElement(cD,{onRefresh:l,onDismiss:()=>s(!1)}),a.createElement(cP,{currentOrgId:e.currentOrgId}),a.createElement(co.cx,null))}function cB(e){let t=(0,n.d4)(e=>e.currentUserOrgId),r=a.useRef(new cl.M4);return(a.useEffect(()=>{r.current.start()},[]),t)?a.createElement(cM,{currentOrgId:t,initialPostUuidToShow:e.postUuid,creatorId:e.creatorId,feedViewTimer:r.current}):null}var cU=r(418193);function c$(e){let t=e.tabs?a.createElement(X.J,null,a.createElement(ot.t.TabStrip,{manager:e.tabManager},e.tabs.map(e=>a.createElement(ot.t.Tab,{...e.tabProps,key:e.tabName},e.tabName)))):a.createElement(a.Fragment,null);return a.createElement(nS.g2,{leftSide:t,rightSide:e.viewbarActions||[]})}var cj=r(631265);let cW=e=>({tileSortFilterConfig:e.deletedFiles,sortKeys:[oj.C0.TRASHED_AT]}),cG=e=>({tileSortFilterConfig:e.trashedFolders,sortKeys:[oj.C0.TRASHED_AT,oj.C0.NAME]}),cV=(e,t,r)=>{let n=(0,cU.xx)(cW)(t);return[a.createElement(nS.gr,{key:0,dispatch:e,options:n,selectedView:r}),a.createElement(nS.ye,{key:1,config:n.tileSortFilterConfig}),a.createElement(nS.mc,{key:2,dispatch:e,options:n,selectedView:r}),a.createElement(nS.$c,{key:3,initialViewMode:n.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,nc.trackEvent)("file view toggle",{viewType:t===oj.XU.GRID?"grid":"list"}),e(eS.JF({selectedView:r,config:{...n.tileSortFilterConfig,viewMode:t}}))}})]},cH=(e,t,r)=>{let n=(0,cU.xx)(cG)(t);return[a.createElement(nS.KH,{key:6,dispatch:e,options:n,selectedView:r}),a.createElement(nS.mc,{key:4,dispatch:e,options:n,selectedView:r}),a.createElement(nS.$c,{key:5,initialViewMode:n.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,nc.trackEvent)("folder view toggle",{viewType:t===oj.XU.GRID?"grid":"list"}),e(eS.JF({selectedView:r,config:{...n.tileSortFilterConfig,viewMode:t}})),e(eS.uV({viewId:cj.l,viewMode:t}))}})]};function cz({currView:e}){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.tileSortFilterStateByView),l=cV(t,r,e),o=cH(t,r,e),[i,s,d]=ot.t.useManagedTabs({deletedFiles:!0,trashedFolders:!0},e.view,a.useCallback(e=>{t(eS.$T({view:e}))},[t]));return a.createElement(c$,{tabManager:d,tabs:[{tabName:(0,N.t)("file_browser.tool_bar.trashed_files"),view:{view:"deletedFiles"},ariaLabel:(0,N.t)("file_browser.tool_bar.trashed_files.aria_label"),tabProps:i.deletedFiles},{tabName:(0,N.t)("file_browser.tool_bar.trashed_projects"),view:{view:"trashedFolders"},ariaLabel:(0,N.t)("file_browser.tool_bar.trashed_projects.aria_label"),tabProps:i.trashedFolders}],viewbarActions:"deletedFiles"===e.view?l:o})}var cY=r(191802),cK=r(349048),cq=r(315933),cJ=r(426550),cX=r(750294);function cQ({currentProgress:e,totalAllowed:t}){return a.createElement(aV.Y,{spacing:"auto"},a.createElement("div",{className:x.s.relative.wFull.$,className:"x1svi29p x1n2onr6"},a.createElement("div",{className:x.s.absolute.wFull.$},a.createElement(aV.Y,{cornerRadius:5,height:6,backgroundColor:"secondary"})),a.createElement("div",{className:x.s.absolute.wFull.flex.itemsCenter.$},a.createElement(aV.Y,{cornerRadius:5,height:6,width:`${Math.min(e/t*100,100)}%`,backgroundColor:e>=t?"warning":"brand"}))),a.createElement("div",{className:"x98rzlu x1ok221b xp5pvr8 x4z9k3i xk50ysn x1d3mw78 x122x9cr"},(0,N.t)("file_browser.starter_limit_global.files_left",{numFilesLeft:t-e,totalFiles:t})))}function cZ({text:e,tooltipText:t,currentProgress:r,totalProgress:n}){return a.createElement(aV.Y,{direction:"vertical",height:"hug-contents",spacing:"7px"},a.createElement(aV.Y,{horizontalAlignItems:"space-between"},a.createElement(aV.Y,{spacing:4},a.createElement(S.E,{fontSize:13,fontWeight:"medium"},e),a.createElement("div",{"data-tooltip-type":rH.Ib.TEXT,"data-tooltip":t,"data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-tip-align-left":!0,"data-tooltip-text-left":!0},a.createElement(oE.In,{icon:"info-16",fill:"secondary"}))),a.createElement(S.E,{fontSize:13,fontWeight:"medium"},r,"/",n)),a.createElement("div",{className:x.s.relative.wFull.$},a.createElement("div",{className:x.s.absolute.wFull.$},a.createElement(aV.Y,{cornerRadius:5,height:5,backgroundColor:"disabled"})),a.createElement("div",{className:x.s.absolute.wFull.$},a.createElement(aV.Y,{cornerRadius:5,height:5,width:`${Math.min(r/n*100,100)}%`,backgroundColor:r>=n?"warning":"brand"}))))}let c0={title:{...ns.g.textBodyLargeStrong,$$css:!0},description:{...ns.g.textBodyMedium,paddingRight:"xmzs88n",paddingInlineStart:null,paddingInlineEnd:null,marginTop:"x1xmf6yo",$$css:!0}},c1=(0,rV.tf)(lR.$n);function c2({canEditTeam:e,isDraftsFolder:t}){let r=(0,n.wA)(),l=(0,a7.ol)(),o=(0,eC._6)();return t||!l||(0,al.w5)(l)||"folder"!==o.view?null:a.createElement(c4,{folderId:o.folderId,showPlanComparisonModal:()=>{r((0,tm.to)({type:a_.V,data:{upsellSource:ag.b.STARTER_LIMIT_OVERVIEW,teamId:l.id}}))},canEditTeam:e})}function c4({folderId:e,showPlanComparisonModal:t,canEditTeam:r}){let n=(0,$.E9)(),l=(0,u.Rs)(eG.yU5,{projectId:e}),o=a$.h.useTrackingContext({trigger:ag.b.STARTER_LIMIT_OVERVIEW});if("loaded"!==l.status)return null;let i=l.data.project?.team?.projectsCount.status==="loaded"?l.data.project?.team?.projectsCount.data??1:1,s=l.data.project?.team?.teamFileCounts?.designFileCount??0,d=l.data.project?.team?.teamFileCounts?.whiteboardFileCount??0,c=l.data.project?.team?.teamFileCounts?.slideFileCount,m=c?parseInt(c,10):0,_=(0,Q.oA)(l.data.project?.team?.teamFileCounts?.totalFileCount)??0,p=n?_>=al.WW:s>=al.WW||d>=al.WW;return a.createElement(rV.fu,{name:"Starter Limit Overview",properties:o},a.createElement("div",{className:M()(x.s.cursorDefault.mr32.maxW300.colorBg.$,"starter_limit_overview--responsiveHide--nMkA0"),style:el.sx.sticky.add({alignSelf:"flex-start",top:"128px",maxWidth:n?"280px":"300px"}).$},a.createElement(aV.Y,{direction:"vertical",padding:n?16:32,spacing:n?"auto":24,cornerRadius:n?13:8,strokeWidth:1,strokeColor:"default",height:"hug-contents"},a.createElement("div",{...n?nd.Ay.props(c0.title):{}},n?(0,N.tx)("file_browser.starter_limit_global.available_files"):a.createElement(S.E,{fontSize:16,fontWeight:"semi-bold"},(0,N.tx)("file_browser.starter_limit.your_starter_team_overview"))),a.createElement(c8,{numProjects:i,numFigmaFilesUsed:s,numFigjamFilesUsed:d,numSlidesFilesUsed:m,totalFilesUsed:_,isStarterGlobalFileLimitOn:n}),r?a.createElement(aV.Y,{direction:"vertical",spacing:"12px"},n?a.createElement("div",{...nd.Ay.props(c0.description)},(0,N.tx)("file_browser.starter_limit_global.description")):a.createElement(S.E,{fontSize:13},(0,N.tx)(p?"file_browser.starter_limit.running_out_of_files":"file_browser.starter_limit.enough_for_you_to_get_started")),a.createElement(c1,{onClick:t,trackingProperties:{trackingDescriptor:ed.c.VIEW_PLANS}},(0,N.tx)("upgrade.view_plans"))):a.createElement(S.E,{fontSize:13},(0,N.tx)("file_browser.starter_limit.trying_things_out")))))}function c8({numProjects:e,numFigmaFilesUsed:t,numFigjamFilesUsed:r,numSlidesFilesUsed:n,totalFilesUsed:l,isStarterGlobalFileLimitOn:o}){return a.createElement(aV.Y,{direction:"vertical",spacing:24,width:o?"100%":234},o&&a.createElement(cQ,{currentProgress:l,totalAllowed:al.WW}),!o&&a.createElement(a.Fragment,null,a.createElement(cZ,{text:(0,N.t)("file_browser.starter_limit.projects"),tooltipText:(0,N.t)("file_browser.starter_limit.projects.tooltip"),currentProgress:e,totalProgress:al.Wf}),a.createElement(cZ,{text:(0,N.t)("file_browser.starter_limit.design_files"),tooltipText:(0,N.t)("file_browser.starter_limit.design_files.tooltip"),currentProgress:t,totalProgress:al.WW}),a.createElement(cZ,{text:(0,N.t)("file_browser.starter_limit.figjam_boards"),tooltipText:(0,N.t)("file_browser.starter_limit.figjam_boards.tooltip"),currentProgress:r,totalProgress:al.WW}),a.createElement(cZ,{text:(0,N.t)("file_browser.starter_limit.slides"),tooltipText:(0,N.t)("file_browser.starter_limit.slides.tooltip"),currentProgress:n,totalProgress:al.WW})))}var c5=r(86521),c3=r(396210),c6=r(565294),c7=r(414324),c9=r(503933),me=r(587745),mt=r(338104),mr=r(656320),ma=r(200130),mn=r(259964),ml=r(812295),mo=r(878339);let mi="open_invoice_reminder_card--icon--gcN35";function ms(e){let t=(0,n.wA)(),r=e.team.restrictions_list?.includes(eF.P4.LOCKED),l=e.canAdminTeam?r?(0,N.t)("billing.open_invoice_reminder.title"):(0,N.t)("billing.open_invoice_reminder.grace_period_title"):(0,N.t)("billing.open_invoice_reminder.title_viewer"),o=e.canAdminTeam?r?(0,N.t)("billing.open_invoice_reminder.locked_admin_description"):(0,N.t)("billing.open_invoice_reminder.grace_period_admin_description"):(0,N.t)("billing.open_invoice_reminder.locked_viewer_description"),i=e.canAdminTeam?(0,N.t)("billing.open_invoice_reminder.cta"):null,s={"data-tooltip-type":rH.Ib.TEXT,"data-tooltip":(0,N.t)("billing.open_invoice_reminder.button_tooltip"),"data-tooltip-show-immediately":!0};return a.createElement(aV.Y,{direction:"vertical",padding:e.noPaddingOrBorder?0:20,spacing:24,width:288,cornerRadius:e.noPaddingOrBorder?void 0:8,strokeWidth:e.noPaddingOrBorder?void 0:1,strokeColor:"default",height:"hug-contents"},a.createElement("div",{className:x.s.flex.justifyBetween.wFull.$},a.createElement("div",{className:x.s.flex.itemsCenter.justifyCenter.w32.h32.bRadius5.colorBgWarning.$},r?a.createElement(ml.s,{className:mi}):a.createElement(mo.R,{className:mi}))),a.createElement("div",{className:x.s.font14.fontSemiBold.lh24.$},l),a.createElement("div",{className:x.s.font13.lh24.$},o),!!i&&a.createElement("div",{className:x.s.flex.justifyEnd.wFull.$},a.createElement(lR.IK,{onClick:()=>t(eS.$T({view:"teamAdminConsole",teamId:e.team.id,teamAdminConsoleViewTab:ez.Iv.BILLING})),variant:"primary",htmlAttributes:s},i)))}function md(e){return e.team.restrictions_list?.includes(eF.P4.LOCKED)||e.canAdminTeam?a.createElement(rV.fu,{name:"Open Invoice Reminder Card",properties:{teamId:e.team.id}},a.createElement(ms,{...e})):null}var mc=r(579879),mm=r(603826);let mu="tiles_view--container--u00AG",m_="tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd";function mp({tile:e,index:t,dispatch:r,selectedView:a,currentPlanFilter:n,currentSharedByFilter:l,isListView:o}){e.type===tJ.nb.FILE&&(r(e7.UN({fileKey:e.file.key,entrypoint:"file tile",currentPlanFilter:n,currentSharedByFilter:l,viewMode:void 0!==o?o?"list":"grid":void 0})),(0,mr.K)(a)&&r(e7.T5({index:t})),s.eD&&(0,nc.trackEvent)("Open File Click",{fileKey:e.file.key,fileRepoId:e.file.fileRepoId,uiSelectedView:JSON.stringify(a)}))}let mf=(e,t)=>{let r=tJ.Tf.getName(e)||"",a=tJ.Tf.getName(t)||"";return tr.Tt.compare(r,a)},mg=(e,t)=>{let r=(tJ.Tf.getName(e)||"").toLowerCase(),a=(tJ.Tf.getName(t)||"").toLowerCase();return r===a?0:r<a?-1:1},mE=(e,t)=>{if(e.type!==tJ.nb.FILE||t.type!==tJ.nb.FILE)return 0;let r=e.file,a=t.file;return r.createdAt<a.createdAt?1:-1},mb=(e,t)=>e.type!==tJ.nb.PROTOTYPE||t.type!==tJ.nb.PROTOTYPE?0:e.prototype.file_key<t.prototype.file_key?-1:1,mv=(e,t)=>{let r=tJ.Tf.getAccessedAt(e),a=tJ.Tf.getAccessedAt(t);return r&&a?r>a?1:-1:a?-1:r?1:0},mh=(e,t)=>tJ.Tf.getCreatedAt(e)>tJ.Tf.getCreatedAt(t)?1:-1,my=(e,t)=>{let r=tJ.Tf.getTouchedAt(e),a=tJ.Tf.getTouchedAt(t);return null===r||null===a?0:r>a?1:-1},mw=(e,t)=>e.type!==tJ.nb.FILE&&e.type!==tJ.nb.REPO||t.type!==tJ.nb.FILE&&t.type!==tJ.nb.REPO?0:(e.type===tJ.nb.FILE?e.file.trashedAt:e.repo.trashed_at)>(t.type===tJ.nb.FILE?t.file.trashedAt:t.repo.trashed_at)?1:-1;function mT({currentPlanFilter:e,currentSharedByFilter:t,emptyStateContent:r,emptyStateText:o,isDataPartial:i,isFolder:c,isEligbileForProTeamLockedRevampUI:m,newFileTile:_,overFilteredText:p,sortFilterOptions:f,tileActions:g,tiles:b}){let v=(0,Y.iZ)(),h=(0,eC._6)(),y="folder"===h.view?h.folderId:null,w=t1.M4.Folder.useValue(y).data,T=[v?.drafts_folder_id,v?.personal_drafts_folder_id].includes(w?.id),{showing:S,show:C,data:k}=(0,oM.L)(),R=(0,eP.FC)(),A=(0,a7.ol)(),O=w?.team_id||A?.id,P=(0,u.Rs)((0,eG.yQw)((0,aa.DQ)(aa.Pw.GROUP_7)&&O?{teamId:O}:null)),F=a.useMemo(()=>P.transform(({team:e})=>!!e?.canEdit),[P]),L=(0,an.MF)({label:an.A5.TilesView.canEditTeam,oldValue:a2.Qw.useMemoizedLoaded((0,ao.canEditTeam)(w?.team_id||A?.id||"",R)),newValue:F,enableFullRead:(0,aa.DQ)(aa.Pw.GROUP_7),contextArgs:{folderTeamId:w?.team_id,teamFromFileBrowserId:A?.id}}).unwrapOr(!1),D=a.useMemo(()=>P.transform(({team:e})=>!!e?.canAdmin).unwrapOr(!1),[P]);a.useEffect(()=>{let e="page_selected_view",t=cq.sn.get(e);if(t&&t.isRunning&&!t.isUnreliable){let t=cq.sn.tryStop(e);t&&(0,nc.trackEvent)("File Browser Tab Switch Page Load Time",{elapsedMs:t,selectedView:h.view},{forwardToDatadog:!0,batchRequest:!0})}},[h.view,y]);let{userStateLoaded:M,userExternallyRestricted:B,selectedBranchKeyByRepoId:U}=(0,a4.R)(e=>({userStateLoaded:e.userStateLoaded,userExternallyRestricted:(0,ao.isOrgUserExternallyRestrictedFromState)(R),selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId})),$=(0,n.wA)(),j=(0,eT.vt)(A?.id),W=!!A&&j,G=!!A&&!!m,V=f.tileSortFilterConfig.viewMode===oj.XU.LIST,H="recentsAndSharing"===h.view&&h.tab===ip.G.SHARED_FILES,z=(e,t,r)=>e===oj.rJ.ANY||e===oj.rJ.SELF&&r.type===tJ.nb.FILE&&r.file.creatorId===t||e===oj.rJ.SELF&&r.type===tJ.nb.REPO&&r.branches[0].creator_id===t||e===oj.rJ.OTHER&&r.type===tJ.nb.FILE&&r.file.creatorId!==t||e===oj.rJ.OTHER&&r.type===tJ.nb.REPO&&r.branches[0].creator_id!==t,K=(e,t)=>{let r="design";switch(t.type===tJ.nb.FILE?r=t.file.editorType:t.type===tJ.nb.PINNED_FILE?r=t.file.editorType:t.type===tJ.nb.OFFLINE_FILE&&(r=t.file.editorType),e){case oj.t2.ANY:return!0;case oj.t2.DESIGN:if(t.type===tJ.nb.FILE||t.type===tJ.nb.REPO||t.type===tJ.nb.PINNED_FILE||t.type===tJ.nb.OFFLINE_FILE)return"design"===r;return!1;case oj.t2.FIGJAM:if(t.type===tJ.nb.FILE||t.type===tJ.nb.PINNED_FILE||t.type===tJ.nb.OFFLINE_FILE)return"whiteboard"===r;return!1;case oj.t2.PROTOTYPE:return t.type===tJ.nb.PROTOTYPE;case oj.t2.SLIDES:if(t.type===tJ.nb.FILE||t.type===tJ.nb.PINNED_FILE||t.type===tJ.nb.OFFLINE_FILE)return"slides"===r;return!1;case oj.t2.SITES:if(t.type===tJ.nb.FILE||t.type===tJ.nb.PINNED_FILE||t.type===tJ.nb.OFFLINE_FILE)return"sites"===r;return!1;case oj.t2.COOPER:if(t.type===tJ.nb.FILE||t.type===tJ.nb.PINNED_FILE||t.type===tJ.nb.OFFLINE_FILE)return"cooper"===r;return!1;case oj.t2.MAKE:if(t.type===tJ.nb.FILE||t.type===tJ.nb.PINNED_FILE||t.type===tJ.nb.OFFLINE_FILE)return"figmake"===r;return!1;default:(0,I.xb)(e)}},q=(e,t)=>!e||e===`${tJ.Tf.getSharedBy(t)}`,J=a.useCallback((e,t)=>{if("recentsAndSharing"===h.view&&h.tab===ip.G.SHARED_FILES||!e||!e.planId)return!0;let r=e.planId;switch(t.type){case tJ.nb.FILE:return("org"===e.planType?t.file.parentOrgId:t.file.teamId)===r;case tJ.nb.REPO:return("org"===e.planType?t.repo.parent_org_id:t.repo.team_id)===r;case tJ.nb.PROTOTYPE:return("org"===e.planType?t.prototype.parent_org?.id:t.prototype.parent_team?.id)===r;case tJ.nb.OFFLINE_FILE:return"org"===e.planType&&t.file.orgId===r;default:return!1}},[h]),X=a.useCallback((e,t)=>{let r,a,n;let l=e.filter(e=>q(t.filters.sharedBy,e)&&K(t.filters.fileType,e)&&z(t.filters.creator,R.user?.id,e)&&J(t.filters.plan,e));if(r=H?l.filter(e=>e.type===tJ.nb.FILE||e.type===tJ.nb.PROTOTYPE||e.type===tJ.nb.REPO):l.filter(e=>e.type===tJ.nb.FILE||e.type===tJ.nb.REPO||e.type===tJ.nb.OFFLINE_FILE),"recentsAndSharing"===h.view&&h.tab===ip.G.SHARED_FILES)return l;let o=t.sort.dir===oj.ue.DESC;switch(t.sort.key){case oj.C0.ACCESSED_AT:a=cX.f.byComparators(mv),n=l;break;case oj.C0.CREATED_AT:a=cX.f.byComparators(mh),n=l;break;case oj.C0.TOUCHED_AT:a=cX.f.byComparators(my),n=r;break;case oj.C0.NAME:if(T){a=cX.f.byComparators(mf,cX.f.byProperty("type")),n=l;break}let s=l.length<tr.Tw;a=cX.f.byComparators(s?mf:mg,cX.f.byProperty("type"),mE,mb),n=l;break;case oj.C0.TRASHED_AT:a=cX.f.byComparators(mw),n=r;break;case oj.C0.SHARED_AT:return l;default:return console.error("Unknown sort key",t.sort.key),[]}if(a=o?cX.f.reverse(a):a,n.sort(a),i)for(;n[n.length-1]?.type===tJ.nb.OFFLINE_FILE;)n.pop();return n},[H,J,i,T,h,R.user?.id]),Q=a.useMemo(()=>X(b,f.tileSortFilterConfig),[X,b,f.tileSortFilterConfig]),Z=(0,eo.md)(tJ.Y6),ee=a.useCallback((r,a,n)=>{mp({tile:r,index:n,dispatch:$,selectedView:h,currentPlanFilter:e,currentSharedByFilter:t,isListView:V}),function({tile:e,e:t,dispatch:r,selectedView:a,permissionsState:n,selectedBranchKeyByRepoId:l,renamingItem:o}){if(tJ.Tf.isRenaming(e,o)||e.type===tJ.nb.FILE&&e.file.trashedAt||e.type===tJ.nb.REPO&&e.repo.trashed_at){t.preventDefault(),t.stopPropagation();return}let i=E.Ay.mac?t.metaKey:t.ctrlKey,c=null;i&&t.shiftKey?c=s.aw.FOCAL_TAB:i?c=s.aw.BACKGROUND_TAB:t.shiftKey&&(c=s.aw.NEW_WINDOW);let m=n.user;if(s.eD){let a;switch(c=c??s.aw.FOCAL_TAB,t.preventDefault(),t.stopPropagation(),e.type){case tJ.nb.FILE:a=!!(e.file.isTeamTemplate&&(0,eO.LQ)(n)),s.eD.openFile({fileKey:e.file.key,title:e.file.name||"Untitled",fileEditorType:e.file.editorType,target:c,isBranch:(0,me.Kz)(e.file),isLibrary:!!e.file.lastPublishedAt,isTeamTemplate:a,userId:m?.id});break;case tJ.nb.PINNED_FILE:a=!!(e.file.isTeamTemplate&&(0,eO.LQ)(n)),s.eD.openFile({fileKey:e.file.key,title:e.file.name||"Untitled",fileEditorType:e.file.editorType,isTeamTemplate:a,target:c,userId:m?.id});break;case tJ.nb.PROTOTYPE:s.eD.openPrototype(e.prototype.file_key,e.prototype.page_id,e.prototype.fig_file.name||"",c,m?.id);break;case tJ.nb.REPO:let o=(0,me.mr)(e.repo,e.branches,l);s.eD.openFile({fileKey:o.key,title:o.name,fileEditorType:o.editor_type,target:c,isBranch:(0,me.Xm)(o),isLibrary:!!o.last_published_at,userId:m?.id});break;case tJ.nb.OFFLINE_FILE:r(c6.NA({file:e.file,openNewFileIn:iu.ai.NEW_TAB,source:ma.U.OFFLINE_FILE_TILE}));break;default:(0,I.xb)(e)}return}if(null!=c){if(r(eS.oB()),e.type===tJ.nb.OFFLINE_FILE){r(c6.NA({file:e.file,openNewFileIn:iu.ai.NEW_TAB,source:ma.U.OFFLINE_FILE_TILE})),t.preventDefault(),t.stopPropagation();return}if(t instanceof KeyboardEvent){let r=tJ.Tf.getUrl(e,l);d.Ay.redirect(r,"_blank"),t.preventDefault(),t.stopPropagation()}return}t.preventDefault(),t.stopPropagation();let u=n.currentUserOrgId,_=n.currentTeamId,p="recentsAndSharing"===a.view||"folder"===a.view?a:void 0;r(c7.c5({planId:u||_,planType:u?i_.O.ORG:i_.O.TEAM}));let f={user:m,teamId:_,orgId:u,selectedView:a};switch(e.type){case tJ.nb.FILE:(0,oX.N7)(u,e.file.parentOrgId,_,e.file.teamId)?(0,oX.QV)({file:{key:e.file.key,editorType:e.file.editorType||void 0}},f):r(eS.$T({view:"fullscreen",fileKey:e.file.key,editorType:mt.z4.getIsExtension()?mn.nT.DevHandoff:e.file.editorType?(0,mn.wN)(e.file.editorType):mn.nT.Design,prevSelectedView:p}));break;case tJ.nb.PINNED_FILE:(0,oX.N7)(u,e.file.parentOrgId,_,e.file.teamId)?(0,oX.QV)({file:{key:e.file.key,editorType:e.file.editorType}},f):r(eS.$T({view:"fullscreen",fileKey:e.file.key,editorType:e.file.editorType?(0,mn.wN)(e.file.editorType):mn.nT.Design,prevSelectedView:p}));break;case tJ.nb.PROTOTYPE:let g=e.prototype.fig_file;(0,oX.N7)(u,g.parent_org_id,_,g.team_id)?(0,oX.QV)({base:"proto",file:{key:g.key,editorType:g.editor_type||void 0},nodeId:e.prototype.page_id},f):r(eS.$T({view:"prototype",file:g,nodeId:e.prototype.page_id,prevSelectedView:p}));break;case tJ.nb.REPO:{let t=(0,me.mr)(e.repo,e.branches,l);if(!t)throw Error(`Branch not found for repo ${e.repo.id}`);let a=t.key;(0,oX.N7)(u,t.parent_org_id,_,t.team_id)?(0,oX.QV)({file:{key:a}},f):r(eS.$T({view:"fullscreen",fileKey:a,editorType:mn.nT.Design,prevSelectedView:p}));break}case tJ.nb.OFFLINE_FILE:r(c6.NA({file:e.file,openNewFileIn:iu.ai.SAME_TAB,source:ma.U.OFFLINE_FILE_TILE}));break;default:(0,I.xb)(e)}}({tile:r,e:a,dispatch:$,selectedView:h,permissionsState:R,selectedBranchKeyByRepoId:U,renamingItem:Z})},[V,e,t,$,R,U,h,Z]),et=a.useCallback((r,a,n)=>{mp({tile:r,index:n,dispatch:$,selectedView:h,currentPlanFilter:e,currentSharedByFilter:t,isListView:V})},[V,e,t,h,$]),er=a.useCallback((e,t,r)=>{let a=tJ.Tf.getId(e);c5.$.start(a),C({data:{tile:e,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:r}})},[C]),ea=(0,tJ.nw)(b),[en,el]=a.useState([]);if((0,cJ.Cm)(en),!function(e){let t=(0,eC._6)(),r=(0,n.wA)(),o=(0,cK.k9)(()=>{if("deletedFiles"===t.view)return[];let r=[];return e.forEach(e=>{switch(e.type){case tJ.nb.FILE:r.push({fileKey:e.file.key});break;case tJ.nb.REPO:if((0,l.k)().activefileusers_limit_repo_branches){let t=(0,tJ.yF)(e);r.push({fileKey:t.key})}else r.push(...e.branches.map(e=>({fileKey:e.key})))}}),r},[t.view,e]),i=(0,u.p)(eG.hqi,o);a.useEffect(()=>{for(let{result:e,args:t}of i)if("loaded"===e.status&&e.data){let a=(0,c9.ZF)(e.data);r(tH.Lk({fileKey:t.fileKey,users:a}))}},[i,r])}((0,l.k)().activefileusers_limit_virtualization?en:Q),0===Q.length){let e=(()=>{if(b.length>0&&""!==p){let e=p??(0,N.t)("file_browser.tiles_view.default_overfiltered_text");return a.createElement("div",{className:m_,"data-test-id":"over-filtered-state-text"},e)}let e="";return(o?e=o:(E.Ay.mobile||E.Ay.tablet)&&(e=(0,N.t)("file_browser.folder.this_project_is_empty")),e)?a.createElement("div",{className:m_,"data-test-id":"empty-state-text"},e):null})();if(e)return a.createElement("div",{className:mu},a.createElement("div",{className:x.s.flex.$},e,W&&a.createElement("div",{className:x.s.mr32.$},a.createElement(mc.R,{teamId:A.id,canEditTeam:L})),G&&a.createElement("div",{className:x.s.mr32.$},a.createElement(md,{team:A,canAdminTeam:D}))));if(r)return a.createElement("div",{className:mu},r)}let ei=mu+(V?` ${mm._O} `:` ${mm.CK} `),es=b.length>0;if(!M&&!(0,l.k)().stop_rendering_tiles_view_loading_spinner)return a.createElement("div",{className:"tiles_view--loading--6rn3X"},a.createElement(lU.k,null));let ed=!!A?.restrictions_list?.includes(eF.P4.LOCKED),ec=W||ed&&G;return a.createElement("div",{className:mu},a.createElement("div",{className:ei},a.createElement("div",{className:x.s.flex.$},es&&a.createElement(c3.d,{sortConfig:f.tileSortFilterConfig.sort,handleOpenTile:et,items:Q,sortBy:e=>{let t=f.tileSortFilterConfig,r=t.sort.dir===oj.ue.DESC?oj.ue.ASC:oj.ue.DESC;$(eS.JF({selectedView:h,config:{...t,sort:{key:e,dir:e===t.sort.key?r:t.sort.dir}},tab:"recentsAndSharing"===h.view?h.tab:void 0}))},viewType:V?oj.XU.LIST:oj.XU.GRID,updateRenderedItems:el,handleOpenDropdown:er,checksForViewOnlyLabels:ec?{teamId:A.id,isLockedTeam:!0}:void 0}),es&&(W?a.createElement("div",{className:x.s.mr32.$},a.createElement(mc.R,{teamId:A.id,canEditTeam:L})):G?a.createElement("div",{className:x.s.mr32.$},a.createElement(md,{team:A,canAdminTeam:D})):a.createElement(c2,{canEditTeam:L,isDraftsFolder:T}))),!(E.Ay.mobile||E.Ay.tablet)&&_&&!B&&!es&&a.createElement("div",{className:x.s.flex.$},a.createElement("div",{className:"tiles_view--importPrompt--srrJn"},a.createElement("div",{className:m_},a.createElement("div",{className:"tiles_view--emptyTitle--3Vwmu"},c?(0,N.t)("file_browser.folder.this_project_doesn_t_have_any_files"):(0,N.t)("file_browser.folder.no_files_yet")),(0,N.tx)("file_browser.folder.create_a_new_file_to_start_from_scratch_with_pptx"))),W?a.createElement("div",{className:x.s.mr32.$},a.createElement(mc.R,{teamId:A.id,canEditTeam:L})):G?a.createElement("div",{className:x.s.mr32.$},a.createElement(md,{team:A,canAdminTeam:D})):a.createElement(c2,{canEditTeam:L,isDraftsFolder:T}))),(()=>{let e=k?.tile??null,t=k?.index;return a.createElement(rV.fu,{name:c?rz.e0.PROJECT_TILES_VIEW_DROPDOWN:rz.e0.TILES_VIEW_DROP_DOWN,enabled:S,properties:{tileType:e?.type,tileFileId:e?.type===tJ.nb.FILE?e?.file.key:void 0}},a.createElement(oB.i,{tileActions:g,tile:e,selectedTiles:ea,openTile:r=>{e&&ee(e,r,t)},dropdownVisible:S}))})())}var mI=r(345644),mx=r(568290);function mN(){let e=(0,q.d)(),t=(0,n.d4)(e=>e.currentTeamId),r=(0,n.d4)(e=>e.tileSortFilterStateByView),l=(0,eT.vt)(),o=(0,ew.R)(t),i=(0,cU.xx)(e=>({tileSortFilterConfig:e,sortKeys:[oj.C0.TRASHED_AT,oj.C0.NAME,oj.C0.CREATED_AT,oj.C0.TOUCHED_AT]}))(r.deletedFiles),{creatorFilter:s,fileTypeFilter:d}=function(e){let t="your_files";switch(e.tileSortFilterConfig.filters.creator){case oj.rJ.SELF:t="your_files";break;case oj.rJ.OTHER:t="other_files";break;case oj.rJ.ANY:t="all";break;default:(0,I.xb)(e.tileSortFilterConfig.filters.creator)}let r="";switch(e.tileSortFilterConfig.filters.fileType){case oj.t2.DESIGN:r="design";break;case oj.t2.FIGJAM:r="whiteboard";break;case oj.t2.PROTOTYPE:r="prototype";break;case oj.t2.SLIDES:r="slides";break;case oj.t2.SITES:r="sites";break;case oj.t2.COOPER:r="cooper";break;case oj.t2.MAKE:r="figmake";break;case oj.t2.ANY:r="";break;default:(0,I.xb)(e.tileSortFilterConfig.filters.fileType)}return{creatorFilter:t,fileTypeFilter:r}}(i),c=(0,eV.XP)({reportErrorsToTeam:L.e.WAYFINDING}),{subscription:m,fetchNextPage:_,isFetchingNextPage:p}=function(e){let t=(0,u.Rs)(eG.R89,{...e,firstPageSize:55}),r=(0,a.useCallback)(()=>{let e=t.data?.trashedResources;"loaded"===t.status&&e&&e.hasNextPage()&&e.loadNext(55)},[t,55]),l="loaded"===t.status&&t.data.trashedResources.isLoadingNextPage,o=(0,a.useMemo)(()=>t.transform(e=>{let t=e.trashedResources;return t?t.reduce((e,t)=>{if(t.file&&t.file.trashedAt){var r;e.push((r=t.file,{type:tJ.nb.FILE,file:{...r,signedPreviewThumbnailUrls:null},sharedWithYouFields:null}))}else if(t.repo&&t.repo.trashedAt){let r=function(e){if(!e.sourceFile)return null;let t=mx.H.toSinatra(e);return{type:tJ.nb.REPO,repo:t,branches:[o$.F.toSinatra(e.sourceFile)],selectedBranchKey:e.sourceFile.key}}(t.repo);r&&e.push(r)}return e},[]):[]}),[t]),i=(0,n.wA)();return(0,a.useEffect)(()=>{if(o.data){let e=o.data?.filter(e=>e.type===tJ.nb.FILE).map(e=>o$.F.toSinatra(e.file))||[],t=o.data?.filter(e=>e.type===tJ.nb.REPO).map(e=>e.repo)||[];i(tH.uo({files:e})),i(tz.uo({repos:t}))}},[o.data,i]),{subscription:o,fetchNextPage:r,isFetchingNextPage:l}}({cursor:null,creatorFilter:s,fileTypeFilter:d,sortType:i.tileSortFilterConfig.sort.key===oj.C0.TRASHED_AT?"trashed_at":"name",sortDirection:i.tileSortFilterConfig.sort.dir===oj.ue.ASC?"asc":"desc",planId:c?.key.parentId??null,planType:c?.key.type??null,queryParams:null}),f=(0,a.useMemo)(()=>m.unwrapOr([]),[m]),{trackPerformanceEvent:g}=(0,mI.S)("trashed_resources_pagination_performance","livegraph",!0);(0,a.useEffect)(()=>{g("fetch_end")},[g,f.length]),(0,a.useEffect)(()=>{"errors"===m.status&&g("fetch_error",{errors:JSON.stringify(m.errors??{})})},[g,m.status,m.errors]),(0,a.useEffect)(()=>(g("fetch_start"),()=>{g("fetch_cancel")}),[g]);let E=a.useCallback(()=>{p||(g("fetch_next"),_())},[p,_,g]),b=i.tileSortFilterConfig.filters,v=i.tileSortFilterConfig.sort;return a.createElement(ee.A,{loadingElementId:"loading-content-pane",loaded:"loading"!==m.status,loadingElementClassName:x.s.pr32.$},a.createElement(cY.B,{key:`${s}-${b.fileType}-${v.key}-${v.dir}`,onShouldFetchNextPage:E,isFetchingNextPage:p},a.createElement(mS,{tiles:f,tileActions:{restore:!0,restoreToOtherFolders:!0,deleteForever:!0,duplicateToDrafts:!e},sortFilterOptions:i,isTeamLockedDueToStarterLimits:l,isEligbileForProTeamLockedRevampUI:o})),a.createElement(co.cx,null))}function mS({tiles:e,tileActions:t,sortFilterOptions:r,isEligbileForProTeamLockedRevampUI:n}){return a.createElement(mT,{tiles:e,newFileTile:!1,tileActions:t,sortFilterOptions:r,emptyStateText:(0,N.t)("file_browser.tool_bar.trashed_empty_state"),isEligbileForProTeamLockedRevampUI:n})}var mC=r(136126),mk=r(87770),mR=r(381673),mA=r(520779),mO=r(274016);function mP({canEditTeam:e}){var t;let r=(0,n.wA)(),l=(0,a7.ol)(),o=(0,eC.z3)(),i=(0,b.I7)("exp_fbg_project_limit_upsell"),s=a$.h.useTrackingContext({trigger:ag.b.FOLDER_UPSELL_CARD});if(!(t=(0,eV.X$)("FolderUpsellCard").unwrapOr(null))||!e||t.tier!==eF.Ag.STARTER||"recentsAndSharing"===o||"trashedFolders"===o||!i.getConfig().getValue("show_upsell",!1))return null;let d=a.createElement(Z.Us,{className:x.s.noWrap.cursorDefault.$,onClick:e=>{e.stopPropagation(),r((0,tm.to)({type:a_.V,data:{upsellSource:ag.b.FOLDER_UPSELL_CARD,teamId:l?.id}}))},trackingProperties:{trackingDescriptor:ed.c.PROFESSIONAL_PLAN,...s},trusted:!0},(0,N.tx)("team_view.folder_upsell.professional_plan"));return a.createElement(rV.fu,{name:"Folder Upsell Card",properties:s},a.createElement(rV.$z,{className:M()(x.s.flex.flexColumn.alignLeft.p24.$,"folder_upsell--card--m7-Lh"),onClick:()=>{r((0,tm.to)({type:mO.DV,data:{team:l,resource:mA.vL.FOLDER,action:tW.ZN.CREATE_FOLDER,currentPlan:mR.F.Plan.STARTER,upsellPlan:mR.F.Plan.PRO,editorType:null,upsellSource:ag.b.FOLDER_UPSELL_CARD}}))},trackingProperties:{trackingDescriptor:ed.c.FOLDER_UPSELL_CARD},dataTestId:"folder_upsell_button"},a.createElement("div",{className:x.s.relative.wFull.$},a.createElement(mk.X,{FileThumbnailComponent:mF}),a.createElement("div",{style:el.sx.absolute.topHalf.leftHalf.add({transform:"translate(-50%, -50%)"}).$},a.createElement(aV.Y,{cornerRadius:20,backgroundColor:"brand",height:40,width:40},a.createElement(oE.In,{icon:"new-40",fill:"onbrand"})))),a.createElement(aV.Y,{direction:"vertical",padding:{top:16},spacing:0,height:"hug-contents"},a.createElement(S.E,{fontSize:13,fontWeight:"medium"},(0,N.tx)("team_view.folder_upsell.upgrade_to_create_more_projects")),a.createElement(S.E,{fontSize:11,color:"secondary"},(0,N.tx)("team_view.folder_upsell.get_unlimited_everything",{professionalPlanLink:d})))))}function mF(){return a.createElement("div",{className:x.s.wFull.hFull.colorBg.$})}function mL({canEditTeam:e}){let t=(0,n.wA)(),r=(0,a7.ol)(),l=(0,eC.z3)(),o=a$.h.useTrackingContext({trigger:ag.b.FOLDER_UPSELL_CARD}),i=(0,b.I7)("exp_fbg_project_limit_upsell");if(!r||!e||(0,al.w5)(r)||"recentsAndSharing"===l||"trashedFolders"===l||!i.getConfig().getValue("show_upsell",!1))return null;let s=a.createElement(Z.Us,{className:x.s.noWrap.cursorDefault.$,onClick:e=>{e.stopPropagation(),t((0,tm.to)({type:a_.V,data:{upsellSource:ag.b.FOLDER_UPSELL_CARD,teamId:r?.id}}))},trackingProperties:{trackingDescriptor:ed.c.PROFESSIONAL_PLAN,...o},trusted:!0},(0,N.tx)("team_view.folder_upsell.professional_plan"));return a.createElement(rV.fu,{name:"Folder Upsell List",properties:o},a.createElement("div",{className:x.s.flex.mt16.bRadius8.b1.colorBorder.$,style:el.sx.add({borderStyle:"dashed"}).$},a.createElement(rV.$z,{className:M()(x.s.flex.alignLeft.gap12.py24.px16.bRadius8.wFull.pl36.$,"folder_upsell--list--2Higk"),onClick:()=>{t((0,tm.to)({type:mO.DV,data:{team:r,resource:mA.vL.FOLDER,action:tW.ZN.CREATE_FOLDER,currentPlan:mR.F.Plan.STARTER,upsellPlan:mR.F.Plan.PRO,editorType:null,upsellSource:ag.b.FOLDER_UPSELL_CARD}}))},trackingProperties:{trackingDescriptor:ed.c.FOLDER_UPSELL_CARD},dataTestId:"folder_upsell_button"},a.createElement("div",{className:M()(x.s.relative.flexShrink0.h40.w64.py4.px8.colorBgSecondary.bRadius4.$,"folder_upsell--listCard--qnkxf")},a.createElement("div",{style:el.sx.absolute.topHalf.leftHalf.add({transform:"translate(-50%, -50%)"}).$},a.createElement(aV.Y,{cornerRadius:12,backgroundColor:"brand",height:24,width:24,horizontalAlignItems:"center",verticalAlignItems:"center"},a.createElement(oE.In,{icon:"plus-32",fill:"onbrand"}))),a.createElement(aV.Y,{direction:"vertical",spacing:4},a.createElement(aV.Y,{direction:"horizontal",spacing:4},a.createElement(aV.Y,{cornerRadius:2,backgroundColor:"default"}),a.createElement(aV.Y,{cornerRadius:2,backgroundColor:"default"})),a.createElement(aV.Y,{direction:"horizontal",spacing:4},a.createElement(aV.Y,{cornerRadius:2,backgroundColor:"default"}),a.createElement(aV.Y,{cornerRadius:2,backgroundColor:"default"})))),a.createElement(aV.Y,{direction:"vertical",spacing:0},a.createElement(S.E,{fontSize:13},(0,N.tx)("team_view.folder_upsell.upgrade_to_create_more_projects")),a.createElement(S.E,{fontSize:11,color:"secondary"},(0,N.tx)("team_view.folder_upsell.get_unlimited_everything",{professionalPlanLink:s}))))))}var mD=r(629117),mM=r(415399),mB=r(376613),mU=r(241304),m$=r(8303);let mj="folder_list_view--emptyState--8vmgw tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd";var mW=r(367542);function mG(e){let t=(0,n.d4)(e=>e.dropdownShown),r=(0,n.d4)(e=>e.currentUserOrgId),l=(0,ti.S)(),o=(0,n.d4)(e=>e.user),{folderList:i}=e,s=()=>e.viewMode===oj.XU.LIST,d=(0,eT.vt)(e.teamId),c=!!e.teamId&&!!e.isEligbileForProTeamLockedRevampUI,m=(0,ew.jn)(),u=e.teamId?{teamId:e.teamId,isLockedTeam:!!d||m}:void 0,_=l?(0,mD.H)(t):void 0;return 0===i.length?a.createElement(a.Fragment,null,e.onCreateNewFolder&&!(0,ey.R$)(o,r)?a.createElement("div",{className:mj},e.canEditTeamContents?a.createElement(a.Fragment,null,a.createElement("div",{className:"folder_list_view--emptyTitle--t1u0a tiles_view--emptyTitle--3Vwmu"},(0,N.tx)("team_view.folder_empty_view.no_projects_yet")),(0,N.tx)("team_view.folder_empty_view.projects_help_you_organize"),a.createElement(Z.cw,{className:"folder_list_view--emptyButton--g-yAA tiles_view--emptyButton--oAaGe",onClick:e.onCreateNewFolder},a.createElement(en.B,{svg:mW.A,className:"folder_list_view--newProjectIcon--O3wnv tiles_view--newFileIcon--LR1sm"}),(0,N.tx)("team_view.folder_empty_view.new_project"))):(0,N.tx)("team_view.folder_empty_view.this_team_does_not_have_any_projects_yet")):null!=e.emptyStateText?a.createElement("div",{className:x.s.flex.gap32.$},a.createElement("div",{className:mj},e.emptyStateText),d&&a.createElement(mc.R,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents}),e.team&&c&&a.createElement(md,{team:e.team,canAdminTeam:!!e.canAdminTeam})):(0,N.tx)("team_view.folder_empty_view.no_projects")):a.createElement(a.Fragment,null,(()=>{let t=i.length>=2?1:1===i.length?0:void 0;return a.createElement("div",{className:x.s.flex.flexRow.wFull.$},a.createElement("div",{className:x.s.wFull.$},a.createElement(mM.m,{checksForViewOnlyLabels:u,currentPlanFilter:e.currentPlanFilter,dataOnboardingKey:"project-card",dataOnboardingKeyIndex:t,folderList:i,isSharerInfoIncluded:e.isSharerInfoIncluded,onChangeSortOptions:e.onChangeSortOptions,trailingGridElements:d||m?a.createElement(a.Fragment,null):a.createElement(mP,{canEditTeam:e.canEditTeamContents}),viewType:e.viewMode}),!d&&!m&&s()&&a.createElement(mL,{canEditTeam:e.canEditTeamContents})),a.createElement("div",{className:"folder_list_view--infoCard--DzZGD"},d&&a.createElement(mc.R,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents}),e.team&&c&&a.createElement(md,{team:e.team,canAdminTeam:!!e.canAdminTeam})))})(),_&&a.createElement(mB.p,{folder:_}))}let mV=[t4.Dq.NAME,t4.Dq.LAST_MODIFIED],mH={[oj.XU.GRID]:{[t4.Dq.NAME]:(0,N.tx)("tile.sort_filter.sort_alphabetical"),[t4.Dq.TEAM]:(0,N.tx)("tile.sort_filter.team"),[t4.Dq.OWNER]:(0,N.tx)("tile.sort_filter.owner"),[t4.Dq.LAST_MODIFIED]:(0,N.tx)("tile.sort_filter.sort_last_modified"),[t4.Dq.SHARED_AT]:(0,N.tx)("tile.sort_filter.date_shared"),[t4.Dq.CREATED_AT]:(0,N.tx)("tile.sort_filter.sort_date_created"),[t4.Dq.TRASHED_AT]:(0,N.tx)("tile.sort_filter.sort_date_trashed")},[oj.XU.LIST]:{[t4.Dq.NAME]:(0,N.tx)("tile.sort_filter.sort_alphabetical"),[t4.Dq.TEAM]:(0,N.tx)("tile.sort_filter.team"),[t4.Dq.OWNER]:(0,N.tx)("tile.sort_filter.owner"),[t4.Dq.LAST_MODIFIED]:(0,N.tx)("tile.sort_filter.sort_last_modified"),[t4.Dq.SHARED_AT]:(0,N.tx)("tile.sort_filter.date_shared"),[t4.Dq.CREATED_AT]:(0,N.tx)("tile.sort_filter.sort_date_created"),[t4.Dq.TRASHED_AT]:(0,N.tx)("tile.sort_filter.sort_date_trashed")}},mz={viewMode:oj.XU.GRID,sortMode:{sortKey:t4.Dq.LAST_MODIFIED,sortDesc:!0}},mY={...mz,sortMode:{sortKey:t4.Dq.SHARED_AT,sortDesc:!0}},mK={name:cX.f.byProperty("name",cX.f.LEXICOGRAPHICALLY),lastModified:cX.f.byProperty("folderLastUpdated"),team:cX.f.byProperty("folderTeamName",cX.f.LEXICOGRAPHICALLY),owner:cX.f.byProperty("folderOwnerName",cX.f.LEXICOGRAPHICALLY),sharedAt:cX.f.byProperty("folderSharedAt"),createdAt:cX.f.byProperty("created_at"),trashedAt:cX.f.byProperty("trashed_at")};function mq(e){let{folderList:t,...r}=e,l="trashedFolders"===e.selectedView.view,o=(0,n.d4)(e=>e.teams),i=(0,n.d4)(e=>e.roles),s=(0,n.d4)(e=>e.viewBarViewModeOptionByView),d=(0,n.d4)(e=>e.viewBarSortOptionsByView),c=(0,n.d4)(e=>e.tileSortFilterStateByView),m=e.isSharerInfoIncluded?mY:mz,u=a.useMemo(()=>({viewMode:(0,m$.y2)(e.viewId,s,m.viewMode),sortMode:(0,m$.bV)(e.viewId,{viewBarSortOptionsByView:d},mV,m.sortMode)}),[m.sortMode,m.viewMode,e.viewId,mV,d,s]),_=(0,n.wA)(),p=t=>{_(eS.ZR({viewId:e.viewId,sortMode:{sortKey:t.sortKey,sortDesc:t.sortDesc}}))},f="recentsAndSharing"!==e.selectedView.view&&!l,g=a.useMemo(()=>{if("recentsAndSharing"===e.selectedView.view)return e.folderList;let t=c.trashedFolders,r=l?mK[(0,oj.jx)(t.sort.key)??"trashedAt"]:mK[u.sortMode.sortKey];if(!r)return e.folderList;let a=l?t.sort.dir===oj.ue.DESC?cX.f.reverse(r):r:u.sortMode.sortDesc?cX.f.reverse(r):r,n=e.folderList.map(e=>({...e,...(0,mU.Z)({teams:o,roles:i},e)}));return n.sort(a),n},[e.selectedView.view,u.sortMode.sortKey,u.sortMode.sortDesc,e.folderList,o,i,l,c.trashedFolders]),E=l&&u.viewMode===oj.XU.GRID?"folder_list_view--trashedGridViewContainer--efhyK":"folder_list_view--tabContentContainer--lHQoT",b=a.createElement("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z"},a.createElement(nS.wA,{dropdownId:"view-bar-sort-filter",values:mV,valuesToDisplayText:mH[u.viewMode],checkedValue:u.sortMode.sortKey,onChange:(e,t)=>p({sortKey:e,sortDesc:t===oj.ue.DESC}),includeSortDirection:!0,tileSortValues:nS.D$.values,currentDirection:u.sortMode.sortDesc?oj.ue.DESC:oj.ue.ASC}),a.createElement(nS.$c,{initialViewMode:u.viewMode,onViewModeChange:t=>{_(eS.uV({viewId:e.viewId,viewMode:t}))}}));return a.createElement("div",{className:l&&u.viewMode===oj.XU.LIST?void 0:E},f?a.createElement(nS.lU,{leftSide:null,rightSide:b}):null,l&&c.trashedFolders.filters.role===oj.Jh.CAN_BE_VIEWED&&a.createElement("div",{className:`${x.s.mb16.$} ${u.viewMode===oj.XU.LIST&&x.s.px32.$}`},a.createElement(mC._,{dataTestId:"may-not-restore-or-permanently-delete-banner",color:mC.S.INFORMATION,text:a.createElement("p",{className:x.s.fontMedium.$},a.createElement("span",{className:x.s.fontSemiBold.$},(0,N.tx)("file_browser.folder_list_view.may_not_restore_or_permanently_delete_banner")),"\xa0",(0,N.tx)("file_browser.folder_list_view.may_not_restore_or_permanently_delete_banner_content"))})),a.createElement(mG,{folderList:g,chunkSize:e.chunkSize,viewMode:u.viewMode,onChangeSortOptions:p,...r}))}function mJ(){let e=(0,n.d4)(e=>e.currentUserOrgId),t=(0,a7.ol)(),r=(0,u.Rs)(eG.kQI,{id:t?t.id:""},{enabled:!!t?.id}),l=(0,u.Rs)(eG.TNJ,{id:t?t.id:""},{enabled:!!t?.id}),o=(0,n.d4)(e=>e.tileSortFilterStateByView),i=(0,eC._6)(),s=(0,ew.R)(t?.id),d=o.trashedFolders,[{data:c,status:m}]=(0,_.IT)((0,e7.p5)({orgId:e,teamId:t?.id??null,roleFilter:d.filters.role})),p="loaded"===r.status&&!!r.data.team&&r.data.team.hasPermission,f="loaded"===l.status&&!!l.data.team&&l.data.team.hasPermission;return a.createElement(ee.A,{loadingElementId:"loading-content-pane",delay:250,loaded:"loading"!==m,loadingElementClassName:x.s.pr32.$},a.createElement("div",{style:el.sx.mt1.$},a.createElement(mq,{canAdminTeam:f,canEditTeamContents:p,chunkSize:c?.folders?.length||0,emptyStateText:(0,N.t)("file_browser.trash_project.trashed_empty_state"),folderList:c?.folders||[],isEligbileForProTeamLockedRevampUI:s,isSharerInfoIncluded:!1,selectedView:i,team:t,teamId:t?.id,useLGPerms:!0,viewId:cj.l})))}var mX=(e=>(e.FILES="files",e.FOLDERS="folders",e))(mX||{});function mQ(e){let t=(0,eC._6)();if("deletedFiles"!==t.view&&"trashedFolders"!==t.view)return a.createElement(a.Fragment,null);let r=a.createElement(cz,{currView:t}),n="folders"===e.selectedTab?a.createElement(mJ,null):a.createElement(mN,null);return a.createElement(lC.r,{viewBarSticky:!0,viewbar:r,content:n})}var mZ=r(920043);let m0=[eg.Wb3,eg.KoA,eg.Ult,eg.kmq,eg.USq,eg.jQF,eg.Ob5,eg.Qlc,eg.I$z,eg.X5_,eg.RJL,eg.LB2,eg.I5n,eg.Msu,eg.UmN,eg.Ql8,eg.pIP,eg.Q16,eg.O5v,eg.rv,eg.HaT,eg.rQs,eg.YHe,eg.hxO,eg.sqw,eg.Duq,eg.yjU,eg.BTz,eg.I3H,eg.tZO,eg.LPt,eg.cJy,eg.tUL,eg.tBR,eg.K69,eg.Tp6,eg.fz8,eg.XIg,eg.fQh,eg.O9D,eg.c6t,eg.NM0,eg.YPG,eg.j9$,eg.LQ8,eg.r3Y].map(e=>e.id);function m1({children:e}){return a.createElement(mZ.A,{name:"FileBrowser",order:m0},e)}var m2=r(998568);function m4({folderId:e,enabled:t=!0}){let r=(0,n.d4)(t=>t.tileSortFilterStateByView.folders.byId[e]??t.tileSortFilterStateByView.folders.default),l=(0,a.useMemo)(()=>({file_type:m8(r.filters.fileType),sort_order:r.sort.dir===oj.ue.ASC?"asc":"desc",sort_column:m5(r.sort.key)}),[r.filters.fileType,r.sort.dir,r.sort.key]);return(0,_.IT)((0,G.BU)({folderId:e,...l}),{enabled:t})}let m8=e=>{switch(e){case oj.t2.DESIGN:return"design";case oj.t2.FIGJAM:return"whiteboard";case oj.t2.PROTOTYPE:return"prototype";case oj.t2.SITES:return"sites";case oj.t2.SLIDES:return"slides";case oj.t2.COOPER:return"cooper";case oj.t2.MAKE:return"figmake";case oj.t2.ANY:return"";default:(0,I.xb)(e)}},m5=e=>{switch(e){case oj.C0.NAME:return"name";case oj.C0.CREATED_AT:return"created_at";case oj.C0.TOUCHED_AT:return"touched_at";default:return(0,m2.$D)(L.e.WAYFINDING,Error(`Attempting to sort by an unsupported sort key: ${e}`)),"created_at"}};var m3=r(281294),m6=r(536490),m7=r(560596),m9=r(156495),ue=r(957273),ut=r(94831),ur=r(451727),ua=r(62870),un=r(2147);let ul=(0,ts.Ju)(function(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.teams)[e.teamId].subscription,l=e.paymentRequiresAction;return(0,a.useEffect)(()=>{un.T.getHostedInvoicesPage({teamId:e.teamId}).then(({data:e})=>{(0,oX.FJ)(e.meta.hosted_invoice_url,"_blank","noopener")})},[e.teamId]),(0,a.useEffect)(()=>{l||r===eF.Qh.INCOMPLETE||t(tm.ES({type:ul.type}))},[r,t,l]),a.createElement(rJ.Eo,{title:(0,N.t)("payments.pending_subscription_modal_header"),hideCancel:!0,confirmText:(0,N.t)("payments.got_it"),trackedConfirmationProperties:{trackingDescriptor:ed.c.CONFIRM_VERIFY_PAYMENT,trackingContextName:"Confirm Verify Payment"}},(0,N.tx)("payments.pending_subscription_modal_description"))},"PENDING_SUBSCRIPTION_CHANGE_MODAL");var uo=r(549833);let ui="banners--warn--bC4ke",us="banners--primaryCtaButton--tyhCJ",ud="banners--content--ciED3",uc="banners--titleSmall--ceZgU",um="banners--bold--qt00U",uu="banners--message--9BMLM",u_="banners--messageSmall--YT-82",up="banners--secondaryCtaButton--uYrvi",uf="banners--ctaButtonGroup--r8cfU",ug="banners--closeButton--IXY-V",uE="banners--teamBannerWithBackground--CwS6V banners--banner--l8udl",ub="banners--teamUpgradeNotice--gqc9c",uv="banners--softWarningBanner--QK9Y5",uh="banners--softWarningBannerBlue--uQmhb";var uy=r(616591),uw=r(169256),uT=r(205778),uI=r(128912);function ux(e,t,r){let n=a.useMemo(()=>({canAdmin:(0,ao.canAdminOrg)(e.currentUserOrgId,e),canMember:(0,ao.canMemberOrg)(e.currentUserOrgId,e)}),[e]),l=(0,eV.px)(),o=(0,eV.j_)(l),i=(0,eV.Kd)(l),s=a.useMemo(()=>a2.Qw.transformAll([o,i],(e,t)=>({canAdmin:e,canMember:t})),[o,i]),d=(0,an.MF)({oldValue:a2.Qw.useMemoizedLoaded(n),newValue:s,label:r,enableFullRead:(0,aa.DQ)(aa.Pw.GROUP_7),contextArgs:{callsite:"useOrgBannerContentQuery"}});return a.useMemo(()=>d.transform(({canAdmin:r,canMember:n})=>(function(e,t,r,n){let l;if(!e.currentUserOrgId||!(0,al.wn)(e.currentUserOrgId,e))return null;let o=e.orgById[e.currentUserOrgId];if(!o)return null;let i=o.past_due_at&&(0,ei.A)(o.past_due_at).add(2,"weeks")>(0,ei.A)(new Date);if(!r&&i)return null;let s=e.orgUsersByOrgId[e.currentUserOrgId]??{},d=(0,eu.zR)(s).map(e=>a.createElement("span",{key:e.id,className:um},e.user.handle," (",e.user.email,")"));return l=r?o.billing===m9.EZ.CHARGE_IMMEDIATELY?(0,N.tx)("payments.org_past_due_on_payment",{invoice:a.createElement("a",{onClick:()=>{t?.(eS.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:eH.J7.BILLING}))}},(0,N.tx)("payments.outstanding_invoice")),orgName:o.name}):(0,N.tx)("payments.org_past_due_on_payment_invoiced",{email:a.createElement("b",{className:um},(0,ac.W4)()),orgName:o.name}):(0,N.tx)("payments.please_reach_out_to_org_admins",{orgName:o.name,admins:n&&a.createElement("span",null," ",a.createElement(m6.T,{formatType:"disjunction"},d)),numAdmins:d.length}),{severity:uo.c.WARN,title:(0,N.t)("payments.payment_not_received"),message:l,cta:null,onClickCta:null}})(e,t,r,n)),[t,d,e])}function uN(e){return e?.status==="open"&&!!e.payment_intent&&[tW.pk.REQUIRES_ACTION,tW.pk.REQUIRES_SOURCE_ACTION].includes(e.payment_intent.status)}function uS(e,t,r,n,o,i){let s=a.useMemo(()=>({canOwn:!!r&&(0,ao.canOwnTeam)(r,n),canAdmin:!!r&&(0,ao.canAdminTeam)(r,n),canEdit:!!r&&(0,ao.canEditTeam)(r,n),hasEditRoleOnTeam:!!r&&(0,ao.hasMinRole)((0,ao.getRolesForUserAndTeam)(r,n),ut.e6.EDITOR)}),[r,n]),c=(0,an.MF)({oldValue:a2.Qw.useMemoizedLoaded(s),newValue:function(e){let t=(0,u.Rs)((0,eG.yQw)((0,aa._X)(aa.Pw.GROUP_7)&&e?{teamId:e}:null));return a.useMemo(()=>"disabled"===t.status?a2.Qw.loaded({canOwn:!1,canAdmin:!1,canEdit:!1,hasEditRoleOnTeam:!1}):t.transform(({team:e})=>({canOwn:e?.isOwner??!1,canAdmin:e?.canAdmin??!1,canEdit:e?.canEdit??!1,hasEditRoleOnTeam:e?.canEdit??!1})),[t])}(r),label:i,enableFullRead:(0,aa.DQ)(aa.Pw.GROUP_7),contextArgs:{callsite:"useBannerContentQuery",resourceType:e,resourceId:t?.id,teamId:r}}),m=ux(n,o,i);return a.useMemo(()=>a2.Qw.transformAll([m,c],(i,s)=>i||function(e,t,r,n,o,i){let s=r?n.teams[r]:null;if(r&&!s||"file"===e)return null;let c=n.currentTeamId,m=s&&s.subscription===eF.Qh.GRACE_PERIOD,u=n.billingSummary,_=s?.subscription===eF.Qh.INCOMPLETE,p=!!s?.org_id,f=!!s?.subscription,g=m&&!p&&f&&(uN(u?.last_monthly_invoice)||uN(u?.last_annual_invoice)),b=s&&(_||g),v=s&&s.subscription===eF.Qh.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED,h=i.canOwn,y=i.canAdmin,w=i.canEdit,T=s&&(0,al.oc)(s.id,n),I="folder"===e?t:null,x=0,S={showReminder:!1,showAccessRestricted:!1},C="folder"===e&&!I,k=!!(0,l.k)().limited_plan_spaces&&(0,ac.Ay)().is_limited_team_plan&&C;if(n.user){let t=i.hasEditRoleOnTeam,a=["folder","team"].includes(e)&&t,l=(0,a8.cn)(n.user),o=n.userEduGracePeriods;C?c&&(0,a8.hP)(n.user.id,n.roles.byTeamId,n.teams[c])&&(S=(0,a8.df)(o,l),x=(0,a8.Me)(o)):r&&a&&(S=(0,a8.GU)(o,l,r,!!n.teams[r].student_team),x=(0,a8.qS)(o,r))}let R=s&&!(0,al.n0)(s)&&!s.student_team&&I&&!(0,rf.Gi)(I),A=R&&I.is_invite_only,O=R&&I.is_view_only,P=I&&(0,rf.sp)(I),F=!P&&!s&&I&&(0,al.ZZ)(I,n),L=()=>o?.(sJ.WX({teamId:s.id,selectedView:n.selectedView})),D=()=>d.Ay.redirect("/education/apply",E.Ay.isIpadNative?void 0:"_blank"),M=()=>o?.(sJ.WX({teamId:s.id,openInNewTab:!1,selectedView:{view:"team",teamId:s.id}})),B=()=>o?.(tm.to({type:a_.V,data:{upsellSource:ag.b.BANNER}})),U=(0,al._b)(s),$=s&&s.subscription_raw!==eF.Qh.OK&&(0,al.WQ)(s)&&y&&az.ng.getProTrialStatus(s)!==ue.a.IN_TRIAL&&U,j=["team","folder"].includes(e)&&w&&(0,a7.cU)(s),W=w&&function(e,t){let r=e&&t[e.id]?.dismissed_legacy_team_upgrade_notice_banner;return(0,a7.zs)(e)&&!r}(s,n.userTeamFlags),G=(0,ey.R$)(n.user,n.currentUserOrgId),V=az.ng.canSeeExpiredProTrialBanner(n.userTeamFlags,s,n),H=s&&n.userTeamFlags[s.id]?.[az.lg],z=n.user?(0,a8.x$)(n.eduPeriodEnd,(0,a8.cn)(n.user)):1/0,Y=z>0&&z!==1/0,K=0===z,q=s&&s.student_team_state===eF.kU.STUDENT_TEAM_CURRENT,J=s&&s.student_team_state===eF.kU.STUDENT_TEAM_EXPIRED&&T,X=Y&&h&&q,Q=K&&h&&J,ee=Y&&w&&q,et=K&&!w&&q,er=(0,l.k)().edu_offboarding_experience&&(X||Q||ee||et),ea=(0,l.k)().edu_offboarding_experience&&J;if(v)return{severity:uo.c.WARN,title:(0,N.t)("payments.locked"),message:y?a.createElement("span",null,(0,N.tx)("payments.no_monthly_sub_over_editor_limit_admin.seat_rename",{contactSupport:a.createElement("a",{href:`mailto:${(0,ac.W4)()}`},(0,N.tx)("payments.contact_support"))})):a.createElement("span",null,(0,N.tx)("payments.no_monthly_sub_over_editor_limit.seat_rename")),cta:y?(0,N.t)("payments.manage_plan"):null,onClickCta:y?()=>{o?.(eS.$T({view:"teamAdminConsole",teamId:r,teamAdminConsoleViewTab:ez.Iv.SETTINGS}))}:null};if(V&&(T||w&&!H)){let e,t,n,l;return T?(e=w?(0,N.tx)("payments.pro_trial_expiry.locked_description_on_team",{teamName:s.name,lowerUsageLink:a.createElement(rV.$z,{onClick:e=>{e.preventDefault(),o?.(tm.to({type:ua.v,data:{teamId:r}}))}},(0,N.tx)("payments.pro_trial_expiry.lower_usage"))}):(0,N.tx)("payments.pro_trial_expiry.locked_description_for_viewer_on_team",{teamName:s.name}),t=w?(0,N.tx)("payments.pro_trial_upgrade_cta.upgrade"):null,n=`${uv} `,l="Pro Trial Expiry Banner Locked"):(e=s?(0,N.tx)("payments.pro_trial.trial_ended_banner_message",{teamName:s.name}):(0,N.tx)("payments.pro_trial.trial_ended_banner_message.no_name"),t=(0,N.tx)("payments.pro_trial.trial_ended_banner_upgrade_cta"),n=`${uv} ${uh}`,l="Pro Trial Expiry Banner Unlocked"),{severity:uo.c.WARN_SOFT,title:(0,N.t)("payments.pro_trial.trial_ended_banner_title"),message:e,cta:t,onClickCta:w?M:void 0,svg:uw.A,bannerClassName:n,trackingContextName:l,dismissible:!T,onClose:T?void 0:()=>{r&&o?.(aA.bE({all_team_flags:[{team_id:r,flags:{[az.lg]:!0}}]}))}}}if(k)return{severity:uo.c.WARN_SOFT,title:(0,N.tx)("file_browser.limited_space_banner.heading"),message:(0,N.tx)("file_browser.limited_space_banner.description"),cta:null,hideIcon:!0,bannerClassName:"banners--limitedSpaceBanner--Pq6k8"};if(er){let e=()=>o?.(tm.to({type:ur.ZL,data:{teamId:s.id}}));if(X||ee)return{severity:uo.c.WARN_SOFT,title:(0,N.tx)("edu.banner.your_education_status_is_expiring_soon"),message:(0,N.tx)("edu.banner.to_keep_collaborating_upgrade_team",{teamName:s.name,verify:a.createElement(Z.Us,{href:"/education/apply",target:"_blank",trusted:!0},(0,N.tx)("edu.banner.verify_your_education_status"))}),cta:(0,N.tx)("edu.banner.learn_more"),onClickCta:e,svg:uy.A,bannerClassName:`${uv} ${uh}`,trackingContextName:"Edu Offboarding Banner"};if(Q)return{severity:uo.c.WARN_SOFT,title:(0,N.tx)("edu.banner.your_education_plan_has_expired"),message:(0,N.tx)("edu.banner.team_is_now_view_only_for_all_members",{teamName:s.name}),cta:(0,N.tx)("edu.banner.learn_more"),onClickCta:e,svg:uy.A,bannerClassName:uv,trackingContextName:"Edu Offboarding Banner"};if(et)return{severity:uo.c.WARN_SOFT,title:(0,N.tx)("edu.banner.your_education_plan_has_expired"),message:(0,N.tx)("edu.banner.you_can_no_longer_edit_files",{teamName:s.name}),cta:(0,N.tx)("edu.banner.learn_more"),onClickCta:e,svg:uy.A,bannerClassName:uv,trackingContextName:"Edu Offboarding Banner"}}else if(ea)return{severity:uo.c.WARN_SOFT,title:(0,N.tx)("edu.banner.team_s_education_status_has_expired",{teamName:s.name}),message:(0,N.tx)("edu.banner.move_or_duplicate_files_to_another_location_to_save_your_work"),cta:null,svg:uy.A,bannerClassName:uv,trackingContextName:"Edu Offboarding Banner"};else if(G){let e=n.user.external_restricted_org_id,t=(0,N.t)("external_collaboration_restricted.banner.restriction_description.no_org");if(e&&n.orgById[e]){let r=n.orgById[e];t=(0,N.t)("external_collaboration_restricted.banner.restriction_description",{organizationName:r.name})}return{severity:uo.c.WARN,title:(0,N.t)("external_collaboration_restricted.banner.title"),message:t,cta:null,ctaTrackingProperties:void 0,onClickCta:null}}else if(n.user&&["team","folder"].includes(e)&&S.showAccessRestricted){let e,t=(0,N.t)("banner.edu_grace_period.your_education_plan_has_expired");return s?(0,a8.eB)(n.user.id,n.roles.byTeamId,s)?e=(0,N.t)("banner.edu_grace_period.team_is_now_view_only_for_all_members",{teamName:s.name}):(0,a8.QS)(n.user.id,n.roles.byTeamId,s)?e=(0,N.t)("banner.edu_grace_period.you_can_no_longer_edit_files_in_team",{teamName:s.name}):(t=(0,N.t)("banner.edu_grace_period.your_education_plan_has_expired.is_member",{teamName:s.name}),e=(0,N.t)("banner.edu_grace_period.move_or_duplicate_files_to_another_location_to_save_your_work")):e=(0,N.t)("banner.edu_grace_period.education_team_members_need_to_verify_their_education_status"),{severity:uo.c.ANNOUNCEMENT,title:t,message:e,learnMoreUrl:"/education/",cta:(0,N.t)("banner.edu_grace_period.verify_status_button"),onClickCta:D,svg:uy.A,bannerClassName:ub}}else if(["team","folder"].includes(e)&&S.showReminder)return{severity:uo.c.ANNOUNCEMENT,title:(0,N.t)("banner.edu_grace_period.only_edu_grace_period_days_left",{daysLeft:x}),message:(0,N.t)("banner.edu_grace_period.to_keep_collaborating_on_figma_s_education_plan_please_verify_your_status_soon"),cta:(0,N.t)("banner.edu_grace_period.verify_status_button"),onClickCta:D,svg:uI.A};else if(A||O)return{severity:uo.c.WARN,title:(0,N.t)("payments.folder_locked"),message:(0,N.t)("payments.folder_locked_description",{projectType:"Invite"==(A?"Invite":"View")?(0,N.t)("payments.invite_only_projects"):(0,N.t)("payments.view_only_projects"),teamName:s.name}),learnMoreUrl:"/pricing",cta:w?(0,N.t)("payments.upgrade_now"):(0,N.t)("payments.contact_admin_for_details"),ctaTrackingProperties:w?{trackingDescriptor:ed.c.UPGRADE_NOW,upsellSource:ag.b.BANNER}:void 0,onClickCta:w?L:null};else if(F&&"folder"===e)return(0,an.HZ)({label:an.A5.getBannerContent.personalProjectDeprecated,oldValue:F&&"folder"===e,newValue:!1,maxReports:3}),{severity:uo.c.WARN,title:(0,N.t)("payments.locked"),message:(0,N.t)("payments.projects_deprecated"),learnMoreUrl:"/pricing-faq#what-changes-for-me",cta:null,onClickCta:null};else if(P&&"folder"===e)return{severity:uo.c.WARN,title:(0,N.t)("payments.abandoned_project"),message:(0,N.t)("payments.abandoned_project_description"),cta:null,onClickCta:null};else if(W){let e=(0,N.t)("payments.file_limit_unified",{figmaFiles:al.WW,figjamFiles:al.WW});j?W||(e=(0,N.t)("payments.file_limit_figjam",{figjamFiles:al.WW})):e=(0,N.t)("payments.file_limit_figma",{figmaFiles:al.WW});let t=()=>a.createElement("button",{type:"button",onClick:B,className:"banners--bannerInlineTextButton--GRx12"},(0,N.tx)("payments.check_out_our_paid_plans")),r=s?a.createElement("span",null,(0,N.tx)("payments.team_over_starter_team_limit_with_button.legacy_team",{fileLimitString:e,checkoutOurPlans:t(),teamName:s.name})):a.createElement("span",null,(0,N.tx)("payments.team_over_starter_team_limit_with_button.no_legacy_team_present",{fileLimitString:e,checkoutOurPlans:t()}));return{severity:uo.c.ANNOUNCEMENT,title:(0,N.t)("payments.team_over_starter_team_limit_title"),message:r,cta:(0,N.t)("payments.upgrade_now"),ctaTrackingProperties:{trackingDescriptor:ed.c.UPGRADE_NOW,upsellSource:ag.b.BANNER},onClickCta:L,svg:uT.A,bannerClassName:ub,trackingContextName:"Unified Legacy / Beta File Limit Banner"}}else if($){let e=(0,ei.A)(s.grace_period_end).toDate(),t=(0,N.tx)("payments.pro_plan_ends_relative_time_string",{relative_time_string:a.createElement(o0.h1,{date:e})});return U||(t=(0,N.tx)("payments.pro_plan_ends_on_date",{end_date:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)})),{severity:uo.c.ANNOUNCEMENT,title:t,message:(0,N.t)("payments.pro_plan_ends_for_team_description",{teamName:s.name}),cta:(0,N.t)("payments.pro_plan_ends_button"),onClickCta:M,svg:U?uT.A:uw.A,trackingContextName:"Promo Code Expiration Banner",bannerClassName:U?ub:void 0}}else if(b){let e=_?(0,N.t)("payments.complete_team_payment_description",{teamName:s.name}):(0,N.t)("payments.complete_team_renewal_payment_description");return{severity:uo.c.WARN,title:(0,N.t)("payments.complete_payment"),message:e,cta:a.createElement(m7.V,{trackingProperties:{trackingDescriptor:ed.c.VERIFY_PAYMENT,trackingContextName:"Verify Payment Banner"},onClick:()=>o?.(tm.to({type:ul,data:{teamId:r,paymentRequiresAction:!!g}}))},(0,N.tx)("payments.complete_payment_cta")),onClickCta:null}}return null}(e,t,r,n,o,s)),[m,c,e,t,r,n,o])}function uC(e){let t=(0,eP.FC)(),r=(0,n.d4)(e=>e.userEduGracePeriods),l=(0,n.d4)(e=>e.userFlags),o=(0,n.d4)(e=>e.userTeamFlags),i=(0,n.d4)(e=>e.selectedView),s=(0,n.d4)(e=>e.isFreeUser),d=(0,n.d4)(e=>e.userAnalyticsData),c=(0,n.d4)(e=>e.fileKeysByFolderId),m=a.useMemo(()=>({...t,checks:e.checks,fileKeysByFolderId:c,isFreeUser:s,selectedView:i,userAnalyticsData:d,userEduGracePeriods:r,userFlags:l,userTeamFlags:o}),[t,e.checks,c,s,i,d,r,l,o]);return uS(e.resourceType||eF.vt.FOLDER,e.resource||null,e.teamId||null,m,null,e.shadowReadLabel).transform(e=>!!e)}function uk(e,t){let r={...e};return"string"==typeof t.title&&(r.title=t.title),"string"==typeof t.message&&(r.message=t.message),r}var uR=r(442214),uA=r(578888);let uO=a.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none"},a.createElement("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"var(--color-bg-inverse, black)"}),a.createElement("mask",{id:"mask0_4:25",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"48",height:"48"},a.createElement("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"var(--color-bg-inverse, black)"})),a.createElement("g",{mask:"url(#mask0_4:25)"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 20H17.5C16.1193 20 15 21.1193 15 22.5C15 23.8807 16.1193 25 17.5 25H20L20 20ZM21 19.9963L21 25H21.6738C23.3383 25 24.9874 25.3196 26.5314 25.9416L28 26.5333V17.7761L27.3548 18.1614C25.4287 19.3116 23.2393 19.9428 21 19.9963ZM17.5 19H20.6897C22.8561 19 24.9821 18.4135 26.8421 17.3028L28.2437 16.4658C28.5769 16.2668 29 16.507 29 16.8951V27.2737C29 27.628 28.6418 27.8699 28.3132 27.7375L26.1577 26.8692C24.7325 26.2951 23.2103 26 21.6738 26H21.3286L22.5613 29.698C22.7771 30.3455 22.2951 31.0142 21.6126 31.0142H20.4415C19.5807 31.0142 18.8164 30.4634 18.5442 29.6467L17.3333 26.0142L17.3272 25.9958C15.4745 25.9057 14 24.375 14 22.5C14 20.567 15.567 19 17.5 19ZM18.3874 26.0142L19.4928 29.3304C19.6289 29.7388 20.0111 30.0142 20.4415 30.0142H21.6126L20.2792 26.0142H18.3874Z",fill:"var(--color-icon-oninverse, white)"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.5 22C32.5 21.1716 31.8284 20.5 31 20.5V19.5C32.3807 19.5 33.5 20.6193 33.5 22C33.5 23.3807 32.3807 24.5 31 24.5V23.5C31.8284 23.5 32.5 22.8284 32.5 22Z",fill:"var(--color-icon-oninverse, white)"}));function uP(e){let{title:t,message:r,cta:n,ctaTrackingProperties:l,learnMoreUrl:o,onClickCta:i,severity:s,secondaryCTA:d,secondaryOnClickCta:c,svg:m,trackingContextName:u="Banner",contentStyles:_,reverseCtas:p,dismissible:f,onClose:g}=e;return s===uo.c.ANNOUNCEMENT?a.createElement(rV.fu,{name:u,properties:{severity:s,...e.tracking}},a.createElement("div",{className:ud},m&&a.createElement(en.B,{svg:m,useOriginalSrcFills_DEPRECATED:!0}),a.createElement("div",{className:uu},a.createElement("div",{className:uc},t),a.createElement("div",{className:u_},r)),a.createElement(Z.e2,{reversed:p,className:uf},i&&a.createElement(Z.vd,{className:us,onClick:i,trackingProperties:l},n),c&&a.createElement(Z.tM,{className:up,onClick:c},d),f&&g&&a.createElement(ah.Jn,{className:ug,onClick:g})))):s===uo.c.EVENT?a.createElement(rV.fu,{name:u,properties:{severity:s,...e.tracking}},a.createElement("div",{className:`${ud} ${_}`},a.createElement("div",{className:"banners--eventMegaphoneIcon--7J3rx"},uO),a.createElement("div",{className:uu},a.createElement("p",{className:uc},t),a.createElement("p",{className:u_},r)),a.createElement(Z.e2,{className:uf},i&&a.createElement(Z.vd,{className:us,onClick:i,trackingProperties:l},n),c&&a.createElement(Z.tM,{className:up,onClick:c},d),f&&g&&a.createElement(ah.Jn,{className:ug,onClick:g})))):a.createElement(rV.fu,{name:u,properties:{severity:s,...e.tracking}},a.createElement("div",{className:`${ud} ${_}`},!e.hideIcon&&a.createElement(en.B,{svg:uA.A,className:"banners--warningIcon--A5YS-",autosize:s===uo.c.WARN_SOFT}),a.createElement("div",{className:uu},a.createElement("span",{className:"banners--title--OIA0P"},t),r,o&&a.createElement("span",null,"\xa0",a.createElement("a",{target:"_blank",rel:"noopener",href:o},(0,N.tx)("payments.learn_more")))),a.createElement(Z.e2,{reversed:p,className:uf},i&&a.createElement(Z.vd,{className:us,onClick:i,trackingProperties:l},n),!i&&a.createElement("div",{className:"banners--ctaMessage--5MB88"},n),f&&g&&a.createElement(ah.Jn,{className:ug,onClick:g}))))}let uF=(0,n.Ng)(e=>({userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView,userEduValidated:!!e.user?.student_validated_at,userEduGracePeriods:e.userEduGracePeriods,fileKeysByFolderId:e.fileKeysByFolderId,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData,...(0,ao.getPermissionsState)(e)}))(function(e){let t;let r=(0,u.Rs)(eG.UpR,{}),l=e.folderId?e.folders[e.folderId]:null,o=l?l.team_id:null,i=e.dispatch,s=o?e.teams[o]:null,d=!!s?.org_id,c=!!s?.subscription,m=o&&(0,ao.canAdminTeam)(o,e),_=(0,u.Rs)((0,eG.Ywy)((0,aa._X)(aa.Pw.GROUP_5)&&o?{teamId:o}:null)),f=a.useMemo(()=>_.transform(({team:e})=>!!e?.canAdmin),[_]),g=(0,an.MF)({oldValue:p.Qw.loaded(m),newValue:f,label:an.A5.FolderBannerInner.canAdminTeam,enableFullRead:(0,aa.DQ)(aa.Pw.GROUP_5)}).unwrapOr(!1);(0,a.useEffect)(()=>{o&&!d&&c&&g&&i(uR.Be({teamId:o}))},[i,o,d,c,g]);let E=(0,n.d4)(e=>e.teamBilling?.summary),b=uS(eF.vt.FOLDER,l??null,o,{eduPeriodEnd:r.data?.currentUser?.eduPeriodEnd,billingSummary:E,...e},e.dispatch,an.A5.FolderBannerInner.bannerContent).unwrapOr(null);if(!b)return a.createElement("div",null);t=l?uk({resourceType:eF.vt.TEAM,teamId:o,folderId:l.id},b):uk({resourceType:"recents"},b);let v=b.severity===uo.c.WARN?ui:"",h=b.bannerClassName||"",y=`${uE} ${v} ${h}`;return a.createElement("div",{className:y},a.createElement(uP,{...b,tracking:t}))});var uL=r(879263);let uD=(0,l.k)().drafts_page_viewbar_slim_lg?()=>{let e=(0,n.d4)(e=>e.currentUserOrgId),t=(0,n.d4)(e=>e.currentTeamId),r=(0,u.Rs)(eG._aE,{currentOrgId:e,currentTeamId:t});return"loaded"===r.status?r.data:null}:J.S;function uM(){let e;let t=(0,n.wA)(),r=(0,n.d4)(e=>e.currentUserOrgId),o=(0,n.d4)(e=>e.currentTeamId),i=uD();(0,uL.oY)(null!==i,e=>{nc.definedAnalyticsHandler.trackDefinedEvent("file_browser.sidebar_data_lg_migration",{durationMs:Math.round(e),isPostMigration:(0,l.k)().drafts_page_viewbar_slim_lg??!1,callsite:"drafts_page_viewbar"})}),r?e=i?.currentUser.baseOrgUser?.draftsProject:o&&(e=i?.currentUser.currentTeamUser?.draftsProject);let s=(0,n.d4)(e=>e.tileSortFilterStateByView),d=(0,eC._6)();if(!i||!e)return a.createElement(c$,{viewbarActions:[]});let c="deletedFiles"===d.view?(0,cU.xx)(cW)(s):(0,cU.xx)(rf.ZN)(e.id,s),m=[a.createElement(nS.ye,{key:0,config:c.tileSortFilterConfig}),a.createElement(nS.mc,{key:1,dispatch:t,options:c,selectedView:d}),a.createElement(nS.$c,{key:2,initialViewMode:c.tileSortFilterConfig.viewMode,onViewModeChange:e=>{(0,nc.trackEvent)("file view toggle",{viewType:e===oj.XU.GRID?"grid":"list"}),t(eS.JF({selectedView:d,config:{...c.tileSortFilterConfig,viewMode:e}}))}})];return a.createElement(c$,{viewbarActions:m})}let uB={open:!0,openNewTab:!0,restoreFromVersion:!0,share:!0,copyLink:!0,rename:!0,duplicate:!0,delete:!0,createBranch:!0,moveFile:!0},uU=(0,cU.xx)(rf.ZN);function u$(e){let{sortFilterOptions:t,selectedBranchKeyByRepoId:r}=(0,a4.R)(t=>({sortFilterOptions:uU(e.folderId,t.tileSortFilterStateByView),selectedBranchKeyByRepoId:t.selectedBranchKeyByRepoId})),l=(0,m3.Rp)(),o=(0,n.d4)(({currentUserOrgId:e})=>e),i=(0,b.I7)("exp_aa_test_org_drafts");o&&i.getConfig();let s=()=>{},[d,c]=m4({folderId:e.folderId}),m=d.data?.folder,u=(0,ew.R)(m?.team_id),_=uC({resourceType:eF.vt.FOLDER,resource:m,teamId:m?.team_id||null,shadowReadLabel:an.A5.DraftsPageView.hasBanner}).unwrapOr(!1);s=a.useCallback(()=>{!d.isFetchingNextPage&&d.hasNextPage&&c.fetchNextPage()},[d.isFetchingNextPage,d.hasNextPage,c]);let p=a.useMemo(()=>{let e=(d.data?.files||[]).map(e=>(0,tJ.fA)(e)),t=d.data?.filesByRepoId||{};return[...e,...(d.data?.repos||[]).map(e=>({type:tJ.nb.REPO,repo:e,branches:t[e.id],selectedBranchKey:r[e.id]||""})),...Object.values(l).filter(e=>e.orgId===o).map(tJ.gB)]},[o,d.data?.files,d.data?.filesByRepoId,d.data?.repos,l,r]),f=a.createElement(a.Fragment,null,a.createElement(mT,{newFileTile:!0,tiles:p,tileActions:uB,sortFilterOptions:t,emptyStateText:"",isDataPartial:!!d.hasNextPage,isEligbileForProTeamLockedRevampUI:u}),a.createElement(co.cx,null)),E="loaded"===d.status,v=a.createElement(ee.A,{loadingElementId:"loading-content-pane",loaded:E,loadingElementClassName:x.s.pr32.$},a.createElement(cY.B,{key:`${t.tileSortFilterConfig.filters.fileType}`,onShouldFetchNextPage:s},f));return(0,g.kF)("Drafts"),(0,g.WX)({markName:"MainBodyContent",isLoaded:E,contextArgs:{numFiles:d.transform(e=>e.files.length).unwrapOr(null)}}),(0,rV.T8)(a.createElement(lC.r,{viewBarSticky:!0,banner:_?a.createElement(uF,{folderId:e.folderId}):void 0,content:v,viewbar:a.createElement(uM,null)}),rz.e0.FILE_BROWSER,{view:"drafts"})}var uj=r(196008),uW=r(281408),uG=r(522463),uV=r(133930),uH=r(439382),uz=r(908301),uY=r(414354),uK=r(425451);let uq=(0,ts.Ju)(function(e){let t,r;let o=(0,n.wA)(),[i,s]=a.useState(""),d=(0,n.d4)(e=>e.deletedReposById),c=(0,n.d4)(e=>e.fileByKey),{reposToDelete:m,draftsToDelete:u,deleteAllDraftsAsync:_,isDeleteAll:p,isPermanentDeletion:f}=e,g=u.map(e=>e.name).concat(m.map(e=>e.name)),E=g.length>1;t=f?E?(0,N.t)("file_browser.draft_delete_modal.header_multiple_files_delete",{fileCount:g.length}):(0,N.t)("file_browser.draft_delete_modal.header_single_file_delete",{fileName:g[0]}):E?(0,N.t)("file_browser.draft_delete_modal.header_multiple_files_trash",{fileCount:g.length}):(0,N.t)("file_browser.draft_delete_modal.header_single_file_trash");let b=(t,r)=>{if(t.length>0){if(f){let r=t.reduce((e,t)=>(e[t.key]=!0,e),{});o(uz.YK({fileKeys:r,userInitiated:!0,onSuccessCallback:e.onDeleteSuccess}))}else{let r=t.reduce((e,t)=>(e[t.key]=o$.F.toSinatra(t),e),{});o(uz.VK({fileKeys:r,userInitiated:!0,onSuccessCallback:e.onDeleteSuccess,hideVisualBell:!0}))}}let a={};r.forEach(e=>{let t=d[e.id];if(t)a[e.id]=t;else{let t=e.default_file_key&&c[e.default_file_key];t&&(a[e.id]={repo:e,main_file:t})}}),r.length>0&&(f?o((0,uY.YM)({repoIds:Object.keys(a),userInitiated:!0})):o((0,uY.hT)({reposById:a,userInitiated:!0})))},v=()=>uK.k.deleteAllPersonalDrafts().then(()=>o(tM.F.enqueue({message:(0,N.t)("file_browser.draft_delete_modal.async_delete_drafts_scheduled")}))).catch(()=>o(tM.F.enqueue({message:(0,N.t)("file_browser.draft_delete_modal.async_delete_drafts_scheduled_error")}))),h=()=>{let{draftsToDelete:t,reposToDelete:r}=e;t.length+r.length>100?o(aR.s.error((0,N.t)("file_browser.draft_delete_modal.unable_to_delete",{maxSize:100}))):(e.setSynchronousFileTransferInProgress(t.length>0),b(t,r))},y=()=>{_?v():h(),e.onClose()},w=a.useMemo(()=>i.trim().toLowerCase()!==(0,N.t)("file_browser.draft_delete_modal.button_delete").toLocaleLowerCase(),[i]);r=f?E?(0,N.t)("file_browser.draft_delete_modal.permanently_delete_multiple_drafts",{fileCount:g.length}):(0,N.t)("file_browser.draft_delete_modal.permanently_delete_one_draft"):E?(0,N.t)("file_browser.draft_delete_modal.you_are_about_to_delete_multiple_drafts",{fileCount:g.length}):(0,N.t)("file_browser.draft_delete_modal.you_are_about_to_delete_single_draft",{fileName:g[0]});let T=f?a.createElement(Z.qM,{onClick:y,disabled:w,trackingProperties:{isDeletingDraftFromDTM:!0,isPermanentDeletion:f},dataTestId:"draft-delete-confirmation-button"},a.createElement("span",{"data-tooltip":(0,N.t)("file_browser.draft_delete_modal.draft_deletion_tooltip",{deletionString:(0,N.t)("file_browser.draft_delete_modal.button_delete")}),"data-tooltip-type":w?rH.Ib.TEXT:null,"data-tooltip-max-width":180,"data-tooltip-show-above":!0},(0,l.k)().ps_trashed_drafts_enabled?(0,N.t)("file_browser.draft_delete_modal.button_permanently_delete_files",{numFiles:g.length}):(0,N.t)("file_browser.draft_delete_modal.button_delete"))):a.createElement(rG.vd,{onClick:y,"data-testid":"draft-delete-confirmation-button",trackingProperties:{isDeletingDraftFromDTM:!0,isPermanentDeletion:f}},(0,N.tx)("file_browser.draft_delete_modal.button_delete_files",{numFiles:g.length}));return a.createElement(rV.fu,{name:"draftDeleteModal",properties:{itemCount:g.length,isDeleteAsync:!!_,isDeleteAll:!!p}},a.createElement(rJ.XV,{title:t,minWidth:480,maxWidth:480,onClose:e.onClose,truncateTitleText:!0,fixedCenter:!0},a.createElement("div",{className:"draft_delete_modal--modalContent--QYGIS"},a.createElement("p",null,r," ",!f&&a.createElement("p",null,a.createElement("br",null),(0,N.tx)("file_browser.draft_delete_modal.you_can_access_drafts_from_deleted_drafts_section",{fileCount:g.length}))),a.createElement("p",{className:"draft_delete_modal--confirmationTextSpacing---MQEW"},f&&(0,N.tx)("file_browser.draft_delete_modal.permanently_delete_multiple_drafts_confirmation",{deletionString:(0,N.t)("file_browser.draft_delete_modal.button_delete")})),a.createElement("form",{onSubmit:y},f&&a.createElement("div",null,a.createElement(uH.L,{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:"draft_delete_modal--deleteDraftsInput--pCTUB",dataTestId:"draft-delete-confirmation-input",onChange:e=>{s(e.currentTarget.value)},onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},spellCheck:!1,type:"text",value:i})),a.createElement("div",{className:"draft_delete_modal--footer--SRSo6"},a.createElement(Z.nR,{onClick:e.onClose},(0,N.tx)("modal.cancel")),T)))))},"DraftDeleteModal");var uJ=r(762759),uX=r(67391),uQ=r(405002),uZ=r(464758);let u0="drafts_to_move_page_view--fileCellDateSpan--xWiCm",u1="drafts_to_move_page_view--dateColumn--V3e9G drafts_to_move_page_view--column--jpRzM table--column--974RA",u2="drafts_to_move_page_view--emptyContentContainer--w1lwc",u4="drafts_to_move_page_view--emptyContentHeader--35cXt",u8=(0,n0.jz)(ls.ISO),u5=(0,ac.ck)("c9f2d8cbce5754a2b6e3e3e81adf5fe313429577"),u3=(0,ac.ck)("6212099329ba7714b869112a09f8dfffce71edf5");var u6=(e=>(e.DRAFT_FILES="draft-files",e.DELETED_DRAFT_FILES="deleted-draft-files",e))(u6||{}),u7=(e=>(e.NONE="NONE",e.SYNCHRONOUS_DELETION_OR_MIGRATION="SYNCHRONOUS_DELETION_OR_MIGRATION",e.ASYNC_FILE_MIGRATION="ASYNC_FILE_MIGRATION",e.ASYNC_FILE_DELETION="ASYNC_FILE_DELETION ",e.TRANSFER_COMPLETED="TRANSFER_COMPLETED",e))(u7||{});function u9(e){let t=e=>{switch(e){case"draft-files":return(0,N.t)("file_browser.drafts_to_move.drafts");case"deleted-draft-files":return(0,N.t)("file_browser.drafts_to_move.deleted_drafts");default:(0,I.xb)(e)}},r=t=>{let r=u6[t].replace(/-/g,"_");(0,j.Cu)({text:r,name:"Drafts to move tab switch"},"cta_clicked"),e.setSelectedTab(u6[t])},n=Object.keys(u6).map(n=>a.createElement(uV.r,{tab:u6[n],onClick:()=>r(n),isSelected:e.selectedTab===u6[n],tabName:t(u6[n]),key:n}));return a.createElement(nS.g2,{leftSide:a.createElement(uV.f,{tabs:n}),rightSide:[]})}function _e(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.selectedView),l=(0,oD.v)(),{item:o}=e,i=tJ.Tf.getFileOrMainBranchKey(o)??"",s=e=>a=>{a.detail>1&&!tJ.Tf.getTrashedAt(o)&&(mp({tile:e,index:0,dispatch:t,selectedView:r}),l(e,a),a.stopPropagation())},d=(0,o2.C)(o);return a.createElement("div",{className:x.s.inlineFlex.minW0.$},a.createElement("button",{className:"drafts_to_move_page_view--draftThumbnail--whTtS",onClick:s(o),"data-testid":`fileTile-${i}`},a.createElement(oF.e,{tile:o,noBorder:!0}),a.createElement("div",{className:"drafts_to_move_page_view--topLeftControls--kfCRe"},a.createElement(ru.w4,{size:16,type:d}))),a.createElement("div",{className:x.s.ml14.minW0.flex.flexColumn.itemSelfCenter.$},a.createElement("button",{className:"drafts_to_move_page_view--fileName--U3mn4",onClick:s(o)},tJ.Tf.getName(o)),e.shouldDisplayFileDates&&a.createElement("div",{className:"drafts_to_move_page_view--fileCellDatesSection--LFnvg"},a.createElement("span",{className:u0},(0,N.tx)("file_browser.drafts_to_move.file_created_at_label",{timeDifference:a.createElement(o0.h1,{date:tJ.Tf.getCreatedAt(o)})})),a.createElement("span",{className:u0},(0,N.tx)("file_browser.drafts_to_move.file_last_modified_at_label",{timeDifference:a.createElement(o0.h1,{date:tJ.Tf.getTouchedAt(o)??""})})))))}function _t({currentFileTransferState:e}){let t="dark"===(0,l2.DP)(),r=e=>a.createElement(a.Fragment,null,a.createElement(et.kt,{size:"large"}),a.createElement("p",{className:"drafts_to_move_page_view--transferContentHeader--ljikD"},(0,N.tx)("file_browser.drafts_to_move.file_transfer_header",{transferType:"ASYNC_FILE_MIGRATION"===e?(0,N.tx)("file_browser.drafts_to_move.file_transfer_migration_type"):(0,N.tx)("file_browser.drafts_to_move.file_transfer_deletion_type")})),a.createElement("p",null,(0,N.tx)("file_browser.drafts_to_move.file_transfer_description"))),n=()=>a.createElement("div",{className:"drafts_to_move_page_view--slideIn--c-NGK"},a.createElement("div",{className:"drafts_to_move_page_view--animatedContentContainer--z1sdh"},a.createElement(uX.Gv,{src:t?u5:u3,containerClassName:"drafts_to_move_page_view--allDoneGif--mwZxC",height:100,width:100}),a.createElement("p",{className:u4},(0,N.tx)("file_browser.drafts_to_move.empty_header")),a.createElement("p",null,(0,N.tx)("file_browser.drafts_to_move.empty_body_text")))),l=()=>a.createElement(et.kt,{size:"large"});return a.createElement("div",{className:u2},(()=>{switch(e){case"ASYNC_FILE_MIGRATION":case"ASYNC_FILE_DELETION ":return r(e);case"TRANSFER_COMPLETED":return n();default:return l()}})())}function _r(){let e=(0,n.wA)(),t=(0,n.d4)(e=>e.user?.personal_drafts_folder_id),r=(0,n.d4)(e=>e.fileKeysByFolderId),o=(0,n.d4)(e=>e.fileKeysByRepoId),i=(0,n.d4)(e=>e.repoIdsByFolderId),s=(0,n.d4)(e=>e.repos),d=(0,n.d4)(e=>e.fileByKey),c=(0,n.d4)(e=>e.selectedView),m=(0,n.d4)(e=>e.selectedBranchKeyByRepoId),_=(0,n.d4)(e=>e.userFlags),p=_.personal_draft_migration_scheduled,f=_.personal_draft_migration_completed,g=_.personal_draft_deletion_scheduled,E=_.personal_draft_deletion_completed,v=(0,n.d4)(e=>e.loadedFolders),h=(0,n.d4)(e=>e.deletedFilesByKey),y=(0,n.d4)(e=>e.deletedReposById),{windowInnerWidth:w}=(0,dy.l)(),T=(0,u.Rs)(eG.vXh,{}),I=(0,u.Rs)(eG.Jzf,{projectId:t??""},{enabled:!!t}),S=(0,oD.v)(),[C,k]=a.useState("draft-files"),[R,A]=a.useState(!1),[O,P]=a.useState("NONE"),[F,L]=a.useState(!1),[D,B]=a.useState(!1);a.useEffect(()=>{p&&(0,rY.rO)(p.updatedAt,f?.updatedAt)?P("ASYNC_FILE_MIGRATION"):g&&(0,rY.rO)(g.updatedAt,E?.updatedAt)?P("ASYNC_FILE_DELETION "):F?P("SYNCHRONOUS_DELETION_OR_MIGRATION"):P("NONE")},[p,f,g,E,F]),a.useEffect(()=>{e(e7.h3({orgId:null}))},[e]);let U="loaded"===T.status,$=a.useMemo(()=>{if(!U)return[];let e=[];return T.data?.currentUser?.draftsFolderId&&e.push(T.data.currentUser.draftsFolderId),e},[U,T]),j=a.useMemo(()=>I.data?.project?.status!==uj.tT.Loaded?new Set:new Set((I.data?.project.data?.undeletedFilesHighLimit??[]).map(e=>e.key)),[I]),W=a.useMemo(()=>{if(I.data?.project?.status!==uj.tT.Loaded)return new Set;let e=new Set;return(I.data?.project.data?.undeletedFilesHighLimit??[]).forEach(t=>{t.fileRepoId&&e.add(t.fileRepoId)}),e},[I]),V=a.useCallback(e=>j.has(e),[j]),H=a.useCallback(e=>W.has(e),[W]);a.useEffect(()=>$.forEach(t=>U&&e((0,G.jl)({folderId:t,loadedFolders:v}))),[v,$,e,U]);let{getConfig:z}=(0,b.I7)("ps_async_draft_move_limit",void 0,!0),Y=z().get("async_limit",100),K=U&&$.every(e=>e&&"loaded"===v[e]),q=a.useMemo(()=>Object.keys(h).map(e=>h[e]).filter(e=>!e.file_repo_id&&e.folder_id===t&&V(e.key)),[h,t,V]),J=a.useMemo(()=>Object.keys(y).map(e=>y[e]).filter(e=>e&&e.main_file&&e.main_file.folder_id===t&&e.repo&&H(e.repo.id)),[y,t,H]),X=a.useMemo(()=>$.flatMap(e=>i[e]).map(e=>s[e]).filter(e=>!!e&&H(e.id)),[$,s,i,H]),Q=a.useMemo(()=>$.flatMap(e=>r[e]).map(e=>d[e]).filter(e=>!!e&&V(e.key)),[$,d,r,V]);a.useEffect(()=>{let e=Q.length+X.length,t=q.length+J.length;K&&!D&&(0===e&&t>0&&k("deleted-draft-files"),B(!0))},[K,D,Q.length,X.length,J.length,q.length]);let et=a.useMemo(()=>Q.concat(q).map(e=>(0,tJ.fA)(e)),[Q,q]),er="deleted-draft-files"===C?q:Q,ea=a.useMemo(()=>er.map(e=>(0,tJ.fA)(e)),[er]),en=a.useMemo(()=>X.map(e=>{let t=o[e.id].map(e=>d[e]).filter(e=>!!e);return{type:tJ.nb.REPO,repo:e,branches:t,selectedBranchKey:m[e.id]}}),[X,m,d,o]),el=a.useMemo(()=>J.map(e=>({type:tJ.nb.REPO,repo:e.repo,branches:[e.main_file],selectedBranchKey:e.main_file?.key})),[J]),eo="deleted-draft-files"===C?el:en,ei=el.concat(en),es=ea.concat(eo),ed=et.length>0||ei.length>0,ec=es.length>0,[em,eu]=a.useState([]),e_=()=>{e(tm.Ce()),A(!1)},ep=(t,r)=>{e(tM.F.enqueue({message:(0,N.t)("visual_bell.files_moved_to_folder",{fileCount:r,folderName:t})})),L(!1),eu([])},ef=()=>{L(!1),eu([])},eg=e=>{let t=[],r=[];return e.forEach(e=>{e.type===tJ.nb.FILE&&t.push(e.file),e.type===tJ.nb.REPO&&r.push(e.repo)}),{draftsToMove:t,reposToMove:r}},eE=t=>{let{draftsToMove:r,reposToMove:a}=eg(em);A(!0),e(tm.to({type:uq,data:{isPermanentDeletion:t,draftsToDelete:r,reposToDelete:a,deleteAllDraftsAsync:em.length>Y,setSynchronousFileTransferInProgress:L,onDeleteSuccess:ef,onClose:e_}}))},eb=()=>{let{draftsToMove:t,reposToMove:r}=eg(em);A(!0),e(tm.to({type:uJ.K,data:{draftsToMove:t,reposToMove:r,moveAllDraftsAsync:em.length>Y,onMoveSuccess:ep,onClose:e_,setSynchronousFileTransferInProgress:L}}))},ev=function(e,t,r,n){let l=n>=1200,o=[{name:(0,N.t)("file_browser.drafts_to_move.table_header_name"),className:"drafts_to_move_page_view--nameColumn--sSZYF drafts_to_move_page_view--column--jpRzM table--column--974RA",getSortValue:e=>tJ.Tf.getName(e),cellComponent:e=>a.createElement(_e,{item:e,shouldDisplayFileDates:!l})}];return l&&o.push({name:(0,N.t)("file_browser.drafts_to_move.table_header_last_modified"),className:u1,getSortValue:e=>tJ.Tf.getTouchedAt(e)??"",cellComponent:e=>{let t=tJ.Tf.getTouchedAt(e);return t?a.createElement(o0.h1,{date:t}):""}},{name:(0,N.t)("file_browser.drafts_to_move.table_header_created"),className:u1,getSortValue:e=>tJ.Tf.getCreatedAt(e),cellComponent:e=>a.createElement(o0.h1,{date:tJ.Tf.getCreatedAt(e)})}),o.push({name:"",className:"drafts_to_move_page_view--moveButtonColumn--Mvc2P drafts_to_move_page_view--column--jpRzM table--column--974RA",cellComponent:n=>0===r?a.createElement(a.Fragment,null,a.createElement(Z.tM,{className:M()("drafts_to_move_page_view--openDraftButton--zXZGf",x.s.if(!!tJ.Tf.getTrashedAt(n),x.s.invisible).$),onClick:e=>t(e,n)},(0,N.tx)("file_browser.drafts_to_move.open_draft_button")),a.createElement(Z.tM,{className:"drafts_to_move_page_view--moveDraftButton--GmBWa",onClick:t=>e(t,n)},(0,N.tx)("file_browser.drafts_to_move.move_draft_button"))):a.createElement(a.Fragment,null)}),o}((t,r)=>{let{draftsToMove:a,reposToMove:n}=eg([r]);e(tm.to({type:uJ.K,data:{draftsToMove:a,reposToMove:n,onMoveSuccess:ep,onClose:e_,setSynchronousFileTransferInProgress:L}})),t.stopPropagation()},(t,r)=>{mp({tile:r,index:0,dispatch:e,selectedView:c}),S(r,t),t.stopPropagation()},em.length,w),[eh,ey,ew]=(0,uG.z)({columnName:(0,N.t)("file_browser.drafts_to_move.table_header_last_modified"),isReversed:!0},es,ev),eT=a.createElement("div",{className:u2},a.createElement("span",{className:u4},(0,N.tx)("file_browser.drafts_to_move.empty_header")),a.createElement("span",null,(0,N.tx)("file_browser.drafts_to_move.empty_content_description",{tab:a.createElement("button",{className:"drafts_to_move_page_view--emptyContentTab--GKlRP",onClick:()=>k("draft-files"===C?"deleted-draft-files":"draft-files")},"draft-files"===C?(0,N.t)("file_browser.drafts_to_move.deleted_drafts"):(0,N.t)("file_browser.drafts_to_move.drafts"))})));if("NONE"!==O)return a.createElement(_t,{currentFileTransferState:O});let eI=em.length<=0||em.length>Y,ex="deleted-draft-files"===C||!(0,l.k)().ps_trashed_drafts_enabled,eN=a.createElement(ee.A,{loadingElementClassName:"drafts_to_move_page_view--loadingPage--ZZyqG",loadingElementId:"loading-content-pane",loaded:K},ec?a.createElement(a.Fragment,null,a.createElement("div",{className:"drafts_to_move_page_view--tableWrapper--b-sz2"},a.createElement(uQ.Cj,{actionBar:e=>a.createElement("div",{className:"drafts_to_move_page_view--actionBarButtons--RUREB"},!eI&&a.createElement(Z.rb,{className:"drafts_to_move_page_view--deleteDraftsButton--Aesaa",onClick:()=>eE(ex)},ex?(0,N.tx)("file_browser.drafts_to_move.bulk_delete_drafts_button"):(0,N.tx)("file_browser.drafts_to_move.bulk_trash_drafts_button")),a.createElement(Z.vd,{className:"drafts_to_move_page_view--moveDraftsButton--fZf6H",disabled:eI,onClick:eb},(0,N.tx)("file_browser.drafts_to_move.bulk_move_drafts_button",{numSelected:em.length}))),actionBarClassName:M()("drafts_to_move_page_view--actionBar--BbYQh",{"drafts_to_move_page_view--actionBarHidden--l4K4A":R}),columns:ev,emptyContent:"",getItemKey:e=>tJ.Tf.getFileOrMainBranchKey(e)??"",isLoading:!uZ.s1,itemTypeContext:{itemType:"draftToMove",getSelectedCountString:e=>(0,N.t)("file_browser.drafts_to_move.selected_count_files",{numSelected:e})},items:ew,minContentWidth:728,onSelectedItemsChange:eu,onSetSortState:ey,rowHeightOverride:u8,scrollContainerInnerClassName:"drafts_to_move_page_view--scrollContainer--yiQAz",selectAllDisabled:ew.length>Y,shouldRoundBordersForSelectedRows:!0,sortState:eh,styleOverrideClassNames:{row:"drafts_to_move_page_view--row--v9ugA",header:"drafts_to_move_page_view--header--qsyde",unselectedCheckbox:"drafts_to_move_page_view--visibleCheckbox--UOqli",batchActionClearButton:"drafts_to_move_page_view--batchActionClearButton--Qk923"}}))):ed?eT:a.createElement(_t,{currentFileTransferState:"TRANSFER_COMPLETED"}));return(0,rV.T8)(a.createElement(lC.r,{content:eN,viewbar:ed&&a.createElement(a.Fragment,null,a.createElement("div",{className:"drafts_to_move_page_view--viewbar--wJ6Pu"},a.createElement("div",{className:"drafts_to_move_page_view--viewbarWarning--6T7y-"},a.createElement(uW.E,{className:"drafts_to_move_page_view--yellowIcon--xHN3r"}),a.createElement("div",null,a.createElement("h1",{className:"drafts_to_move_page_view--viewbarHeading--02fvs"},(0,N.tx)("file_browser.drafts_to_move.viewbar_heading")),a.createElement("ul",{className:"drafts_to_move_page_view--viewbarDescription--dV8s3"},a.createElement("li",null,(0,N.tx)("file_browser.drafts_to_move.move_drafts_below")),a.createElement("li",null,(0,N.tx)("file_browser.drafts_to_move.drafts_for_personal_work")),a.createElement("li",null,(0,N.tx)("file_browser.drafts_to_move.access_to_drafts"))),a.createElement("div",{className:"drafts_to_move_page_view--viewbarActions--v-cwt"},a.createElement(Z.vd,{className:"drafts_to_move_page_view--moveAllDraftsButton--9-TlX",onClick:()=>{A(!0),e(tm.to({type:uJ.K,data:{reposToMove:ei.map(e=>e.repo),draftsToMove:et.map(e=>e.file),onMoveSuccess:ep,isMoveAll:!0,moveAllDraftsAsync:et.length>Y,onClose:e_,setSynchronousFileTransferInProgress:L}}))}},(0,N.tx)("file_browser.drafts_to_move.move_all_drafts_button")),a.createElement(Z.NY,{className:"drafts_to_move_page_view--learnMoreButton--lUnQ9 drafts_to_move_page_view--moveAllDraftsButton--9-TlX",href:"https://www.figma.com/blog/updates-to-how-drafts-work/",target:"_blank"},(0,N.tx)("file_browser.drafts_to_move.viewbar_learn_more_link")))))),a.createElement("div",{className:"drafts_to_move_page_view--tabViewBarContainer--lsoH0"},a.createElement(u9,{selectedTab:C,setSelectedTab:k})))}),rz.e0.FILE_BROWSER,{view:"draftsToMove",selectedTab:C})}function _a({org:e,currentResourceId:t,hasTrailingDivider:r}){let l=(0,n.wA)();return a.createElement(id.J5,{text:e.name,onClick:r=>{l(eS.$T({view:"org",orgId:e.id,orgViewTab:tg.X.HOME})),(0,j.Cu)({clickedResourceType:"org",clickedResourceId:e.id,currentResource:t,orgId:e.id})},hasTrailingDivider:r})}var _n=r(776412);function _l({planEntity:e}){return a.createElement(aV.Y,{spacing:4},a.createElement(_n.H,{entityId:e.id,entityName:e.name,imgUrl:e.imgUrl??void 0}),a.createElement(S.E,{fontSize:13,color:"secondary"},e.name))}function _o({team:e,currentResourceId:t,orgId:r,hasTrailingDivider:l}){let o=(0,n.wA)();return a.createElement(id.J5,{text:e.name,onClick:a=>{o(eS.$T({view:"team",teamId:e.id})),(0,j.Cu)({clickedResourceType:"workspace",clickedResourceId:e.id,currentResource:t,orgId:r})},hasTrailingDivider:l})}var _i=r(573502);function _s({workspace:e,currentResourceId:t,orgId:r,hasTrailingDivider:n}){let l=(0,_i.$)(),o=e.id===lb.O,i=!e.canRead;return a.createElement(id.J5,{text:o?(0,N.t)("breadcrumbs.unassigned_license_group"):i?(0,N.t)("breadcrumbs.private_workspace_ellipses"):e.name,onClick:a=>{l(e.id,a),(0,j.Cu)({clickedResourceType:"workspace",clickedResourceId:e.id,currentResource:t,orgId:r})},hasTrailingDivider:n,disabled:o||i})}function _d({folderId:e}){let t=(0,u.Rs)(eG.L8O,{projectId:e}),r=t.data?.project||null,n=(0,H.dq)(),l=(0,eV.X$)("FolderPageBreadcrumbs").unwrapOr(null),o=l?.key.type===eF.OL.ORG;if(!r?.team)return null;if(o||r.team.org?n!==r.team.org?.id:!r.team.canRead)return a.createElement(_l,{planEntity:r.team.org??r.team});let i=(0,K.Zr)(r.team.org);return a.createElement(id.A5,null,r.team.org&&a.createElement(_a,{org:r.team.org,currentResourceId:r.id,hasTrailingDivider:!0}),(r.team.workspace||i)&&r.team.org&&a.createElement(_s,{workspace:r.team.workspace??{id:lb.O},currentResourceId:r.id,orgId:r.team.org.id,hasTrailingDivider:!0}),a.createElement(_o,{team:r.team,currentResourceId:r.id,orgId:r.team.org?.id,hasTrailingDivider:!1}))}var _c=r(198850);let _m="seen_folder_settings_disconnected_project_share_copy_onboarding",_u="FOLDER_SETTINGS_DISCONNECTED_PROJECT_SHARE_COPY_ONBOARDING_KEY",__=(0,em.r1)(_m);function _p({folder:e}){let t=(0,eo.md)(__),r=a.useMemo(()=>{let t=(0,Q.oA)(e.mostRecentResourceConnection),r=!!t&&!!t.disconnectedAt,a=!!t&&!t.assetTransferRequestId,n=e.canTransferCopy;return a2.Qw.loaded(r&&a&&n)},[e]),{show:n,isShowing:l,complete:o}=(0,ec.e)({overlay:eg.j9$,priority:e_.N.DEFAULT_MODAL},[t,r]);(0,c.h)(()=>{n({canShow:(e,t)=>!e&&t})});let i=e=>a.createElement("span",{className:"folder_settings_disconnected_project_share_copy_onboarding_overlay--planName--0GWpT"},e);return a.createElement(ep.rq,{arrowPosition:ef.F_.TOP,clickOutsideToHide:!0,description:(0,N.tx)("resource_connection.onboarding.share_a_project_copy_onboarding_description",{hostPlanName:i(Q.oA(e.mostRecentResourceConnection)?.hostPlanName),connectedPlanName:i(Q.oA(e.mostRecentResourceConnection)?.connectedPlanName)}),emphasized:!0,isShowing:l,onClose:o,primaryCta:{label:(0,N.tx)("general.got_it"),ctaTrackingDescriptor:ed.c.GOT_IT,type:"button",onClick:o},shouldCenterArrow:ef.EL.FALLBACK,targetKey:_u,title:(0,N.tx)("resource_connection.onboarding.share_a_project_copy_onboarding_title"),trackingContextName:"seen folder settings disconnected project share copy onboarding overlay",userFlagOnShow:_m})}function _f(e){let{selectedView:t,userFlags:r,userTeamFlags:l,userEduVerified:o,isFreeUser:i,userAnalyticsData:s,...d}=(0,a4.R)(e=>({selectedView:e.selectedView,userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,userEduVerified:!!e.user?.student_validated_at,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData,...(0,ao.getPermissionsState)(e)})),c=(0,n.wA)(),m=(0,u.Rs)(eG.UpR,{}),{teamId:_,selectedTab:f}=e,g=d.teams[_]??null,E=!!g?.org_id,b=!!g?.subscription,v=_&&(0,ao.canAdminTeam)(_,d),h=(0,u.Rs)((0,eG.LKQ)((0,aa._X)(aa.Pw.GROUP_5)&&_?{teamId:_}:null)),y=a.useMemo(()=>h.transform(({team:e})=>!!e?.canAdmin),[h]),w=(0,an.MF)({oldValue:p.Qw.loaded(v),newValue:y,label:an.A5.TeamUpgradeBanner.canAdminTeam,enableFullRead:(0,aa.DQ)(aa.Pw.GROUP_5)}).unwrapOr(!1);(0,a.useEffect)(()=>{_&&!E&&b&&w&&c(uR.Be({teamId:_}))},[c,_,E,b,w]);let T=(0,n.d4)(e=>e.teamBilling?.summary),I=uS(eF.vt.TEAM,g,_,{selectedView:t,userFlags:r,userTeamFlags:l,selectedTab:f,isFreeUser:i,userAnalyticsData:s,eduPeriodEnd:m.data?.currentUser?.eduPeriodEnd,billingSummary:T,...d},c,an.A5.TeamUpgradeBanner.bannerContent).unwrapOr(null);if(!I)return a.createElement("div",null);let x=uk({resourceType:eF.vt.TEAM,teamId:_},I),N=I.severity===uo.c.WARN?ui:"",S=I.bannerClassName||"",C=`${uE} ${N} ${S}`;return a.createElement("div",{className:C},a.createElement(uP,{...I,tracking:x}))}var _g=r(679111);function _E({folderId:e,pinnedFiles:t,tileActions:r}){let l=(0,n.wA)(),o=(0,eC._6)(),i=(0,Y.TA)(),{showing:s,show:d,data:c}=(0,oM.L)(),m=(0,oD.v)(),u=a.useCallback((t,r,a)=>{m(t,r);let n=t.type===tJ.nb.PINNED_FILE?t.file:null;(0,j.E9)(j.gH,n,{entrypoint:a,selectedView:o.view,resourceType:"folder",resourceId:e,pinDescription:"file open from pinned files for file named "+n?.name})},[m,o.view,e]),_=a.useCallback((e,t)=>{u(_h(e.file),t,"pinned files")},[u]),p=a.useCallback((e,t,r)=>{l(tY.an()),l(tY.PW({type:t8.F.PINNED_FILES,keys:e.map(e=>e.file.key)})),d({data:{tile:_h(e[0].file),targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:r}})},[l,d]),f=a.useCallback(t=>{if(1!==t.length)return;let r=t[0];r?.pinnedByUser?.id===i&&l(_g.z6({folderId:e,fileKey:r.file.key}))},[i,l,e]),g=a.useMemo(()=>t.filter(({file:e})=>!!e).map(e=>_h(e.file)),[t]),E=(0,tJ.nw)(g),b=a.useMemo(()=>t.sort((e,t)=>e.file.createdAt>t.file.createdAt?1:-1),[t]);return a.createElement("div",{className:x.s.px32.pb8.m0.$},t.length>0?a.createElement(oU.A,{handleContextMenu:p,items:b,doNotFocusOnLoad:!0,getAriaLabel:e=>e.file.name,viewType:oj.XU.GRID,handleOpenItem:_,handleDeleteKey:f,gridViewProps:{containerStyle:_y.grid,renderTile:e=>a.createElement(_b,{pinnedFile:e,isDropdownOpen:s}),renderTileFooter:e=>a.createElement(_v,{pinnedFile:e}),renderTileDragImage:e=>a.createElement(r_.NM,{file:e.file,noBorder:!0})}}):a.createElement("div",null),(()=>{let e=c?.tile??null;return a.createElement(oB.i,{tile:e,selectedTiles:E,tileActions:r,openTile:t=>{e&&u(e,t,"pinned files: context menu")},dropdownVisible:s})})())}function _b({pinnedFile:e}){let t=_h(e.file);return a.createElement(oF.e,{tile:t,noBorder:!0,size:rN.y.SMALL})}function _v({pinnedFile:e}){return a.createElement("div",{className:x.s.pt8.flex.flexColumn.$},a.createElement("span",{className:x.s.ellipsis.textBodyLargeStrong.truncate.$},e.file.name),a.createElement(S.E,{truncate:!0,showTooltipWhenTruncated:!0,color:"secondary"},(0,N.t)("tile.file_tile.pinned_by_user",{name:e.pinnedByUser?.name??""})))}function _h(e){return{type:tJ.nb.PINNED_FILE,file:e}}let _y={grid:{gridTemplateColumns:"x1g5i94c",userSelect:"x87ps6o",$$css:!0}};var _w=r(124810),_T=r(926036),_I=r(772283),_x=r(514019),_N=r(530292),_S=r(654574),_C=r(240176),_k=r(944239);let _R=new Set(["PM","ENG","DES","MKT","UR"]),_A=(e,t)=>e?_I.Dw.loadingKeyForPayload({shelfType:sP.cS.FILE_BROWSER_RECOMMENDED_TEMPLATES,filterLabel:t}):_I.sz.loadingKeyForPayload({shelfType:sP.cS.FILE_BROWSER_RECOMMENDED_TEMPLATES}),_O=(0,_k.n)(e=>(function(e){if(!e)return"OTH";let t={"software-development":"ENG","user-research":"UR",design:"DES",marketing:"MKT","product-management":"PM",other:"OTH"};if(e in t)return t[e];let r={"project-manager":"PM",designer:"DES",developer:"ENG",marketer:"MKT","product-manager":"PM",consultant:"OTH",sales:"MKT","ux-researcher":"UR",student:"OTH",educator:"OTH"};return e in r?r[e]:e.endsWith("-developer")?"ENG":e.endsWith("-designer")?"DES":e.includes("Eng")||e.includes("Dev")?"ENG":e.includes("Des")?"DES":e.includes("Lead")||e.includes("Man")?"PM":"OTH"})(e?.profile?.job_title??"OTH"));var _P=r(543177),_F=r(922484),_L=r(152545),_D=r(140497),_M=r(892576);let _B=[eF._Y.WHITEBOARD,eF._Y.SLIDES],_U=(0,eo.eU)(!1);function _$(e){let t=(0,n.wA)(),r=_O((0,Y.iZ)()),l=_A(!1,r),o=(0,_F.oh)(l),i=(0,_F.mC)(l),s=_R.has(r)?r:sP.iF.ALL,d=(0,eo.Xr)(_U);a.useEffect(()=>(d(!0),()=>d(!1)),[d]),a.useEffect(()=>{if(!o&&!i)return t(_I.Dw({shelfType:sP.cS.FILE_BROWSER_TEMPLATES_BAR,filterLabel:s}))},[o,i,t,r,s]);let c=(0,n.d4)(e=>e.communityHub.shelves[sP.cS.FILE_BROWSER_TEMPLATES_BAR]||[]),m=a.useMemo(()=>{let e=new Map;return c.forEach(t=>{e.set(t.id,t.shelf_content.map(e=>e))}),e},[c]),u=a.useCallback(e=>{switch(e){case"All":return(0,N.t)("file_browser.templates_shelf.for_you");case"Brainstorm":return(0,N.t)("file_browser.templates_shelf.brainstorm");case"Reviews":return(0,N.t)("file_browser.templates_shelf.reviews");case"Meetings":return(0,N.t)("file_browser.templates_shelf.meetings");case"Planning":return(0,N.t)("file_browser.templates_shelf.planning");case"Diagram":return(0,N.t)("file_browser.templates_shelf.diagram");default:return null}},[]),_=a.useMemo(()=>{let e=[];return c.forEach(t=>{t.shelf_content.length>0&&e.push({tabKey:t.id,tabTitle:t.title,modifiedTabTitle:u(t.title)})}),e},[c,u]);return 0===_.length?null:a.createElement(rV.fu,{name:"topbar_templates_shown"},a.createElement("div",{className:"templates_bar--container--0nCIh"},a.createElement(_j,{tabNameToTemplatesMap:m,folderId:e.folderId,onClose:e.onClose,tabList:_,newFileFrom:e.newFileFrom})))}function _j(e){let[t,r]=a.useState(e.tabList[0]),[n,l]=a.useState(e.tabNameToTemplatesMap.get(t.tabKey)??[]),[o,i]=a.useState(null),{sizeRef:s,numTemplates:d,templateWidth:c,templateHeight:m}=function(e){let t=(0,a.useRef)(null),[r,n]=(0,a.useState)(0),l=Math.min(r-4,2229);(0,a.useLayoutEffect)(()=>{n(t?.current?.offsetWidth??0)},[n,t]),(0,_T.wY)(t,e=>{n(e.width)});let o=(0,a.useMemo)(()=>l?Math.min(Math.floor((l+16)/187),e):0,[l,e]),i=o&&l?Math.floor((l-16*(o+1))/o):0,s=i?Math.floor(136*i/171):0;return{sizeRef:t,numTemplates:o,templateWidth:i,templateHeight:s}}(n?.length??0);a.useEffect(()=>{if(!e.tabList||0===e.tabList.length)return;let t=e.tabList[0];r(t),l(e.tabNameToTemplatesMap.get(t.tabKey)??[])},[e.tabList,e.tabNameToTemplatesMap]),a.useEffect(()=>{l(e.tabNameToTemplatesMap.get(t.tabKey)??[])},[t,e.tabNameToTemplatesMap]);let u=a.createElement(_H,{tabs:e.tabList,activeTab:t,setActiveTab:r});return a.createElement(a.Fragment,null,a.createElement("div",{className:"templates_bar--headerContainer--3-3sN"},a.createElement("div",{className:"templates_bar--headerLeft--p4T6m"},a.createElement(_W,null)),a.createElement("div",{className:"templates_bar--headerEnd--rI6SI"},u),a.createElement("div",{className:"templates_bar--headerRightOld--j-Via"},a.createElement("div",{className:"templates_bar--closeButton--XeG8e"},a.createElement(tO.K,{onClick:e.onClose,"aria-label":(0,N.t)("general.close")},a.createElement(_w.A,null))))),a.createElement("div",{className:"templates_bar--body--PKvm-",ref:s},a.createElement("div",{className:"templates_bar--tilesContainer--OHkyf","data-testid":"templates-bar-tiles-container"},n?.slice(0,d??0).map((r,n)=>a.createElement("div",{key:r.id,style:{width:c,height:m,marginRight:16}},a.createElement(_V,{hubFile:r,rank:n,folderId:e.folderId,tab:t,duplicatingHubId:o,setDuplicatingHubId:i,newFileFrom:e.newFileFrom}))))))}function _W(){return a.createElement("div",{className:"templates_bar--headerTitle--6BSKy text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,N.tx)("file_browser.templates_shelf.interim_title"))}let _G=e=>e===eF.y4.WHITEBOARD?"whiteboard":e===eF.y4.SLIDE_TEMPLATE?"piper":"design";function _V(e){let t=(0,n.wA)(),r=e.hubFile,l=r.id,o=null!==e.duplicatingHubId,i=e.duplicatingHubId===l,s=r&&(0,_P.a6)(e.hubFile),d=a=>{a.stopPropagation(),e.setDuplicatingHubId(l),t(_x.rL({hubFileId:l,hubFileName:s?.name||"this file",openInNewTab:!1,folderId:e.folderId,source:iu.f6.FILE_BROWSER_TEMPLATES_BAR,callback:t=>{e.setDuplicatingHubId(null),(0,j.Cu)({fileKey:t,rank:e.rank,templateId:l,productType:(0,_N.L)(r.viewer_mode)},"topbar_template_selected"),(0,_S._)("resource_inserted",{fileKey:t,resourceId:l,resourceName:s.name,resourceType:"template",templateType:_L.n.HubFile,triggeredFrom:e.newFileFrom,category:e.tab.tabTitle,templateCategory:e.tab.tabKey})}}))};return r?a.createElement(_D.zq,{containerStyle:"templates_bar--templatesTileContainer--yy7Q2",onClick:o?void 0:d,image:a.createElement(_D.FK,{backgroundColor:(0,_C.Cn)(r.client_meta),removeBorder:!0,className:"templates_bar--templatesTileImage--y0sA9",customRatioClassName:"templates_bar--imageRatio--enx9l"},a.createElement(_D.zx.Cover,null,a.createElement("button",{className:"templates_bar--hoverOverlay--bQBil browse_templates_modal--hoverOverlay--sFj3y",onClick:d,disabled:o})),a.createElement(_D.zx.Center,null,a.createElement("div",{className:M()("templates_bar--useTemplateButton--4KFhz",x.s.bRadius6.$),tabIndex:-1},a.createElement(st.v,{mode:_G(r.viewer_mode)},a.createElement(lR.$n,{onClick:d,disabled:o},i?a.createElement(lU.k,null):(0,N.tx)("file_browser.new_file_creation_topbar.use_templates"))))),a.createElement(_M.Ho,{image:e.overrideThumbnailUrl||r.thumbnail_url||void 0,isSet:!!e.overrideThumbnailUrl||!!r.thumbnail_is_set,isWhiteboard:r.viewer_mode===eF.y4.WHITEBOARD,hubFileId:r.id,alt:(0,_P.a6)(r).name,imageClassName:r.viewer_mode===eF.y4.SLIDE_TEMPLATE?"templates_bar--slidesThumbnailImage--uJ-8c templates_bar--thumbnailImage--ymHpx":"templates_bar--thumbnailImage--ymHpx",resizedThumbnailUrls:r.resized_thumbnail_urls})),bottomRow:a.createElement(_D.Wf.NameAndFileIconMetadata,{name:s.name,className:"templates_bar--tilesBottomRowContainer--GxsNx",textClassName:"templates_bar--tileBottomRowNameOnly--SMVhN text--fontPos11--2LvXf text--_fontBase--QdLsd",viewerMode:r.viewer_mode}),bottomRowStyle:"templates_bar--bottomRowStyle--a32JN"}):null}function _H(e){return a.createElement("div",{className:"templates_bar--tabs--a8HOf text--fontPos13--xW8hS text--_fontBase--QdLsd",style:el.sx.add({columnGap:"26px"}).$},e.tabs.map(t=>a.createElement(_z,{key:t.tabKey,tab:t,isActive:t.tabKey===e.activeTab.tabKey,setActiveTab:e.setActiveTab})))}function _z(e){return a.createElement(no.E,{className:M()("templates_bar--tab---drzF text--fontPos11--2LvXf text--_fontBase--QdLsd",{"templates_bar--activeTab--c7Hid":e.isActive}),onClick:()=>{(0,j.Cu)({triggeredFrom:"file-browser",category:e.tab.tabTitle},"template_shelf_category_toggled"),e.setActiveTab(e.tab)}},e.tab.modifiedTabTitle??e.tab.tabTitle)}var _Y=r(442393),_K=r(695920),_q=r(877146),_J=r(559372),_X=r(766930),_Q=r(576076),_Z=r(692853),_0=r(710923);let _1="connected_folder_empty_view--subtitle--eKq7-",_2="connected_folder_empty_view--betaTag--xypkD";function _4(e){var t;let{lgFolder:r,hostPlanName:l,user:o}=e,i=(0,n.wA)(),s=(0,_K.RR)(),{properties:d}=(0,rV.j6)(),{handleUpgrade:c,getUpgradeEligibility:m,hasPendingRequest:u,getUpgradePathway:_}=(0,rm.wH)({folderId:r.id}),p=r.canCreateDesignFileWithReasons.result&&r.canEdit,g=(e=>{if(s){let t=m(eF.G_.DESIGN,p);return t===_Z.q.CAN_UPGRADE?((0,j.Cu)({...d,trackingDescriptor:ed.c.CREATE_FILE,isBillingRemodelEnabled:s,licenseType:eF.G_.DESIGN,billableProductKey:(0,_J.F2)(eF.G_.DESIGN),needsUpgrade:!0}),c({afterUpgradeCallback:e,licenseType:eF.G_.DESIGN,upgradeReason:_0.i.CREATE_FILE,entryPoint:_q.tc.CREATE_FILE_EMPTY_CONNECTED_PROJECT})):t===_Z.q.CANNOT_UPGRADE?()=>i(tM.F.enqueue({message:"Can't upgrade",error:!0})):e}return f.lQ})((0,s$.$)({isDraftsFolder:(0,rf.T9)(r),editorType:eF._Y.DESIGN,newFileFrom:iu.f6.FILE_BROWSER_CONNECT_FOLDER_EMPTY_PAGE,contextClicked:"empty_connected_project_page",folderId:r.id})),E=()=>s&&!p&&m(eF.G_.DESIGN)===_Z.q.CANNOT_UPGRADE&&u(eF.G_.DESIGN),b=r.team?.org?.id,v=(0,ey.R$)(o,b),h=(0,_Q.ud)(r)&&!v;return a.createElement("div",{className:"connected_folder_empty_view--connectEmptyStateContainer--YGdYq"},a.createElement("div",{className:"connected_folder_empty_view--connectedEmptyHeading--UNTZ6"},(0,N.tx)("file_browser.folder.what_s_a_connected_project_without_files")),a.createElement("div",{className:"connected_folder_empty_view--creationButtonsContainer--vedbb"},a.createElement(_8,{hideDisabledTooltip:E(),isDisabled:E(),onClick:g,showRequestSentTag:E(),showRequestTag:s&&!p&&m(eF.G_.DESIGN)===_Z.q.CAN_UPGRADE&&_(eF.G_.DESIGN)!==_Z.J.AUTO_PATHWAY&&!u(eF.G_.DESIGN),subtitle:(0,N.t)("file_browser.folder.create_a_file_in_any_figma_product"),title:(0,N.t)("file_browser.folder.start_from_scratch")}),h&&a.createElement(_8,{title:(0,N.t)("file_browser.folder.use_existing_work"),onClick:()=>{r&&(i(e7.gN(r.id)),i((0,_X.L)()))},subtitle:(0,N.t)("file_browser.folder.import_images_sketch_files_and_pdfs")})),a.createElement("div",{className:_1},a.createElement(_Y.l,{className:"connected_folder_empty_view--libraryIcon--jFzUk"}),a.createElement("div",null,(0,N.tx)("file_browser.folder.the_host_team_can_add_libraries",{hostPlanName:a.createElement("span",{className:"connected_folder_empty_view--bold--6ZKfX"},l),learnMoreLink:a.createElement("a",{className:"connected_folder_empty_view--learnMore--4py5l modal--blueLink--9GcJu blue_link--blueLink--9rlnd",href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects#h_01JMJDKJFD68CH88F663KG08AJ",target:"_blank"},t||(0,N.tx)("resource_connection.request_modal.learn_more"))}))))}function _8(e){let t=e.isDisabled,r=e.onClick,n=a.useRef(null),l=a.useCallback(e=>{r(e),n.current?.blur()},[r]);return a.createElement("button",{className:M()("connected_folder_empty_view--creationButton--CQHPo",t&&"connected_folder_empty_view--disabled--eER6x"),ref:n,"data-testid":"connect_file_browser_create_file_button",tabIndex:0,disabled:t,onClick:t?void 0:l,"data-tooltip":e.isDisabled&&!e.hideDisabledTooltip?(0,N.t)("file_browser.creation_buttons.disabled_by_organization"):void 0,"data-tooltip-type":rH.Ib.TEXT},a.createElement("div",{className:"connected_folder_empty_view--creationIcon--ieYan"},a.createElement(lk.e,null)),a.createElement("div",{className:"connected_folder_empty_view--productNameContainer--w-3vG"},a.createElement("span",{className:"connected_folder_empty_view--productName--19C6G"},e.title),a.createElement("span",{className:_1},e.subtitle)),e.showRequestTag&&a.createElement(rW.Ex,{className:_2,text:(0,N.t)("upgrades.request"),color:rW.zE.DEFAULT_TRANSLUCENT}),e.showRequestSentTag&&a.createElement(rW.Ex,{className:_2,text:(0,N.t)("upgrades.request_sent"),color:rW.zE.DEFAULT_TRANSLUCENT}))}let _5={open:!0,openNewTab:!0,restoreFromVersion:!0,share:!0,copyLink:!0,rename:!0,duplicate:!0,delete:!0,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToFolder:!0,pinToWorkspace:!0};function _3(e){let t=(0,n.wA)(),r=(0,u.Rs)(eG.CH9,{folderId:e.folderId}),l=a.useMemo(()=>"loaded"===r.status?(r.data.project?.pinnedFiles||[]).filter(e=>!!e.file):[],[r]);a.useEffect(()=>{t(_g.MR({folderId:e.folderId,fileKeys:l.map(e=>e.file.key)}))},[l,t,e.folderId]);let o=a.useCallback(()=>{t(tY.an())},[t]);return 0!==l.length?a.createElement("div",null,a.createElement("div",{className:"folder_page_view--pinnedHeader--YJufT",onMouseDown:o},a.createElement(S.E,{fontSize:13,color:"secondary"},(0,N.tx)("file_browser.folder.pinned"))),a.createElement(_E,{pinnedFiles:l,folderId:e.folderId,tileActions:e.tileActions})):null}function _6({files:e,filesByRepoId:t,folderId:r,hasBanner:l,isEditingLocked:o,lgFolder:i,repos:s,team:d,activeProjectConnection:c,infiniteScrollOptions:m}){let u=(0,Y.Pc)(),_=(0,ew.R)(d?.id),p=(0,ew.jn)(),f=(0,n.d4)(e=>_7(r,e.tileSortFilterStateByView)),g=(0,n.d4)(e=>e.selectedBranchKeyByRepoId),b=(0,eT.vt)(d?.id),v=!!i&&(0,sM.f3)(i),h=v&&!o,y=h?"":(0,N.t)("file_browser.folder.no_files_yet"),{shouldShowTemplatesBar:w,hideTemplatesBar:T}=function({folderId:e,hideTemplatesUserFlag:t,isShowingLockedRedesign:r,additionalVisibilityRequirements:l=!0}){let o=(0,n.wA)(),i=(0,Y.TA)(),{data:s}=(0,sM.nt)(e),d=!!s&&_B.every(e=>(0,sM.d6)(s,e)),c=(0,n.d4)(eL.yK),m=(0,n.d4)(e=>e.userFlags[t]),u=(0,eV.X$)("useTemplatesBarVisibility").unwrapOr(null),_=u?.tier===eF.Ag.PRO||u?.tier===eF.Ag.STUDENT;return{shouldShowTemplatesBar:!E.Ay.mobile&&d&&!c&&!m&&!r&&_&&l,hideTemplatesBar:(0,a.useCallback)(()=>{o(eA.b({[t]:!0})),(0,j.Cu)({userId:i,opening:!1},"topbar_recommended_templates_toggled")},[i,o,t])}}({folderId:r,hideTemplatesUserFlag:"hide_recommended_templates_in_projects",isShowingLockedRedesign:b||p&&_,additionalVisibilityRequirements:!l}),I=[...(0,a.useMemo)(()=>e.map(e=>(0,tJ.fA)(e)),[e]),...s.filter(e=>!e.trashed_at).map(e=>({type:tJ.nb.REPO,repo:e,branches:t[e.id],selectedBranchKey:g[e.id]||""}))];return a.createElement(cY.B,{onShouldFetchNextPage:m.onShouldFetchNextPage,isFetchingNextPage:m.isFetchingNextPage},a.createElement("div",{className:"folder_page_view--container---glyH"},w&&a.createElement(_$,{folderId:r,newFileFrom:iu.f6.FILE_BROWSER_TOPBAR_FOLDER,onClose:T}),a.createElement(_3,{folderId:r,repos:s,tileActions:_5}),a.createElement(mT,{newFileTile:h,tiles:I,tileActions:_5,sortFilterOptions:f,emptyStateText:y,emptyStateContent:(()=>{if(0===I.length&&c&&v)return a.createElement(_4,{lgFolder:i,hostPlanName:c.hostPlanName,user:u})})(),isFolder:!0,isEligbileForProTeamLockedRevampUI:_})))}let _7=(0,cU.xx)(rf.ZN);var _9=r(892419),pe=r(175393),pt=r(190500);let pr="CONNECTED_PROJECTS_PROJECT_PAGE_ONBOARDING_KEY";function pa({resourceConnection:e}){let t=a.createElement(sS.N,{href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects",newTab:!0},(0,N.tx)("resource_connection.onboarding.connected_projects_capitalized")),r=(0,N.tx)("resource_connection.onboarding.connected_projects_are_just_like_normal_projects",{hostPlanName:e.hostPlanName,connectedProjects:t,connectedPlanName:e.connectedPlanName});return a.createElement(pt.b,{description:r,title:(0,N.tx)("resource_connection.onboarding.projects_are_better_together"),trackingContext:"Connected Projects Project Page Onboarding Modal",onboardingKey:pr,arrowPosition:pe.F_.BOTTOM})}var pn=r(465233),pl=r(335744),po=r(190597),pi=r(493300),ps=r(930602);function pd(e){let t=(0,n.wA)(),r=a.useRef(null),l=(0,n.d4)(({dropdownShown:e})=>e),o=(0,n.d4)(t=>(0,rf.oq)(e.folder.id,t))??null,i=(0,J.Q)({currentOrgId:o,currentTeamId:null}),s=a.useMemo(()=>{if("loaded"===i.status)return(0,W.T0)(i.data,e.folder.id)},[i,e.folder.id]);if("loaded"!==i.status)return a.createElement("div",{className:x.s.flex.itemsCenter.colorIcon.$},a.createElement(en.B,{svg:pi.A}));let d=(0,W.gV)(i.data,o),c=e.dropdownKey&&l&&l.type===e.dropdownKey&&l.data&&l.data.targetRect,m=r.current&&l?.data?.targetRef===r.current&&l?.type===nO.jU,u=r.current,_=[];return e.folder.canRead&&_.push(a.createElement(l1.c$,{key:"share",children:(0,N.tx)("file_browser.folder.share"),onClick:e.onShareClick})),_.push(a.createElement(l1.c$,{key:"add-to-favorites-section",children:a.createElement("div",{className:x.s.flex.justifyBetween.itemsCenter.w150.$},(0,N.tx)("favorited_resources.add_to_sidebar"),a.createElement(en.B,{svg:ps.A})),onClick:a=>{a.stopPropagation(),r.current&&t(eS.j7({type:nO.jU,data:{targetRect:u.getBoundingClientRect(),targetRef:u,resourceId:e.folder.id}}))}})),a.createElement("span",null,a.createElement(no.E,{className:M()(x.s.flex.itemsCenter.colorIcon.$,po.HM),ref:r,onClick:r=>{e.dropdownKey&&u&&t(eS.j7({type:e.dropdownKey,data:{targetRect:u?.getBoundingClientRect()}}))}},a.createElement(tP.J,null)),c&&a.createElement(pl.Cf,{targetRect:l.data.targetRect,minWidth:172,maxWidth:172,propagateCloseClick:!0},_),m&&a.createElement(pn.t,{setFavorite:e.setFavorite,resourceId:e.folder.id,resourceType:eF.bk.FOLDER,favoriteId:s?.id,orgId:o,sections:(0,Q.oA)(i.data?.currentUser?.userSidebarSections)??[],customSectionOrdering:i.data.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[],userHasMaxFavorites:d}))}var pc=r(511783),pm=r(590318),pu=r(664793),p_=r(705693),pp=r(989884),pf=r(654793),pg=r(363655),pE=r(644722),pb=r(111777),pv=r(220576),ph=r(18904);function py({lgFolder:e,currentOrgId:t}){return!e.canEdit&&!!e.plan?.isMember&&!e.team?.canAdmin&&null!==t}var pw=r(549491);let pT="seen_folder_settings_connected_projects_onboarding",pI=(0,eo.eU)(!1);function px({folder:e,lgFolder:t,team:r}){let l=(0,n.wA)(),o=(0,n.d4)(e=>"folder"===e.selectedView.view&&e.selectedView.shouldShowRenameModal||!1),i=function(){let e=(0,eT.vt)(),t=(0,ew.jn)();return e||t}(),s=function(){let e=(0,n.Pj)();return(0,a.useCallback)(async t=>{try{await cd.Ay.post(`/api/folders/${t}/claim`),e.dispatch(_g.qp({folderId:t})),(0,rf.qF)(t)||e.dispatch((0,G.jl)({folderId:t,loadedFolders:{}}))}catch(t){e.dispatch(aR.s.error(t.message||(0,N.t)("file_browser.file_browser_actions.claim_team_error")))}},[e])}(),d=a.useCallback(()=>s(t.id),[s,t.id]),m=function(e){let t=(0,n.wA)(),r=e.canEdit;return(0,a.useCallback)(()=>{e.name&&r&&(t(_g.WC()),t(tm.to({type:(0,ph.y)(),data:{folder:e}})))},[t,e,r])}(t);(0,c.h)(()=>{o&&m()});let u=(0,$.fn)()===$.ih.CONTROL,_=(0,eP.FC)(),p=(0,n.d4)(e=>e.currentUserOrgId),f=(0,n.d4)(e=>e.teamRoleRequests),g=t.team?.org?.id,E=t.team?.id,b=py({lgFolder:t,currentOrgId:p}),v=function({lgFolder:e}){let t=eI({project:e}),r=(0,pv.R)(),a=(0,n.d4)(e=>e.currentUserOrgId);return e.canEdit&&!e.isEditingLockedForUser&&t&&(!r||!py({lgFolder:e,currentOrgId:a}))}({lgFolder:t}),h=(0,pp.b)(t.plan?.tier),y=(0,pu.BN)(pT),[w,T]=(0,eo.fp)(pI);a.useEffect(()=>{!w&&h&&((0,pu.FC)(pT),T(!0))},[w,T,h]);let I=(t?.canConnect??!1)&&h,x="loaded"===y.status&&y.data<3&&!!I,S=()=>{l(tm.to({type:pb.W,data:{folderId:t.id}}))},C=t.canRead,k=a.useMemo(()=>{if(b&&f&&r&&f[r.id]&&f[r.id].status===pf.c.PENDING)return f[r.id].id},[b,f,r]);a.useEffect(()=>{b&&p&&l((0,p_.Rw)())},[b,l,p]);let R=(0,tK.jm)(g,E),A=i?(0,N.t)("locked_team.label.tooltip"):void 0,O=i?rH.Ib.TEXT:void 0,F=(t,r,a)=>{let n={folder:e,entrypoint:"folder_page_view",sectionId:a,favoriteId:r};t?l(eR.Mv(n)):l(eR.jv(n))},D=(0,rf.c8)(t.id,t.teamId,_),M=(0,an.MF)({label:an.A5.FolderPageViewHeader.canClaim,oldValue:D,newValue:a2.Qw.useMemoizedLoaded(!t.ownerRole&&t.team?.canAdmin),enableFullRead:(0,aa.DQ)(aa.Pw.GROUP_6),contextArgs:{folderId:t.id,folderTeamId:t.team?.id}}).unwrapOr(!1),B=function(e){let t=(0,mB.a)(e.id),r=e.canRead,n=e.team?.org?.id,l=(0,a.useMemo)(()=>t({folder:{...e,orgId:n??null},shouldShowJoinButton:!1}),[t,e,n]);return(0,a.useMemo)(()=>{if(r&&0!==l.length)return{kind:lx.A.CUSTOM,key:lF.DROPDOWN,element:a.createElement(lH,{dataOnboardingKey:_u,buttonAriaLabel:(0,N.t)("file_browser.folder.page_header_dropdown_label"),dropdownKey:`folder-${e.id}`,dropdownOptions:l})}},[r,l,e.id])}(t),U=t?.activeProjectResourceConnections?.[0];return a.createElement(P.tH,{boundaryKey:"FolderPageViewHeader",fallback:P.H4.NONE_I_KNOW_WHAT_IM_DOING,severity:m2.DZ.Critical,sentryTags:{area:L.e.MONETIZATION_EXPANSION}},a.createElement(lS,{title:t.name,badge:U?a.createElement(rv.W,{hostPlanName:U?.hostPlanName,connectedPlanName:U?.connectedPlanName,large:!0,dataOnboardingKey:pr}):void 0,rightSideActions:(()=>{let e=[];if(M&&e.push({kind:lx.A.CUSTOM,key:lF.CLAIM,element:a.createElement(ay.c,{variant:"secondary",onClick:d},(0,N.t)("file_browser.folder.join_as_owner"))}),v&&e.push({kind:lx.A.CUSTOM,key:lF.NEW_RESOURCE,showOnMobile:!0,element:a.createElement(pw.FolderPageViewOmnicreateDropdown,{lgFolder:t,newFileFrom:iu.f6.FILE_BROWSER_TOPBAR_FOLDER})}),C){let t={kind:lx.A.CUSTOM,key:lF.SHARE,element:a.createElement(ay.c,{variant:"secondary",onClick:S,htmlAttributes:{"data-tooltip-type":O,"data-tooltip":A},disabled:i},(0,N.t)("file_browser.folder.share"))};e.push(t)}b&&e.push({kind:lx.A.CUSTOM,key:lF.REQUEST_TO_EDIT,element:a.createElement(ay.c,{variant:"secondary",onClick:()=>{k?l(pm.lT({requestId:k})):r&&l(tm.to({type:pE.$,data:{team:r,requesterCurrentLevel:ut.e6.VIEWER,source:"FolderPageView"}}))}},void 0!==k?(0,N.t)("file_browser.team.cancel_request"):(0,N.t)("file_browser.team.request_to_edit"))}),e.push({kind:lx.A.CUSTOM,key:lF.SETTINGS,element:a.createElement("div",{className:"x1n2onr6"},a.createElement(ay.Me,{variant:"secondary",size:"lg",onClick:()=>{l(tm.to({type:pc.l,data:{folderId:t.id}})),x&&h&&pg.H.upsertUserFlagWithCount(pT,3)},"aria-label":(0,N.t)("file_browser.folder_settings_modal.tooltip.settings"),htmlAttributes:{"data-tooltip":(0,N.t)("file_browser.folder_settings_modal.tooltip.settings")}},a.createElement(_9.P,null)),x&&a.createElement("div",{className:"x10l6tqk x1fo6t33 xzkxjte x170jfvy x1fsd2vl x6qnwee xorixrz"}))}),u&&R&&e.push({kind:lx.A.CUSTOM,key:lF.FAVORITE,element:a.createElement(lz.i,{setFavorite:F,favoriteType:eF.bk.FOLDER,resourceId:t.id,orgId:p,teamId:E,size:"lg"})});let n=a.createElement(pd,{dropdownKey:"project-overflow-dropdown",folder:t,onShareClick:S,setFavorite:F});return e.push({kind:lx.A.CUSTOM,key:lF.PROJECT_OVERFLOW_MENU,showOnMobile:!0,hideOnDesktop:!0,element:n}),e})(),rightSideOfTitleAction:B}),!!U&&a.createElement(pa,{resourceConnection:U}))}function pN({folderId:e}){let t=(0,u.Rs)(eG.L8O,{projectId:e}),r=(0,eP.FC)(),[o,i]=function(e){let t=!!(0,l.k)().file_browser_paginated_folder_shadow_reads,r=!!(0,l.k)().file_browser_paginated_folder_full_reads,o=(0,G.LK)(e,t||!r),[i,s]=m4({folderId:e,enabled:t||r}),d=a.useCallback(()=>{r&&!i.isFetchingNextPage&&i.hasNextPage&&s.fetchNextPage()},[i.isFetchingNextPage,i.hasNextPage,s,r]),c=(0,n.d4)(t=>t.tileSortFilterStateByView.folders.byId[e]??t.tileSortFilterStateByView.folders.default),[m]=a.useState("loaded"!==o.status&&"loaded"!==i.status);return(0,an.MF)({label:an.A5.FolderPageView.folderFiles,oldValue:o,newValue:i,enableShadowRead:t&&m,comparator:pC,contextArgs:{folderId:e,fileTypeFilterValue:c.filters.fileType,sortKey:c.sort.key,sortDir:c.sort.dir===oj.ue.ASC?"asc":"desc"}}),[r?i:o,d]}(e),s=o.data?.folder,d=t.data?.project||null,c=(0,n.wA)(),m=(0,u.Rs)(eG.Udv,{id:e}),_=(0,eC._6)(),p="loaded"===m.status&&!m.data.project?.hasPermission||d?.trashedAt,f=d?.trashedAt,E=d?.isAbandonedDrafts&&d?.currentPlanUser?.permission===eF.Xn.ADMIN;a.useLayoutEffect(()=>{if(p||f){if(d?.team){let e=d.team.id;c(eS.$T({view:"team",teamId:e}))}else c(eS.$T({view:"recentsAndSharing"}))}E&&d.plan&&d.plan.key.parentId&&(d.plan.tier===eF.Ag.PRO?c(eS.$T({view:"abandonedDraftFiles",abandonedDraftFolderId:d.id,planId:d.plan.key.parentId,adminPlanType:i_.O.TEAM})):d.plan.key.type===eF.OL.ORG&&c(eS.$T({view:"abandonedDraftFiles",abandonedDraftFolderId:d.id,planId:d.plan.key.parentId,adminPlanType:i_.O.ORG})))},[c,m,d,p,f,E]);let b=r.teams[d?.teamId||""]||null;a.useEffect(()=>{d&&!d.inviteOnlyAt&&d.teamId&&!b&&c(_c.Jt({teamId:d.teamId}))},[c,d,b]);let v=d?.activeProjectResourceConnections?.[0],h=!!b&&!!d?.teamId,y=uC({resource:b,resourceType:eF.vt.TEAM,teamId:d?.teamId,shadowReadLabel:an.A5.FolderPageView.hasBanner}).unwrapOr(!1)&&h,w=(0,H.dq)(),T=(0,cU.xx)(rf.ZN),I=(0,n.d4)(t=>T(e,t.tileSortFilterStateByView)),N=!s||!d||"loaded"!==o.status||"loaded"!==t.status;if((0,g.kF)("Folder"),(0,g.WX)({markName:"MainBodyContent",isLoaded:!N,contextArgs:{numFiles:o.transform(e=>e.files.length).unwrapOr(null),isPaginated:!!(0,l.k)().file_browser_paginated_folder_full_reads}}),N)return a.createElement("div",{className:"folder_page_view--loading--ZkDG0"},a.createElement(et.kt,null));let S={view:"project",folderId:e,canEdit:d.canEdit,userSpace:w?rz.qo.ORG:rz.qo.PERSONAL},C=a.createElement("div",{className:"x78zum5 x167g77z x6s0dn4"},a.createElement(nS.ye,{config:I.tileSortFilterConfig}),a.createElement(nS.mc,{dispatch:c,options:I,selectedView:_}),a.createElement(nS.$c,{initialViewMode:I.tileSortFilterConfig.viewMode,onViewModeChange:e=>{(0,nc.trackEvent)("file view toggle",{viewType:e===oj.XU.GRID?"grid":"list"}),c(eS.JF({selectedView:_,config:{...I.tileSortFilterConfig,viewMode:e}}))}}));return(0,rV.T8)(a.createElement(lC.r,{content:a.createElement("div",{className:x.s.flex.flexColumn.$},a.createElement(_6,{activeProjectConnection:v?{id:v.id,hostPlanName:v.hostPlanName}:void 0,files:o.data.files,filesByRepoId:o.data.filesByRepoId,folderId:e,hasBanner:y,infiniteScrollOptions:{onShouldFetchNextPage:i,isFetchingNextPage:"isFetchingNextPage"in o&&o.isFetchingNextPage},isEditingLocked:d.isEditingLockedForUser,lgFolder:d,repos:o.data.repos,team:b}),a.createElement(co.cx,null)),banner:b&&y?a.createElement(_f,{teamId:b.id}):void 0,toolbar:a.createElement(a.Fragment,null,a.createElement(px,{folder:s,team:b,lgFolder:d}),a.createElement(_p,{folder:d})),viewbar:a.createElement(nS.g2,{leftSide:null,rightSide:C})}),rz.e0.FILE_BROWSER,S)}let pS=(0,an.BG)({strictRecords:!0,strictLists:!1,ignore:e=>"previewFiles"===e[0]||"folder"===e[0]||e.includes("realtime_token")||e.includes("thumbnail_url")||e.includes("checkpoint_id")||e.includes("checkpoint_key")});function pC(e,t){let r=pS(e,t),a=new Set(e.files.map(e=>e.key)),n=t.files.filter(e=>!a.has(e.key)).map(e=>e.key);return n.length>0&&r.push({path:["files"],oldValue:[],newValue:n,severity:"high"}),r}function pk(){let e;let t=(0,n.d4)(e=>e.currentTeamId),r=(0,eC._6)(),o=(0,u.Rs)(eG.RRC,{teamId:t??""},{enabled:!!t});if(!(0,l.k)().limited_plan_spaces)return null;if("loaded"!==o.status)e=a.createElement(et.qc,null);else{let n=("loaded"===o.data.currentUser.status&&o.data.currentUser.data.teamProjectRoles||[]).filter(e=>!!e.project).map(e=>{let t=e.project,r=t.activeProjectResourceConnections?.[0]??null;return{id:t.id,name:t.name,description:t.description,path:t.path,team_id:t.teamId,is_invite_only:!!t.inviteOnlyAt,is_view_only:!!t.viewOnlyAt,deleted_at:t.deletedAt?t.deletedAt.toISOString():null,updated_at:t.updatedAt.toISOString(),created_at:t.createdAt.toISOString(),touched_at:t.lastModifiedAt,shared_at:e.sharedWithYouFolder?.sharedAt.toISOString(),shared_by_user:e.sharedWithYouFolder?.sharedByUser,is_connected_project:!!r,resource_connection:r?{hostPlanName:r.hostPlanName,connectedPlanName:r.connectedPlanName}:null}});e=a.createElement(a.Fragment,null,a.createElement(mq,{viewId:`limitedTeam-${t}`,folderList:n,selectedView:r,isSharerInfoIncluded:!0}))}return(0,rV.T8)(a.createElement(lC.r,{content:a.createElement(a.Fragment,null,e),viewbar:a.createElement("div",{className:"limited_space_team_projects_page_view--viewbar--YMqKQ"},a.createElement("div",{className:"limited_space_team_projects_page_view--viewbarHeading--mTm27"},(0,N.tx)("file_browser.limited_space_team_projects.heading")))}),rz.e0.FILE_BROWSER,{view:"limitedSpaceTeamProjects"})}function pR({orgId:e}){let t=(0,n.wA)(),r=(0,eV.D6)("ViewLibrariesAction");return(0,eV.Kd)(r).data?a.createElement(lx.K,{action:{kind:lx.A.BUTTON,key:lF.VIEW_LIBRARIES,displayText:(0,N.t)("org_view.view_libraries"),onClick:()=>{t(eS.$T({view:"org",orgId:e,orgViewTab:tg.X.LIBRARIES}))}}}):null}function pA({canCreateTeam:e,isEnterpriseOrgDirectoryEnabled:t}){let r=(0,n.wA)();return t||!e?null:a.createElement(lx.K,{action:{kind:lx.A.CUSTOM,key:lF.NEW_TEAM,element:a.createElement(lR.$n,{"aria-label":(0,N.t)("license_group_view.toolbar.new_team_button_aria_label"),variant:"primary",onClick:()=>{r(tm.to({type:lv.Uc,data:{}}))},iconPrefix:a.createElement(lk.e,null)},(0,N.t)("license_group_view.toolbar.new_team_button"))}})}function pO({orgId:e}){let t=(0,eL.LM)(e),{canCreateTeam:r,cannotCreateTeamReason:n}=(0,K.LM)({id:e},null);return"loaded"!==t.status||n===K.z4.LG_LOADING?null:a.createElement(a.Fragment,null,a.createElement(pA,{canCreateTeam:r,isEnterpriseOrgDirectoryEnabled:t.data}),a.createElement(pR,{orgId:e,key:"org-library"}))}var pP=r(524637),pF=r(861119);function pL(){let e=(0,n.wA)(),t=(0,H.dq)(),r=ux((0,a4.R)(e=>({...(0,ao.getPermissionsState)(e),selectedView:e.selectedView,userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData})),e,an.A5.OrgDelinquencyBanner.bannerContent).unwrapOr(null);if(!r)return a.createElement("div",null);let l=uk({resourceType:"org",orgId:t},r),o=r.severity===uo.c.WARN?ui:"",i=`${uE} ${o}`;return a.createElement("div",{className:i},a.createElement(uP,{...r,tracking:l}))}var pD=r(496522),pM=r(596441),pB=r(753590);function pU(){let e=(0,eV.T5)("OrgConnectedProjectsContent"),t=e.unwrapOr(null),r=t?.connectionCount??0,n=(0,u.Rs)(eG.ifD,{planType:t?.key.type??null,planId:t?.key.parentId??""},{enabled:null!==t}),l=a.useMemo(()=>"loaded"!==n.status?[]:((0,Q.oA)(n.data?.planConnectedProjectsForUser)||[]).map(e=>{let t=(0,Q.oA)(e.project);return null!=t?(0,t0.W2)(t):null}).filter(e=>null!==e),[n]);return"loaded"!==e.status||"loaded"!==n.status?a.createElement("div",{className:x.s.flex.wFull.hFull.alignCenter.justifyCenter.$},a.createElement(lU.k,{htmlAttributes:{"data-testid":"loading-spinner"}})):0===r?a.createElement("div",{className:"org_connected_projects_view--emptyContent---1eNq"},a.createElement(pM.K,{entryPoint:pD.wR.CONNECTED_PROJECT_ORG_PAGE})):a.createElement(a.Fragment,null,a.createElement(pB.A,null),a.createElement("div",{className:"org_connected_projects_view--tabContentContainer--qFQ6s"},a.createElement("div",{className:x.s.wFull.$},a.createElement(mM.m,{folderList:l,dataOnboardingKeyIndex:void 0,onChangeSortOptions:f.lQ,viewType:oj.XU.GRID,isSharerInfoIncluded:!1}))))}var p$=r(48908),pj=r(172516);let pW="org_meta_content--container--b5Iq3";function pG({org:e}){return a.createElement("div",{className:x.s.flex.flexColumn.rowGap16.$},a.createElement(rk.Ro,{entity:e,size:36}),a.createElement(S.E,{fontWeight:"medium",fontSize:13},e.name))}function pV({handle:e}){let t=(0,n.wA)();return a.createElement("a",{href:new iy.xn({profileHandle:e}).href,className:pj.Be,onClick:r=>{r.metaKey||(r.preventDefault(),t(eS.$T({view:"communityHub",subView:"handle",handle:e})))}},a.createElement(S.E,{fontSize:11},"@",e))}function pH({orgId:e}){let t=(0,n.d4)(t=>(0,eu.Xy)(t.orgUsersByOrgId[e]).map(e=>e.user)),r=(0,n.wA)();return a.createElement(oo,{label:(0,N.t)("org_home_view_meta.admins"),members:t,onMemberClick:(e,t)=>{r(eS.$T({view:"user",userId:t.id,userViewTab:oi.o.INTERNAL_PROFILE}))},canLeave:!1})}function pz({org:e,orgStats:t}){let r=t?a.createElement(S.E,{fontSize:11,color:"secondary"},(0,N.tx)("org_home_view_meta.member_count",{memberCount:t.memberCount.data}),a.createElement("span",null,"\xa0\xb7\xa0"),"workspaceCount"in t?(0,N.tx)("org_home_view_meta.workspace_count",{workspaceCount:t.workspaceCount.data}):(0,N.tx)("org_home_view_meta.team_count",{teamCount:t.discoverableTeamCount.data})):a.createElement(p$.Wi,{className:x.s.mb4.$,animationType:p$.JR.SHIMMER});return a.createElement("div",{className:pW},a.createElement(pG,{org:e}),a.createElement("span",{className:x.s.mt4.$},r),e.community_profile_handle?a.createElement("span",{className:x.s.mt2.$},a.createElement(pV,{handle:e.community_profile_handle})):null,a.createElement("span",{className:x.s.mt32.$},a.createElement(pH,{orgId:e.id})))}function pY({org:e}){let t=(0,u.Rs)(eG.nYs,{orgId:e.id});return a.createElement(pz,{orgStats:t.data?.org??null,org:e})}function pK({org:e}){let t=(0,u.Rs)(eG.kei,{orgId:e.id});return a.createElement(pz,{orgStats:t.data?.org??null,org:e})}function pq({org:e}){return a.createElement("div",{className:pW},a.createElement(pG,{org:e}),e.community_profile_handle?a.createElement("span",{className:x.s.mt4.$},a.createElement(pV,{handle:e.community_profile_handle})):null,a.createElement("span",{className:x.s.mt4.$},a.createElement(S.E,{fontSize:11,color:"secondary"},(0,N.tx)("payments_modal.guest_permission_disclaimer")," ",a.createElement("a",{className:pj.Be,href:"https://help.figma.com/hc/articles/360039957374",target:"_blank",rel:"noopener"},(0,N.tx)("org_home_view_meta.learn_more")))))}var pJ=r(785992);let pX=[tg.X.HOME,tg.X.YOUR_TEAMS,tg.X.CONNECTED_PROJECTS,tg.X.PLUGINS,tg.X.WIDGETS],pQ=e=>{switch(e){case tg.X.HOME:return(0,N.t)("org_view.overview");case tg.X.YOUR_TEAMS:return(0,N.t)("org_view.your_teams");case tg.X.PLUGINS:return(0,N.t)("org_view.plugins");case tg.X.WIDGETS:return(0,N.t)("org_view.widgets");case tg.X.CONNECTED_PROJECTS:return(0,N.t)("org_view.connected_projects");default:return null}};function pZ(e){let t=(0,n.wA)(),r=(0,eV.X$)("OrgPageViewBar").unwrapOr(null),l=(0,eV.H3)(r),o={[tg.X.HOME]:!0,[tg.X.WIDGETS]:!0,[tg.X.PLUGINS]:!0,[tg.X.YOUR_TEAMS]:!0,[tg.X.LIBRARIES]:!1,[tg.X.FONTS]:!1,[tg.X.CONNECTED_PROJECTS]:!0},i=e=>{t(eS.$T({view:"org",orgId:l??"",orgViewTab:e}))},[s,d,c]=ot.t.useManagedTabs(o,e.selectedTab,e=>{i(e)}),m=pX.map(e=>a.createElement(ot.t.Tab,{...s[e],key:e},pQ(e))),u=a.createElement(X.J,null,a.createElement(ot.t.TabStrip,{manager:c},m));return a.createElement(nS.g2,{leftSide:u,rightSide:[]})}var p0=r(301869),p1=r(405531),p2=r(192063);function p4({workspace:e,targetRect:t,isDropdownOpen:r}){let l=l0(),o=(0,H.sZ)(),i=(0,n.wA)();if(!o||!r||!t)return null;let s=l({workspace:e,org:o});return a.createElement(X.J,null,a.createElement(tu.j,{parentRect:t,items:s,dispatch:i,onSelectItem:e=>{e.callback&&e.callback("",null,i)},showPoint:!1,shouldUsePortal:!0}))}var p8=r(342891),p5=r(103419);function p3(e){let{isSelected:t,isHovered:r}=e,{header:n,footer:l}=a.useMemo(()=>{if(e.queryResult&&"loaded"!==e.queryResult.status)return{header:a.createElement(p$.Qp,{className:"x100vrsf x1vqgdyp"}),footer:a.createElement(p$.Wi,{className:"x1oysuqx",dataTestId:"unassigned-workspace-tile-loading-text"})};let t=e.unassignedTeams||e.queryResult.data;return{header:a.createElement(rk.md,{teams:t,size:40,isHovered:r}),footer:(0,N.tx)("org_view.license_group.unassigned_tile.description",{teamCount:t.length})}},[e.queryResult,e.unassignedTeams,r]),o=a.createElement("span",null,"\xa0");return a.createElement(p5.a,{name:(0,N.t)("org_view.license_group.unassigned_tile.name"),headerLeft:n,headerRight:o,footerLeft:l,canView:!0,isCardActive:r||t,isSelected:t,isInItemsView:!0})}function p6(e){let t=(0,eo.md)(lu.Fd);return e.unassignedTeams?a.createElement(p3,{isSelected:e.isSelected,isHovered:e.isHovered,unassignedTeams:e.unassignedTeams}):a.createElement(p3,{isSelected:e.isSelected,isHovered:e.isHovered,queryResult:t})}var p7=r(286046),p9=r(956330),fe=r(463117);function ft(e){let t,r;let{workspace:l,isSelected:o,isHovered:i,onChildFocusChange:s}=e,[d,c]=a.useState(!1),m=(0,n.d4)(e=>e.currentUserOrgId),u=(0,fe.aq)(),_=l.colorConfig?.colors??[],p=e.isMainWorkspace?_[0]:void 0,f=(0,eo.md)((0,lu.aN)(l.id)),g=(0,p7.Y)(l.id,eF.bk.WORKSPACE,m),E=a.useMemo(()=>"loaded"===g.status&&void 0!==g.favorite,[g]);p&&(p=function(e,t,r){try{let a=(0,n5.H0)(t),n=(0,n5.kx)(a),l=(0,n3.oN)(t,!n,n);return r&&l!==t&&(0,nc.trackEvent)("workspace_background_color_adjusted_for_accessibility",{workspace_id:e,original_background_color:t,adjusted_background_color:l}),l}catch(e){console.error(e)}return t}(l.id,p,u()));let b=(0,n.wA)(),v=a.useCallback((e,t,r)=>{if(l){let a={workspace:{id:l.id,name:l.name??"",imgUrl:l.imgUrl},entrypoint:"workspace_tile",sectionId:r,favoriteId:t};e?b(eR.ZW(a)):b(eR.if(a))}},[b,l]);p&&((0,n5.kx)(p)?(t="org_page_view--workspaceTileTitleColorForDarkBackground--m6sFp",r="org_page_view--secondaryTextColorOnDarkBackground--7Ru-V"):(t="org_page_view--workspaceTileTitleColorForLightBackground---zSTU",r="org_page_view--secondaryTextColorOnLightBackground--68byE"));let h=a.createElement(rk.z6,{entity:l,size:40}),y=a.useMemo(()=>void 0!==e.teamCount?(0,N.tx)("org_view.license_group.team_count",{teamCount:e.teamCount}):"loaded"!==f.status?a.createElement(p$.Wi,{className:x.s.w64.$,dataTestId:"workspace-tile-teams-loading-text"}):(0,N.tx)("org_view.license_group.team_count",{teamCount:f.data}),[e.teamCount,f]),w=a.createElement("div",{className:M()(x.s.flex.flexRow.itemsCenter.$,r)},(0,N.tx)("org_view.license_group.member_count",{memberCount:l.memberCount.data??0}),a.createElement("span",null,"\xa0\xb7\xa0"),y),T=a.createElement(p9.H,{setFavorite:v,favoriteType:eF.bk.WORKSPACE,resourceId:l.id,orgId:m}),I=l.orgAccess===eF.bU.SECRET?a.createElement("div",{className:x.s.ml4.$,"data-tooltip-type":rH.Ib.TEXT,"data-tooltip":(0,N.t)("workspace_table.secret_workspace_lock_tooltip"),"data-tooltip-subtext":(0,N.t)("workspace_table.secret_workspace_lock_tooltip_subtext"),"data-tooltip-timeout-delay":500,"data-tooltip-max-width":300},a.createElement(oE.In,{icon:"lock-16"})):null,S=i||o||d||E;return a.createElement(p5.a,{backgroundColor:p,canView:!0,footerLeft:w,handleBlur:()=>{c(!1),s()},handleFocus:()=>{c(!0),s()},headerLeft:h,headerRight:T,isCardActive:S,isInItemsView:!0,isSelected:o,name:a.createElement("span",{className:t},l.name),titleSubtitleRight:I})}function fr(){let e=(0,n.wA)(),t=(0,eP.FC)(),r=(0,H.dq)(),o=(0,K.Au)(r),{canCreateTeam:i}=(0,K.LM)(r?{id:r}:null,null),s=function(e,{description:t,level:r=p2.$.INFO,start:n=!0,context:l}={}){let o=(0,a.useRef)(p1.J6.createVital(e,{level:r,description:t,context:l}));return(0,a.useEffect)(()=>{if(e.includes(" "))throw Error(`Vital name cannot include spaces: ${e}`);n&&o.current.start()},[n,e]),o.current}("OrgWorkspacesView.Load"),d=(0,eo.md)(lu.wT),{workspaceTeamCounts:c,unassignedTeams:m}=a.useMemo(()=>{let e=(d.data||[]).filter(e=>(0,lg.ox)(e,t));return{workspaceTeamCounts:(0,t2.ZM)(e),unassignedTeams:e.filter(e=>null===e.workspace_id||void 0===e.workspace_id)}},[t,d]),_=(0,u.Rs)(eG.bUn,{orgId:r}),p="loaded"!==d.status,{currentWorkspace:f,otherWorkspaces:E}=a.useMemo(()=>{let e=_.transform(e=>{let t=e.org?.workspaces??[];(0,tr.KQ)(t,"name");let r=t.find(e=>e.id===o.data),a=t.filter(e=>e.id!==r?.id);return(m.length>0||p)&&a.push(lb.O),{currentWorkspace:r,otherWorkspaces:a}});return"loaded"===e.status?e.data:{currentWorkspace:null,otherWorkspaces:[]}},[_,o,m,p]);a.useEffect(()=>{s.addContext({currentWorkspaceId:f?.id,workspaceQuery:o?.data}),"loaded"===_.status&&s.stop()},[f,_,s,o.data]);let b=a.useCallback(()=>{e(tm.to({type:lv.Uc,data:{}}))},[e]),v=!(0,l.k)().all_workspaces_incremental_load_teams,h="loaded"!==_.status||v&&p,y=_.transform(e=>e.org?.workspaces?.length??null).unwrapOr(null);if((0,g.kF)("OrgAllWorkspaces"),(0,g.WX)({markName:"MainBodyContent",isLoaded:!h,contextArgs:{numWorkspaces:y}}),h)return a.createElement(lp.X,{isLoading:!0});let w=f&&a.createElement(a.Fragment,null,a.createElement("div",{className:"x1tudf5h"},a.createElement(S.E,{color:"secondary",fontSize:11},(0,N.tx)("org_view.your_workspace"))),a.createElement(fa,{items:[f],isMainWorkspace:!0,workspaceTeamCounts:c,waitForOrgTeamsToLoad:v,unassignedTeams:m,focusOnLoad:!0}));return a.createElement(a.Fragment,null,w,f&&a.createElement("div",{className:"x1tudf5h"},a.createElement(S.E,{color:"secondary",fontSize:11},(0,N.tx)("org_view.other_workspaces"))),0===E.length?a.createElement(p8.C,{onCreateTeam:i?b:void 0}):a.createElement(fa,{items:E,isMainWorkspace:!1,workspaceTeamCounts:c,waitForOrgTeamsToLoad:v,unassignedTeams:m,focusOnLoad:!f}))}function fa({items:e,isMainWorkspace:t,waitForOrgTeamsToLoad:r,workspaceTeamCounts:n,unassignedTeams:l,focusOnLoad:o}){let{showing:i,show:s,data:d}=(0,cf.BK)("WORKSPACE_CONTEXT_MENU"),c=(0,_i.$)(),m=a.useCallback(e=>e===lb.O?(0,N.t)("org_view.license_group.unassigned_tile.name"):e.name,[]),u=a.useCallback((e,t)=>{c(e===lb.O?null:e.id,t)},[c]),_=a.useCallback((e,t)=>{let r=e[0];r!==lb.O&&s({data:{workspace:r,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1}}})},[s]),p=a.useMemo(()=>({tileBorderRadius:16,nestedFocus:!1,containerStyle:fn.grid,renderTile:(e,o,{isSelected:i,isHovered:s})=>e===lb.O?a.createElement(p6,{isSelected:i,isHovered:s,unassignedTeams:r?l:void 0}):a.createElement(ft,{workspace:e,teamCount:r?n[e.id]??0:void 0,isSelected:i,isHovered:s,isMainWorkspace:t,onChildFocusChange:o})}),[t,l,n,r]);return a.createElement(a.Fragment,null,a.createElement(oU.A,{viewType:oj.XU.GRID,isDraggable:!1,items:e,multiselectDisabled:!0,getAriaLabel:m,gridViewProps:p,handleOpenItem:u,handleContextMenu:_,doNotFocusOnLoad:!o}),i&&a.createElement(p4,{workspace:d.workspace,isDropdownOpen:i,targetRect:d.targetRect}))}let fn={grid:{paddingTop:"x1p5oq8j",paddingBottom:"x1gan7if",paddingLeft:"x1tudf5h",paddingRight:"x1m2p0i2",paddingInlineStart:null,paddingInlineEnd:null,gridTemplateColumns:"x192fo39",$$css:!0}},fl=(e,t)=>({org:e.orgById[t],isEnterpriseOrgDirectoryEnabled:(0,eL.QT)(e)});function fo(e){let{org:t}=(0,a4.R)(t=>fl(t,e.orgId)),r=(0,n.wA)(),l=(0,eL.LM)(e.orgId),o=(0,eV.D6)("OrgPageView"),i=(0,eV.Kd)(o),s=(0,eV.sI)(o);a.useEffect(()=>{i.unwrapOr(!1)&&(r(pP.Jt({includeMemberCount:!0,includeTopMembers:!1,includeProjectCount:!0})),r(pF.Pg({orgId:e.orgId})))},[i,e.orgId,r]);let d=null;switch(e.selectedTab){case tg.X.WIDGETS:d=a.createElement(p0.x,null);break;case tg.X.PLUGINS:d=a.createElement(pJ.C,null);break;case tg.X.YOUR_TEAMS:d=a.createElement(fi,null);break;case tg.X.CONNECTED_PROJECTS:d=a.createElement(pU,null);break;case tg.X.HOME:case tg.X.FONTS:case tg.X.LIBRARIES:d="loading"===l.status?a.createElement(lp.X,{isLoading:!0}):l.data?a.createElement(fr,null):a.createElement(fs,null)}let c=null;s.unwrapOr(!1)?c=a.createElement(pq,{org:t}):"loading"===l.status?c=a.createElement(pz,{orgStats:null,org:t}):l.data?c=a.createElement(pY,{org:t}):l.data||(c=a.createElement(pK,{org:t}));let m=a.createElement(pZ,{selectedTab:e.selectedTab});return a.createElement(lC.r,{banner:a.createElement(pL,null),viewbar:m,content:d,metaContent:c})}function fi(){let e=lT({workspaceId:null,onlyJoinedTeams:!0});return a.createElement(ly,{orgTeamsQuery:e,workspaceId:null})}function fs(){let e=lT({workspaceId:null,onlyJoinedTeams:!1});return a.createElement(ly,{orgTeamsQuery:e,workspaceId:null})}function fd(){let e=(0,n.wA)(),t=(0,Y.Pc)();return a.createElement(lx.K,{action:{kind:lx.A.BUTTON,key:lF.VIEW_COMMUNITY_PROFILE,onClick:()=>{e(eS.$T({view:"communityHub",subView:"handle",handle:t.community_profile_handle}))},displayText:(0,N.t)("internal_profile.view_community_profile"),styleClass:x.s.colorText.$}})}var fc=r(30575);let fm=(0,eo.eU)(!1);var fu=r(629640),f_=r(696483),fp=r(302941),ff=r(906239),fg=r(733407),fE=r(575378),fb=r(794962);function fv({buttonProps:e,image:t,title:r,author:n}){return a.createElement(no.E,{className:"home_shelf_resource_tile--resourceTileButton--meEFU",...e},a.createElement("div",{className:"home_shelf_resource_tile--homeShelfResourceTile--1rgji"},a.createElement("div",{className:"home_shelf_resource_tile--homeShelfTileImageContainer--3fiyP"},t),a.createElement("div",{className:"home_shelf_resource_tile--title--O4Tfl"},r)),n)}function fh(){return a.createElement(fv,{buttonProps:{disabled:!0},image:a.createElement(p$.Qp,{className:"home_shelf_resource_tile--loadingImage--I9sFG home_shelf_resource_tile--loadingColor--AlSS5",animationType:p$.JR.NO_SHIMMER}),title:a.createElement(p$.Wi,{className:"home_shelf_resource_tile--loadingTitleText--8Q0Xx home_shelf_resource_tile--title--O4Tfl home_shelf_resource_tile--loadingColor--AlSS5",animationType:p$.JR.NO_SHIMMER}),author:a.createElement(p$.Wi,{className:"home_shelf_resource_tile--loadingAuthor--yKCwm home_shelf_resource_tile--author--m5FxW utilities--bodyMedium--7-YGK home_shelf_resource_tile--loadingColor--AlSS5",animationType:p$.JR.NO_SHIMMER})})}function fy({resource:e,isSelected:t,onFocus:r}){let l=(0,n.wA)(),o=(0,dg.Lj)(e),i=(0,a.useCallback)(()=>{(0,fb.FM)(l,e,{openInNewTab:!1,shouldUpdateUrl:!1}),(0,nh.kg)(e.resource_type,e.id)},[l,e]),s=a.useRef(null);a.useEffect(()=>{t&&s.current?.focus()},[t]);let d=(0,a.useMemo)(()=>({onClick:i,"aria-label":e.name,"aria-current":t,htmlAttributes:{onFocus:r},ref:s}),[i,t,e.name,r,s]);return a.createElement(fv,{buttonProps:d,image:a.createElement(a.Fragment,null,a.createElement(fg.i,{resource:e,isSelected:t}),a.createElement("div",{className:"home_shelf_resource_tile--tileEditorIcon--QE-1U"},a.createElement(fE.dn,{editorType:e.editor_types[0]}))),title:a.createElement("div",{className:"home_shelf_resource_tile--titleText--NFhch utilities--bodyMediumStrong--1R5cZ"},e.name),author:a.createElement("div",{className:"home_shelf_resource_tile--subtitle--VMBH1 utilities--bodyMedium--7-YGK"},a.createElement("span",{className:"home_shelf_resource_tile--author--m5FxW utilities--bodyMedium--7-YGK"},(0,N.tx)("community.resource_tiles.by_author",{author:o})),"\xa0\xa0\xb7\xa0\xa0",a.createElement("div",{className:"home_shelf_resource_tile--metrics--riQEm"},a.createElement(ff.cz,{currentUserLiked:!1,likeCount:e.like_count,disableFontStyling:!0}),a.createElement(ff.i8,{usageCount:(0,d9.mk)(e),disableFontStyling:!0})))})}let fw=211/244;var fT=r(223926),fI=r.n(fT),fx=r(534497),fN=r(792557);function fS(){let e=(0,nE.Om)(),t=(0,nE.tv)(),r=e&&t?new nE.au({...e,tab:nb.N$.COMMUNITY},t).href:"";return a.createElement(fx._,{href:r,onClick:a=>{(0,nh.q5)(),a.preventDefault(),r?d.Ay.push(r):(0,m2.$D)(L.e.COMMUNITY,Error("NavigationTile: communityTabLink is empty"),{extra:{sharedRouteParams:e,sharedSearchParams:t}})},className:"xh8yej3 x5yr21d x78zum5 xdt5ytf x6s0dn4 x1nhvcw1 x1v2ro7d x1ypdohk xw4t3mb x1ocegsa xl61zd4 x1nl1fmu xln84v9 xgf1b7j x85jtft","aria-label":(0,N.t)("community.home_shelf.see_more_on_community")},a.createElement("div",{className:"x1lliihq x1n2onr6 x1vjfegm xh8yej3 x1mxnbhz x176lpz5 xb3r6kr xdr6sbx x1klh5xi"},a.createElement(sa.oW,{className:"x1vjfegm xxcbz4w x17muf8i x10l6tqk xm6i5cn x2e2xj7 x19y5rnk xbngzmg xgk9eko",src:(0,ac.ck)("2f1ddf99a93705a145b3e9258c29994c2bcc3296"),alt:""}),a.createElement(sa.oW,{className:"xhtitgo xzc2ltc xjndpiq x10l6tqk xm6i5cn x2e2xj7 x19y5rnk xbngzmg xgk9eko",src:(0,ac.ck)("3b5e7024cc8ec5912d46ce4c4f555f79de8afa22"),alt:""}),a.createElement(sa.oW,{className:"xzkaem6 x156by65 x1366x3a x10l6tqk xm6i5cn x2e2xj7 x19y5rnk xbngzmg xgk9eko",src:(0,ac.ck)("1922e9623fd798bcb563e1f4e9ae105b54d904b4"),alt:""}),a.createElement(en.B,{svg:fN.A,className:"x10l6tqk xoegz02 xh8yej3 xqmqy1e xb9t1mx",svgWidth:"100%",svgHeight:"auto"})),a.createElement("span",{...nd.xk(fC.linkText)},(0,N.t)("community.home_shelf.see_more_on_community")))}let fC={linkText:{...ns.g.textBodyMediumStrong,width:"xh8yej3",textAlign:"xdpxx8g",color:"x1quhyk7",$$css:!0}},fk=[eF._Y.DESIGN,eF._Y.WHITEBOARD,eF._Y.SLIDES];function fR(){var e,t;let r=(0,n.wA)(),[l,o]=a.useState([]),[{data:i,status:s,errors:d}]=(0,_.IT)(i3.a.getHomeShelfContent({seenResourceIds:l})),c=function(){let e=(0,a.useRef)(null),[t,r]=(0,a.useState)(0),[n,l]=(0,a.useState)(0),[o,i]=(0,a.useState)(0),s=(0,a.useCallback)(e=>{let t=e-48,a=Math.floor((t-24-244*fw)/268);if(a<1){r(0),l(0),i(0);return}let n=Math.floor((t-24-24*(a=Math.min(a,16)))/(a+fw)),o=Math.floor(n*a+24*(a-1)),s=Math.floor(n*fw);r(a),l(o),i(s)},[]);return(0,a.useLayoutEffect)(()=>{let t=e.current;if(!t)return;s(t.clientWidth);let r=new ResizeObserver(e=>{s(e[0]?.target.clientWidth??0)});return r.observe(e.current),()=>r.disconnect()},[e,s]),(0,a.useMemo)(()=>({tileRowWidth:n,navigationSectionWidth:o,numberOfTiles:t,sizeRef:e}),[n,o,t,e])}(),m=(e=i?.data.meta.recommended_resources??[],t=c.numberOfTiles,(0,a.useMemo)(()=>{let r=[i7.vt.DESIGN_TEMPLATE,i7.vt.SLIDE_TEMPLATE,i7.vt.FIGJAM_TEMPLATE],a=fI()(e,e=>e.resource_type),n=[];for(let l=0;l<e.length+r.length&&n.length!==t&&0!==r.length;l++){let e=(a[r[l%r.length]]??[]).shift();e?n.push(e):r.splice(l%r.length,1)}return n},[e,t])),{trackRejectedResources:u}=function({visibleResources:e}){let{trackResourceImpression:t}=(0,iN.GS)(),{properties:r}=(0,rV.j6)();return(0,a.useEffect)(()=>{e.forEach(e=>{t(e)})},[t,e]),{trackRejectedResources:(0,a.useCallback)(e=>{(0,nc.trackEvent)("community_home_shelf_resources_rejected",{rejectedResourceIds:e.join(),...r})},[r])}}({visibleResources:m}),p=(0,a.useCallback)(()=>{let e=m.map(e=>e.id);o(e),u(e),r(eA.b({refreshed_community_home_shelf_v2_recommendations:!0}))},[u,m,r]);if("errors"===s)return(0,m2.$D)(L.e.COMMUNITY,d),null;let f=c.numberOfTiles<2;return a.createElement("div",{ref:c.sizeRef,className:"x1p4momh"},!f&&a.createElement("div",{className:"xhv1u6h xuwania x1mxnbhz x1sjmt1f"},a.createElement("div",{className:"x78zum5 x1qughib x6s0dn4 xp41m2r xettwda"},a.createElement("div",{...nd.xk(fF.homeShelfTitle)},(0,N.t)("community.home_shelf.title")),a.createElement("div",{className:"x78zum5 x1n2onr6 xncym2f x167g77z x6s0dn4"},a.createElement(tO.K,{"aria-label":(0,N.t)("community.home_shelf.refresh_label"),onClick:p,disabled:"loading"===s},a.createElement(fu._,null)),a.createElement(tO.K,{"aria-label":(0,N.t)("community.home_shelf.dismiss_label"),onClick:()=>r(eA.b({dismissed_community_home_shelf_v2_recommendations:!0}))},a.createElement(f_.f,null)))),a.createElement(fO,{sizingInfo:c,resources:m,isLoading:"loading"===s})))}function fA(){return a.createElement("div",{className:"x1cqoux5 xeuugli"},a.createElement("div",{className:"x186iv6y xh8yej3 x176lpz5 x19y5rnk xo1570h"}))}function fO({resources:e,isLoading:t,sizingInfo:r}){let n=a.useRef(null),[l,o]=a.useState(null),[i,s]=a.useState(null),d=(0,a.useMemo)(()=>!t&&r.numberOfTiles>e.length?(0,oK.y1)(r.numberOfTiles-e.length).map(e=>a.createElement(fA,{key:e})):[],[r.numberOfTiles,e.length,t]),c=t?(0,oK.y1)(r.numberOfTiles).map(e=>a.createElement("div",{className:"x1cqoux5 xeuugli",key:e},a.createElement(fh,null))):e.map((e,t)=>a.createElement("div",{className:"x1cqoux5 xeuugli",key:e.id},a.createElement(fy,{resource:e,isSelected:i===t,onFocus:()=>{o(t),s(t)}})));return a.createElement("div",{className:"x78zum5 x1665zp3"},a.createElement(fp.S.div,{role:"grid",tabIndex:0,style:{width:r.tileRowWidth},className:"x78zum5 x1665zp3 xh8yej3 x1qughib",onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onFocus:e=>{e.target===n.current&&null===i&&(s(0),o(0))},onBlur:e=>{e.relatedTarget&&n.current?.contains(e.relatedTarget)||s(null)},ref:n,onKeyDown:t=>{if("ArrowRight"===t.key){t.preventDefault(),t.stopPropagation();let r=Math.min((l??0)+1,e.length-1);o(r),s(r)}else if("ArrowLeft"===t.key){t.preventDefault(),t.stopPropagation();let e=Math.max((l??0)-1,0);o(e),s(e)}}},c,d),a.createElement("div",{className:"x1lliihq x1i1rx1s x1hyhr7 xgcv3f"}),a.createElement("div",{style:{width:r.navigationSectionWidth}},a.createElement(fS,null)))}function fP(){let e=(0,n.wA)();return a.createElement(P.tH,{team:L.e.COMMUNITY,boundaryKey:"RecommendedResourcesShelf",fallback:P.H4.NONE_I_KNOW_WHAT_IM_DOING,onError:()=>{e(tM.F.enqueue({message:(0,N.t)("general.root_error_boundary_title"),type:"react-error"}))},hasCustomWASMBuild:V.y4},a.createElement(rV.fu,{name:rz.e0.COMMUNITY_HOME_SHELF},a.createElement(fR,null)))}let fF={homeShelfContainer:{margin:"x1p4momh",marginInline:null,marginInlineStart:null,marginLeft:null,marginInlineEnd:null,marginRight:null,marginBlock:null,marginTop:null,marginBottom:null,$$css:!0},homeShelf:{margin:"xhv1u6h",marginInline:null,marginInlineStart:null,marginLeft:null,marginInlineEnd:null,marginRight:null,marginBlock:null,marginTop:null,marginBottom:null,padding:"xuwania",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,borderRadius:"x1mxnbhz",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,background:"x1sjmt1f",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},homeShelfHeader:{display:"x78zum5",justifyContent:"x1qughib",alignItems:"x6s0dn4",padding:"xp41m2r",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,height:"xettwda",$$css:!0},homeShelfHeaderActions:{display:"x78zum5",position:"x1n2onr6",left:"xncym2f",insetInlineStart:null,insetInlineEnd:null,gap:"x167g77z",rowGap:null,columnGap:null,alignItems:"x6s0dn4",$$css:!0},homeShelfTitle:{color:"x1akne3o",...ns.g.textHeadingSmall,$$css:!0},homeShelfTabContent:{display:"x78zum5",gap:"x1665zp3",rowGap:null,columnGap:null,$$css:!0},resourcesRow:{display:"x78zum5",gap:"x1665zp3",rowGap:null,columnGap:null,width:"xh8yej3",justifyContent:"x1qughib",$$css:!0},resourceWrapper:{flex:"x1cqoux5",flexGrow:null,flexShrink:null,flexBasis:null,minWidth:"xeuugli",$$css:!0},homeShelfDivider:{display:"x1lliihq",width:"x1i1rx1s",marginBottom:"x1hyhr7",borderLeft:"xgcv3f",borderLeftWidth:null,borderInlineStartWidth:null,borderInlineEndWidth:null,borderLeftStyle:null,borderInlineStartStyle:null,borderInlineEndStyle:null,borderLeftColor:null,borderInlineStartColor:null,borderInlineEndColor:null,$$css:!0},resourceTilePlaceholder:{aspectRatio:"x186iv6y",width:"xh8yej3",backgroundColor:"x176lpz5",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,border:"xo1570h",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0}};var fL=(e=>(e.SHOW_NOTHING="SHOW_NOTHING",e.SHOW_HOME_SHELF="SHOW_HOME_SHELF",e))(fL||{});function fD(){let e=(0,eo.Xr)(fm),t=function(){let e=!!(0,n.d4)(e=>e.userFlags).dismissed_community_home_shelf_v2_recommendations,t=(0,n.d4)(({currentUserOrgId:e})=>e),r=(0,fc.aH)(),a=(0,n.d4)(({orgById:e})=>e),l=(0,eL.yK)({orgById:a,currentUserOrgId:t}),o=(0,n.d4)(e=>e.user?.drafts_folder_id)??null,{data:i}=(0,sM.nt)(o),s=!!i&&fk.every(e=>(0,sM.d6)(i,e)),d=(0,eT.vt)(),c=(0,ew.jn)();return E.Ay.mobile||!o||d||c||e||l||!s||!r()?"SHOW_NOTHING":"SHOW_HOME_SHELF"}();return((0,a.useEffect)(()=>{e("SHOW_HOME_SHELF"===t)},[e,t]),"SHOW_NOTHING"===t)?null:a.createElement(fP,null)}var fM=r(199774),fB=r(193675);let fU={Banner:function(e){let t=(0,n.wA)(),r=e=>{t(eA.b({[e]:!0}))};return a.createElement(rV.fu,{name:e.trackingContextName,properties:{severity:uo.c.EVENT}},a.createElement(X.J,null,a.createElement("div",{...nd.Ay.props(f$.wrapper,"large"===e.size&&f$.wrapperLarge),style:{backgroundColor:e.bgColor}},a.createElement("div",{className:"x78zum5 x6s0dn4 x1qughib x1iyjqo2 x1i71x30 x1rt4tut"},e.children),a.createElement(tO.K,{"aria-label":(0,N.t)("general.close"),onClick:()=>r(e.userFlag)},a.createElement(_w.A,null)))))},BannerLogo:function(e){return a.createElement(en.B,{svg:e.logo,className:"xi0feg2",style:{fill:e.logoColor}})},BannerContent:function(e){let t=e.copy?a.createElement("p",{className:"x17hqfcz xcw2j8d xemv814 xi9x8a2 x10p5zqr x12638g3 x4lxrar xyny9ap x16r6qr4 x1n0bwc9"},e.copy):null,r=e.beta?a.createElement("div",{className:"x1rg5ohu"},a.createElement(fB.E,null,(0,N.t)("general.beta"))):null;return a.createElement("div",null,a.createElement("div",{className:"xxymvpz x1nfngrj"},a.createElement("h2",{...nd.Ay.props(f$.title,e.beta&&f$.titleBadgeSpacing)},e.title),r),t)}};sr.Il.textBodyLargeFontFamily,sr.Il.textBodyMediumFontFamily,sr.Il.textBodyLargeFontSize,sr.Il.textBodyMediumFontSize,sr.Il.textBodyLargeFontWeight,sr.Il.textBodyMediumFontWeight,sr.Il.textBodyLargeLetterSpacing,sr.Il.textBodyMediumLetterSpacing,sr.Il.textBodyLargeLineHeight,sr.Il.textBodyMediumLineHeight;let f$={wrapper:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"x1qughib",padding:"x1hcpp98 x8lzctc",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,gap:"x1i71x30 x1rt4tut",rowGap:null,columnGap:null,$$css:!0},wrapperLarge:{padding:"x1tphvzp x8lzctc",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,$$css:!0},title:{fontFamily:"x17hqfcz xcw2j8d",fontSize:"xemv814 xi9x8a2",fontWeight:"x1ma9mv9 x84028e",letterSpacing:"x12638g3 x4lxrar",lineHeight:"xyny9ap x16r6qr4",display:"xt0psk2",color:"x1akne3o",$$css:!0},titleBadgeSpacing:{marginRight:"x17qaar8",marginInlineStart:null,marginInlineEnd:null,$$css:!0}};var fj=r(803721);let fW=e=>"ja"===e?!!(0,l.k)().marketing_promo_banner_ja:"es"===e?!!(0,l.k)().marketing_promo_banner_es:!!(0,l.k)().marketing_promo_banner;function fG(){let e=!!(0,af.f)("seen_config_launched_promo_banner_2025"),t=!!(0,af.f)("seen_figmake_launch_banner"),r=ac.tl();return fW(r.user_data?.locale)?!e&&(0,l.k)().marketing_promo_banner_config_launched?a.createElement(lG.J,{mode:"dark"},a.createElement(fU.Banner,{trackingContextName:"Config 2025 Launched",bgColor:fz,userFlag:"seen_config_launched_promo_banner_2025",size:"small"},a.createElement("div",{className:"x78zum5 x1i71x30 x6s0dn4 x1w5s15c x1fiy98q"},a.createElement(fU.BannerLogo,{logo:fj.A,logoColor:fH}),a.createElement(fU.BannerContent,{title:(0,N.t)("banner.marketing_promo.config_launched_2025.title")})),a.createElement(st.v,{mode:"bake-filebrowser"},a.createElement(sS.N.Button,{href:"https://config.new",newTab:!0,size:"lg"},(0,N.t)("banner.marketing_promo.config_launched_2025.cta"))))):!t&&(0,l.k)().marketing_promo_banner_figmake_launch?a.createElement(fV,null):null:null}function fV(){let e=(0,s$.$)({isDraftsFolder:!0,editorType:eF._Y.FIGMAKE,newFileFrom:iu.f6.FIGMAKE_LAUNCH_BANNER,contextClicked:"figmake_launch_banner_created"}),t=(0,n.d4)(e=>e.user?.drafts_folder_id),{data:r}=(0,sM.nt)(t),l=(0,sB.h)(r).find(e=>e.editorType===eF._Y.FIGMAKE);if(!l)return null;let o=!l.canCreate,i=o?(0,N.t)("file_browser.creation_buttons.disabled_by_organization"):void 0;return a.createElement(fU.Banner,{trackingContextName:"Figmake Launch Banner",bgColor:sr.Tj.bgSelectedTertiary,userFlag:"seen_figmake_launch_banner",size:"large"},a.createElement("div",{className:"x78zum5 x1i71x30 x6s0dn4 x1w5s15c x1fiy98q"},a.createElement("div",{className:"xsqpjig x78zum5 x100vrsf x1vqgdyp x14odnwx x2lah0s x6s0dn4 xl56j7k xfm0j5p"},a.createElement(fM.e,{className:"x1849jeq x1gnnpzl xwa2v1s"})),a.createElement(fU.BannerContent,{title:(0,N.t)("banner.marketing_promo.figmake_launch.title"),copy:(0,N.t)("banner.marketing_promo.figmake_launch.content"),beta:!0})),a.createElement(st.v,{mode:"bake-filebrowser"},a.createElement(lG.J,{mode:"light"},a.createElement(lR.WW,{onClick:e,disabled:o,htmlAttributes:{"data-tooltip":i,"data-tooltip-type":rH.Ib.TEXT}},(0,N.t)("banner.marketing_promo.figmake_launch.cta")))))}let fH="#33DFDF",fz="#5D4493";var fY=r(519829),fK=r(97223),fq=r(461979);function fJ(e){let t=(0,u.Rs)(eG.ox,{resourceTypes:e.resourceTypes,firstPageSize:30,sortOrder:e.sortOrder,cursorColumn:e.sortKey,sharedBy:e.sharedBy||null,planId:e.planId||null,planType:e.planType||null,fileType:e.fileType||null,orgDeletedDrafts:e.orgDeletedDrafts||null}),r=(0,a.useCallback)(()=>{"loaded"===t.status&&t.data.sharedWithYouResources.hasNextPage()&&t.data.sharedWithYouResources.loadNext(30)},[t]),n="loaded"===t.status&&t.data.sharedWithYouResources.isLoadingNextPage;return{subscription:t,fetchNextPage:r,isFetchingNextPage:n}}function fX(e){let t=(0,eC._6)(),r=(0,n.d4)(e=>e.tileSortFilterStateByView),l="recentsAndSharing"===t.view?r.recentsAndSharing.sharedFiles:r.sharedWithYou,o={tileSortFilterConfig:l,sortKeys:[oj.C0.SHARED_AT]},{subscription:i,fetchNextPage:s,isFetchingNextPage:d}=function(e){let{subscription:t,fetchNextPage:r,isFetchingNextPage:n}=fJ({...e,resourceTypes:["file","file_repo","prototype"]});return{subscription:(0,a.useMemo)(()=>t.transform(e=>e.sharedWithYouResources.reduce((e,t)=>{if(t.sharedWithYouFile){let r=function(e){if(null==e||null==e.file)return null;let{file:t,...r}=e,a={...t,...r,editUrl:`${window.location.origin}/file/${t.key}/${(0,fq.sy)(t.name||"")}`,signedPreviewThumbnailUrls:null,trackTags:null};return(0,tJ.fA)(o$.F.toSinatra(a),{sharedAt:r.sharedAt,sharedByUser:r.sharedByUser})}(t.sharedWithYouFile);r&&e.push(r)}else if(t.sharedWithYouRepo){let r=function(e){let{repo:t,...r}=e;if(null===t)return null;let{branches:a,...n}=t,l=a?.filter(e=>null!=e)?.map(e=>t0.V1({...e,edit_url:e?`${window.location.origin}/file/${e.key}/${fq.sy(e.name||"")}`:"",client_meta:e.checkpointClientMeta}))??[],o=(0,t0.V1)({...n,...r});return(0,t0.V1)({type:tJ.nb.REPO,repo:o,branches:l,selectedBranchKey:""},{repoPerms:(0,fK.zh)(t)})}(t.sharedWithYouRepo);r&&e.push(r)}else if(t.sharedWithYouPrototype){let r=function(e){let{prototype:t,...r}=e;if(null==t)return null;let a=(0,t0.V1)({...t,...r});return(0,t0.V1)({type:tJ.nb.PROTOTYPE,prototype:a},{prototypePerms:(0,fY.R)(t)})}(t.sharedWithYouPrototype);r&&e.push(r)}return e},[])),[t]),fetchNextPage:r,isFetchingNextPage:n}}({sharedBy:l.filters.sharedBy??"",planId:l.filters.plan?.planId??"",planType:l.filters.plan?.planType??"",fileType:(e=>{switch(e){case oj.t2.DESIGN:return"design";case oj.t2.FIGJAM:return"whiteboard";case oj.t2.PROTOTYPE:return"prototype";case oj.t2.SITES:return"sites";case oj.t2.SLIDES:return"slides";case oj.t2.COOPER:return"cooper";case oj.t2.MAKE:return"figmake";case oj.t2.ANY:return null;default:(0,I.xb)(e)}})(l.filters.fileType)??"",sortOrder:l.sort.dir===oj.ue.ASC?"asc":"desc",sortKey:(0,oj.De)(l.sort.key)??"shared_at"}),c=(0,a.useMemo)(()=>i.unwrapOr([]),[i]),{trackPerformanceEvent:m}=(0,mI.S)("swy_files_pagination_performance","livegraph");(0,a.useEffect)(()=>{m("fetch_end")},[m,c.length]),(0,a.useEffect)(()=>{"errors"===i.status&&m("fetch_error",{errors:JSON.stringify(i.errors??{})})},[m,i.status,i.errors]),(0,a.useEffect)(()=>(m("fetch_start"),()=>{m("fetch_cancel")}),[m]);let u=(0,a.useCallback)(()=>{d||(m("fetch_next"),s())},[d,s,m]),_="loaded"===i.status;return(0,g.kF)("SharedFiles"),(0,g.WX)({markName:"MainBodyContent",isLoaded:_}),a.createElement(ee.A,{loadingElementId:"loading-content-pane",delay:250,loaded:_,loadingElementClassName:x.s.pr32.$},a.createElement(cY.B,{onShouldFetchNextPage:u},a.createElement(mT,{currentPlanFilter:l.filters.plan,currentSharedByFilter:l.filters.sharedBy,emptyStateText:d?"":(0,N.t)("shared_with_you.no_items"),isEligbileForProTeamLockedRevampUI:e.isEligbileForProTeamLockedRevampUI,newFileTile:!1,sortFilterOptions:o,tileActions:{showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicate:!0,delete:!0,removeFromRecents:!1,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToWorkspace:!0},tiles:c})))}function fQ(e){let t=(0,eC._6)(),r=(0,a7.ol)(),l=(0,u.Rs)(eG.kQI,{id:r?.id||""},{enabled:!!r}),o=(0,u.Rs)(eG.TNJ,{id:r?.id||""},{enabled:!!r}),i=(0,n.d4)(e=>e.tileSortFilterStateByView),s="recentsAndSharing"===t.view?i.recentsAndSharing.sharedProjects:i.sharedWithYou,d={tileSortFilterConfig:s,sortKeys:[oj.C0.SHARED_AT]},{subscription:c,fetchNextPage:m,isFetchingNextPage:_}=function(e){let{subscription:t,fetchNextPage:r,isFetchingNextPage:n}=fJ({...e,resourceTypes:["folder"]});return{subscription:(0,a.useMemo)(()=>t.transform(e=>e.sharedWithYouResources.reduce((e,t)=>{if(t.sharedWithYouFolder){let{folder:r,...a}=t.sharedWithYouFolder;if(null==r)return e;let n=r.updatedAt.toString(),l=r.activeProjectResourceConnections?.[0]??null,o=(0,t0.V1)({...r,...a},{created_at:r.createdAt.toString(),updated_at:n,deleted_at:r.deletedAt?.toString()||null,touched_at:n,is_connected_project:!!l,resource_connection:l?{hostPlanName:l.hostPlanName,connectedPlanName:l.connectedPlanName}:null});e.push(o)}return e},[])),[t]),fetchNextPage:r,isFetchingNextPage:n}}({sharedBy:s.filters.sharedBy??"",planId:s.filters.plan?.planId??"",planType:s.filters.plan?.planType??"",orgDeletedDrafts:"",sortOrder:s.sort.dir===oj.ue.ASC?"asc":"desc",sortKey:(0,oj.De)(s.sort.key)??"shared_at"}),p=(0,a.useMemo)(()=>c.unwrapOr([]),[c]),f=(0,a.useMemo)(()=>p.map(e=>e.id),[p]),{trackPerformanceEvent:E}=(0,mI.S)("swy_projects_pagination_performance","livegraph");(0,a.useEffect)(()=>{E("fetch_end")},[E,f.length]),(0,a.useEffect)(()=>{"errors"===c.status&&E("fetch_error",{errors:JSON.stringify(c.errors??{})})},[E,c.status,c.errors]),(0,a.useEffect)(()=>(E("fetch_start"),()=>{E("fetch_cancel")}),[E]);let b=(0,a.useCallback)(()=>{_||(E("fetch_next"),m())},[_,m,E]),v="loaded"===l.status&&!!l.data.team&&l.data.team.hasPermission,h=!!o.unwrapOr({team:{hasPermission:!1}})?.team?.hasPermission,y="loaded"===c.status;return(0,g.kF)("SharedProjects"),(0,g.WX)({markName:"MainBodyContent",isLoaded:y}),a.createElement(ee.A,{loadingElementId:"loading-content-pane",delay:250,loaded:y,loadingElementClassName:x.s.pr32.$},a.createElement(cY.B,{onShouldFetchNextPage:b},a.createElement(mq,{canAdminTeam:h,canEditTeamContents:v,chunkSize:p.length,currentPlanFilter:s.filters.plan,emptyStateText:_?"":(0,N.t)("shared_with_you.no_items"),folderList:p,isEligbileForProTeamLockedRevampUI:!!r&&e.isEligbileForProTeamLockedRevampUI,isSharerInfoIncluded:!0,selectedView:t,sortFilterOptions:d,team:r,teamId:r?r.id:void 0,useLGPerms:!0,viewId:"shared-with-you-projects"})))}var fZ=r(141354),f0=r(988124),f1=r(302762),f2=r(2122),f4=r(82436),f8=r(362959);let f5=e=>a.createElement("span",{className:"unsubscribe_confirmation_modal--boldText--dNK-D"},e),f3=(0,ts.Ju)(function(e){let t=(0,n.wA)(),r=(0,Y.iZ)();return r?a.createElement(f4.u,{tintedModalBackground:!0,headerText:(0,N.t)("interstitial.unsubscribe_success_header")},a.createElement("div",{className:f8.Yg},(0,N.tx)("interstitial.unsubscribe_success_subheader_with_address",{emailName:f5((()=>{switch(e.policyType){case"FileCommentActivity":return(0,N.t)("interstitial.comment_activity_digest");case"TeamCommentActivity":return(0,N.t)("interstitial.team_comment_digest");case"FeedWeeklyDigest":return(0,N.t)("interstitial.feed_weekly_digest");case"WorkspaceActivity":return(0,N.t)("interstitial.workspace_activity");default:(0,I.xb)(e.policyType)}})()),emailAddress:f5(r.email)})),a.createElement(Z.nD,{onClick:()=>{t(tm.Lo())},className:"unsubscribe_confirmation_modal--button--j6qqT"},(0,N.tx)("interstitial.done")),a.createElement("button",{className:"unsubscribe_confirmation_modal--notificationSettingsButton--vmHlZ interstitial_modal--secondaryText--IC9Gu",onClick:()=>{t((0,tm.to)({type:f2.s,data:{tab:f2.c.NOTIFICATIONS}})),t(tm.aZ())}},(0,N.tx)("interstitial.open_notifications_settings"))):null},"UNSUBSCRIBE_CONFIRMATION_INTERSTITIAL_MODAL");var f6=r(82009);let f7={showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicate:!0,delete:!0,removeFromRecents:!0,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToWorkspace:!0};function f9({isEligbileForProTeamLockedRevampUI:e}){let t=(0,n.d4)(e=>e.currentUserOrgId),r=(0,n.d4)(e=>e.tileSortFilterStateByView.recentsAndSharing.recents),l=(0,oj.Gv)(r.filters.fileType),o=(0,f6.ql)(t,l),i=(0,f6.O8)(t),s=a.useMemo(()=>o.transform(e=>e.map(e=>(0,tJ.fA)(e))),[o]),d=a.useMemo(()=>i.transform(e=>e.map(tJ.Nu)),[i]),c=function(){let e=(0,n.d4)(e=>e.recentRepos),t=(0,n.d4)(e=>e.selectedBranchKeyByRepoId);return a.useMemo(()=>e.map(e=>(0,tJ.uy)(e,t)),[e,t])}(),m=function(){let e=(0,m3.Rp)();return a.useMemo(()=>Object.values(e).map(tJ.gB),[e])}(),u=a.useMemo(()=>a2.Qw.merge([s,d],c,m),[m,s,d,c]),_=a.useMemo(()=>({tileSortFilterConfig:r,sortKeys:[oj.C0.NAME,oj.C0.CREATED_AT,oj.C0.ACCESSED_AT]}),[r]),p="loaded"===u.status;return(0,g.kF)("RecentFiles"),(0,g.WX)({markName:"MainBodyContent",isLoaded:p}),a.createElement(ee.A,{loadingElementId:"loading-content-pane",loaded:p,loadingElementClassName:x.s.pr32.$},a.createElement(mT,{tiles:u.data,tileActions:f7,sortFilterOptions:_,newFileTile:!0,emptyStateText:null!==l?(0,N.t)("file_browser.tiles_view.default_overfiltered_text"):E.Ay.mobile||E.Ay.tablet?(0,N.t)("file_browser.tool_bar.recently_viewed_empty_state"):"",isEligbileForProTeamLockedRevampUI:e}),a.createElement(co.cx,null))}var ge=r(715880),gt=r(795234);let gr=new class{constructor(){this.SharerFilterOptionsSchemaValidator=(0,gt.vh)(),this.PlanFilterOptionsSchemaValidator=(0,gt.vh)()}getSharerFilterOptions(e){return this.SharerFilterOptionsSchemaValidator.validate(async({xr:t})=>await t.get(`/api/shared_with_you/sharer_filter_options?resource_type[]=${e.resource_type}`))}getPlanFilterOptions(e){return this.PlanFilterOptionsSchemaValidator.validate(async({xr:t})=>await t.get(`/api/shared_with_you/plan_filter_options?resource_type[]=${e.resource_type}`))}};function ga(){return{"":{label:(0,N.t)("shared_with_you.filters.all_organizations")}}}let gn=t1.M4.Query({fetch:async e=>{let t=await gr.getPlanFilterOptions({resource_type:e}),r={};return t.data.meta.plan_filters.forEach(e=>{let t={label:e.label,plan_id:e.plan_id,plan_type:e.plan_type};e.plan_id&&(r[e.plan_id]=t)}),{...ga(),...r}}});function gl(){return{"":(0,N.t)("shared_with.you.filters.anyone")}}var go=r(837988),gi=r(226455);let gs="seen_shared_files_onboarding",gd=(0,em.r1)("seen_account_profile_switcher_onboarding"),gc=(0,em.r1)(gs);function gm(){let e=(0,eo.md)(gd),t=(0,eo.md)(gc),r=(0,ec.e)({overlay:eg.fz8,priority:e_.N.SECONDARY_MODAL},[t,e]);return(0,c.h)(()=>{r.show({canShow:(e,t)=>t&&!e})}),a.createElement(ep.rq,{targetKey:gi.Bh,isShowing:r.isShowing,title:(0,N.tx)("rcs.shared_with_you.shared_files_title"),description:(0,N.tx)("rcs.shared_with_you.shared_files_description",{recents:a.createElement("span",{className:x.s.fontBold.$},(0,N.tx)("rcs.shared_with_you.recents"))}),primaryCta:{type:"button",label:(0,N.tx)("rcs.got_it"),onClick:r.complete,ctaTrackingDescriptor:ed.c.DONE},width:350,onClose:r.complete,trackingContextName:"File Browser Shared Files in Recents Overlay",userFlagOnShow:gs})}let gu=[ip.G.RECENTLY_VIEWED,ip.G.SHARED_FILES,ip.G.SHARED_PROJECTS],g_=e=>{switch(e){case ip.G.RECENTLY_VIEWED:return(0,N.t)("file_browser.recents_and_sharing_view.recent_files_tab_name");case ip.G.SHARED_PROJECTS:return(0,N.t)("file_browser.recents_and_sharing_view.shared_projects_tab_name");case ip.G.SHARED_FILES:return(0,N.t)("file_browser.recents_and_sharing_view.shared_files_tab_name");default:(0,I.xb)(e)}};function gp(e){let t=e.options.tileSortFilterConfig.filters.sharedBy,r=e.options.tileSortFilterConfig.filters.plan;return a.createElement("div",{className:x.s.flex.flexWrap.gap18.$},a.createElement(a.Fragment,null,e.filters?.sharer&&Object.keys(e.filters?.sharer).length>1&&a.createElement(a.Fragment,null,t&&a.createElement(nS.qD,{userId:t}),a.createElement(nS.lI,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.sharer,tab:e.tab})),e.filters?.plan&&Object.keys(e.filters?.plan).length>1&&a.createElement(a.Fragment,null,r?.planId&&a.createElement(nS.lV,{planOption:e.filters.plan[r.planId]}),a.createElement(nS.FU,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.plan,tab:e.tab})),e.filters?.fileType&&a.createElement(a.Fragment,null,a.createElement(nS.ye,{config:e.options.tileSortFilterConfig,tab:e.tab}))))}function gf(e){let t=e.selectedTab,r=(0,n.wA)(),o=(0,eC._6)(),i=(0,n.d4)(e=>e.tileSortFilterStateByView),s=t===ip.G.SHARED_PROJECTS?["folder"]:["file","file_repo","prototype"],d=function(e){let[t,r]=(0,a.useState)(gl()),n=e.join("&resource_type[]=");return(0,a.useEffect)(()=>{gr.getSharerFilterOptions({resource_type:n}).then(({data:e})=>{r(e.meta.shared_by_filters.reduce((e,{user_id:t,label:r})=>({...e,[t]:r}),{...gl()}))})},[n]),t}(s),c=function(){let e=(0,Y.TA)(),t=(0,n.d4)(e=>e.authedUsers),r=(0,n.d4)(e=>e.plans),a=(0,n.d4)(e=>e.orgById),o=(0,n.d4)(ge.P),i=(0,l.k)().limited_plan_spaces,s=e?t.byId[e]:null;return(i?r.map(e=>{let t="";if(e.plan_type===i_.O.ORG){let r=a[e.plan_id];t=r?.name??t}else{let r=o[e.plan_id];t=r?.name??t}return{label:t,plan_id:e.plan_id,plan_type:e.plan_type===i_.O.ORG?i_.O.ORG:i_.O.TEAM}}):(s?.plans??[]).map(e=>({label:e.name,plan_id:e.plan_id,plan_type:e.is_org?"org":"team"}))).reduce((e,t)=>({...e,[`${t.plan_id}`]:t}),{...ga()})}(),m=function(e){let t=e.join("&resource_type[]="),[r]=(0,t1.IT)(gn(t));return r.data||ga()}(s),u={[oj.cT.ALL]:(0,N.t)("shared_with_you.filters.org_deleted_drafts.all"),[oj.cT.SHARED]:(0,N.t)("shared_with_you.filters.org_deleted_drafts.shared"),[oj.cT.ORG_DELETED_DRAFTS]:(0,N.t)("shared_with_you.filters.org_deleted_drafts.deleted_user_drafts")},_={sharer:t!==ip.G.RECENTLY_VIEWED?d:void 0,plan:t===ip.G.RECENTLY_VIEWED?c:m,fileType:t!==ip.G.SHARED_PROJECTS,orgDeletedDrafts:t===ip.G.SHARED_PROJECTS?u:void 0},p=a.useMemo(()=>{let e;switch(t){case ip.G.RECENTLY_VIEWED:e=i.recentsAndSharing.recents;break;case ip.G.SHARED_FILES:e=i.recentsAndSharing.sharedFiles;break;case ip.G.SHARED_PROJECTS:e=i.recentsAndSharing.sharedProjects;break;default:(0,I.xb)(t)}return{tileSortFilterConfig:e,sortKeys:ip.o[t]}},[t,i]),f=e=>{e===ip.G.SHARED_FILES?(0,nc.trackEvent)("file_browser_shared_files"):e===ip.G.SHARED_PROJECTS&&(0,nc.trackEvent)("file_browser_shared_projects"),r(eS.$T({view:"recentsAndSharing",tab:e}))},g=e=>{(0,nc.trackEvent)("file view toggle",{viewType:e===oj.XU.GRID?"grid":"list"}),Object.keys(ip.G).map(t=>{r(eS.JF({selectedView:o,config:{...p.tileSortFilterConfig,viewMode:e},tab:ip.G[t]}))},r(eS.uV({viewId:"shared-with-you-projects",viewMode:e})))},E=a.createElement("div",{className:"x78zum5 x6s0dn4"},a.createElement(nS.$c,{initialViewMode:p.tileSortFilterConfig.viewMode,onViewModeChange:g})),b=a.createElement(nS.mc,{options:p,selectedView:o,dispatch:r,tab:t}),v=a.createElement("div",{className:x.s.flex.gap18.$,key:"sortWithViewOptions"},b,E),h=a.createElement(gp,{options:p,filters:_,tab:t,key:"recentsAndSharingTileFilters"}),y=a.createElement(nS.IB,{dropdownKey:"recents-and-sharing-sort-filter-mobile-dropdown",sortFilterOptions:p,filters:_,onViewModeChange:g,tab:t}),[w,T,S]=ot.t.useManagedTabs({[ip.G.RECENTLY_VIEWED]:!0,[ip.G.SHARED_FILES]:!0,[ip.G.SHARED_PROJECTS]:!0},e.selectedTab,e=>{f(e)}),C=gu.map((e,t)=>{let r=e===ip.G.SHARED_FILES?gi.Bh:"";return a.createElement(ot.t.Tab,{key:t,...w[e],htmlAttributes:{"data-onboarding-key":r}},g_(e))});return a.createElement(a.Fragment,null,a.createElement(go.p,null,a.createElement(gm,null)),a.createElement(nS.g2,{leftSide:a.createElement(X.J,null,a.createElement(ot.t.TabStrip,{manager:S},C)),rightSide:[h,v],rightSideMobile:y}))}function gg(e){switch(e){case nK.bb.ACCOUNT:return f2.c.ACCOUNT;case nK.bb.COMMUNITY:return f2.c.COMMUNITY;case nK.bb.NOTIFICATIONS:return f2.c.NOTIFICATIONS}}function gE(e){let t=(0,n.wA)(),r=(0,ew.R)(),l=uC({checks:{isEligbileForProTeamLockedRevampUI:r},shadowReadLabel:an.A5.RecentsAndSharingPageView.hasBanner}).unwrapOr(!1),{selectedTab:o,accountModalTab:i,emailPolicyToUnsubscribeFrom:s}=e,d=a.createElement(gf,{selectedTab:o}),c=(0,m.ZC)(i),u=(0,m.ZC)(s);return(0,f0.i)(),(0,fZ.V)(),(0,a.useEffect)(()=>{i&&i!==c?(t((0,tm.to)({type:f2.s,data:{tab:gg(i)}})),t(eS.$T({view:"recentsAndSharing"}))):s&&s!==u&&(f1.z.updateUserCommunicationPreference({channelType:"email",policyType:s,policySetting:"none"}).then(()=>{t((0,tm.to)({type:f3,data:{policyType:s}}))}).catch(e=>{t((0,tm.to)({type:f2.s,data:{tab:gg(nK.bb.NOTIFICATIONS)}})),t(tM.F.dequeue({}))}),t(eS.$T({view:"recentsAndSharing"})))},[i,c,s,u,t]),a.createElement(lC.r,{banner:l?a.createElement(uF,{folderId:null}):a.createElement(fG,null),viewbar:d,toolbar:a.createElement(fD,null),viewBarSticky:!0,content:function(e,t){switch(e){case ip.G.SHARED_FILES:return a.createElement(fX,{isEligbileForProTeamLockedRevampUI:t?.isEligbileForProTeamLockedRevampUI});case ip.G.SHARED_PROJECTS:return a.createElement(fQ,{isEligbileForProTeamLockedRevampUI:t?.isEligbileForProTeamLockedRevampUI});case ip.G.RECENTLY_VIEWED:return a.createElement(f9,{isEligbileForProTeamLockedRevampUI:t?.isEligbileForProTeamLockedRevampUI});default:(0,I.xb)(e)}}(o,{isEligbileForProTeamLockedRevampUI:r})})}var gb=r(993810),gv=r(297703);function gh(e){let t=(0,eV.X$)("FileCreationPillButton"),r=(0,eV.YY)(t).unwrapOr(!1),n="pills"===(0,$.hE)()();return a.createElement(gy,{...e,isStarter:r,enablePlusIcon:n})}function gy(e){let t=e.isDisabled||e.isLoading,{enablePlusIcon:r=!1}=e,n="";return e.isDisabled&&!e.isLoading?n=(0,N.t)("file_browser.creation_buttons.disabled_by_organization"):e.isStarter&&!e.isLoading&&e.showComingSoon&&(n=(0,N.t)("file_browser.creation_buttons.coming_soon")),a.createElement(st.v,{mode:e.brand},a.createElement(no.E,{...nd.xk(gw.button,"bake-filebrowser"===e.brand&&gw.buttonFigmake,t&&gw.buttonDisabled),onClick:e.onClick,"data-testid":e.isLoading?void 0:e.dataTestId,disabled:t,"data-onboarding-key":e.dataOnboardingKey,"data-tooltip":n,"data-tooltip-type":rH.Ib.TEXT,"data-tooltip-timeout-delay":50},a.createElement(ee.x,{loaded:!e.isLoading,loadingSkeletonElement:a.createElement("div",{className:"x1yjdb4r"},a.createElement(p$.Qp,{animationType:p$.JR.LIGHT_SHIMMER,className:"x10w6t97"})),showElementBeforeLoaded:!0},a.createElement("div",{className:"x1y1aw1k xwib8y2 xyfqnmn xnm25rq x78zum5 x6s0dn4 x167g77z"},a.createElement("div",{...nd.xk(!t&&gw.iconContainer,r&&gw.fileIconDisplayToggle),"data-testid":"file-icon"},e.icon),r&&a.createElement("div",{...nd.xk(!t&&gw.iconContainer,gw.plusIconDisplayToggle),"data-testid":"plus-icon"},a.createElement(gv.J,null)),a.createElement("span",{...nd.xk(gw.text)},e.title)))))}sr.Tj,sr.Tj.border;let gw={button:{"--x1qf8z1y":"x920oto xx5s86v x4n98v3","--xdmwo94":"x18ck9ew x1x7l3x0 xhxpffl","--color-icon":"xn0whsw",flexShrink:"x2lah0s",borderRadius:"x1d36bvo",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,backgroundColor:"x1v8gsql x17c7w1w x1tt564c x8ge37t",boxShadow:"x6bkol7 xrhlwir xsfrc4e x129mn88",overflow:"xb3r6kr",overflowX:null,overflowY:null,$$css:!0},buttonFigmake:{"--color-icon":"xwa2v1s",$$css:!0},buttonDisabled:{"--color-icon":"xz8z4lq","--color-text":"x15kbib2",backgroundColor:"x1yjdb4r",boxShadow:"x6bkol7 x1icplyp",$$css:!0},text:{...ns.g.textBodyMedium,color:"xiuzu7u",$$css:!0},iconContainer:{backgroundColor:"xu5wzci",borderRadius:"x192jxwq",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},fileIconDisplayToggle:{display:"x1j4q9eb",$$css:!0},plusIconDisplayToggle:{display:"x36f1ty",$$css:!0}};function gT({isDisabled:e,isLoading:t,newFileFrom:r}){let n=(0,s$.$)({isDraftsFolder:!0,editorType:eF._Y.COOPER,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return a.createElement(gh,{title:(0,N.t)("file_browser.creation_buttons.marketing_asset"),brand:"cooper",dataTestId:"new-cooper-file-button",icon:a.createElement(gb.u,null),isDisabled:e,isLoading:t,onClick:n})}var gI=r(500217);function gx({isDisabled:e,isLoading:t,newFileFrom:r}){let n=(0,s$.$)({isDraftsFolder:!0,editorType:eF._Y.DESIGN,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return a.createElement(gh,{title:(0,N.t)("file_browser.creation_buttons.design"),brand:"design",dataTestId:"new-design-file-button",icon:a.createElement(gI.z,null),isDisabled:e,isLoading:t,onClick:n})}var gN=r(444469);function gS({isDisabled:e,isLoading:t,newFileFrom:r}){let n=(0,s$.$)({isDraftsFolder:!0,editorType:eF._Y.WHITEBOARD,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return a.createElement(gh,{title:(0,N.t)("file_browser.creation_buttons.figjam"),brand:"whiteboard",dataTestId:"new-whiteboard-file-button",icon:a.createElement(gN.D,null),isDisabled:e,isLoading:t,onClick:n})}var gC=r(563127),gk=r(946877);function gR({isDisabled:e,isLoading:t,newFileFrom:r}){let n=(0,s$.$)({isDraftsFolder:!0,editorType:eF._Y.FIGMAKE,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return a.createElement(gh,{title:(0,N.t)("file_browser.creation_buttons.figmake"),brand:"bake-filebrowser",dataTestId:"new-figmake-file-button",icon:a.createElement(gC.Z,null),isDisabled:e,isLoading:t,onClick:n,showComingSoon:(0,gk.W)()})}var gA=r(815421);function gO(e){return a.createElement(no.E,{className:"x2lah0s x1d36bvo xb3r6kr xbzrb6o x1v8gsql x13bsb82 xpzxyvc x1aqsfbg x6bkol7 x622810 xsfrc4e x13nvs6n",onClick:e.onClick,"data-testid":e.isLoading?void 0:e.dataTestId,"data-onboarding-key":e.dataOnboardingKey,"data-tooltip":e.tooltipText,"data-tooltip-type":rH.Ib.TEXT},a.createElement(ee.x,{loaded:!e.isLoading,loadingSkeletonElement:a.createElement("div",{className:"x1yjdb4r"},a.createElement(p$.Qp,{animationType:p$.JR.LIGHT_SHIMMER,className:"x10w6t97"})),showElementBeforeLoaded:!0},a.createElement("div",{className:"xfawy5m"},e.icon)))}function gP({isLoading:e}){let t=(0,n.wA)();return a.createElement(gO,{dataTestId:"file-import-button",icon:a.createElement(gA.R,null),isLoading:e,onClick:()=>{t((0,_X.L)())},tooltipText:(0,N.t)("file_browser.creation_buttons.import")})}sr.Tj.border;var gF=r(779527);function gL({isDisabled:e,isLoading:t,newFileFrom:r}){let n=(0,s$.$)({isDraftsFolder:!0,editorType:eF._Y.SITES,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return a.createElement(gh,{title:(0,N.t)("file_browser.creation_buttons.sites"),brand:"seascape",dataTestId:`new-${mn.oQ}-file-button`,icon:a.createElement(gF.$,null),isDisabled:e,isLoading:t,onClick:n,showComingSoon:!0})}var gD=r(418709);function gM({isDisabled:e,isLoading:t,newFileFrom:r}){let n=(0,s$.$)({isDraftsFolder:!0,editorType:eF._Y.SLIDES,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return a.createElement(gh,{title:(0,N.t)("file_browser.creation_buttons.slide_deck"),brand:"piper",dataTestId:"new-slides-file-button",icon:a.createElement(gD.T,null),isDisabled:e,isLoading:t,onClick:n})}function gB({newFileFrom:e}){let t=(0,n.d4)(e=>e.user?.drafts_folder_id),{data:r,status:l}=(0,sM.nt)(t),o=(0,sB.h)(r),i="loading"===l,s=o.map(({editorType:t,canCreate:r})=>{let n=!r;switch(t){case eF._Y.DESIGN:return a.createElement(gx,{key:"design",isDisabled:n,isLoading:i,newFileFrom:e});case eF._Y.WHITEBOARD:return a.createElement(gS,{key:"whiteboard",isDisabled:n,isLoading:i,newFileFrom:e});case eF._Y.SLIDES:return a.createElement(gM,{key:"slides",isDisabled:n,isLoading:i,newFileFrom:e});case eF._Y.SITES:return a.createElement(gL,{key:"seascape",isDisabled:n,isLoading:i,newFileFrom:e});case eF._Y.COOPER:return a.createElement(gT,{key:"cooper",isDisabled:n,isLoading:i,newFileFrom:e});case eF._Y.FIGMAKE:return a.createElement(gR,{key:"figmake",isDisabled:n,isLoading:i,newFileFrom:e});default:(0,I.xb)(t)}}).filter(Boolean);return s.push(a.createElement(gP,{key:"import",isLoading:i})),(0,g.WX)({markName:"FileCreateEntrypoint",isLoaded:"loaded"===l}),a.createElement(a.Fragment,null,s)}function gU({from:e}){let t=a.useRef(null),r=a.useRef(null),[n,l]=a.useState(!1),o=(0,$.hE)()(),i=e===iu.f6.FILE_BROWSER_TOPBAR_RECENTS,s="initial"===o&&!i||"omnicreate"===o;return a.useLayoutEffect(()=>{let e=r.current,a=t.current;if(!e||!a)return;let n=()=>{l(a.offsetWidth<e.offsetWidth)};n();let o=new ResizeObserver(n);return o.observe(t.current),()=>o.disconnect()},[]),a.createElement("div",{className:"xh8yej3 x9f619 x78zum5 x7v6yn8 xz9dl7a xsag5q8",ref:t},!s&&a.createElement("div",{ref:r,...nd.xk(g$.contentContainer,n&&g$.hide)},a.createElement(gB,{newFileFrom:e})),(s||n)&&a.createElement(sH.R,{newFileFrom:e}))}let g$={contentContainer:{display:"x3nfvp2",gap:"x167g77z",rowGap:null,columnGap:null,flexShrink:"x2lah0s",$$css:!0},hide:{visibility:"xlshs6z",$$css:!0}};var gj=r(860676);function gW({teamId:e}){let t=(0,u.Rs)(eG.GyZ,{teamId:e}),r=t.data?.team||null,n=(0,H.dq)();if(!r?.org)return null;if(n!==r.org.id)return a.createElement(_l,{planEntity:r.org});let l=(r.org?.workspaces?.length||0)>0&&r.plan?.tier===gj.Agb.ENTERPRISE;return a.createElement(id.A5,null,r.org&&a.createElement(_a,{org:r.org,currentResourceId:e,hasTrailingDivider:!!r.workspace||l}),(r.workspace||l)&&a.createElement(_s,{workspace:r.workspace??{id:lb.O},currentResourceId:e,orgId:r.org?.id,hasTrailingDivider:!1}))}var gG=r(362332),gV=r(444596),gH=r(420285),gz=r(912310),gY=r(663128);function gK(){return a.createElement("div",{className:x.s.flex.p12.colorBgSelected.bRadius6.$},a.createElement("div",{className:x.s.mr12.colorIcon.itemSelfCenter.$},a.createElement(en.B,{svg:gY.A})),a.createElement("div",null,(0,N.tx)("sidebar.meta.this_team_is_for_education_users_only")," ",a.createElement(Z.Us,{target:"_blank",trusted:!0,href:"/education/"},(0,N.tx)("org_home_view_meta.learn_more"))))}function gq({team:e}){let t=(0,n.wA)(),r=(0,u.Rs)(eG.kQI,{id:e.id}),l=!!r.data?.team?.hasPermission,[{data:o}]=(0,_.IT)((0,G.Xg)({teamId:e.id})),i=(o||[]).filter(e=>""!==e.name).length,s=(0,b.I7)("exp_fbg_project_limit_upsell");if(!(!e.subscription&&!e.org_id&&l&&i>=al.Wf)||s.getConfig().getValue("show_upsell",!1))return null;let d=a.createElement(Z.Us,{onClick:()=>{t((0,tm.to)({type:a_.V,data:{teamId:e.id,upsellSource:ag.b.STARTER_TEAM_FOOTER}}))},trusted:!0,trackingProperties:{trackingDescriptor:ed.c.UPGRADE_TO_A_PAID_PLAN},"data-testid":"starterTeamUpsellFooterUpgradeLink"},(0,N.tx)("file_browser.starter_team.upgrade_link"));return a.createElement(rV.fu,{name:"Starter Team Upsell Footer"},a.createElement("div",{className:M()(x.s.flex.p32.mt16.bRadius6.justifyCenter.colorBorder.$,"starter_team_upsell_footer--borderStyle--pM4nA"),"data-testid":"starterTeamUpsellFooter"},a.createElement("div",{className:M()(x.s.flex.flexColumn.itemsCenter.lh24.$,"starter_team_upsell_footer--contentWrapper--H-soB")},a.createElement("strong",null,i===al.Wf?(0,N.tx)("file_browser.starter_team.project_limit_warning",{maxProjects:al.Wf}):(0,N.tx)("file_browser.starter_team.project_limit_warning_over_max_projects")),a.createElement("p",{className:x.s.alignCenter.$},(0,N.tx)("file_browser.starter_team.project_limit_info",{upgradeLink:d})))))}function gJ(e){let t=(0,n.wA)(),r=a.useRef(null),l=(0,n.d4)(({dropdownShown:e})=>e),o=e.team.org_id??null,i=(0,J.Q)({currentOrgId:o,currentTeamId:null}),s=(0,ti.S)(),d=a.useMemo(()=>{if("loaded"===i.status)return(0,W.T0)(i.data,e.team.id)},[i,e.team.id]);if("loaded"!==i.status)return a.createElement("div",{className:x.s.flex.itemsCenter.colorIcon.$},a.createElement(en.B,{svg:pi.A}));let c=(0,W.gV)(i.data,o),m=e.dropdownKey&&l&&l.type===e.dropdownKey&&l.data&&l.data.targetRect,u=r.current&&l?.data?.targetRef===r.current&&l?.type===nO.jU,_=r.current,p=[];return e.showInvite&&p.push(a.createElement(l1.c$,{key:"import",children:(0,N.tx)("file_browser.team.invite"),onClick:e.onInviteClick})),p.push(a.createElement(l1.c$,{key:"share",children:(0,N.tx)("file_browser.team.view_members"),onClick:t=>e.onMembersClick(t)})),s&&p.push(a.createElement(l1.c$,{key:"add-to-favorites-section",children:a.createElement("div",{className:x.s.flex.justifyBetween.itemsCenter.w150.$},(0,N.tx)("favorited_resources.add_to_sidebar"),a.createElement(en.B,{svg:ps.A})),onClick:a=>{a.stopPropagation(),r.current&&t(eS.j7({type:nO.jU,data:{targetRect:_.getBoundingClientRect(),targetRef:_,resourceId:e.team.id}}))}})),a.createElement("span",null,a.createElement(no.E,{className:M()(x.s.flex.itemsCenter.colorIcon.$,po.HM),ref:r,onClick:r=>{e.dropdownKey&&_&&t(eS.j7({type:e.dropdownKey,data:{targetRect:_?.getBoundingClientRect()}}))}},a.createElement(tP.J,null)),m&&a.createElement(pl.Cf,{targetRect:l.data.targetRect,minWidth:172,maxWidth:172,propagateCloseClick:!0},p),u&&a.createElement(pn.t,{setFavorite:e.setFavorite,resourceId:e.team.id,resourceType:eF.bk.TEAM,favoriteId:d?.id,orgId:o,sections:(i.data?.currentUser?.userSidebarSections?(0,Q.oA)(i.data.currentUser.userSidebarSections):null)??[],userHasMaxFavorites:c,customSectionOrdering:i.data.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[]}))}var gX=r(957736),gQ=r(328797),gZ=r(896595),g0=r(76e4),g1=r(443074),g2=r(961675),g4=r(816760),g8=r(700624),g5=r(174091),g3=r(412082),g6=r(809351),g7=r(475562),g9=r(339023);let Ee=(0,ts.Ju)(function({teamId:e,trackingProperties:t,hasSecondaryBtn:r=!0}){let l=(0,a.useMemo)(()=>(0,g7.To)(),[]),o=(0,n.wA)(),i=()=>{o(tm.Ce())},s=r?a.createElement(m7.V,{onClick:()=>{d.Ay.redirect("/pricing","_blank")}},(0,N.t)("pro_onboarding.pro_feature_modal.compare_plans")):null;return a.createElement(rV.fu,{name:"Pro Features Modal",properties:t??g3.S.getTrackingProperties(e)},a.createElement(g9.n,{...l,dismissModal:i,clickPrimaryBtn:i,secondaryBtn:s,showPricing:!1,panelTitleSize:g9.I.LARGE,cardsClickable:!0}))},"ProFeaturesModal");var Et=r(725183);function Er(e){let{team:t,orgTeamActionType:r}=e;switch(r){case lg.gO.CLICK_JOIN:case lg.gO.BYPASS_REQUEST:return a.createElement(a.Fragment,null,(0,N.tx)("file_browser.team.no_permissions_message",{teamName:t.name}),a.createElement("br",null),(0,N.tx)("file_browser.team.please_join_team"));case lg.gO.CLICK_REQUEST:return a.createElement(a.Fragment,null,(0,N.tx)("file_browser.team.no_permissions_message",{teamName:t.name}),a.createElement("br",null),(0,N.tx)("file_browser.team.please_request_to_join_team"));case lg.gO.CLICK_WITHDRAW:return(0,N.tx)("file_browser.team.request_to_join_team_is_pending",{teamName:t.name});default:return(0,N.tx)("file_browser.team.no_permissions_message",{teamName:t.name})}}function Ea({team:e}){let t=(0,n.d4)(e=>e.currentUserOrgId),r=(0,n.d4)(e=>(0,ao.getPermissionsStateMemoized)(e)),l=(0,n.d4)(t=>t.teamRoleRequests[e.id]),o=(0,eV.D6)("TeamNonMemberJoinView"),i=(0,an.MF)({oldValue:a2.Qw.loaded((0,ao.canAdminOrg)(t,r)),newValue:(0,eV.j_)(o),enableFullRead:(0,aa.DQ)(aa.Pw.GROUP_7),label:an.A5.TeamNonMemberJoinView.canAdminOrg}).unwrapOr(!1),s=(0,lg.YP)(e,l,r,i),d=(0,n.wA)(),c=a.createElement("div",{className:"team_page_view--nonMemberViewContainer--uleTt"},a.createElement("div",{className:"team_page_view--header--sTxh6"},a.createElement(tU.nl,{team:e,size:tU.Pf.LARGE}),a.createElement("span",{className:"team_page_view--teamName--9MXYi text--fontPos18--rYXJb text--_fontBase--QdLsd"},e.name)),a.createElement("div",{className:"team_page_view--joinOptionText--McFNQ text--fontPos14--OL9Hp text--_fontBase--QdLsd"},a.createElement(Er,{team:e,orgTeamActionType:s})),a.createElement("div",{className:"team_page_view--joinButton--waTM-"},a.createElement(g0.m3,{team:e,onJoin:(0,pP.GR)(d,e.id),onLeave:()=>{d(tm.to({type:lh.p,data:{teamId:e.id}}))},isCardActive:!1})));return a.createElement(lC.r,{content:c})}function En({teamId:e,selectedTab:t,upgradeModalType:r,showProOnboardingModal:l,showResourceConnectionInviteModal:o}){let i=(0,a4.R)(t=>t.teams[e]),s=(0,n.d4)(e=>e.currentUserOrgId),d=(0,n.d4)(e=>i&&i.org_id&&e.orgById[i.org_id]||null),m=(0,n.d4)(e=>e.loadingState),_=(0,n.wA)(),p=(0,eC._6)(),[f,g]=a.useState(!1);(0,gG.w)(e);let E=(0,g5.Z)(o),b=(0,g4.t)(E,o);a.useEffect(()=>{o&&b()},[o,b]);let v=(0,al.w5)(i)&&!i?.org_id,h=function(e){let t=(0,u.Rs)(eG.Fvs,{teamId:e},{enabled:!!e});if(null!==t.data&&!t.data?.team?.plan){let t={code:"nonNullableResult",path:[],retriable:!1,error:Error("No Plan found for team, id: "+e)};return a2.Qw.error([t])}return t.transform(e=>e.team?.plan)}(e),y=a.useMemo(()=>h.transform(e=>e.tier===eF.Ag.PRO||e.tier===eF.Ag.STUDENT),[h]),w=(0,an.MF)({oldValue:a2.Qw.useMemoizedLoaded(v),newValue:y,label:an.A5.TeamPageView.isProTeam,enableFullRead:(0,aa.DQ)(aa.Pw.GROUP_6),maxReports:5}).unwrapOr(!1);(0,u.Rs)(eG.yQw,{teamId:e});let T=(0,g8.dr)(e),I="loaded"===T.status,x=T.data,S={canAdminOrg:!!x?.canAdminOrg,canAdminTeam:!!x?.canAdmin,canEditTeam:!!x?.canEdit,canReadTeam:!!x?.canRead,canDeleteTeam:!!x?.canDelete,isInTeam:!!x?.isInTeam};(0,c.h)(()=>{let e=(0,g2.QL)("team_role_redemption");if(e&&parseInt(e)in ut.e6){let e=(0,g6.VE)();e&&_(tM.F.enqueue({message:e})),(0,g2.EM)("team_role_redemption")}}),a.useEffect(()=>{let e=g1.um.loadingKeyForPayload();(0,_F.VP)(m,e)||(0,_F.D2)(m,e)||_(g1.um())},[_,m]),a.useEffect(()=>{s&&_((0,p_.Rw)())},[_,s]),a.useEffect(()=>{if(i)g(!1);else{let t=pP.HD.loadingKeyForPayload({teamId:e}),r=`TEAM_GET_ACTION_${e}`;s&&!m[t]?_(pP.HD({teamId:e,disableFlashError:!0})):(0,_F.VP)(m,t)||(0,_F.VP)(m,r)||g(!0)}},[_,m,i,e,s]),a.useEffect(()=>{if(!i||i.org_id)return;let e=_c.m$.loadingKeyForPayload({teamId:i.id});if((0,_F.VP)(m,e)||(0,_F.D2)(m,e)||_(_c.m$({teamId:i.id})),t===ez.A$.BILLING){(0,an.HZ)({label:an.A5.TeamPageView.selectTeamViewBillingTab,oldValue:!1,newValue:!0,maxReports:5});let e=uR.Be.loadingKeyForPayload({teamId:i.id});(0,_F.D2)(m,e)||(0,_F.VP)(m,e)||_(uR.Be({teamId:i.id}))}else if(t===ez.A$.MEMBERS){let e=_c.m$.loadingKeyForPayload({teamId:i.id});(0,_F.VP)(m,e)||(0,_F.D2)(m,e)||_(_c.m$({teamId:i.id}))}else if(t===ez.A$.SETTINGS){let e=uR.Be.loadingKeyForPayload({teamId:i.id});S.canAdminTeam&&w&&!(0,_F.VP)(m,e)&&!(0,_F.D2)(m,e)&&_(uR.Be({teamId:i.id}))}},[_,t,m,i,d,w,S.canAdminTeam]);let C=(0,Y.Pc)(),k=(0,u.Rs)(eG.Cit,{teamId:e}),R=k.data?.team?.currentTeamUser,A=(0,pv.R)();a.useEffect(()=>{let e;if(!(i&&C&&R&&r)||!w)return;let a=r===eF.G_.WHITEBOARD?eF._Y.WHITEBOARD:eF._Y.DESIGN;a===eF._Y.DESIGN?e=R.designAccountTypeRequest?.status==="pending":a===eF._Y.WHITEBOARD&&(e=R.whiteboardAccountTypeRequest?.status==="pending"),!0===e&&_(aR.s.flash((0,N.t)("team_view.request_upgrade.request_already_sent"))),_(eS.$T({view:"team",teamId:i.id,teamViewTab:t}))},[_,i,C,R,r,w,t,A]),(0,c.h)(()=>{l&&_(tm.to({type:Et.C,data:{teamId:e}}))});let O=a.useRef(!1);a.useEffect(()=>{!O.current&&"team"===p.view&&p.assetTransferRequestId&&_(tm.to({type:(0,gV.S)(),data:{selectedAssetTransferRequest:p.assetTransferRequestId}})),O.current=!0});let P=f||!S.canReadTeam&&!s;return I?P?a.createElement(lB.S,{resourceType:nK.Ft.TEAM}):i?S.canReadTeam?a.createElement(El,{team:i,lgTeamPermissions:S,org:d,user:C,selectedTab:t}):a.createElement(Ea,{team:i}):null:a.createElement(et.qc,null)}function El({team:e,lgTeamPermissions:t,org:r,user:l,selectedTab:o}){let i;let{canAdminOrg:s,canAdminTeam:d,canEditTeam:c,canReadTeam:m,isInTeam:u,canDeleteTeam:p}=t,[{status:E,data:b}]=(0,_.IT)((0,G.Xg)({teamId:e?.id}),{revalidateOnMount:!0}),v="loaded"===E,h=e.id,y=(0,eT.vt)(h),w=(0,ew.R)(h),T=(0,ew.jn)(),I=(0,n.d4)(e=>e.teamBilling),S=(0,n.wA)(),C=(0,eC._6)(),k=a.useCallback(t=>{let r={view:"team",teamId:e?e.id:"",teamViewTab:t};S(eS.$T(r))},[S,e]),R=(0,n.d4)(e=>e.avatarEditorState),A=(0,n.d4)(e=>e.teamRoleRequests),O=!!(0,n.d4)(t=>e&&(0,ao.canManageOrgTeam)(e.id,t,t.user?.id)),P=a.useMemo(()=>{if(e&&m)switch(e.org_access){case eF.bU.PRIVATE:return(0,N.t)("file_browser.team_header.closed_team_header");case eF.bU.SECRET:return(0,N.t)("file_browser.team_header.secret_team_header")}},[e,m]),F=a.useMemo(()=>{if(e&&m){if(e.org_access===eF.bU.PRIVATE)return(0,N.t)("file_browser.team_header.closed_team_subtitle");if(e.org_access===eF.bU.SECRET)return(0,N.t)("file_browser.team_header.secret_team_subtitle")}},[e,m]),L=a.useCallback((t,r,a)=>{if(e){let n={team:e,entrypoint:"team_page_view",sectionId:a,favoriteId:r};t?S(eR.DN(n)):S(eR.ox(n))}},[S,e]),D=()=>{S((0,G.SX)({where:t4.Ah.FolderListView,team:{...e,canEdit:!!t.canEditTeam}}))},M=()=>{S(eS.oB()),V(),k(ez.A$.SETTINGS)},B=(0,gZ.s)(),U=a.useCallback(()=>{B({teamId:h,canAdmin:t.canAdminTeam})},[B,h,t.canAdminTeam]),$=e?{team:e,billing:I,teamId:e.id}:void 0,j={view:"team",teamId:h,teamViewTab:ez.A$.HOME},W=(0,gH.n)(gX.am.MEMBERS,$,!!t.canAdminTeam,!!t.canEditTeam,!!t.canReadTeam,j),V=(0,gH.n)(gX.am.SETTINGS,$,!!t.canAdminTeam,!!t.canEditTeam,!!t.canReadTeam,j);a.useEffect(()=>{o===ez.A$.MEMBERS?W():o===ez.A$.SETTINGS&&V()},[]),(0,g.kF)("Team"),(0,g.WX)({markName:"MainBodyContent",isLoaded:v,contextArgs:{numFolders:b?.length??null}}),i=e.org_id?v?a.createElement(a.Fragment,null,a.createElement(mq,{canAdminTeam:d,canEditTeamContents:c,folderList:b||[],isEligbileForProTeamLockedRevampUI:w,onCreateNewFolder:D,selectedView:C,team:e,teamId:h,viewId:`team-${h}`}),a.createElement(co.cx,null)):a.createElement(et.qc,null):a.createElement(a.Fragment,null,v?a.createElement(a.Fragment,null,a.createElement(mq,{canAdminTeam:d,canEditTeamContents:c,folderList:b||[],isEligbileForProTeamLockedRevampUI:w,onCreateNewFolder:D,selectedView:C,team:e,teamId:h,viewId:`team-${h}`}),a.createElement(co.cx,null)):a.createElement(et.qc,null));let H=t.canAdminTeam?a.createElement(lK.FL,{entity:e,entityType:lY.ck.TEAM,avatarEditorState:R,size:40,dispatch:S,avatarSvg:ri.A,svgSizeRatio:.6}):a.createElement(tU.nl,{team:e,size:40,avatarSvg:ri.A,svgSizeRatio:.6}),z=(0,an.u8)({oldValue:!m&&!O,newValue:!m,label:an.A5.TeamPageView.hideTeamContextMenu,enableFullRead:(0,aa.DQ)(aa.Pw.GROUP_5)}),Y=(0,gQ.N)(),K=(()=>{if(z)return;let t=Y({onChangeTeamIconClick:()=>{S((0,lq.o)({team:e}))},onRenameClick:()=>{S(tm.to({type:(0,gz.h)(),data:{team:e}}))},selectedTeamPermissions:{canAdmin:d,canAdminOrg:s,canDelete:p,canView:m,isInTeam:u},team:e}),a=[];return $&&(c&&(r||a.push({displayText:(0,N.t)("teams_table.view_team_members"),callback:W}),a.push({displayText:(0,N.t)("team_view.settings.view_settings"),callback:M})),r&&a.push({displayText:(0,N.t)("teams_table.view_team_members"),callback:W})),a.length>0&&a.push({displayText:"",separator:!0}),a.push(...t),a})(),q=K?{kind:lx.A.CUSTOM,key:lF.DROPDOWN,element:a.createElement(lH,{buttonAriaLabel:(0,N.t)("team_view.page_header_dropdown_label"),dropdownKey:`team-${e.id}`,dropdownOptions:K})}:void 0,J=e.pro_team,X=e.student_team?a.createElement(gK,null):(0,al.w5)(e)?void 0:a.createElement(gq,{team:e});return a.createElement(lC.r,{content:a.createElement(a.Fragment,null,i,X),banner:a.createElement(_f,{teamId:h,selectedTab:o}),header:a.createElement(lS,{avatar:H,title:e.name,rightSideActions:function(e,t,r,n,l,o,i,s,d){let c=[],m=!!Object.keys(o).includes(e.id)&&o[e.id]?.status===pf.c.PENDING,u=l.canAdminTeam&&!l.isInTeam,_={kind:lx.A.CUSTOM,key:lF.FAVORITE,element:a.createElement(lz.i,{setFavorite:n,favoriteType:eF.bk.TEAM,resourceId:e.id,orgId:e.org_id,size:"lg"})};u&&c.push({kind:lx.A.CUSTOM,key:lF.JOIN_TEAM,element:a.createElement(ay.c,{variant:"secondary",onClick:(0,pP.GR)(t,e.id,ut.e6.ADMIN)},(0,N.t)("file_browser.team.join_team"))});let p=d?rH.Ib.TEXT:void 0,g=d?(0,N.t)("locked_team.label.tooltip"):void 0;l.canEditTeam&&!(0,ey.R$)(r,e.org_id)?c.push({kind:lx.A.CUSTOM,key:lF.NEW_PROJECT,element:a.createElement("div",{"data-tooltip":g,"data-tooltip-type":p},a.createElement(ay.c,{"data-onboarding-key":"team-view-new-project-cta","data-testid":"team-view-new-project-cta",variant:"primary",disabled:d,"aria-label":(0,N.t)("project_creation.create_project"),iconPrefix:a.createElement(tF.x,null),onClick:()=>{t((0,G.SX)({team:{...e,canEdit:l.canEditTeam},where:t4.Ah.FolderListView}))}},(0,N.tx)("file_browser.team.add_project"))),showOnMobile:!0}):!e.org_id||e.org_access===eF.bU.SECRET||u||l.canAdminTeam||c.push({kind:lx.A.CUSTOM,key:lF.REQUEST_TO_EDIT,element:a.createElement(ay.c,{variant:"primary",onClick:()=>{m?t(pm.lT({requestId:o[e.id]?.id})):t(tm.to({type:pE.$,data:{team:e,requesterCurrentLevel:ut.e6.VIEWER}}))}},m?(0,N.t)("file_browser.team.cancel_request"):(0,N.t)("file_browser.team.request_to_edit"))}),c.push({kind:lx.A.CUSTOM,key:lF.INVITE,element:a.createElement(ay.c,{variant:"secondary",onClick:d?f.lQ:s,disabled:d,htmlAttributes:{"data-tooltip":g,"data-tooltip-type":p}},(0,N.t)("file_browser.team.share"))}),e.org_id&&c.push(_);let E=a.createElement(gJ,{dropdownKey:"team-overflow-dropdown",team:e,showInvite:!0,onInviteClick:s,onMembersClick:i,setFavorite:n});return c.push({kind:lx.A.CUSTOM,key:lF.TEAM_OVERFLOW_MENU,showOnMobile:!0,hideOnDesktop:!0,element:E}),c}(e,S,l,L,t,A,e=>{e.stopPropagation(),S(eS.oB()),W(),k(ez.A$.MEMBERS)},U,!!h&&y||T),rightSideOfTitleAction:q,pageHeaderIcon:void 0,badge:a.createElement(aV.Y,{direction:"horizontal"},P?a.createElement("div",{className:x.s.ml4.mr4.$,"data-tooltip-type":rH.Ib.TEXT,"data-tooltip":P,"data-tooltip-offset-y":-4,"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200,"data-tooltip-subtext":F},a.createElement(lj.$,null)):void 0,J?a.createElement(a.Fragment,null,a.createElement(rV.fu,{name:rW._Y.PROFESSIONAL,properties:g3.S.getTrackingProperties(h)},a.createElement(rV.$z,{type:"button",onClick:()=>{S(tm.to({type:Ee,data:{teamId:e.id}}))},className:"team_page_view--pointerOnHover--at7fp"},a.createElement(rW.Ex,{color:rW.zE.INFORMATIONAL,text:(0,N.t)("pro_onboarding.professional"),size:rW.vj.EXTRA_LARGE})))):void 0)})})}var Eo=r(861813),Ei=r(50429),Es=r(72462),Ed=r(527546),Ec=r(566726),Em=r(466747),Eu=r(900552),E_=r(726300),Ep=r(45137),Ef=r(226710);let Eg={ctrlKey:"metaKey"};function EE(e,t={}){let r=(0,n.wA)(),l=(0,n.Pj)(),o=a.useMemo(()=>({metaKey:e=>{let t=(0,mr.xS)(l.getState(),e);r(e7.V3({url:t}))},...t}),[t,r,l]);return a.useCallback((t,a)=>{let n=e(a),l=Object.keys(o).find(e=>t[e]);if(l){let e=o[E.Ay.mac?l:Eg[l]||l];if(e){t.preventDefault(),e(n);return}}r(eS.$T(n))},[o,r,e])}var Eb=r(15120),Ev=r(941237),Eh=r(779237);let Ey="org_user_meta_content--teamsHeader--1p4jT org_user_meta_content--sectionHeader--snmkw text--fontPos13--xW8hS text--_fontBase--QdLsd";function Ew(e){let t=(0,n.wA)(),r=(0,Y.iZ)(),l=(0,Ev.w)(e.user),o=(0,n.d4)(t=>t.currentUserOrgId===e.orgId),i=()=>{t((0,tm.to)({type:Eh.u}))};return a.createElement("div",{className:x.s.flex.flexColumn.ml16.hFull.$},a.createElement(Ei.x,{isLoading:e.isLoading},()=>a.createElement(a.Fragment,null,a.createElement("div",{className:"org_user_meta_content--userData--NrFpt"},a.createElement(tU.H8,{user:e.user,size:tU.Pf.LARGE}),a.createElement("div",{className:"org_user_meta_content--userName--JeBfv text--fontPos18--rYXJb text--_fontBase--QdLsd"},e.title),e.user.profile?.job_title&&a.createElement("div",{className:"org_user_meta_content--jobTitle--bWmsS text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement(rW.Ex,{color:rW.zE.INVERT,text:(0,Ep.lb)(e.user.profile?.job_title)}),e.userId===r?.id&&a.createElement("span",{className:"org_user_meta_content--blueLink--u44PB blue_link--blueLink--9rlnd",role:"button",tabIndex:0,onClick:i},(0,N.tx)("internal_profile.change_job_title"))),e.user.email&&a.createElement("div",{className:"org_user_meta_content--email--tgx7t text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.user.email),(e.description||!e.isReadOnly)&&a.createElement(Ef.TI,{value:e.description??"",placeholder:(0,N.t)("internal_profile.add_a_description"),submit:e.submitDescription,formatter:Ef.qU,readOnly:e.isReadOnly,className:"org_user_meta_content--description--gYuxd text--fontPos13--xW8hS text--_fontBase--QdLsd"})),l&&e.user?.id===r?.id&&a.createElement(ES,{user:e.user}),o&&a.createElement(er.P,{className:x.s.flexShrink1.bt1.bSolid.colorBorder.$,innerClassName:x.s.p16.borderBox.flex.flexColumn.$},a.createElement("div",{className:Ey},(0,N.tx)("internal_profile.teams")),a.createElement(EC,{userId:e.userId,orgId:e.orgId}),a.createElement("div",{className:Ey},(0,N.tx)("internal_profile.recent_projects")),a.createElement(Ex,{files:e.recents,isYourProfile:!e.isReadOnly})))))}function ET(e){let t=(0,Y.iZ)(),r=(0,n.wA)();return a.createElement(Ew,{submitDescription:t=>{r(Eb.yJ({user:{id:e.userId,description:t},userInitiated:!0}))},isLoading:!e.user,isReadOnly:!t||t.id!==e.userId,description:e.user.description??null,title:e.user.name??e.user.handle??null,userId:e.userId,user:e.user,recents:e.recents,orgId:e.orgId})}function EI(e){let t=(0,n.wA)(),r=(0,Y.iZ)();return a.createElement(Ew,{isLoading:!e.user||!e.orgUser||!e.org,isReadOnly:!r||r.id!==e.userId,description:(e.orgId&&e.orgUser?e.orgUser.description:e.user.description)??null,title:e.user&&e.org?(0,N.t)("internal_profile.title",{userName:e.user.handle,orgName:e.org.name}):null,recents:e.recents,submitDescription:r=>{e.orgId&&e.orgUser&&t(pF.yJ({orgUser:{id:e.orgUser.id,org_id:e.orgId,description:r},userInitiated:!0}))},user:e.user,userId:e.userId,orgId:e.orgId})}function Ex(e){let t=EE(e=>({view:"folder",folderId:e})),r=(0,a.useMemo)(()=>{let t=new Set;for(let r of e.files.status===Es.r.SUCCESS?e.files.value:[])r.folder_id&&t.add(r.folder_id);return Array.from(t).slice(0,10)},[e.files]),n=(0,Eu.Cm)(r,e.files.status===Es.r.SUCCESS&&!!e.files.value),l=a.useMemo(()=>{if(e.files.status!==Es.r.SUCCESS||"loading"===n.status)return[];let t=[],a=[];if(!e.files)return t;let l=new Set;for(let o of e.files.value){let e=o.folder_id;if(!e||l.has(e)||!r.includes(e)||(l.add(e),""===o.folder_name||null==o.folder_name))continue;let i=!!n?.data?.[e],s={id:e,name:o.folder_name,teamName:o.team_name,canView:i};if(s.canView?t.push(s):a.push(s),t.length+a.length>=5)break}return t.concat(a)},[e.files,n,r]);return a.createElement(Ei.x,{isLoading:e.files.status===Es.r.LOADING||"loading"===n.status},()=>a.createElement("div",null,0===l.length&&a.createElement("div",{className:"org_user_meta_content--projectEmptyState--zusT6 text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.isYourProfile?(0,N.t)("internal_profile.your_recent_projects_will_appear_here"):(0,N.t)("internal_profile.their_recent_projects_will_appear_here")),l.map(e=>a.createElement("div",{key:e.id,onClick:e.canView?r=>t(r,e.id):void 0,className:e.canView?"org_user_meta_content--project--t-Nos org_user_meta_content--projectBase--ofeuj text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa":"org_user_meta_content--dimProject--a1lrh org_user_meta_content--dim--aNVfK org_user_meta_content--projectBase--ofeuj text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},a.createElement("span",{"data-tooltip-type":rH.Ib.TEXT,"data-tooltip":e.canView?void 0:(0,N.t)("internal_profile.you_must_be_a_member_of_team_name",{teamName:e.teamName})},e.name)))))}function EN(e){return a.createElement("div",{className:"org_user_meta_content--userProfileNotification--qHv4P"},a.createElement("div",{className:"org_user_meta_content--userProfileNotificationTitle--lDm8h text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},e.title),a.createElement("div",{className:"org_user_meta_content--userProfileNotificationText--H2ZHJ text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},e.text),a.createElement("div",{className:"org_user_meta_content--userProfileNotificationAction--NQLlj"},e.action))}function ES(e){let{profile:t}=e.user,r=(0,n.wA)();return a.createElement(a.Fragment,null,t?.images?null:a.createElement(EN,{title:(0,N.t)("internal_profile.profile_image_nudge.title"),text:(0,N.t)("internal_profile.profile_image_nudge.text"),action:a.createElement(Z.N_,{trusted:!0,className:"org_user_meta_content--userProfileNotificationActionLink--sVVav",onClick:()=>{r((0,lq.X)({entity:e.user,entityType:lY.ck.CURRENT_USER,shape:"CIRCLE"})),(0,j.Cu)({trackingContext:rz.e0.FILE_BROWSER,context:"job_title",text:"Update Photo"})}},(0,N.tx)("internal_profile.profile_image_nudge.action"))}))}let EC=(0,n.Ng)((e,t)=>({permissionState:e}))(function(e){let[t,r]=a.useState(null);a.useEffect(()=>{uK.k.getTeams({userId:e.userId,orgId:e.orgId||void 0}).then(e=>{r(e.data.meta)}).catch(e=>{console.error("Unable to load org user teams",e)})},[e.userId,e.orgId]);let n=(0,a.useMemo)(()=>(t||[]).slice(0,10),[t]),l=(0,E_.GG)(n.map(e=>e.id),!!n),o=EE(e=>({view:"team",teamId:e.id})),i=(n||[]).sort((e,t)=>{let r=l.data?.[e.id],a=l.data?.[t.id];return r&&!a?-1:!r&&a?1:0}),s=!n||"loaded"!==l.status;return a.createElement(Ei.x,{isLoading:s},()=>a.createElement("div",{className:x.s.flex.flexColumn.gap8.$},i.map(e=>{let t=l.data?.[e.id];return a.createElement(rk.rE,{key:e.id,entity:e,size:12,hideFallbackInitial:!0,onClick:t?o:void 0,className:`org_user_meta_content--teamListItem--gXcF- text--fontPos13--xW8hS text--_fontBase--QdLsd ${t?"":"org_user_meta_content--dim--aNVfK"}`,"data-tooltip-type":rH.Ib.TEXT,"data-tooltip":t?void 0:(0,N.t)("internal_profile.you_re_not_a_member_of_this_team"),"data-tooltip-offset-y":4})}),n&&0===n.length&&(0,N.tx)("internal_profile.no_teams_in_common"),t&&t.length>10&&a.createElement("div",{className:"org_user_meta_content--numOtherTeamsRow--aAVva"},(0,N.tx)("internal_profile.N_other_teams",{numOtherTeams:t.length-10}))))});var Ek=r(20687);function ER(e){let t=(0,Ek.i8)(e.publishedPlugins),r=(0,Ek.LH)((0,Ek.ky)(t,e.userId),e.org),n=Object.keys(r).map(e=>r[e]),l=(0,tr.LN)(n);return 0===l.length?null:a.createElement(a.Fragment,null,a.createElement("div",{className:"user_org_resources--sectionHeader--MUg1j internal_user_profile_page_view--sectionHeader--3NNNT text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,N.tx)("file_browser.settings.plugins_published",{orgName:e.org.name})),a.createElement("div",{className:"user_org_resources--container---l25- profile_resources_grid--_resourcesGridTemplateColumns--19JO6"},l.map(e=>a.createElement(_M.cS,{pluginId:e.id,showInstallCount:!0,key:`plugin-${e.id}`,viewContext:"UserOrgResources"})),a.createElement(_M.hT,{numResources:l.length})))}function EA(e){let{org:t}=e,r=(0,n.d4)(r=>(t&&t.id&&r.orgUsersByOrgId[t.id]||{})[e.user.id]);return t?a.createElement(EI,{orgId:t.id,recents:e.recents,userId:e.user.id,user:e.user,org:t,orgUser:r}):a.createElement(ET,{orgId:null,recents:e.recents,userId:e.user.id,user:e.user})}let EO={showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicateToDrafts:!0,delete:!0,removeFromRecents:!1,createBranch:!0,publishOrgTemplate:!1,moveFile:!0,pinToWorkspace:!1},EP=e=>{let t=e.user.id,r=(0,n.wA)(),o=(0,n.d4)(e=>e.selectedView),i=e.orgUser&&e.orgUser.org_id,s=(0,n.d4)(e=>e.currentUserOrgId),d=void 0===i?s:i,c=(0,n.d4)(e=>d&&e.orgById[d]||null),m=(0,l.k)().xr_debounce_threshold&&c,_="user"===o.view?o.userViewTab:void 0;a.useEffect(()=>{r((0,tm.ES)({type:Em.E}))},[r,_]);let p=(0,n.d4)(e=>e.userFlags);a.useEffect(()=>{p.seen_profile||r(eA.b({seen_profile:!0}))},[r,p.seen_profile]);let g=(0,n.d4)(e=>e.tileSortFilterStateByView.user),E=a.useMemo(()=>({srcTileSortFilterConfig:{filters:{creator:oj.rJ.ANY,fileType:oj.t2.ANY},sort:{key:oj.C0.ACCESSED_AT,dir:oj.ue.DESC}},tileSortFilterConfig:g,sortKeys:[oj.C0.NAME,oj.C0.CREATED_AT,oj.C0.ACCESSED_AT]}),[g]),b=a.useMemo(()=>{let e=new URLSearchParams;return d&&e.append("org_id",d),`/api/user/${t}/recents${""===e.toString()?"":"?"}${e.toString()}`},[t,d]),[v,h]=a.useState([]),[y,w]=a.useState([]),[T,x]=a.useState(!0),[S,C]=a.useState(null),[k,R]=a.useState(0),[A,O]=a.useState(0),P=a.useCallback(e=>{C(e),r(tM.F.enqueue({message:(0,N.t)("internal_profile.an_error_occurred"),error:!0}))},[r]),{fetchNext:F,hasMore:L}=(0,Ed.WQ)(b,P,55),D=a.useCallback(async()=>{if(!L)return;let e=async()=>{try{let e=await F();if(!Array.isArray(e))return;(0,l.k)().livegraph_user_profile_full_read||h(t=>[...t,...e])}catch(e){P(e)}};await e()},[F,P,L]),{data:M,status:B,errors:U}=(0,u.Rs)(eG.F8N,{action:"edit",userId:t,firstPageSize:55,sortOrder:"DESC"},{enabled:!!(0,l.k)().livegraph_user_profile_dark_read});a.useEffect(()=>{if(U?.length){P(U[0]);return}if("loaded"===B&&M.userPublic?.paginatedRecentFiles.status==="loaded"){let e=M.userPublic?.paginatedRecentFiles.data,t=[];for(let r of e||[])null===r.file||r.file.parentOrgId!==d||r.file.isDraftFile||null!==r.file.trashedAt||t.push(function(e){return{key:e.file.key,name:e.file.name,timestamp:e.actionAt.getTime()/1e3,editor_type:e.file.editorType,folder_name:e.file.project?.name||"",folder_id:e.file.folderId,team_id:e.file.teamId,team_name:e.file.team?.name||"",thumbnail_url:e.file.signedThumbnailUrl,client_meta:e.file.clientMeta,thumbnail_guid:e.file.thumbnailGuid||null,edit_url:e.file.editUrl,source_file_name:e.file.sourceFile?.name||null,has_file_link_password:!!e.file.hasFileLinkPassword,link_access:e.file.linkAccess}}(r));(0,l.k)().livegraph_user_profile_full_read&&h(t),w(t),t.length<55&&A<3&&e?.hasNextPage()&&!e?.isLoadingNextPage&&(e?.loadNext(55),O(e=>e+1),x(!1))}},[M,B,U,P,d,A]),a.useEffect(()=>{(async()=>{v.length<55&&k<3&&(await D(),R(e=>e+1),x(!1))})()},[k]),(0,an.u8)({oldValue:v,newValue:y,label:an.A5.InternalUserProfilePageView.InternalUserProfileViewInner,oldValueReady:v.length>=55||k>=3,newValueReady:M?.userPublic?.paginatedRecentFiles.status==="loaded"&&(y.length>=55||A>=3),enableShadowRead:!!(0,l.k)().livegraph_user_profile_dark_read,comparator:(0,an.st)({ignore:e=>e.includes("handoff_url")||e.includes("timestamp")||e.includes("thumbnail_url")||e.includes("link_access")||e.includes("has_file_link_password")})});let $=a.useMemo(()=>v.filter(e=>{switch(g.filters.fileType){case oj.t2.ANY:return!0;case oj.t2.DESIGN:return"design"===e.editor_type;case oj.t2.FIGJAM:return"whiteboard"===e.editor_type;case oj.t2.PROTOTYPE:return!1;case oj.t2.SITES:return"sites"===e.editor_type;case oj.t2.SLIDES:return"slides"===e.editor_type;case oj.t2.COOPER:return"cooper"===e.editor_type;case oj.t2.MAKE:return"figmake"===e.editor_type;default:(0,I.xb)(g.filters.fileType)}}),[v,g]),j=a.useMemo(()=>S?{status:Es.r.FAILURE,error:S}:T?{status:Es.r.LOADING}:{status:Es.r.SUCCESS,value:$},[T,S,$]),W=(0,Eo.J)(()=>c&&c.community_profile_id?r(Ec.pZ({profileId:c.community_profile_id})):Promise.resolve([]),[r,c]),G="user"===o.view&&o.userViewTab===oi.o.INTERNAL_PROFILE_POSTS?oi.o.INTERNAL_PROFILE_POSTS:oi.o.INTERNAL_PROFILE,V=_===oi.o.INTERNAL_PROFILE?[a.createElement("div",{key:"sort-filter",className:"internal_user_profile_page_view--hideFilterRightPadding--fd-Z-"},a.createElement(nS.ye,{config:E.tileSortFilterConfig}))]:[],[H,z,Y]=ot.t.useManagedTabs({[oi.o.INTERNAL_PROFILE]:!0,[oi.o.INTERNAL_PROFILE_POSTS]:!0},G,e=>{r(eS.$T({view:"user",userId:t,userViewTab:e}))}),K=a.createElement(nS.g2,{leftSide:m?a.createElement(X.J,null,a.createElement(ot.t.TabStrip,{manager:Y},a.createElement(ot.t.Tab,{key:oi.o.INTERNAL_PROFILE,...H[oi.o.INTERNAL_PROFILE]},(0,N.t)("internal_profile.file_contributions")),a.createElement(ot.t.Tab,{key:oi.o.INTERNAL_PROFILE_POSTS,...H[oi.o.INTERNAL_PROFILE_POSTS]},(0,N.t)("internal_profile.posts")))):a.createElement("div",{className:"internal_user_profile_page_view--sectionHeader--3NNNT text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,N.tx)("internal_profile.file_contributions")),rightSide:V}),q=a.useCallback((e,t,a)=>{mp({tile:e,index:a,dispatch:r,selectedView:o,isListView:!1})},[o,r]),{showing:J,show:Q,data:Z}=(0,oM.L)(),ee=a.useCallback((e,t,r)=>{Q({data:{tile:e,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:r}})},[Q]),ea=a.useMemo(()=>j.status===Es.r.SUCCESS?j.value.map(e=>(function(e){let t={...e,name:e.source_file_name?e.source_file_name+": "+e.name:e.name,description:null,created_at:"",url:"",creator_id:"",deleted_at:null,trashed_at:null,trashed_user_id:null,has_proto_link_password:!1,license:null,proto_link_access:null,touched_at:new Date(1e3*e.timestamp).toString(),prototype_url:"",updated_at:"",file_repo_id:null,source_file_key:null,is_try_file:!1};return(0,tJ.fA)(t)})(e)):[],[j]);return(0,rV.T8)(a.createElement(lC.r,{scrollableContainerClass:"internal_user_profile_page_view--pageContainer--FQu11",containerClass:"internal_user_profile_page_view--pageContainerInner--2Ep2e",content:!e.userNotInPlan&&a.createElement("div",{className:"internal_user_profile_page_view--content--X0lTp"},a.createElement("div",{className:"internal_user_profile_page_view--viewbar--eprew"},K),_===oi.o.INTERNAL_PROFILE&&(W.status===Es.r.SUCCESS&&j.status===Es.r.SUCCESS?a.createElement(a.Fragment,null,c&&a.createElement(ER,{userId:t,org:c,publishedPlugins:W.value}),a.createElement(er.P,null,a.createElement(c3.d,{items:ea??[],handleOpenTile:q,handleOpenDropdown:ee,sortConfig:g.sort,viewType:oj.XU.GRID,gridContainerStyle:EL.grid,sortBy:f.lQ}),(()=>{let e=Z?.tile??null;return a.createElement(rV.fu,{name:rz.e0.TILES_VIEW_DROP_DOWN,enabled:J,properties:{tileType:e?.type,tileFileId:e?.type===tJ.nb.FILE?e?.file.key:void 0}},a.createElement(oB.i,{tileActions:EO,selectedTiles:e?[e]:[],tile:e,openTile:()=>{e?.type===tJ.nb.FILE&&(0,tK.Tq)(r,e.file)},dropdownVisible:J}))})())):a.createElement(et.qc,null)),_===oi.o.INTERNAL_PROFILE_POSTS&&c&&a.createElement(cO,{currentOrgId:c.id,selectedUser:e.user})),metaContent:a.createElement(EA,{user:e.user,recents:j,org:c,orgUser:e.orgUser})}),rz.e0.USER_DETAILS,{view:"org_user",userId:t})};function EF(e){return a.createElement(EP,{key:e.user.id,user:e.user,orgUser:e.orgUser,userNotInPlan:e.userNotInPlan})}let EL={grid:{paddingRight:"x1m2p0i2",paddingLeft:"x163pfp",paddingInlineStart:null,paddingInlineEnd:null,paddingBottom:"x1gan7if",$$css:!0}},ED=(e,t,r)=>e&&e.id===r?Promise.resolve(e):uK.k.getUser({userId:r}).then(e=>e.data.meta).catch(e=>{throw t(aR.s.error("Failed to get user",5e3)),console.warn("Failed to get user files"),e}),EM=(e,t,r)=>r?e(pF.I1({orgId:r,userId:t,allowNoOrgUser:!0})):Promise.resolve(null),EB={[oi.o.INTERNAL_PROFILE]:{Component:EF},[oi.o.INTERNAL_PROFILE_POSTS]:{Component:EF},[oi.o.PLUGINS]:{Component:a.Fragment}};function EU(e){return a.createElement(e.component,{...e.context})}function E$(e){let t=(0,n.wA)(),r=(0,Y.iZ)(),l=e.orgId,o=(0,n.d4)(e=>e.currentUserOrgId),i=void 0===l?o:l,s=(0,eV.T5)("UserPageView").unwrapOr(null),c=(0,Eo.J)(()=>Promise.all([ED(r,t,e.userId),EM(t,e.userId,i)]).then(([r,a])=>(i&&!a&&t(tM.F.enqueue({type:"org_user_not_found",message:s?.name?(0,N.t)("org_user_actions.org_user_not_found",{userHandle:r.handle,planName:s.name}):(0,N.t)("org_user_actions.org_user_not_found_without_plan_name",{userHandle:r.handle}),error:!0,onDismiss:f.lQ})),(0,tK.hL)(r.handle),{userNotInPlan:!!(i&&!a),userId:e.userId,user:r,orgUser:a,profileHandle:r.community_profile_handle||null,on404Redirect:a?()=>{t(eS.$T({view:"user",userId:e.userId,orgId:i,userViewTab:oi.o.INTERNAL_PROFILE}))}:()=>{d.Ay.redirect("/404")}})),[t,r,i,e.userId,s]),{tab:m}=e;if(!m)return null;let{Component:u}=EB[m];return a.createElement(Ei.x,{className:"user_page_view--loadingContainer--vr9Zb",state:c,failure:void 0},t=>a.createElement(EU,{component:u,tab:m,userId:e.userId,context:t}))}function Ej({workspaceId:e}){let t=(0,H.sZ)(),r=(0,K.P)(t.id,e);return"loaded"!==r.status?null:"Unassigned"===r.data?a.createElement(id.A5,null,a.createElement(EG,{org:t,workspaceId:e})):a.createElement(id.A5,null,a.createElement(EW,{org:t,workspaceId:e,workspace:r.data}))}function EW({org:e,workspaceId:t,workspace:r}){let n=lt(r);return a.createElement(EG,{org:e,workspaceId:t,parentBackgroundColor:n})}function EG({org:e,workspaceId:t,parentBackgroundColor:r}){let l=(0,n.wA)();return a.createElement(id.jT,{text:e.name,parentBackgroundColor:r,onClick:r=>{l(eS.$T({view:"org",orgId:e.id,orgViewTab:tg.X.HOME})),(0,j.Cu)({clickedResourceType:"org",clickedResourceId:e.id,currentResource:t,orgId:e.id})}})}function EV({showingFileBrowserLoader:e}){let t=(0,eC._6)();a.useEffect(()=>{(0,j.o5)(t)},[t]);let r=function(){let e=(0,n.wA)(),t=(0,Y.Pc)(),r=(0,H.dq)(),l=(0,eC._6)(),o=(0,a7.cD)(),i=(0,H.sZ)(),s=(0,n.d4)(e=>e.search),d=function(){let e=eI({project:"drafts"});return a.useCallback(({from:t})=>e?[a.createElement(gU,{key:t,from:t})]:[],[e])}();switch(l.view){case"resourceHub":if(!(0,ic.yl)())return null;return{pageHeaderContent:a.createElement(cr,null),pageContent:a.createElement(d7,null)};case"deletedFiles":return{pageHeaderContent:(0,N.t)("file_browser.tool_bar.trash"),pageContent:(0,rV.T8)(a.createElement(mQ,{key:"trashed",selectedTab:mX.FILES}),rz.e0.FILE_BROWSER,{view:"trashed"})};case"litmus":if(!(0,cn.OF)())return null;switch(l.subView){case"projects":return{pageHeaderContent:"Litmus",pageContent:a.createElement(ca.AJ,null)};case"feed":return{pageHeaderContent:"Litmus",pageContent:a.createElement(ca.YA,null)}}case"trashedFolders":return{pageHeaderContent:(0,N.t)("file_browser.tool_bar.trash"),pageContent:(0,rV.T8)(a.createElement(mQ,{key:"trashed",selectedTab:mX.FOLDERS}),rz.e0.FILE_BROWSER,{view:"trashed"})};case"draftsToMove":return{pageHeaderContent:(0,N.t)("file_browser.tool_bar.drafts_to_move"),pageContent:a.createElement(_r,{key:"draftsToMove"})};case"folder":if(l.folderId===t?.drafts_folder_id)return{pageHeaderContent:(0,N.t)("file_browser.tool_bar.drafts"),pageHeaderActions:d({from:iu.f6.FILE_BROWSER_TOPBAR_DRAFTS}),pageContent:(0,rV.T8)(a.createElement(u$,{folderId:l.folderId,key:"drafts",userId:t.id}),rz.e0.FILE_BROWSER_DRAFTS,{orgId:r,teamId:o})};return{pageContent:(0,rV.T8)(a.createElement(pN,{folderId:l.folderId,key:`folder-${l.folderId}`}),rz.e0.FOLDER_PAGE,{orgId:r,teamId:o,folderId:l.folderId}),pageHeaderContent:a.createElement(_d,{folderId:l.folderId}),pageHeaderDividerHidden:!0};case"workspace":switch(l.subView){case e5.V0.ADMIN:return{pageHeaderContent:a.createElement(Ej,{workspaceId:l.workspaceId}),pageHeaderDividerHidden:!0,pageContent:(0,rV.T8)(a.createElement(R.y$,{workspaceId:l.workspaceId,selectedTab:l.selectedTab}),rz.e0.WORKSPACE_ADMIN_SETTINGS_PAGE,{workspaceId:l.workspaceId,workspaceViewTab:l.selectedTab})};case e5.V0.DIRECTORY:return{pageHeaderContent:a.createElement(Ej,{workspaceId:l.workspaceId??null}),pageHeaderDividerHidden:!0,pageContent:(0,rV.T8)(l.workspaceId?a.createElement(ii,{key:l.workspaceId,workspaceId:l.workspaceId}):a.createElement(lM,null),rz.e0.WORKSPACE_DIRECTORY_PAGE,{workspaceId:l.workspaceId,workspaceGroupViewTab:l.selectedTab})};default:(0,I.xb)(l)}case"licenseGroup":if(l.subView===e8.GN.ADMIN)return{pageContent:(0,rV.T8)(a.createElement(R.VY,{licenseGroupId:l.licenseGroupId,selectedTab:l.selectedTab}),rz.e0.LICENSE_GROUP_ADMIN_SETTINGS_PAGE,{licenseGroupId:l.licenseGroupId,licenseGroupViewTab:l.selectedTab})};(0,I.xb)(l);case"org":return{pageHeaderContent:i?a.createElement(r3,null):void 0,pageHeaderActions:[a.createElement(pO,{orgId:l.orgId,key:"org-page-header-actions"})],pageContent:(0,rV.T8)(a.createElement(fo,{orgId:l.orgId,selectedTab:l.orgViewTab}),rz.e0.ORG_PAGE,{orgId:l.orgId,orgViewTab:(l.orgViewTab===tg.X.HOME?"HOME":l.orgViewTab)||""})};case"orgAdminSettings":let c=(0,C.a)(l.orgAdminSettingsViewTab,l.orgAdminSettingsViewSecondaryTab,{showResourceConnectionInviteModal:!!l.showResourceConnectionInviteModal,showResourceConnectionFlyout:!!l.showResourceConnectionFlyout});return{pageContent:(0,rV.T8)(a.createElement(R.vW,{selectedTab:l.orgAdminSettingsViewTab,selectedSecondaryTab:c,selectedExtensionId:l.selectedExtensionId,selectedWorkspaceId:l.selectedWorkspaceId,showResourceConnectionInviteModal:l.showResourceConnectionInviteModal,showResourceConnectionFlyout:l.showResourceConnectionFlyout}),rz.e0.ORG_ADMIN_SETTINGS_PAGE,{orgId:r,orgViewTab:l.orgAdminSettingsViewTab,source:l.orgAdminSettingsViewTab||"dashboard",orgViewSecondaryTab:c})};case"abandonedDraftFiles":return{pageContent:(0,rV.T8)(a.createElement(R.dZ,{abandonedDraftFolderId:l.abandonedDraftFolderId,planType:l.adminPlanType,planId:l.planId}),rz.e0.ABANDONED_DRAFTS_PAGE,l.adminPlanType===i_.O.ORG?{orgId:l.planId}:{teamId:l.planId})};case"orgDomainManagement":let m=a.createElement(id.A5,null,a.createElement(id.J5,{text:(0,N.t)("general.admin"),onClick:()=>{e(eS.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:eH.J7.DASHBOARD}))},hasTrailingDivider:!0}),a.createElement(id.J5,{text:(0,N.t)("org_dashboard.settings"),onClick:()=>{e(eS.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:eH.J7.SETTINGS}))},hasTrailingDivider:!1}));return{pageContent:(0,rV.T8)(a.createElement(R.Oe,null),rz.e0.ORG_DOMAIN_MANAGEMENT_PAGE,{orgId:r}),pageHeaderContent:m};case"billingGroupDashboard":return{pageContent:(0,rV.T8)(a.createElement(R.wu,{selectedTab:l.selectedTab}),rz.e0.BILLING_GROUP_DASHBOARD_SETTINGS_PAGE,{orgId:r,orgViewTab:l.selectedTab})};case"recentsAndSharing":let u=l.tab??ip.G.RECENTLY_VIEWED,_=d({from:iu.f6.FILE_BROWSER_TOPBAR_RECENTS});return{pageHeaderContent:(0,N.t)("file_browser.tool_bar.recents"),pageHeaderActions:_,pageContent:(0,rV.T8)(a.createElement(gE,{selectedTab:u,userId:t.id,accountModalTab:l.accountModalTab,emailPolicyToUnsubscribeFrom:l.emailPolicyToUnsubscribeFrom}),rz.e0.FILE_BROWSER,{view:"recentsAndSharing",userSpace:r?rz.qo.ORG:rz.qo.PERSONAL})};case"resourceUnavailable":return{pageContent:a.createElement(lB.S,{resourceType:l.resourceType})};case"search":{let{searchScope:e,query:t}=s.parameters,r=!E.Ay.mobile;return{pageHeaderContent:a.createElement(EH,{query:t}),pageContent:(0,rV.T8)(a.createElement(nS.bS,null),rz.e0.UNIFIED_SEARCH,{showInternalModal:r&&e!==ig.Rx.COMMUNITY,showCommunityModal:r&&e===ig.Rx.COMMUNITY})}}case"seatRequests":return{pageContent:(0,rV.T8)(a.createElement(A.m,null),rz.e0.SEAT_REQUESTS_PAGE,{orgId:r,teamId:o,planType:l.adminPlanType})};case"limitedTeamSharedProjects":return{pageContent:a.createElement(pk,null)};case"team":{let e=l.teamViewTab??ez.A$.HOME;return{pageContent:(0,rV.T8)(a.createElement(En,{teamId:l.teamId,selectedTab:e,upgradeModalType:l.upgradeModalType,showProOnboardingModal:l.isProUpgrade,showResourceConnectionInviteModal:l.showResourceConnectionInviteModal,key:`team-${l.teamId}`}),rz.e0.TEAM_PAGE,{teamId:l.teamId,userSpace:r?rz.qo.ORG:rz.qo.PERSONAL,orgId:r}),pageHeaderContent:a.createElement(gW,{teamId:l.teamId}),pageHeaderDividerHidden:!0}}case"teamAdminConsole":{let e=l.teamAdminConsoleViewTab??(l.isProTeam?ez.Iv.DASHBOARD:ez.Iv.MEMBERS),t=(0,k.X$)(e,l.teamAdminConsoleViewSecondaryTab,{showResourceConnectionInviteModal:!!l.showResourceConnectionInviteModal,showResourceConnectionFlyout:!!l.showResourceConnectionFlyout});return{pageContent:(0,rV.T8)(a.createElement(R.JC,{teamId:l.teamId,selectedTab:e,selectedSecondaryTab:t,showResourceConnectionInviteModal:l.showResourceConnectionInviteModal,showResourceConnectionFlyout:l.showResourceConnectionFlyout}),rz.e0.TEAM_ADMIN_PAGE,{teamId:l.teamId,teamAdminConsoleViewTab:e,teamAdminConsoleViewSecondaryTab:t})}}case"teamFeed":return{pageHeaderContent:a.createElement(id.A5,null,a.createElement(id.J5,{text:(0,N.t)("fig_feed.feed"),onClick:()=>{e(eS.$T({view:"teamFeed"}))},hasTrailingDivider:!1})),pageContent:a.createElement(Ez,{postUuid:l.postUuid,creatorId:l.creatorId})};case"user":return{pageHeaderContent:(0,N.t)("internal_profile.profile"),pageHeaderActions:t.community_profile_handle&&t.id===l.userId?[a.createElement(fd,{key:"viewCommunityProfileAction"})]:void 0,pageContent:a.createElement(E$,{userId:l.userId,tab:l.userViewTab,orgId:l.orgId})};case"orgIdpManagement":let p=a.createElement(id.A5,null,a.createElement(id.J5,{text:(0,N.t)("general.admin"),onClick:()=>{e(eS.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:eH.J7.DASHBOARD}))},hasTrailingDivider:!0}),a.createElement(id.J5,{text:(0,N.t)("org_dashboard.settings"),onClick:()=>{e(eS.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:eH.J7.SETTINGS}))},hasTrailingDivider:!1}));return{pageContent:(0,rV.T8)(a.createElement(R.T3,null),rz.e0.ORG_IDP_MANAGEMENT_PAGE,{orgId:r}),pageHeaderContent:p};default:return null}}();if(!r)return null;let{CustomPageLayout:l,pageContent:o}=r;return l?a.createElement(m1,null,a.createElement(l,null,!e&&o)):a.createElement(m1,null,a.createElement(lm,{showingFileBrowserLoader:e,pageHeaderContent:r.pageHeaderContent,pageHeaderActions:r.pageHeaderActions,pageHeaderDividerHidden:r.pageHeaderDividerHidden},o))}function EH(e){return e.query?a.createElement("div",{className:x.s.flex.columnGap8.$},a.createElement("span",{className:x.s.flexShrink0.$},a.createElement(S.E,{color:"secondary"},(0,N.tx)("search.search_results_for"))),a.createElement("div",{className:x.s.flex.fontMedium.minW0.$},"\u201C",a.createElement(S.E,{truncate:!0},e.query),"\u201D")):a.createElement("div",{className:x.s.flex.columnGap8.$},a.createElement("span",{className:x.s.flexShrink0.$},a.createElement(S.E,{color:"secondary"},(0,N.tx)("search.search_results"))))}function Ez(e){return(0,im.w)()?a.createElement(cB,{postUuid:e.postUuid,creatorId:e.creatorId}):null}var EY=r(193544),EK=r(956148),Eq=r(726348),EJ=r(159229),EX=r(32389),EQ=r(918254),EZ=r(89140);let E0="add_collaborators--emailListItem--dnvC-";function E1({selectedView:e}){let[t,r]=a.useState(["","",""]),l=(0,n.d4)(t=>t.teams[e.teamId]),o=(0,n.d4)(e=>e.teamCreation),i=(0,n.d4)(e=>e.payment),s=(0,n.wA)(),d=a.useCallback(()=>{l&&s(eS.$T({view:"team",teamId:l.id}))},[s,l]),c=a.useCallback((e,a)=>{if(a>=t.length)return;let n=[...t];n[a]=e,r(n)},[t]),m=a.useCallback(()=>{r([...t,""])},[t]),u=a.useCallback(()=>{let e=!!o.isEduTeam;i.promo?s(EQ.g_({teamId:l.id,teamName:l.name,previousView:{view:"team",teamId:l.id}})):e?s(sJ.Vm({teamId:l.id,showBreadcrumbs:!0})):s(eS.$T({view:"teamUpgrade",teamFlowType:nK.SC.UPGRADE_EXISTING_TEAM,teamId:l.id,paymentStep:sX.tn.UPGRADE_NEW_TEAM,previousView:{view:"team",teamId:l.id},planType:nK.Sc.TEAM}))},[s,l,i.promo,o.isEduTeam]),_=a.useCallback(()=>t.filter(e=>e).map(e=>e.trim()),[t]),p=a.useCallback(()=>{s((0,EZ.rq)({emails:_(),resourceType:eF.vt.TEAM,resourceIdOrKey:l.id,level:ut.e6.EDITOR,teamId:l.id,onSuccess:()=>{s(_c.r1({loading:!1})),u()}}))},[_,l,u,s]);return a.createElement(rV.fu,{name:"Add Collaborators",properties:{teamId:l?.id}},a.createElement("div",null,a.createElement(Eq.O,{menu:a.createElement(EK.X,{onClick:d},a.createElement(en.B,{svg:nU.default,className:"add_collaborators--modalCloseX--sJGp5"}))},a.createElement(EX.J,{index:2}),a.createElement(EJ.JR,null,(0,N.tx)("team_creation.add_your_collaborators")),a.createElement(EJ.Kh,null,(0,N.tx)("team_creation.you_can_update_user_permissions_on_the_team_page_after_setting_up")),a.createElement("div",{className:"add_collaborators--formContainer--zTKXv"},a.createElement("div",{className:"add_collaborators--emailInputsContainer--19ZBc"},t.map((e,t)=>a.createElement(Z.il,{key:`collaborator-email-input-${t}`,className:E0,value:e,onChange:e=>c(e.target.value,t),maxLength:255,placeholder:(0,N.t)("team_creation.email")}))),a.createElement(Z.nR,{className:E0,onClick:m},(0,N.tx)("team_creation.add_another")),a.createElement("div",{className:"add_collaborators--spacing--2VA7s"}),a.createElement("div",{className:"add_collaborators--ctaContainer--VGMvb"},a.createElement(Z.nD,{disabled:0===_().length,onClick:p,trackingProperties:{numCollaborators:_().length}},(0,N.tx)("team_creation.continue")),a.createElement(Z.Ph,{onClick:u,trusted:!0},(0,N.tx)("team_creation.skip_for_now")))))))}var E2=r(611209),E4=r(452275),E8=r(521885),E5=r(917417),E3=r(324543),E6=r(948008),E7=r(458609);let E9=["folder","team","search","recentsAndSharing"];function be(){let e=(0,n.d4)(e=>e.autosave),t=(0,eC._6)(),r=(0,E4.yZ)(),{unsyncedFiles:l,localUnsyncedFiles:o}=(0,m3.Gg)();return!r||null!=e.lastSnoozeTime&&Date.now()-e.lastSnoozeTime<864e5?null:(l.length>0||o.length>0)&&E9.includes(t.view)?a.createElement(br,{unsyncedFiles:l,localUnsyncedFiles:o}):null}let bt=!1;function br(e){let t=(0,n.wA)();a.useEffect(()=>{let e=()=>{t(E5.Jw())};return E6.hp.register(E6.a,e),function(){E6.hp.unregister(E6.a,e),t(tm.ES({type:E8.EO.type}))}},[t]);let r=(0,eC._6)(),[l,o]=a.useState(!1);a.useEffect(()=>{bt||(bt=!0,(0,E2.Mw)()),l||(o(!0),(0,nc.trackEvent)("Autosave Notification",{hasUnsyncedFiles:e.unsyncedFiles.length>0,hasLocalUnsyncedFiles:e.localUnsyncedFiles.length>0,firstUnsyncedFile:e.unsyncedFiles.length>0?e.unsyncedFiles[0].fileKey:null,firstLocalUnsyncedFile:e.localUnsyncedFiles.length>0?e.localUnsyncedFiles[0].fileKey:null,view:r.view},{forwardToDatadog:!0}))},[t,e.unsyncedFiles,e.localUnsyncedFiles,l,r]);let i=(0,Y.iZ)(),s=[...e.unsyncedFiles,...e.localUnsyncedFiles];if(0===s.length||!i)return a.createElement(a.Fragment,null);let c=s.length>1,m=s[0],u=(0,E3.y8)(m)?m.file.name:m.name,_=u.length>40?u.substring(0,40)+"\u2026":u,p=c?(0,N.t)("autosave.notification.message.more_than_one_file"):(0,N.t)("autosave.notification.message.one_file",{fileName:_}),f=c?(0,N.tx)("autosave.notification.action_review"):(0,N.tx)("autosave.notification.action_open_to_sync");return a.createElement("div",{className:"autosave_notification--notification--u3sx0 text--_negText--j9g-L"},a.createElement(en.B,{className:"autosave_notification--icon--uvtXB",svg:E7.A,width:"24",height:"24"}),a.createElement("div",{className:"autosave_notification--message--yAhFz"},p),a.createElement("div",{className:"autosave_notification--actions--dk-yq"},a.createElement("div",{className:"autosave_notification--mainAction--sidqJ autosave_notification--action--Brz-5",onClick:()=>{c?t(tm.to({type:E8.EO})):(0,E3.y8)(m)?d.Ay.redirect((0,tQ.r1)(o$.F.toLiveGraph(m.file),!0),"_blank"):t(c6.NA({file:m,openNewFileIn:iu.ai.NEW_TAB,source:ma.U.AUTOSAVE_NOTIFICATION}))}},f),a.createElement("div",{className:"autosave_notification--action--Brz-5",onClick:()=>{(0,nc.trackEvent)("Autosave Notification Snooze",{files:s.length,firstFile:m.fileKey}),t(E5.zE(Date.now()))}},(0,N.tx)("autosave.notification.action_later"))))}var ba=r(544907);let bn="team-org-access-dropdown";function bl(e){let t=(0,n.wA)(),r=e.dropdownShown&&e.dropdownShown.type===bn;return a.createElement("div",{className:"team_org_access_dropdown--orgAccess--JAIwP"},a.createElement("button",{className:"team_org_access_dropdown--select--lqx54",onClick:e=>{e.stopPropagation(),e.preventDefault(),r?t(eS.oB()):t(eS.j7({type:bn}))}},(0,ey.ZP)()[e.orgAccess],a.createElement(en.B,{svg:rL.A,className:"team_org_access_dropdown--downCaret--INuva"})),r&&a.createElement("div",{className:"team_org_access_dropdown--orgAccessDropdownContainer--iVvqn"},a.createElement(l1.ms,{className:"team_org_access_dropdown--orgAccessDropdown--zJupm"},a.createElement(l1.MM,{checked:e.orgAccess===eF.bU.PUBLIC,onClick:()=>{e.onChangeOrgAccess(eF.bU.PUBLIC)}},(0,ey.ZP)()[eF.bU.PUBLIC]),a.createElement(l1.MM,{checked:e.orgAccess===eF.bU.PRIVATE,onClick:()=>{e.onChangeOrgAccess(eF.bU.PRIVATE)}},(0,ey.ZP)()[eF.bU.PRIVATE]),a.createElement(l1.MM,{checked:e.orgAccess===eF.bU.SECRET,onClick:()=>{e.onChangeOrgAccess(eF.bU.SECRET)}},(0,ey.ZP)()[eF.bU.SECRET]))))}let bo="team_creation--createTeamText--VjY8f";function bi({currentTeamId:e,currentUserOrgId:t,user:r,selectedView:l,dropdownShown:o,teamCreation:i,orgById:s}){var c;let m=(0,n.wA)(),[u,_]=(0,a.useState)(null),[p,f]=(0,a.useState)(eF.bU.PUBLIC),g=l.ignoreCurrentPlan,E=t&&!g?s[t]:null,b=!e&&!t,v=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(v.current)for(let e=0;e<v.current.elements.length;e++){let t=v.current.elements[e];if(!t.value){t.focus();break}}t&&!g&&(0,nc.trackEvent)("team_creation_started",{user_id:r?.id??"",org_id:t})},[t,r,g]);let h=e=>{e.preventDefault(),e.stopPropagation(),u?(m((0,p_.KQ)({teamName:u,orgAccess:p,dontRedirect:!!l.onSubmitReturnToPrevView,ignoreCurrentPlan:g})),l.onSubmitReturnToPrevView&&m(eS.$T((0,d.Gl)()||{view:"recentsAndSharing"}))):m(aR.s.error((0,N.t)("team_creation.your_team_name_cannot_be_empty")))},y=!(t&&!g)&&!l.onSubmitReturnToPrevView,w=b?null:a.createElement(EK.X,{onClick:()=>{m(eS.$T((0,d.Gl)()||{view:"recentsAndSharing"}))}},a.createElement(en.B,{svg:nU.default,className:"team_creation--modalCloseX--TTg32"}));return a.createElement(rV.fu,{name:"Team Creation"},a.createElement("div",null,a.createElement(Eq.O,{menu:w},y&&a.createElement(EX.J,{index:1}),a.createElement("form",{ref:v,onSubmit:h},a.createElement(EJ.JR,null,(0,N.tx)("team_creation.create_a_team_title")),a.createElement("div",{className:"team_creation--newTeamContainer--43mWz team_creation--newTeamContainerBase--nwYzU"},a.createElement("div",{className:"team_creation--teamNameContainer--B6Pc3"},a.createElement("div",{className:"team_creation--teamNameLabel--ohZWy"},(0,N.tx)("team_creation.team_name_label")),a.createElement(Z.il,{value:u||"",onChange:e=>{_(e.target.value)},className:"team_creation--newTeamInput--PdjEW",maxLength:255,placeholder:(0,N.t)("team_creation.team_name_input_placeholder")})),E?a.createElement("div",{className:"team_creation--orgTeamSettings--bDW2R"},a.createElement("div",{className:x.s.flex.$},a.createElement("div",{className:x.s.fontSemiBold.$},(0,N.tx)("team_creation.access_within_the_organization")),a.createElement(bl,{orgAccess:p,dropdownShown:o,onChangeOrgAccess:e=>{f(e)}})),a.createElement("div",{className:bo},(c=E.name,{[eF.bU.PUBLIC]:(0,N.tx)("org_access_strings.public.description_with_org_name",{orgName:c}),[eF.bU.PRIVATE]:(0,N.tx)("org_access_strings.closed.description_with_org_name",{orgName:c}),[eF.bU.SECRET]:(0,N.tx)("org_access_strings.secret.description_with_org_name",{disclaimerLabel:a.createElement("span",{className:x.s.fontSemiBold.$},(0,N.tx)("org_access_strings.secret.description.disclaimer_label")),orgName:c})})[p])):a.createElement("div",{className:bo},(0,N.tx)("team_creation.after_creating_a_team_you_can_invite_others_to_join")),a.createElement(Z.nD,{className:t?"team_creation--createTeamButtonOrg--2rnOw":"team_creation--createTeamButton--C8IV7",type:"submit",disabled:i.loading,onClick:h},(0,N.tx)("team_creation.create_team_button")))))))}function bs({selectedView:e}){let t=(0,n.wA)(),r=(0,H.dq)(),l=(0,n.d4)(e=>e.orgById),o=(0,Y.iZ)(),i=(0,n.d4)(e=>e.currentTeamId),s=(0,cf.Um)(),c=(0,n.d4)(e=>e.teamCreation);return(0,ey.R$)(o,r)?(d.Ay.redirect("/"),t(aR.s.error((0,N.t)("team_creation.missing_team_creation_controls"))),null):a.createElement(bi,{currentTeamId:i,currentUserOrgId:r,user:o,dropdownShown:s,teamCreation:c,orgById:l,selectedView:e})}let bd="team_restore--page--cMEe2",bc="team_restore--section--AmfWe",bm="team_restore--button--C-gOz";function bu({selectedView:e}){let t,r;let l=(0,n.wA)(),[o,i]=a.useState(!1),s=e.teamId,d=(0,n.d4)(e=>e.teams[s]);a.useEffect(()=>{i(!0),aO.$.getDeleted({teamId:s}).then(({data:e})=>{l(_c.bE({team:e.meta})),i(!1)}).catch(e=>{400!==e.status&&(l(eS.$T({view:"recentsAndSharing"})),l(aR.s.error(`${e.data.message}`))),i(!1)})},[l,s]);let c=()=>{l(eS.$T({view:"recentsAndSharing"}))},m=a.createElement(Z.vd,{className:bm,onClick:c},(0,N.tx)("team_restore.back"));if(d){if(d.deleted_at){let e=(0,ei.A)(d.deleted_at).add(28,"days").toDate();t=(0,N.t)("team_restore.confirm_restore_header",{teamName:d.name}),r=a.createElement("div",null,(0,N.tx)("team_restore.confirm_restore"),a.createElement("br",null),a.createElement("br",null),(0,N.tx)("team_restore.confirm_restore_deadline",{deleteDeadline:e})),m=a.createElement(Z.vd,{className:bm,onClick:()=>{l(_c.I9({teamId:s}))}},(0,N.tx)("team_restore.restore"))}else t=(0,N.t)("team_restore.ineligible"),r=(0,N.t)("team_restore.questions_contact_support",{supportEmail:(0,ac.W4)()})}else{if(o)return a.createElement("div",{className:bd},a.createElement("div",{className:bc},a.createElement(et.kt,null)));t=(0,N.t)("team_restore.expired_header"),r=a.createElement("div",null,(0,N.tx)("team_restore.expired"),a.createElement("br",null),a.createElement("br",null),(0,N.tx)("team_restore.questions_contact_support",{supportEmail:(0,ac.W4)()}))}return a.createElement(rV.fu,{name:"Team Restore",properties:{teamId:s}},a.createElement(Eq.O,{menu:a.createElement(en.B,{svg:nU.default,onClick:c,className:"team_restore--modalCloseX--XNErW"})},a.createElement("div",{className:bd},a.createElement("div",{className:bc},a.createElement("div",{className:"team_restore--header--NgU8v text--fontPos20--Bcz97 text--_fontBase--QdLsd"},t),a.createElement("div",{className:"team_restore--text--F18dW text--fontPos12--YsUAh text--_fontBase--QdLsd"},r),m))))}var b_=r(871043),bp=r(188279),bf=r(594950),bg=r(501104),bE=r(718275),bb=r(834612),bv=r(912534),bh=r(578590),by=r(382140);let bw="step_pay--smallGrayText--C8Sfn",bT="step_pay--rowFlex--Mf5y8 step_pay--row--DcuMl";function bI(e){let t=a.useRef(null),[r,n]=a.useState(!1),[l,o]=a.useState(null),i=new bb.vr(e.currency),s=!e.allowZeroSeats,d=e.numAnnualEditors,c=d>0,m=t=>{e.onNumAnnualEditorsChange(t)},u=a.createElement("button",{type:"button",className:"step_pay--changeLink--dSfAg blue_link--blueLink--9rlnd","data-testid":`add-${e.editorType}-seats`,onClick:()=>n(!0)},(0,N.tx)("payments.step_pay.add_more_seats"));return a.createElement("div",{className:bT,key:`${e.editorType}-step-pay-row`,"data-testid":`${e.editorType}-step-pay-row`},a.createElement("div",null,a.createElement("div",{className:"step_pay--flex--ZZh0K"},a.createElement("span",null,(0,N.tx)("payments.step_pay.editors_on_annual_plan.seat_rename",{numAnnualEditors:e.numAnnualEditors,numAnnualEditorsNumberOrInput:r?a.createElement(Z.ks,{ref:t,className:"step_pay--numEditorsInput--mTc8p",value:null==l?e.numAnnualEditors:l,onChange:e=>{o(e.target.value)},onBlur:()=>{let t=parseInt(l);if(!isNaN(t)){if(t<0)e.dispatch(aR.s.error((0,N.t)("flash.no_negative_seats")));else if(0===t)s?e.dispatch(aR.s.error((0,N.t)("flash.at_least_one_editor.seat_rename"))):m(0);else if(t>al.m){let t=a.createElement("a",{href:`mailto:${(0,ac.W4)()}`},(0,N.tx)("flash.annual_plan.contact_support_link"));e.dispatch(aR.s.error((0,N.tx)("flash.annual_plan.contact_support",{contactSupport:t,maxAnnualSubscriptions:al.m})))}else t>100?e.dispatch(tm.to({type:bk,data:{numAnnualEditors:t,onConfirm:()=>m(t)}})):m(t)}o(null),n(!1)},onKeyDown:e=>{let t=e.target;e.keyCode===O.Uz.ENTER?(e.preventDefault(),t.blur()):e.keyCode===O.Uz.ESCAPE&&n(!1)}}):e.numAnnualEditors,productType:(0,by.E)((0,bh.vc)(e.editorType))}))),!r&&a.createElement("div",{className:x.s.flex.flexColumn.gap4.$},e.editorBreakdown,a.createElement("p",{className:bw},(0,N.tx)("payments.step_pay.add_more_editors",{addMoreSeats:u})))),a.createElement(bS,{amount:e.totalCost,lineItem:c?d>0?(0,N.t)("payments.step_pay.price_per_editor_12_months",{price:i.formatMoney(e.annualMonthlyCost,{showCents:!1}),editorString:(0,N.t)("payments.step_pay.num_editors.seat_rename",{numEditors:d})}):(0,N.t)("payments.step_pay.none_selected"):void 0,shouldShowAmount:e.numAnnualEditors>0,currency:e.currency}))}function bx(){return a.createElement("div",{className:"step_pay--separator--gTqAJ"})}function bN(e){let{numAnnualDesignEditors:t,numAnnualWhiteboardEditors:r,isTeamPro:n,totalDesignEditors:l,totalWhiteboardEditors:o,monthlyDesignAmount:i,monthlyFigjamAmount:s,annualMonthlyDesignAmount:d,annualMonthlyFigjamAmount:c}=e,m=l-t,u=t*d*12+(!n&&m>0?m*i:0),_=o-r,p=r*c*12+(!n&&_>0?_*s:0);return a.createElement("div",null,a.createElement(bI,{dispatch:e.dispatch,editorType:eF._Y.DESIGN,onNumAnnualEditorsChange:e.onNumAnnualDesignEditorsChange,numAnnualEditors:t,allowZeroSeats:0!==r,currency:e.currency,totalCost:u,annualMonthlyCost:d}),a.createElement(bI,{dispatch:e.dispatch,editorType:eF._Y.WHITEBOARD,onNumAnnualEditorsChange:e.onNumAnnualWhiteboardEditorsChange,numAnnualEditors:r,allowZeroSeats:0!==t,currency:e.currency,totalCost:p,annualMonthlyCost:c}),a.createElement(bx,null),a.createElement("div",{className:bT},a.createElement("div",{className:"step_pay--totalLabelText--FsxE-"},(0,N.tx)("payments.step_pay.subscription")),a.createElement(bC,{amount:u+p,plusTax:!0,dataTestId:"subscription-total-cost",currency:e.currency})))}function bS(e){let t=new bb.vr(e.currency);return a.createElement("div",{className:"step_pay--subtotal--188gf"},e.shouldShowAmount?t.formatMoney(e.amount,{showCents:!1}):"--",a.createElement("div",{className:x.s.flex.flexColumn.gap4.$},e.lineItem&&a.createElement("div",{className:bw},e.lineItem)))}function bC(e){let t=new bb.vr(e.currency);return a.createElement("div",{className:"step_pay--total--FgOpU"},a.createElement("p",{className:"step_pay--totalText--VTLEG step_pay--jumboText--JE1wb","data-testid":e.dataTestId},t.formatMoney(e.amount,{showCents:!1})),e.plusTax&&a.createElement("p",{className:"step_pay--plusTaxText--gSICq"},(0,N.tx)("payments.step_pay.plus_sales_tax")))}let bk="confirm-seats-modal";function bR(e){let t=e.modalShown.data.numAnnualEditors;return a.createElement(td.Rw,{confirmationTitle:(0,N.t)("payments.step_pay.thats_a_lot_of_seats",{numAnnualEditors:t}),onConfirm:e.modalShown.data.onConfirm,confirmText:(0,N.t)("payments.step_pay.confirm_seats"),...e},(0,N.tx)("payments.step_pay.happy_you_want_to_buy_seats",{numAnnualEditors:t}))}(0,ts.qK)(bk,e=>a.createElement(bR,{...e}));let bA="legacy_upgrade--closeButton--zJ0JO";function bO({selectedView:e}){let t=(0,n.wA)(),r=(0,n.d4)(t=>t.teams[e.teamId]);if((0,b_.uy)(r))throw Error("Team is nullish");let{taxes:l,numDesignEditors:o,numWhiteboardEditors:i,submitPending:s}=(0,n.d4)(e=>e.payment),d=(0,n.d4)(e=>e.teamUserByTeamId[r.id]||{}),c=(0,n.d4)(e=>e.teamBilling.summary.currency),m=(0,n.d4)(e=>e.loadingState),u=uR.Be.loadingKeyForPayload({teamId:r.id}),_=(0,_F.VP)(m,u)&&!(0,_F.D2)(m,u),p={planParentId:r.id,planType:eF.OL.TEAM},f=(0,bp.vK)(p),g=f.data,E=bg.Oq.exclude([bf.ud.DEV_MODE]).dict(e=>({currency:g,billableProductKey:e,tier:bv.Ju.PRO,renewalTerm:bv.IX.MONTH,unit:bv.IX.MONTH})),b=bg.Oq.exclude([bf.ud.DEV_MODE]).dict(e=>({currency:g,billableProductKey:e,tier:bv.Ju.PRO,renewalTerm:bv.IX.YEAR,unit:bv.IX.MONTH})),v=a2.Qw.all([(0,bp.ic)(E,p,bp.Fq.ADMIN_SETTINGS,{enabled:!!g}),(0,bp.ic)(b,p,bp.Fq.ADMIN_SETTINGS,{enabled:!!g})]),h=_||"loading"===f.status||"loading"===v.status;if((0,a.useEffect)(()=>{(0,_F.VP)(m,u)||(0,_F.D2)(m,u)||t(uR.Be({teamId:r.id}))},[m,t,u,r.id]),h)return a.createElement(et.Z_,null);if(null===v.data)throw Error("Price data is null");let y=a.createElement(en.B,{svg:nU.default,onClick:()=>{(0,nc.trackEvent)("Add Annual Plan Canceled",{teamId:e.teamId}),window.history.length<=1?t(eS.$T({view:"team",teamId:e.teamId})):history.go(-1)},className:bA}),w=r?.editors??0,T=Object.keys(d).filter(e=>d[e]?.whiteboard_paid_status===eF.Zf.FULL).length,I=new bb.vr(c),[x,S]=v.data,C=x[bf.ud.DESIGN].amount,k=x[bf.ud.FIGJAM].amount,R=S[bf.ud.DESIGN].amount,A=S[bf.ud.FIGJAM].amount;return a.createElement("div",{className:"legacy_upgrade--addAnnualPlan--ZH1cn"},a.createElement(Eq.O,{menu:y},a.createElement(rV.fu,{name:"Step Pay"},a.createElement("div",{className:"step_pay--addAnnualPlan--3YUVe"},a.createElement(EJ.JR,null,(0,N.tx)("payments.add_annual_plan.title")),a.createElement(EJ.Kh,null,a.createElement("p",{className:"legacy_upgrade--addAnnualPlanInstructions--MmsnZ"},(0,N.tx)("payments.add_annual_plan.intro.seat_rename",{monthlyDesignEditorCost:I.formatMoney(C,{showCents:!1}),monthlyFigjamEditorCost:I.formatMoney(k,{showCents:!1})}))),a.createElement("div",{className:"step_pay--paymentForm--gqjt-"},a.createElement(bN,{annualMonthlyDesignAmount:R,annualMonthlyFigjamAmount:A,currency:c,dispatch:t,isTeamPro:!0,monthlyDesignAmount:C,monthlyFigjamAmount:k,numAnnualDesignEditors:o||0,numAnnualWhiteboardEditors:i||0,onNumAnnualDesignEditorsChange:e=>{t(sJ.js({numDesignEditors:e}))},onNumAnnualWhiteboardEditorsChange:e=>{t(sJ.Az({numWhiteboardEditors:e}))},showAdminPage:()=>{t(eS.$T({view:"team",teamId:e.teamId,teamViewTab:ez.A$.SETTINGS}))},submitPending:s,taxes:l,teamId:e.teamId,totalDesignEditors:w,totalWhiteboardEditors:T}),a.createElement("form",{onSubmit:r=>{r.preventDefault(),t(eA.b({completed_pro_cart_flow:!0})),t(sJ.I2({submitPending:!0})),t(sJ.XF({teamId:e.teamId}))}},a.createElement("div",{className:"step_pay--bigTerms--nC3J9"},(0,N.tx)("payments.add_annual_plan.auto_renew.seat_rename",{cancellingIsEasyLink:a.createElement("a",{target:"_blank",rel:"noopener",href:"/pricing-faq#how-do-i-cancel-my-paid-plan"},(0,N.tx)("payments.add_annual_plan.cancelling_is_easy_link_text"))}),a.createElement("br",null),a.createElement("br",null),(0,N.tx)("payments.add_annual_plan.tos",{tosLink:a.createElement("a",{target:"_blank",rel:"noopener",href:"/tos"},(0,N.tx)("payments.add_annual_plan.tos_link_text"))})),a.createElement("div",{className:"step_pay--flowActionsSingle--X0Hy- step_pay--row--DcuMl"},a.createElement(Z.vd,{type:"submit",disabled:s,className:"step_pay--bigButton--Gtz0E"},(0,N.tx)("payments.add_annual_plan.cta_text")))))))))}function bP(e){return a.createElement(P.tH,{boundaryKey:"AddAnnualPlan",team:L.e.BILLING_EXPERIENCE,fallback:a.createElement(bE.K,null)},a.createElement(bO,{...e}))}var bF=r(115971),bL=r(807482);function bD(e){let t=(0,Y.iZ)(),[r,l]=a.useState(()=>(0,bb.LN)()),o=ag.b.UPGRADE_NEW_TEAM,i=(0,n.wA)(),s=(0,_K.sx)(),d=(t,a)=>{let n=e.selectedView;i(sJ.WX({teamId:e.selectedView.teamId,selectedView:n,newTeam:!0,currency:r,billingPeriod:a}))},c=null===e.selectedView.teamId?void 0:()=>{let r=t?.id;if(r){let t={userId:r,orgId:null,teamId:e.selectedView.teamId};i(e7._l({workspace:t,view:{view:"allProjects"}}))}else i(eS.$T({view:"team",teamId:e.selectedView.teamId}))},m=()=>{i(sJ.Bq({currency:r,upsellSource:o}))},u=e=>{l(e),i(eS.oB())},_=e.selectedView.teamId,p=a.useRef(null);return a.createElement(rV.fu,{name:"Upgrade Team",properties:{teamId:_,step:sX.tn.UPGRADE_NEW_TEAM}},a.createElement("div",{className:"legacy_upgrade--teamUpgrade--auGJz"},a.createElement(Eq.O,{menu:a.createElement(EK.X,{onClick:()=>{let r=t?.id,a=e.selectedView.teamId,n={view:"recentsAndSharing"};r&&a?i(e7._l({workspace:{userId:r,teamId:a,orgId:null},view:e.selectedView.previousView||n})):i(eS.$T(e.selectedView.previousView||n))}},a.createElement(en.B,{svg:nU.default,className:bA})),pageRef:p},a.createElement(EX.J,{index:3}),a.createElement(rV.fu,{name:"Upgrade New Team",properties:{teamId:_,trackingDescriptor:ed.c.UPGRADE_YOUR_TEAM}},a.createElement("div",{className:M()(e.className,{"step_upgrade_new_team--container--BixhQ":!0})},a.createElement(EJ.JR,{className:"step_upgrade_new_team--stepTitleComparisonChart--yyzB5 step_upgrade_new_team--stepTitle--yFYG8"},a.createElement("span",null,(0,N.tx)("plan_details.choose_your_team_plan"))),s?a.createElement("div",{className:x.s.mxAuto.$,style:el.sx.add({width:"1049px"}).$},a.createElement(bF.P,{upsellSource:o,currency:r,updateCurrency:u,chooseStarterPlan:c,chooseProPlan:e=>d(null,e),chooseOrgPlan:m,planComparisonModalHeaderOverride:null})):a.createElement(bL.O,{currency:r,chooseStarterPlan:c,chooseProPlan:e=>d(null,e),chooseOrgPlan:m,updateCurrency:u,upsellSource:o,parentRef:p}))))))}var bM=r(27382),bB=r(182317),bU=r(83432),b$=r(334704),bj=r(659717),bW=r(731991),bG=r(107691),bV=r(236880);class bH extends a.PureComponent{constructor(){super(...arguments),this._isMounted=!1,this.timer=null,this.controller=new AbortController,this.payload=null,this.fetchScheduledDowntimeInfo=async()=>{let e=this.controller?.signal,t=(0,ac.ck)("011a24693cd9b63ea5492d50d7713dfb7ed18ea6"),r=await fetch(t,{signal:e,cache:"no-cache"}),a=await r.json(),n={finished:a.finished,warningDurationMs:Number(a.warning_ms),notifDurationMs:Number(a.notif_ms),pollIntervalMinutes:Number(a.poll_interval_minutes),downtimeStartDate:new Date(a.timestamp+" UTC"),minLengthMinutes:Number(a.estimated_length_min),maxLengthMinutes:Number(a.estimated_length_max),helpcenterUrl:a.helpcenter_url};return(0,l.k)().display_downtime_banner_force&&(n.warningDurationMs*=1e3,n.notifDurationMs*=1e3),"hostname"in a&&(n={...n,renderOnHostname:a.hostname}),n},this.onTick=()=>{null!=this.payload&&this.props.dispatch(bG.Z.onTick({payload:this.payload,hostname:window.location.hostname,currentTimeMs:Date.now()}))},this.poll=async()=>{for(;this._isMounted;)try{let e=await this.fetchScheduledDowntimeInfo();this._isMounted&&(this.payload=e,this.timer||(this.onTick(),this.timer=setInterval(this.onTick,3e4)))}catch(e){"AbortError"!==e.name&&console.warn(e)}finally{let e=this.payload&&60*this.payload.pollIntervalMinutes||900;await (0,b$.fm)(1e3*e)}}}componentDidMount(){this._isMounted=!0,this.poll()}componentWillUnmount(){this._isMounted=!1,this.controller?.abort(),this.timer&&clearInterval(this.timer)}render(){return null}}function bz(e){let{dispatch:t,downtime:r}=e,n=a.useCallback(e=>()=>{t(e)},[t]),o=a.useCallback((e,t)=>()=>{d.Ay.unsafeRedirect(e,"_blank"),n(t)},[n]),i=a.useCallback(e=>(0,N.t)("downtime_banner.ongoing.figma_will_be_entering_a_maintenance_period",{minutes:e}),[]),s=a.useMemo(()=>(0,N.t)("downtime_banner.ongoing.currently_undergoing_maintenance"),[]),c=a.useRef(e.notifications),m=a.useCallback(()=>{c.current.length>0&&t(bW.Q.dequeue({type:bj._.DOWNTIME}))},[t,c]);return a.useEffect(()=>{let{payload:e,status:a,hidingDowntimeNotif:d,notifMinutesRemaining:c}=r;if((0,l.k)().display_downtime_banner){switch(a){case bV.A.Imminent:case bV.A.Warning:if(e&&null!=c&&d!==bV.y.warningHidden){let r=i(c),a=o(e.helpcenterUrl,bG.Z.hideWarningNotif()),l=n(bG.Z.hideWarningNotif());t(bW.Q.dequeue({type:bj._.DOWNTIME})),t(bW.Q.enqueue({notification:{type:bj._.DOWNTIME,message:r,acceptCallback:a,dismissCallback:l}}))}break;case bV.A.Ongoing:if(e&&d!==bV.y.ongoingHidden){let r=o(e.helpcenterUrl,bG.Z.hideOngoingNotif()),a=n(bG.Z.hideOngoingNotif());t(bW.Q.dequeue({type:bj._.DOWNTIME})),t(bW.Q.enqueue({notification:{type:bj._.DOWNTIME,message:s,acceptCallback:r,dismissCallback:a}}))}break;case bV.A.Finished:m()}return()=>{m()}}},[r,t,i,o,n,s,m]),null}bH.displayName="DowntimePoller";var bY=r(682132),bK=r(254093);function bq(){let e=(0,bY.W)();return a.createElement(bK.Y,{prioritizedBanners:e,location:"file_browser"})}var bJ=r(842744);function bX(e){let t=(0,n.wA)(),r=(0,n.d4)(e=>e.fileImport.step),l=(0,_Q.B2)().unwrapOr(!1),[o,i]=a.useState(!1),s=a.useCallback(()=>i(!0),[]),d=a.useCallback(()=>i(!1),[]),c=a.useCallback(e=>{i(!1),l&&t((0,_Q.b6)(e))},[t,l]);return a.createElement(ta.Y,{className:x.s.flex.flexColumn.$,isDragTarget:_Q.al,onTargetDragEnter:s,onTargetDragLeave:d,onTargetDrop:c},e.children,l&&a.createElement(bQ,{step:r,dragging:o}))}function bQ({step:e,dragging:t}){switch(e){case bJ.Y5.CONFIRM_PDF_IMPORT:case bJ.Y5.IMPORT_REPO:return null;case bJ.Y5.START:case bJ.Y5.FILE_IMPORT_WITH_CANCELED_PDF:case bJ.Y5.FILE_IMPORT_WITH_CONFIRMED_PDF:return a.createElement("div",{className:t?"file_browser_drop_zone--dragTargetDragging--giyPY file_browser_drop_zone--dragTargetNormal--TOR0f":"file_browser_drop_zone--dragTargetNormal--TOR0f"});default:(0,I.xb)(e)}}function bZ(e){return a.createElement(P.tH,{boundaryKey:"FileBrowserDropZone",fallback:a.createElement(a.Fragment,null,e.children),team:L.e.WAYFINDING},a.createElement(bX,{...e}))}let b0="file_browser_view--filebrowserHtml--v2BLN",b1="file_browser_view--filebrowserBody--6MX2i",b2="file_browser_view--desktop--5VrC1";function b4(){let e=(0,n.wA)(),t=(0,H.dq)(),r=(0,cf.Um)(),I=(0,Y.iZ)(),x=(0,eC._6)(),S=EY.q_.useIsLoading(),C=(0,n.d4)(e=>e.payment),k=(0,n.d4)(e=>e.currentTeamId),R=(0,q.d)(),A=(0,n.d4)(e=>e.downtime),O=(0,n.d4)(e=>e.notifications);!function(){let e=(0,n.Pj)(),t=a.useMemo(()=>(0,bB.g)(),[]),r=(0,u.Rs)(eG.__y,{cacheNonce:t});a.useEffect(()=>{if("loaded"===r.status&&r.data.currentUser.assetTransferReload.status===Q.tT.Loaded){let t=(0,Q.oA)(r.data.currentUser.assetTransferReload);if(!t)return;let a=ac.Ay().user_data?.id,n=e.getState(),l="folder"===n.selectedView.view&&n.selectedView.folderId===t.folderId,o="team"===n.selectedView.view&&n.selectedView.teamId===t.teamId,i="folder"===n.selectedView.view&&n.folders[n.selectedView.folderId],s=i&&i.team_id===t.teamId,d=t.folderId?l:o||s,c={view:"folder",folderId:t.folderId||""},m={view:"team",teamId:t.teamId||"",teamViewTab:ez.A$.HOME};if(a&&t.userId===a){let r={userId:t.userId,orgId:t.destOrgId},a=t.folderId?c:m;if(d){let n=t.folderId?(0,N.t)("realtime.asset_reload.project_has_been_transferred_redirecting"):(0,N.t)("realtime.asset_reload.team_has_been_transferred_redirecting");e.dispatch(tM.F.enqueue({message:n})),setTimeout(()=>{e.dispatch(e7._l({workspace:r,view:a}))},2e3)}else e.dispatch(e7.Dj({reason:"asset transfer reload",delay:e7.RH.DEFAULT}))}}},[e,r])}(),i.Tf.enableEventSending({allowResourceTracking:!0}),(0,c.h)(()=>{I&&e(E5.Jw())}),(0,_.IT)((0,bM.XZ)({currentOrgId:t??void 0,currentTeamId:k??void 0,fileTags:["figjam_template","figma_basics"]}),{enabled:(0,l.k)().create_starter_files_from_file_browser&&nK.Gn.includes(x.view)});let[P,F]=a.useState(0),[L,D]=a.useState(0),[M,B]=a.useState(!1);(0,c.h)(()=>(document.body.classList.add(b1),document.documentElement.classList.add(b0),(0,g.$o)(),(0,j.I0)(x,t,k,R),(0,b.hW)("exp_aa_test_file_browser_view").catch(f.lQ),()=>{document.body.classList.remove(b1),document.documentElement.classList.remove(b0),(0,g.$E)(),e(tm.AS())})),a.useEffect(()=>{if(s.eD||(0,o.ce)()){let e=document.createElement("div");return e.classList.add("file_browser_view--desktopBackground--kte3I"),document.body.appendChild(e),document.body.classList.add(b2),()=>{document.body.classList.remove(b2),document.body.removeChild(e)}}},[]);let U=(0,m.ZC)(x);a.useEffect(()=>{U&&U!==x&&((0,bU.SW)(U,x)&&window.scrollTo(0,0),M?B(!1):(F(L+1),D(L+1)))},[U,x,M,L]),a.useEffect(()=>{"teamCreation"===x.view&&x.fromNewTab&&e(e7.Dw({previousView:x.previousView,onSubmitReturnToPrevView:x.onSubmitReturnToPrevView,isEduTeam:x.isEduTeam,ignoreCurrentPlan:!0}))},[x,e]);let $=E.uG;if(!function(){let e=(0,eC._6)(),t=(0,n.wA)(),r=(0,Y.TA)(),l=null;("teamUpgrade"===e.view||"addAnnualPlan"===e.view||"promoReview"===e.view||"eduReview"===e.view)&&(l=e.teamId);let o=(0,n.d4)(e=>l&&e.teams[l]||null),i=(0,eP.FC)(),s=o&&(!(0,al.n0)(o)||az.ng.getProTrialStatus(o)===ue.a.IN_TRIAL),d=!!(l&&((0,ao.canAdminTeam)(l,i)||(0,ao.canEditTeam)(l,i)&&s)),c=(0,u.Rs)((0,eG.yY6)(l?{teamId:l}:null)),m=a.useMemo(()=>c.transform(({team:e})=>{if(!e)return!1;let t=!(0,al.a5)(e)||az.ng.getProTrialStatusLG(e)===ue.a.IN_TRIAL;return e.canAdmin||e.canEdit&&t}),[c]),_=(0,aa.DQ)(aa.Pw.GROUP_6),f=(0,an.MF)({oldValue:p.Qw.loaded(d),newValue:m,label:an.A5.FileBrowserView.hasPermission,enableShadowRead:null!==l,enableFullRead:_,contextArgs:{teamId:l}});a.useEffect(()=>{_&&"loaded"===f.status&&!f.data&&l&&(r?t(e7._l({workspace:{userId:r,teamId:l,orgId:null},view:{view:"allProjects"}})):t(eS.$T({view:"team",teamId:l})))},[r,t,_,f.data,f.status,l])}(),"teamUpgrade"===x.view)return x.paymentStep===sX.tn.UPGRADE_NEW_TEAM?a.createElement(bD,{selectedView:x}):a.createElement(h.q,{selectedView:x});if("addAnnualPlan"===x.view)return a.createElement(bP,{selectedView:x});if("teamCreation"===x.view)return x.fromNewTab?null:a.createElement(bs,{selectedView:x});if("addCollaborators"===x.view)return a.createElement(E1,{selectedView:x});if("orgSelfServe"===x.view)return a.createElement(y.G,{step:x.step||m9.X1.Initial,initialDesignSeats:x.initialDesignEditors||0,orgMigrated:!!x.orgMigrated,dropdownShown:r,newTeamProps:x.newTeamProps,upsellSource:x.upsellSource,entryPoint:x.entryPoint});if("teamRestore"===x.view)return a.createElement(bu,{selectedView:x});if("promoReview"===x.view)return a.createElement(w.z,{promo:C?.promo,selectedView:x});else if("eduReview"===x.view)return a.createElement(T.w,{selectedView:x});return I?t||k?a.createElement(ba.C.Provider,{value:{goBack:()=>{L>0&&(history.back(),D(L-1),B(!0))},goForward:()=>{L<P&&(history.forward(),D(L+1),B(!0))},canGoBack:L>0,canGoForward:L<P}},$&&a.createElement(v.R,{userIdForTracking:I?.id}),a.createElement(bZ,null,a.createElement(bq,null),a.createElement(bz,{downtime:A,notifications:O,dispatch:e}),a.createElement(be,null),a.createElement(EV,{showingFileBrowserLoader:S}))):(console.error("No current organization or team plan set for user. Redirecting to /files"),d.Ay.redirect("/files"),null):(console.error(`Signed out page: unrecognized route ${d.Ay.location.pathname}, redirecting to /`),d.Ay.redirect("/"),null)}},902040:(e,t,r)=>{r.r(t),r.d(t,{FileImportModal:()=>er,FileRow:()=>es,ImportModal:()=>ea,fileImportStats:()=>ei,getFooterButtons:()=>en,getStatusComponents:()=>el,useCloseTabWarningWhenImportInProgress:()=>em,useCurrentFolderTeam:()=>eo});var a=r(848318),n=r(301168),l=r(660376),o=r(162796),i=r(309488),s=r(93275),d=r(907727),c=r(878339),m=r(124810),u=r(415676);r(82433);var _=r(19180),p=r(989232),f=r(29188),g=r(813009),E=r(410725),b=r(264478),v=r(279144),h=r(345964),y=r(755534),w=r(401970),T=r(297638),I=r(178806),x=r(967688),N=r(744577),S=r(584026),C=r(31898),k=r(957872),R=r(863270),A=r(353231),O=r(381673),P=r(249726),F=r(708942),L=r(633468),D=r(318147),M=r(55116),B=r(138528),U=r(656320),$=r(520779),j=r(842744),W=r(386252),G=r(274016),V=r(938982),H=r(998568),z=r(616392),Y=r(677334);let K="file_import_modal--scrollContainer--rcZDu";var q=r(40021);function J(e){let{fileImport:t,onDone:r,onCancel:d}=e,m=o.hS(e),u=(0,n.wA)(),_=ei(t),p=0===_.remainingFiles,f=eo(),g=(0,n.d4)(e=>"folder"===e.selectedView.view?e.selectedView.folderId:null),E=Y.M4.Folder.useValue(g).data,[v,I]=(0,a.useState)(z.uf.IMPORTING_FILES);em(v===z.uf.IMPORTING_FILES||v===z.uf.ATTACHING_BRANCH);let N=E?.name||(0,x.t)("file_browser.tool_bar.drafts"),S=v===z.uf.SUCCESS?(0,x.t)("file_browser.file_import_view.imported_to_folder",{folderName:N}):(0,x.t)("file_browser.file_import_view.import_to_folder",{folderName:N}),{statusIcon:C,statusMessage:k,statusMessageSecondary:R}=function(e,t,r){let n=null,o=null,i=null,s=el(e===z.uf.SUCCESS,t,r);switch(e){case z.uf.IMPORTING_FILES:n=s.statusIcon,o=s.statusMessage,i=s.statusMessageSecondary;break;case z.uf.ATTACHING_BRANCH:n=a.createElement(h.kt,{imageBacked:!0,testId:"loadingSpinner"}),o=(0,x.tx)("file_browser.file_import_view.repo.attaching_branch"),i=a.createElement("span",{className:T.s.textBodyMedium.$},(0,x.tx)("file_browser.file_import_view.to_continue_working",{openANewTabLink:a.createElement(b.Us,{href:window.location.href,target:"_blank",trusted:!0,"data-testid":"openANewTabLink"},(0,x.tx)("file_browser.file_import_view.open_a_new_tab_link"))}));break;case z.uf.SUCCESS:n=s.statusIcon,o=s.statusMessage,t.importedFiles===t.totalFiles&&(o=(0,x.tx)("file_browser.file_import_view.repo.success")),i=s.statusMessageSecondary;break;case z.uf.ERROR:n=a.createElement(w.U,{svg:q.A,className:T.s.colorIcon.$,dataTestId:"warningIcon"},a.createElement(c.R,null)),o=(0,x.tx)("file_browser.file_import_view.repo.error");break;default:(0,l.xb)(e)}return n&&o?{statusIcon:n,statusMessage:o,statusMessageSecondary:i}:((0,H.$D)(V.e.SCENEGRAPH_AND_SYNC,Error("Missing status in repo import")),{statusIcon:a.createElement(w.U,{svg:q.A,className:T.s.colorIcon.$,dataTestId:"warningIcon"},a.createElement(c.R,null)),statusMessage:(0,x.tx)("file_browser.file_import_view.repo.error"),statusMessageSecondary:null})}(v,_,N),A=en({isImportComplete:p,fileImport:t,onDone:r,team:f,dispatch:u,stats:_,shouldShowMoveToProjectButton:!1,onMoveToProject:()=>{},filesToMove:[],onCancel:d});return(0,a.useEffect)(()=>{if(p){I(z.uf.ATTACHING_BRANCH);let e=Object.values(t.files),r=e.find(e=>e.name.includes("branch tip"))?.fileKey,a=e.find(e=>e.name.includes("branch point"))?.fileKey,n=e.find(e=>e.name.includes("main tip"))?.fileKey;r&&a&&n?(0,z.yA)(r,a,n).then(()=>{I(z.uf.SUCCESS)}).catch(()=>{I(z.uf.ERROR)}):(I(z.uf.ERROR),console.error("Missing branch key, branch point key, or main tip key files"))}},[p,t.files]),a.createElement(i.bL,{manager:m,width:480},a.createElement(s.vo,null,a.createElement(s.Y9,null,a.createElement(s.hE,null,S)),a.createElement(s.nB,null,t&&a.createElement(y.P,{innerClassName:T.s.flex.flexColumn.$,className:K},Object.values(t.files).map(e=>a.createElement(es,{key:`file-import-${e.id}`,file:e})))),a.createElement(s.wi,null,a.createElement("div",{className:T.s.flex.flexRow.wFull.justifyBetween.py8.gap16.bt1.bSolid.colorBorder.$},a.createElement("div",{className:T.s.flex.flexRow.itemsCenter.gap8.$},C&&a.createElement("div",{className:T.s.flex.itemsCenter.justifyCenter.h32.w32.$},C),k&&a.createElement("span",{className:T.s.fontSemiBold.$},k),R&&a.createElement("span",{className:T.s.ml8.$},R)),a.createElement("div",null,A)))))}var X=r(327551),Q=r(491732),Z=r(317822),ee=r(558893);let et="import_progress_modal";function er(){let e=(0,n.wA)(),{fileImport:t}=(0,g.R)(e=>({fileImport:e.fileImport})),r=()=>{e(C.Ce()),e(F.cY())},o=()=>{e(F.yD())},i=()=>{e(F.cY())},s=(()=>{switch(t.step){case j.Y5.CONFIRM_PDF_IMPORT:return a.createElement(X.PdfConfirmationModal,{fileImportDescription:(0,x.tx)("file_browser.file_import_view.select_pdf_source_description",{pdfCount:ei(t).pdfCount}),onConfirm:t=>{e(F._9(t))},onCancel:()=>{e(F.AU()),o()}});case j.Y5.IMPORT_REPO:return a.createElement(J,{fileImport:t,onDone:r,onCancel:o,onMoveToProject:i,onClose:()=>e(C.Ce()),open:!0});case j.Y5.START:case j.Y5.FILE_IMPORT_WITH_CANCELED_PDF:case j.Y5.FILE_IMPORT_WITH_CONFIRMED_PDF:return a.createElement(ea,{fileImport:t,onDone:r,onCancel:o,onMoveToProject:i});default:(0,l.xb)(t.step)}})();return a.createElement(R.fu,{name:et},s)}function ea({fileImport:e,onDone:t,onCancel:r,onMoveToProject:l}){let d=(0,n.wA)(),c=eo(),m=ei(e),u=(0,n.d4)(e=>e.selectedView),_=(0,B.X$)("ImportModal").unwrapOr(null),p=_?.tier!==D.Ag.STARTER,f=0===m.remainingFiles,g=(0,n.d4)(e=>"folder"===e.selectedView.view?e.folders[e.selectedView.folderId]:null),b=(0,P.Gi)(g),v=(0,U.K)(u);em(!f);let h=g?.name||(0,x.t)("file_browser.tool_bar.drafts"),w=f?(0,x.t)("file_browser.file_import_view.imported_to_folder",{folderName:h}):(0,x.t)("file_browser.file_import_view.import_to_folder",{folderName:h}),{statusIcon:T,statusMessage:I,statusMessageSecondary:N}=el(f,m,h),S=p&&(b||v)&&m.importedFiles>=1,C=(0,a.useMemo)(()=>(function(e,t){let r=[];if(!e)return r;for(let e of Object.values(t))e.fileKey&&r.push({fileKey:e.fileKey});return r})(S,e.files),[S,e.files]),R=(0,E.p)(M.NSA,C),O=en({isImportComplete:f,fileImport:e,onDone:t,team:c,dispatch:d,stats:m,shouldShowMoveToProjectButton:S,onMoveToProject:l,filesToMove:(0,a.useMemo)(()=>(function(e){let t=[];for(let r of e){let e=r.result.data?.file;e&&t.push({key:e.key,name:e.name,folder_id:e.folderId,team_id:e.teamId,editor_type:e.editorType,is_team_template:e.isTeamTemplate,parent_org_id:e.parentOrgId})}return t})(R),[R]),onCancel:r}),F=o.hS({open:!0,onClose:()=>{(0,A.Cu)({trackingContext:et,trackingDescriptor:k.c.FILE_IMPORT_X_BUTTON,text:"dismiss"}),e.queue.length?r():t()},preventUserClose:!f});return a.createElement(i.bL,{manager:F,width:480},a.createElement(s.vo,null,a.createElement(s.Y9,null,a.createElement(s.hE,null,w)),a.createElement(s.nB,{padding:0},a.createElement(y.P,{className:"x78zum5 xdt5ytf x1mhq5o4",className:K},Object.values(e.files).map(e=>a.createElement(es,{key:`file-import-${e.id}`,file:e})))),a.createElement(s.wi,null,a.createElement("div",{className:"x78zum5 x6s0dn4 x167g77z"},T,I&&a.createElement("span",{className:"xkezfkh"},I),N&&a.createElement("span",{className:"xet2fuk"},N)),a.createElement(s.jk,null,O))))}function en({isImportComplete:e,fileImport:t,onDone:r,team:n,dispatch:l,stats:o,shouldShowMoveToProjectButton:i,onMoveToProject:s,filesToMove:d,onCancel:c}){var m;if(!e)return[a.createElement(I.$z,{variant:"destructive",onClick:c,htmlAttributes:{"data-testid":"cancelButton"},key:"cancelButton"},(0,x.tx)("file_browser.file_import_view.cancel"))];if(t.failedOnFileLimit)return[a.createElement(I.$z,{variant:"primary",onClick:()=>{r(),null!=n&&l((0,C.to)({type:G.DV,data:{team:n,resource:o.hasMakeFile&&!(0,_.k)().bake_starter_limit?$.Bi.FIGMAKE:$.vL.FILE,action:W.ZN.IMPORT_FILES,editorType:o.editorType,multipleResources:o.failedFiles>1,currentPlan:O.F.Plan.STARTER,upsellPlan:O.F.Plan.PRO}}))},htmlAttributes:{"data-testid":"nextButton"},key:"nextButton"},(0,x.tx)("file_browser.file_import_view.next"))];let u=[(m=i?"secondary":"primary",a.createElement(I.$z,{variant:m,onClick:r,htmlAttributes:{"data-testid":"doneButton"},key:"doneButton"},(0,x.tx)("file_browser.file_import_view.done")))];return i&&u.push(function({onMoveToProject:e,filesToMove:t,stats:r,dispatch:n}){return a.createElement(I.$z,{variant:"primary",onClick:()=>{e(),(0,p.trackEvent)("file_import.move_to_project.button_clicked",{numFiles:r.importedFiles}),1===t.length&&t[0]?(0,S.h)(t[0],null,n,void 0,{},void 0,!1,void 0,!0):(0,S.O)(t,[],n,!0)},htmlAttributes:{"data-testid":"moveToProjectButton"},key:"moveToProjectButton"},(0,x.tx)("file_browser.file_import_view.move_to_project"))}({onMoveToProject:s,filesToMove:d,stats:o,dispatch:l})),u}function el(e,t,r){let n=null,l=null,o=null;return e?t.importedFiles===t.totalFiles?(l=a.createElement("div",{className:T.s.fontSemiBold.inline.$},(0,x.tx)("file_browser.file_import_view.file_import_all_succeeded",{totalFiles:t.totalFiles,folder:r})),n=a.createElement(w.U,{svg:Z.A,className:T.s.colorIcon.$,dataTestId:"checkIcon"},a.createElement(d.l,{"data-testid":"checkIcon"}))):(l=a.createElement("div",{className:T.s.fontSemiBold.inline.$},(0,x.tx)("file_browser.file_import_view.file_import_progress_to_folder",{importedFiles:t.importedFiles,totalFiles:t.totalFiles,folder:r})),n=a.createElement(w.U,{svg:q.A,className:T.s.colorIcon.$,dataTestId:"warningIcon"},a.createElement(c.R,{"data-testid":"warningIcon"})),t.canceledFiles>0&&(o=(0,x.tx)("file_browser.file_import_view.file_import_cancel"))):(n=a.createElement(h.kt,{imageBacked:!0,testId:"loadingSpinner"}),l=(0,x.tx)("file_browser.file_import_view.file_import_progress",{processedFiles:t.processedFiles,totalFiles:t.totalFiles}),o=a.createElement("span",{className:T.s.textBodyMedium.$},(0,x.tx)("file_browser.file_import_view.to_continue_working",{openANewTabLink:a.createElement(b.Us,{href:window.location.href,target:"_blank",trusted:!0,"data-testid":"openANewTabLink"},(0,x.tx)("file_browser.file_import_view.open_a_new_tab_link"))}))),{statusIcon:n,statusMessage:l,statusMessageSecondary:o}}function eo(){return(0,n.d4)(e=>{if("folder"===e.selectedView.view){let t=e.selectedView.folderId&&e.folders[e.selectedView.folderId]?.team_id;if(null!=t)return e.teams[t]}return null})}function ei(e){let t=Object.keys(e.files).length,r=e.queue.length,a=0,n=0,o=0,i=0,s=0,d=new Set;for(let t in e.files){let r=e.files[t];if(r){switch(r.status){case j.mO.SUCCESS:case j.mO.WARNING:a++;break;case j.mO.CANCELED:n++;break;case j.mO.FAILURE:o++;break;case j.mO.WAITING:case j.mO.BUSY:i++;break;default:(0,l.xb)(r.status)}(0,j.kI)(r.name)&&s++,d.add((0,j.NU)(r))}}return{totalFiles:t,remainingFiles:r,processedFiles:t-r,importedFiles:a,canceledFiles:n,failedFiles:o,pendingFiles:i,editorType:1===d.size&&Array.from(d)[0]||null,hasMakeFile:d.has(D._Y.FIGMAKE),pdfCount:s}}function es(e){let{file:t}=e,r=null;return t.status===j.mO.CANCELED?r=(0,x.tx)("file_browser.file_import_view.file_row_import_cancel"):t.message&&(r=Array.isArray(t.message)?t.message.map((e,t)=>a.createElement("div",{key:t},e)):t.message),a.createElement(ec,{status:t.status,fileKey:t.fileKey},a.createElement("div",{className:T.s.flex.itemsCenter.justifyBetween.flex1.pl8.pr16.textBodyMedium.$},a.createElement("div",{className:T.s.flex.gap8.if(r,T.s.itemsStart,T.s.itemsCenter).$},a.createElement("div",{className:T.s.flex.justifyCenter.h32.w32.itemsCenter.$},a.createElement(ed,{file:t})),a.createElement("div",{className:T.s.if(r,T.s.pb6).$},a.createElement("div",{className:T.s.truncate.lh32.$,style:N.sx.add({maxWidth:"384px"}).$,"data-tooltip":t.name,"data-tooltip-type":"text"},t.name),r&&a.createElement("div",{className:T.s.flex.flexColumn.mt4.colorTextSecondary.$},r,t.cta&&a.createElement(b.Us,{className:T.s.colorTextSecondary.underline.ml8.$,role:"button",onClick:t.cta.action,trusted:!0,"data-testid":"ctaLink"},t.cta.text))))))}function ed({file:e}){switch(e.status){case j.mO.BUSY:case j.mO.WAITING:return a.createElement(h.kt,{imageBacked:!0,testId:"fileRowLoadingSpinner"});case j.mO.FAILURE:case j.mO.CANCELED:return a.createElement(w.U,{svg:ee.A,className:T.s.colorIconDanger.$,dataTestId:"failIcon"},a.createElement(m.A,{"data-testid":"failIcon",className:T.s.colorIconDanger.$}));case j.mO.SUCCESS:case j.mO.WARNING:let t=(0,j.NU)(e);return a.createElement(v.w4,{size:16,type:(0,v.Y8)(t)});default:(0,l.xb)(e.status)}}function ec(e){let{fileKey:t,status:r,children:n}=e;if(r!==j.mO.SUCCESS&&r!==j.mO.WARNING)return n;let l=t?(0,L.jN)({file:{key:t}}):void 0;return l?a.createElement(b.Ph,{href:l,target:"_blank",trusted:!0,className:"file_import_modal--fileRowWrapperLink--3JOhD","data-testid":"fileLink",trackingProperties:{action:"Import Modal - File Link Clicked"}},n,a.createElement(w.U,{svg:Q.A,className:T.s.flex.alignCenter.colorIconSecondary.$},a.createElement(u.S,null))):n}function em(e){let t=(0,a.useCallback)(e=>{e.preventDefault()},[]);(0,a.useEffect)(()=>(e&&(window.addEventListener("beforeunload",t),f.eD?.setIsImporting(!0)),()=>{window.removeEventListener("beforeunload",t),f.eD?.setIsImporting(!1)}),[e,t])}},912046:(e,t,r)=>{r.r(t),r.d(t,{FileRestoreFromVersionModal:()=>g});var a=r(848318),n=r(301168),l=r(989232),o=r(264478),i=r(755534),s=r(967688),d=r(807949),c=r(31898),m=r(125952),u=r(678405),_=r(890257);let p="file_restore_from_version_modal--fileRestoreText--my8Lq";function f(e){let t=e.version,r=function(e){if(e.participating_images_dict){let[t,r]=Object.entries(e.participating_images_dict)[0]||[];if(t)return{name:t,imageUrl:r}}return{name:e.user.handle,imageUrl:e.user.img_url}}(t);return a.createElement("div",{className:"file_restore_from_version_modal--fileRestoreRow--ZAJ4y"},a.createElement("div",{className:"file_restore_from_version_modal--fileRestoreDecoration--ZXtyF"},r&&a.createElement(m.Ro,{className:"file_restore_from_version_modal--fileRestoreAvatar--Ub3UH",size:30,entity:{img_url:r.imageUrl}}),e.connector&&a.createElement("div",{className:"file_restore_from_version_modal--fileRestoreConnector--mhORY"})),a.createElement("div",{className:"file_restore_from_version_modal--fileRestoreData--AQgSJ"},t.label&&a.createElement("div",{className:"file_restore_from_version_modal--fileRestoreLabel--a6Shk ellipsis--ellipsis--Tjyfa"},t.label||""),t.description&&a.createElement("div",{className:p},t.description),a.createElement("div",{className:p},a.createElement(u.Cr,{time:t.touched_at})),a.createElement("div",{className:"file_restore_from_version_modal--fileRestoreUser--Bv60C"},r?.name??"")),a.createElement(o.N_,{onClick:e.callback,className:"file_restore_from_version_modal--fileRestoreAction--414BR",trusted:!0},(0,s.tx)("file_restore_from_version_modal.restore")))}function g(e){let t=(0,n.wA)(),r=r=>{(0,l.trackEvent)("restore_version_from_modal",{fileKey:e.fig.key,versionId:r}),t(c.Ce()),t(d.PF({fileKey:e.fig.key,versionId:r}))},o=e.versions.filter(e=>!e.disabled);return a.createElement(_.XV,{title:(0,s.t)("file_restore_from_version_modal.restore_from_version_history"),maxWidth:396,onClose:()=>{t(c.Lo())}},a.createElement("div",{className:"file_restore_from_version_modal--fileRestorePanel--pMNT2"},a.createElement(i.P,{width:396},o.map((e,t)=>a.createElement(f,{key:e.id,version:e,callback:()=>r(e.id),connector:t+1!==o.length})))))}},549491:(e,t,r)=>{r.d(t,{FolderPageViewOmnicreateDropdown:()=>P});var a=r(848318),n=r(207496),l=r(578590),o=r(660376),i=r(19180),s=r(97481),d=r(171506),c=r(220576),m=r(318147),u=r(532511),_=r(692853),p=(e=>(e.CAN_CREATE="CAN_CREATE",e.CANNOT_CREATE="CANNOT_CREATE",e.CAN_AUTO_UPGRADE="CAN_AUTO_UPGRADE",e.CAN_REQUEST_UPGRADE="CAN_REQUEST_UPGRADE",e.UPGRADE_PENDING="UPGRADE_PENDING",e))(p||{});function f({editorType:e,lgFolder:t}){let r=(0,s.av)(t)[e];if(!r)return!1;if(r.result)return!0;if(!t.canEdit)return!1;let a=r.publicDenyReasons;return 1===a.length&&a[0]===m.QK.FOLDER_CREATE_FILE_DENY_UNLICENSED_USERS}var g=r(301168),E=r(419791),b=r(581957),v=r(576076),h=r(938982),y=r(238462),w=r(998568),T=r(967688),I=r(952039),x=r(877146),N=r(372240),S=r(957872),C=r(863270),k=r(353231),R=r(559372),A=r(249726),O=r(710923);function P({lgFolder:e,newFileFrom:t}){let r=function({lgFolder:e}){let t=(0,c.R)(),{getUpgradeEligibility:r,hasPendingRequest:a,getUpgradePathway:n}=(0,u.wH)({folderId:e.id});return(0,d.h)(e).map(({editorType:s,canCreate:d})=>{let c=(()=>{if(!t)return d?!function({editorType:e,lgFolder:t}){var r;let a=t.team?.org?.currentBaseOrgUser;return r=t.team?.currentTeamUser,!((e===m._Y.WHITEBOARD?(!a||a.whiteboardPaidStatus!==m.El.STARTER)&&(!r||r.whiteboardPaidStatus!==m.Zf.STARTER):e!==m._Y.DESIGN||(!a||a.designPaidStatus!==m.El.STARTER)&&(!r||r.designPaidStatus!==m.Zf.STARTER))||!t.team||t.team.isStarterTeam||t.team.isStudentTeam||t.team.org?.k12GoogleOrg)}({editorType:s,lgFolder:e})?"CAN_CREATE":"CAN_AUTO_UPGRADE":f({lgFolder:e,editorType:s})?!function(e,t){let r=t.team?.org?.currentBaseOrgUser,a=t.team?.currentTeamUser,n=(0,i.k)().tou_plan_user_paid_status_on_file?(0,l._R)(e,t.currentPlanUser??null):e===m._Y.WHITEBOARD?r&&r.whiteboardPaidStatus===m.El.RESTRICTED||a&&a.whiteboardPaidStatus===m.Zf.RESTRICTED:e===m._Y.DESIGN&&(r&&r.designPaidStatus===m.El.RESTRICTED||a&&a.designPaidStatus===m.Zf.RESTRICTED),o=r||a;return!!n&&!!t.team&&!t.team?.isStarterTeam&&!t.team?.isStudentTeam&&!!o}(s,e)?"CANNOT_CREATE":!function(e,t){let r=t.team?.org?.currentBaseOrgUser||t.team?.currentTeamUser;if(!r)return!1;let a={[m._Y.DESIGN]:r.designAccountTypeRequest,[m._Y.WHITEBOARD]:r.whiteboardAccountTypeRequest}[e];return!!a&&"pending"===a.status}(s,e)?"CAN_REQUEST_UPGRADE":"UPGRADE_PENDING":"CANNOT_CREATE";if(d)return"CAN_CREATE";if(!f({lgFolder:e,editorType:s}))return"CANNOT_CREATE";let c=(0,l.Ci)(s);if(!c)return"CANNOT_CREATE";let u=r(c),p=a(c);switch(u){case _.q.CAN_UPGRADE:let g=n(c);switch(g){case _.J.AUTO_PATHWAY:case _.J.ADMIN_AUTO_PATHWAY:return"CAN_AUTO_UPGRADE";case _.J.PROVISIONAL_PATHWAY:case _.J.RE_REQUEST_PATHWAY:return p?"UPGRADE_PENDING":"CAN_REQUEST_UPGRADE";default:(0,o.xb)(g)}case _.q.CANNOT_UPGRADE:return p?"UPGRADE_PENDING":"CANNOT_CREATE";case _.q.UPGRADE_NOT_NEEDED:return d?"CAN_CREATE":"CANNOT_CREATE";default:(0,o.xb)(u)}})(),u=(()=>{switch(c){case"CAN_CREATE":case"CAN_AUTO_UPGRADE":case"CAN_REQUEST_UPGRADE":return!1;case"CANNOT_CREATE":case"UPGRADE_PENDING":return!0;default:(0,o.xb)(c)}})();return{editorType:s,fileCreationOptionState:c,isDisabled:u}})}({lgFolder:e}),s=function({newFileFrom:e,lgFolder:t,fileCreationOptions:r}){let n=(0,g.wA)(),i=function({lgFolder:e,newFileFrom:t}){let r=(0,g.wA)(),n=(0,N.E)({isDraftsFolder:(0,A.T9)(e),newFileFrom:t,folderId:e.id}),{properties:i}=(0,C.j6)(),{handleUpgrade:s}=(0,u.wH)({folderId:e.id});return(0,a.useCallback)(({editorType:e,contextClicked:t,fileCreationOptionState:a})=>{let d=function({editorType:e,fileCreationOptionState:t,createFile:r,handleUpgradeBuilder:a,dispatch:n}){switch(t){case p.CAN_CREATE:return r;case p.CANNOT_CREATE:case p.UPGRADE_PENDING:return y.lQ;case p.CAN_AUTO_UPGRADE:case p.CAN_REQUEST_UPGRADE:return o=>(function({event:e,editorType:t,fileCreationOptionState:r,createFile:a,handleUpgradeBuilder:n,dispatch:o}){let i=(0,l.Ci)(t);if(!i){(0,w.$D)(h.e.MONETIZATION_UPGRADES,Error("Editor type has no corresponding license type for file creation upgrade flow"),{extra:{editorType:t,fileCreationOptionState:r}}),o(I.F.enqueue({message:(0,T.t)("general.an_error_occurred"),error:!0}));return}n({afterUpgradeCallback:a,licenseType:i,upgradeReason:O.i.CREATE_FILE,entryPoint:x.tc.CREATE_FILE_PROJECT_VIEW})(e)})({event:o,editorType:e,createFile:r,dispatch:n,fileCreationOptionState:t,handleUpgradeBuilder:a});default:(0,o.xb)(t)}}({fileCreationOptionState:a,createFile:n({editorType:e,contextClicked:t}),handleUpgradeBuilder:s,editorType:e,dispatch:r}),c=function({editorType:e,fileCreationOptionState:t,trackingContextProperties:r}){let a=(0,l.Ci)(e),n=(()=>{switch(t){case p.CAN_CREATE:case p.CANNOT_CREATE:case p.UPGRADE_PENDING:return!1;case p.CAN_AUTO_UPGRADE:case p.CAN_REQUEST_UPGRADE:return!0;default:(0,o.xb)(t)}})();return{...r,trackingDescriptor:S.c.CREATE_FILE,licenseType:a,billableProductKey:a&&(0,R.F2)(a),needsUpgrade:n}}({editorType:e,fileCreationOptionState:a,trackingContextProperties:i});return e=>{(0,k.Cu)(c),d(e)}},[n,i,r,s])}({lgFolder:t,newFileFrom:e});return{newFiles:r.map(({editorType:e,fileCreationOptionState:t,isDisabled:r})=>(0,E.p)({editorType:e,isDisabled:r,isLoading:!1,showRequestLabel:t===p.CAN_REQUEST_UPGRADE,showRequestSentLabel:t===p.UPGRADE_PENDING,onClick:i({editorType:e,contextClicked:(0,b.V)(e),fileCreationOptionState:t})})),import:(0,v.ud)(t)?(0,E.u)({isLoading:!1,dispatch:n}):null}}({lgFolder:e,newFileFrom:t,fileCreationOptions:r}),P=r.filter(e=>e.fileCreationOptionState===p.CAN_REQUEST_UPGRADE).map(e=>(0,l.Ci)(e.editorType)).filter(Boolean).sort().join(",");return a.createElement(n.a,{menuItems:s,trackingProperties:{requestableLicenseTypes:P,hasRequestableLicenses:!!P}})}},207496:(e,t,r)=>{r.d(t,{a:()=>E,R:()=>b});var a=r(848318),n=r(301168),l=r(168323),o=r(474337),i=r(974839),s=r(506470),d=r(773511),c=r(990140),m=r(202272),u=r(82433),_=r(967688);let p=a.forwardRef(function(e,t){let r=e["aria-expanded"];return a.createElement(d.E,{ref:t,...u.xk(f.button,r&&"false"!==r&&f.buttonActive),...e},a.createElement(c.e,{"aria-hidden":!0}),a.createElement("div",{className:"x78zum5 x1v2ro7d x6s0dn4"},(0,_.t)("file_browser.tool_bar.create"),a.createElement(m.k,{"aria-hidden":!0})))}),f={button:{display:"x78zum5",gap:"x167g77z",rowGap:null,columnGap:null,paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",paddingLeft:"x163pfp",paddingRight:"xmzs88n",paddingInlineStart:null,paddingInlineEnd:null,alignItems:"x6s0dn4",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,color:"x1tk3asg","--color-icon":"xwa2v1s",backgroundColor:"xu5wzci x3sfz7g xazsp2l x1roy7tt x14nhee1",boxShadow:"xb67q6v xn3n4wp x1swp962",overflow:"xb3r6kr",overflowX:null,overflowY:null,minWidth:"x1pshirs",$$css:!0},buttonActive:{backgroundColor:"xs07v55",boxShadow:"xb67q6v",$$css:!0}};var g=r(581957);function E({menuItems:e,trackingProperties:t}){let{getTriggerProps:r,manager:n}=l.b(),i=(0,g.k)();return(0,o.WX)({markName:"FileCreateEntrypoint",isLoaded:!0}),a.createElement(l.bL,{manager:n},a.createElement(p,{...r(),disabled:i}),a.createElement(s.f,{menuItems:e,trackingProperties:t}))}function b({newFileFrom:e,forceOpenNewTab:t}){let r=(0,n.d4)(e=>e.user?.drafts_folder_id),l=(0,i.Q)({newFileFrom:e,forceOpenNewTab:t,folderId:r,contextClicked:"recents_file_creation_thumbnails_created"});return a.createElement(E,{menuItems:l})}},581957:(e,t,r)=>{r.d(t,{V:()=>i,k:()=>s});var a=r(318147),n=r(259964),l=r(474935),o=r(382293);function i(e){return({[a._Y.DESIGN]:"toolbar_design_created",[a._Y.WHITEBOARD]:"toolbar_figjam_created",[a._Y.SLIDES]:"toolbar_slides_created",[a._Y.SITES]:`toolbar_${n.oQ}_created`,[a._Y.COOPER]:`toolbar_${n.sq}_created`,[a._Y.FIGMAKE]:`toolbar_${n.GJ}_created`})[e]}function s(){let e=(0,o.vt)(),t=(0,l.jn)();return e||t}},327551:(e,t,r)=>{r.r(t),r.d(t,{PdfConfirmationModal:()=>E});var a=r(848318),n=r(660376),l=r(907031),o=r(162796),i=r(309488),s=r(93275),d=r(41099),c=r(250838),m=r(544405),u=r(186606),_=r(297638),p=r(178806),f=r(967688),g=r(957872);function E({fileImportDescription:e,onConfirm:t,onCancel:r}){let[E,b]=(0,a.useState)(void 0),v=(0,a.useMemo)(()=>{let e=(0,l.U)(u.h62).map(e=>({key:e,value:u.h62[e],label:function(e){switch(e){case u.h62.MIRO:return"Miro";case u.h62.MURAL:return"Mural";case u.h62.LUCID:return"Lucid";case u.h62.JAMBOARD:return"Jamboard";case u.h62.UNKNOWN:return(0,f.t)("file_browser.file_import_view.select_pdf_source_input_unknown_value");default:(0,n.xb)(e)}}(e)}));return e.sort((e,t)=>e.key===t.key?0:e.key===u.h62.UNKNOWN?1:t.key===u.h62.UNKNOWN?-1:e.label.localeCompare(t.label)),e},[]),h=(0,a.useCallback)(e=>{b(e)},[]),y=(0,a.useCallback)(()=>{E&&t(u.h62[E])},[t,E]),w=o.hS({open:!0,onClose:r,preventUserClose:!0});return a.createElement(i.bL,{manager:w,width:"fit-content"},a.createElement(s.vo,null,a.createElement(s.Y9,null,a.createElement(s.hE,null,(0,f.t)("file_browser.file_import_view.select_pdf_source_header"))),a.createElement(s.nB,null,a.createElement("div",{className:_.s.flex.flexColumn.pt4.gap16.textBodyMedium.$},a.createElement("div",null,e),a.createElement("form",{className:_.s.mb8.$},a.createElement(d.b,{legend:a.createElement(c.q,null,(0,f.tx)("file_browser.file_import_view.select_pdf_source_input_legend")),value:E,onChange:h},v.map(e=>a.createElement(d.c,{key:e.key,value:e.value,label:a.createElement(m.J,{className:_.s.textBodyMedium.$},e.label)},e.key===u.h62.UNKNOWN&&(0,f.tx)("file_browser.file_import_view.select_pdf_source_input_unknown_disclaimer"))))))),a.createElement(s.wi,null,a.createElement(s.jk,null,a.createElement(p.$z,{variant:"secondary",onClick:r,trackingProperties:{trackingDescriptor:g.c.FILE_IMPORT_X_BUTTON,text:"dismiss"}},(0,f.tx)("modal.cancel")),a.createElement(p.$z,{variant:"primary",disabled:!E,onClick:y},(0,f.tx)("modal.confirm"))))))}},271492:(e,t,r)=>{r.r(t),r.d(t,{RevokeProjectTransferModal:()=>f});var a=r(848318),n=r(301168),l=r(162796),o=r(309488),i=r(93275),s=r(531788),d=r(297638),c=r(967688),m=r(952039),u=r(31898),_=r(863270),p=r(574502);function f(e){let{pending:t,canRevokeProjectTransfer:r,isTransferTeam:f=!1}=e,g=(0,n.wA)(),E=l.hS(e),b=t.id,v=t.source_user_email,h=t.destination_user_email,y=t.is_transfer_copy,w=()=>{p.S.deleteAssetTransferRequest({id:b}).then(()=>{g(m.F.enqueue({message:(0,c.t)("revoke_transfer_modal.visual_bell.transfer_revoked")}))},e=>{g(m.F.enqueue({message:(0,c.t)("revoke_transfer_modal.visual_bell.something_went_wrong"),error:!0}))})};return a.createElement(_.fu,{name:"Asset Transfer Revoke Modal",properties:{pendingInviteId:b}},a.createElement(o.bL,{manager:E,width:"lg"},a.createElement(i.vo,null,a.createElement(i.Y9,null,a.createElement(i.hE,null,(0,c.t)("revoke_transfer_modal.header_title"))),a.createElement(i.nB,{scrolling:"none"},a.createElement("div",{className:d.s.py8.$},f?(0,c.tx)("revoke_transfer_modal.transfer_details_team",{sourceUserEmail:v,destinationUserEmail:h}):y?(0,c.tx)("revoke_transfer_modal.transfer_copy_details",{sourceUserEmail:v,destinationUserEmail:h}):(0,c.tx)("revoke_transfer_modal.transfer_details",{sourceUserEmail:v,destinationUserEmail:h})),a.createElement("div",{className:d.s.py8.$},(0,c.tx)("revoke_transfer_modal.function_explanation"))),a.createElement(i.wi,null,a.createElement(i.jk,null,a.createElement(s.$n,{variant:"secondary",onClick:e.onClose},(0,c.t)("revoke_transfer_modal.go_back")),a.createElement(s.$n,{variant:"destructive",onClick:()=>{w(),g(u.Lo())},disabled:!r},(0,c.t)("revoke_transfer_modal.revoke")))))))}},647345:(e,t,r)=>{r.d(t,{f:()=>i});var a=r(848318),n=r(17753),l=r(16808),o=r(954184);function i(e){return a.createElement(l.Me,{className:"addition_button--button--X9H6b","data-onboarding-key":e.data_onboarding_key,"data-tooltip":e.data_tooltip,"data-tooltip-show-immediately":e.disabled||void 0,"data-tooltip-type":n.Ib.TEXT,disabled:e.disabled,innerText:e.innerText,isBackgroundTransparent:e.isBackgroundTransparent,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter,svg:o.A})}},904575:(e,t,r)=>{r.r(t),r.d(t,{FolderUpdateDescriptionModal:()=>s});var a=r(848318),n=r(301168),l=r(967688),o=r(679111),i=r(224191);function s({folder:e}){let t=(0,n.wA)();return a.createElement(i.c,{initialName:e.description??"",title:(0,l.t)("resource_rename_modal.edit_description"),placeholder:"",submitText:(0,l.t)("resource_rename_modal.save"),onRename:r=>t(o.ub({folderId:e.id,description:r.trim()})),allowEmptyString:!0,maxLength:200})}},419586:(e,t,r)=>{r.r(t),r.d(t,{FolderCreationModal:()=>et});var a=r(848318),n=r(301168),l=r(162796),o=r(309488),i=r(93275),s=r(469508),d=r(235456),c=r(19180),m=r(238444),u=r(410725),_=r(264478),p=r(136126),f=r(345964),g=r(297638),E=r(178806),b=r(967688),v=r(453370),h=r(679111),y=r(31898),w=r(533737),T=r(863270),I=r(222556),x=r(989884),N=r(125761),S=r(318147),C=r(55116),k=r(806349),R=r(474132),A=r(280255),O=r(723437),P=r(860790),F=r(679996),L=r(94831),D=r(825241),M=r(991675),B=r(693476),U=r(382902),$=r(359822),j=r(34542),W=r(517776),G=r(263336),V=r(391301),H=r(370715),z=r(556049),Y=r(136169);let K=(0,W.r1)("seen_sharing_clarity_project_modal_overlay"),q="sc_project_creation_permission_onboarding_key";function J(){let e=(0,U.md)(K),{show:t,isShowing:r,complete:n}=(0,j.e)({overlay:Y.QpH,priority:G.N.DEFAULT_MODAL},[e]);(0,$.h)(()=>{t({canShow:e=>!e})});let l=a.createElement("a",{href:"https://help.figma.com/hc/articles/360038006494-Create-a-new-project",className:g.s.colorTextOnbrand.underline.$},(0,b.tx)("rcs.sharing_clarity.learn_more"));return a.createElement(V.rq,{arrowPosition:z.F_.LEFT_TITLE,description:a.createElement("p",null,(0,b.tx)("rcs.sharing_clarity.project_creation_permissions_description",{learnMoreLink:l})),disableHighlight:!0,emphasized:!0,isShowing:r,onClose:n,targetKey:q,title:(0,b.tx)("rcs.sharing_clarity.project_creation_permissions_title"),trackingContextName:"Sharing Clarity Project Creation Permission Onboarding",zIndex:H.R.MODAL})}var X=r(864848),Q=r(948770),Z=r(36983);let ee="folder_creation_modal--sectionHeader--EcWYc text--fontPos11--2LvXf text--_fontBase--QdLsd";function et(e){let t=(0,n.wA)(),[r,U]=a.useState(""),[$,j]=a.useState(!1),[W,G]=a.useState(0),V=S.eD.TEAM_ACCESS_EDIT,H=I.h.useTrackingContext({trigger:F.b.FOLDER_CREATION_MODAL}),z=(0,n.d4)(e=>e.contacts),Y=(0,n.d4)(e=>e.dropdownShown),K=(0,n.d4)(e=>e.autocomplete),et=(0,N.iZ)(),er=(0,u.Rs)(C.mCn,{teamId:e.teamId}),ea=(0,u.Rs)(C.sMZ,{name:"seen_connected_project_in_project_creation_onboarding"}),en=!!ea.data?.currentUser?.userFlagByName,el=(0,c.k)().sc_workspace_audience,eo=a.useMemo(()=>{if("loading"===er.status||!er.data)return null;let t=er.data.team;if(!t)return null;let r="loaded"===t.workspace.status?t.workspace.data:void 0,a={id:e.teamId,name:t.name,imgUrl:t.imgUrl,subscription:t.subscription,student_team:!!t.studentTeamAt,grace_period_end:t.gracePeriodEnd,restrictions_list:t.restrictionsList,canAdmin:t.canAdmin,canEdit:t.canEdit,sharing_audience_control:t.sharingAudienceControl},n=t.org&&{id:t.org.id,name:t.org.name,img_url:t.org.imgUrl,org_domains:(0,k.vy)(t.org.orgDomains),domain_capture:t.org.domainCapture,invite_whitelist_guest_invite_setting:t.org.inviteWhitelist?.guestInviteSetting};return{team:a,plan:t?.plan,org:n||null,workspace:r}},[er,e.teamId]),ei=eo&&eo.team,es=eo&&eo.org,ed=eo&&eo.plan,ec=(0,x.b)(ed?.tier),em=1===W&&ed?.tier!==S.Ag.STARTER&&ec&&!en,eu=es&&es.org_domains?es.org_domains:{domains:[],isFetching:!1,fetchedAt:null},e_=a.useCallback(()=>ei&&ei.sharing_audience_control!==S.PQ.ORG_EDIT&&ei.sharing_audience_control!==S.PQ.ORG_VIEW?ei.sharing_audience_control===S.PQ.WORKSPACE_EDIT||ei.sharing_audience_control===S.PQ.WORKSPACE_VIEW?X._9.WORKSPACE:X._9.INVITE_ONLY:X._9.ORG,[ei]),ep=a.useCallback(()=>ei&&(ei.sharing_audience_control===S.PQ.ORG_EDIT||ei.sharing_audience_control===S.PQ.WORKSPACE_EDIT)?X.J4.EDIT:X.J4.VIEW,[ei]),[ef,eg]=a.useState(e_()),[eE,eb]=a.useState(ep()),[ev,eh]=a.useState(L.e6.EDITOR);a.useEffect(()=>{eg(e_()),eb(ep())},[e_,ep]);let ey=()=>{1===W?G(0):(t(y.Lo()),t(v.bx()))},ew=e=>(0,O.t9)(e,es,eu),eT=e=>{let t=(0,c.k)().folder_creation_restricted_guests_err_ui&&es?.invite_whitelist_guest_invite_setting!=null;return(0,O.yI)(e,z.usersByEmail[e]||e,es,eu,et.email,t?(0,b.t)("project_creation.restricted_against_adding_external_users"):null)},eI=()=>es&&es.domain_capture&&eu.domains.length>0?(0,D.Z)(K).filter(e=>(0,m.xf)(e)&&!(0,R.H_)(eu.domains,e)):[],ex=e=>{if(es&&es?.invite_whitelist_guest_invite_setting==null&&e.length>0){t((0,y.to)({type:Z.F,data:{emails:e,onConfirm:()=>{eN()},popStack:!0,orgName:es.name}}));return}},eN=()=>{let a;ef===X._9.ORG?a=eE===X.J4.EDIT?S.PQ.ORG_EDIT:S.PQ.ORG_VIEW:ef===X._9.WORKSPACE?a=eE===X.J4.EDIT?S.PQ.WORKSPACE_EDIT:S.PQ.WORKSPACE_VIEW:ef===X._9.INVITE_ONLY&&(a=S.PQ.INVITE_ONLY),t(h.vt({shouldRedirect:!e.modalShown,name:r.trim(),teamId:e.teamId,isInviteOnly:void 0,isViewOnly:void 0,sharingAudienceControl:es?a:void 0,teamAccess:V,inviteEmails:(0,D.Z)(K),inviteLevel:ev,orgId:es?.id,onFolderCreated:e.onFolderCreated}))},eS=l.hS({open:e.open,onClose:ey}),eC=0===W?a.createElement(a.Fragment,null,a.createElement("div",{className:"folder_creation_modal--nameHeader--MgNL8 folder_creation_modal--sectionHeader--EcWYc text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,b.t)("project_creation.name")),a.createElement(_.ks,{"aria-label":(0,b.t)("project_creation.project_name"),autoFocus:!0,className:"folder_creation_modal--folderNameInput--Lcn4c",maxLength:_.wG,minLength:1,onBlur:()=>j(!1),onChange:e=>U(e.target.value),onFocus:()=>j(!0),placeholder:(0,b.t)("project_creation.ex_growth_experiments"),required:!0,value:r}),0===r.trim().length&&!$&&a.createElement("div",{className:"folder_creation_modal--inputErrorMessage--AGzQC"},(0,b.t)("project_creation.project_name_empty")),es&&ei&&a.createElement(a.Fragment,null,a.createElement("div",{className:ee,"data-onboarding-key":q},(0,b.t)("project_creation.who_has_access")),a.createElement(J,null),a.createElement(X.YU,{resourceType:S.vt.FOLDER,value:ef,onChange:eg,org:es,team:ei,audienceAccessLevel:eE,workspace:el?eo.workspace:void 0}),ef!==X._9.INVITE_ONLY&&a.createElement(a.Fragment,null,a.createElement("div",{className:ee},(0,b.t)("folder_permissions_modal.what_they_can_do")),a.createElement(X.Iz,{selectedPermissionsLevel:eE,setSelectedPermissionsLevel:eb}),a.createElement("div",{className:"folder_creation_modal--subtitle--H3qLc text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd"},eE===X.J4.VIEW?(0,b.t)("project_creation.can_view_and_comment"):(0,b.t)("project_creation.can_create_and_edit_files"))))):(()=>{let e=es?es.id:null,r=[L.e6.EDITOR,L.e6.VIEWER];return a.createElement("div",{className:"folder_creation_modal--stepTwoContainer--7Oi4o"},a.createElement(B.e,{SearchResultComponent:Q.o,TokenComponent:Q.g,autocomplete:K,dispatch:t,dropdownKey:"permissions-invite-dropdown",dropdownShown:Y,fixedAutocompleteResults:!0,getSearchResults:t=>(0,P.Wj)(t,z.usersByEmail,et,[],e,null,null,{inviteLevel:ev,source:"folder-creation-modal"}),getSelectText:A.C1,inviteLevel:ev,joinLinkShown:!1,onInviteLevelChange:eh,options:r,placeholderText:(0,b.t)("team_creation.add_a_name_or_email"),searchResultToken:ew,shouldAutoFocus:!0,useContainerRefForWidth:!0,validateToken:eT,validateTokensAsEmail:!0}))})();return a.createElement(T.fu,{name:M.e0.CREATE_NEW_PROJECT_MODAL,properties:{teamId:ei?.id,...H}},a.createElement(o.bL,{manager:eS,width:"lg"},a.createElement("div",{className:"folder_creation_modal--multiContents--U8sJ8"},a.createElement(i.vo,null,a.createElement(i.Y9,null,a.createElement(i.hE,null,0===W?(0,b.t)("project_creation.create_project"):(0,b.t)("project_creation.add_people_to_project_name",{projectName:r}))),a.createElement(i.nB,null,eo?eC:a.createElement("div",{className:"folder_creation_modal--loading--9KmQd"},a.createElement(f.qc,null))),eo&&a.createElement(i.wi,null,a.createElement("div",{className:"folder_creation_modal--footer--9Hie8 folder_creation_modal--subtitle--H3qLc text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,b.tx)("project_creation.step_number_of_max_steps",{currentStep:W+1,maxSteps:2})),a.createElement(i.jk,null,a.createElement(E.$z,{onClick:ey,variant:"secondary"},0===W?(0,b.tx)("project_creation.cancel"):(0,b.tx)("project_creation.back")),a.createElement(E.$z,{variant:"primary",onClick:()=>{if(0===W)G(1);else if(es){let e=eI();e.length>0?ex(e):eN()}else eN()},disabled:0===W&&0===r.trim().length},0===W?(0,b.tx)("general.continue"):(0,b.tx)("project_creation.create_project"))))),em&&a.createElement(i.Wk,null,a.createElement(p._,{color:p.S.INFORMATION,icon:a.createElement(d.U,null),onDismiss:()=>{t(w.b({seen_connected_project_in_project_creation_onboarding:!0}))},text:a.createElement(a.Fragment,null,a.createElement("p",{className:g.s.textBodyMediumStrong.$},(0,b.t)("project_creation.figma_has_connected_projects")),a.createElement("p",null,(0,b.tx)("project_creation.learn_more_about_the_benefit",{learnMore:a.createElement(s.N,{newTab:!0,href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects"},(0,b.t)("file_browser.team_settings.learn_more"))})))})))))}},631265:(e,t,r)=>{r.d(t,{l:()=>a});let a="trashed-projects"},359530:(e,t,r)=>{r.r(t),r.d(t,{AddPinModal:()=>h});var a=r(848318),n=r(301168),l=r(660376),o=r(938982),i=r(484169),s=r(410725),d=r(998568),c=r(314979),m=r(967688),u=r(87463),_=r(31898),p=r(353231),f=r(106340),g=r(55116),E=r(879983),b=r(467216),v=r(769642);function h({fileKey:e,source:t,open:r,onClose:l}){let u=(0,n.wA)(),h=(0,b.p)((0,m.t)("file_browser.pinning.pin_modal.confirmation_bell"),"file-browser-workspace-add-pin"),w=(0,s.Rs)(g.wtK,{fileKey:e}),T=function(e){let[t,r]=a.useState(!1),n="loaded"===e.status&&e.data.file&&!e.data.file.canPinToWorkspace&&e.data.file.canEdit;return n&&!t&&r(!0),n||t}(w);if("loaded"!==w.status)return null;let{file:I}=w.data;if(!I)return(0,d.$D)(o.e.WAYFINDING,Error("AddPinModal unable to lookup file by ID")),u(_.Lo()),null;let x=I.computedWorkspace?.workspace;if(!x)return(0,d.$D)(o.e.WAYFINDING,Error("AddPinModal opened for file with no workspace")),u(_.Lo()),null;let N=f.F.toSinatra(I),S=async e=>{try{await E.p.pinFile({resourceType:v.AH,resourceId:x.id,fileKey:I.key,description:e,shouldUpdatePermissions:T}),(0,p.E9)("file_browser_file_pinned_to_resource",I,{resourceType:v.AH,resourceId:x.id,source:t,pinDescription:(0,i._Z)(e)}),h(x.id)}catch(e){throw u(c.s.error((0,m.t)("file_browser.pinning.pin_modal.error"))),e}},C=T?a.createElement(y,{file:I,workspace:x}):null;return a.createElement(b.N,{title:(0,m.t)("file_browser.pinning.pin_modal.pin_file_to_workspace"),confirmText:(0,m.t)("file_browser.pinning.pin_file"),onSubmit:S,file:N,initialDescription:null,warningContent:C,open:r,onClose:l})}function y({file:e,workspace:t}){let r=e.parentOrgId;(0,l.B1)(r);let o=(0,n.d4)(({orgById:e})=>e[r].name);return a.createElement(u.E,null,(0,m.tx)("file_browser.pinning.update_permissions.content",{workspaceName:t.name,permission:a.createElement(u.E,{fontWeight:"bold"},(0,m.tx)("file_browser.pinning.update_permissions.content.permission",{orgName:o}))}))}},607910:(e,t,r)=>{r.r(t),r.d(t,{DeletePinModal:()=>b});var a=r(848318),n=r(301168),l=r(938982),o=r(484169),i=r(410725),s=r(998568),d=r(873923),c=r(314979),m=r(967688),u=r(353231),_=r(125761),p=r(318147),f=r(55116),g=r(879983),E=r(467216);function b({pinnedFileId:e,open:t,onClose:r}){let b=(0,_.TA)(),v=(0,n.wA)(),h=(0,E.p)((0,m.t)("file_browser.pinning.delete_pin_modal.confirmation_bell"),"file-browser-workspace-delete-pin"),[y,w]=a.useState(!1),T=(0,i.Rs)(f.qBf,{pinnedFileId:e});if("loaded"!==T.status)return null;let{pinnedFile:I}=T.data;if(!I)return(0,s.$D)(l.e.WAYFINDING,Error("DeletePinModal unable to lookup pinned file by ID")),r(),null;if(I.resourceType!==p.K.WORKSPACE)return(0,s.$D)(l.e.WAYFINDING,Error("DeletePinModal opened for pinned file with non-workspace resource type"),{extra:{resourceType:I.resourceType}}),r(),null;let x=async t=>{t.preventDefault();try{w(!0),await g.p.deletePin({pinnedFileId:e}),(0,u.E9)("file_browser_file_unpinned_from_resource",I.file,{resourceId:I.resourceId,resourceType:I.resourceType,isPinCreator:I.creator?.id===b,pinDescription:(0,o._Z)(I.description)}),h(I.resourceId),r()}catch(e){v(c.s.error((0,m.t)("file_browser.pinning.delete_pin_modal.error")))}finally{w(!1)}};return a.createElement(d.R,{title:(0,m.t)("file_browser.pinning.delete_pin_modal.header"),confirmText:(0,m.t)("file_browser.pinning.delete_pin_modal.confirm"),onConfirm:x,destructive:!0,isLoading:y,open:t,onClose:r},(0,m.t)("file_browser.pinning.delete_pin_modal.content"))}},590047:(e,t,r)=>{r.r(t),r.d(t,{EditPinModal:()=>g});var a=r(848318),n=r(301168),l=r(938982),o=r(410725),i=r(998568),s=r(314979),d=r(967688),c=r(31898),m=r(106340),u=r(318147),_=r(55116),p=r(879983),f=r(467216);function g({pinnedFileId:e,open:t,onClose:r}){let g=(0,n.wA)(),E=(0,f.p)((0,d.t)("file_browser.pinning.pin_modal.edit.confirmation_bell"),"file-browser-workspace-edit-pin"),b=(0,o.Rs)(_.vgO,{pinnedFileId:e});if("loaded"!==b.status)return null;let{pinnedFile:v}=b.data;if(!v)return(0,i.$D)(l.e.WAYFINDING,Error("EditPinModal unable to lookup pinned file by ID")),g(c.Lo()),null;if(v.resourceType!==u.K.WORKSPACE)return(0,i.$D)(l.e.WAYFINDING,Error("EditPinModal opened for pinned file with non-workspace resource type"),{extra:{resourceType:v.resourceType}}),g(c.Lo()),null;let h=v.resourceId,y=async t=>{try{await p.p.updatePin({pinnedFileId:e,description:t}),E(h)}catch(e){throw g(s.s.error((0,d.t)("file_browser.pinning.pin_modal.edit.error"))),e}},w=m.F.toSinatra(v.file);return a.createElement(f.N,{title:(0,d.t)("file_browser.pinning.pin_modal.edit_pin_description"),confirmText:(0,d.t)("file_browser.pinning.pin_modal.save"),onSubmit:y,file:w,initialDescription:v.description,open:t,onClose:r})}},467216:(e,t,r)=>{r.d(t,{N:()=>U,p:()=>$});var a=r(848318),n=r(301168),l=r(162796),o=r(309488),i=r(93275),s=r(531788),d=r(878339),c=r(782073),m=r(82433),u=r(484169),_=r(279144),p=r(345964),f=r(687113),g=r(297638),E=r(967688),b=r(952039),v=r(239851),h=r(289297),y=r(453370),w=r(403253),T=r(209595),I=r(28351),x=r(382902),N=r(536384),S=r.n(N),C=r(151433),k=r(238462),R=r(755534),A=r(149841),O=r(957508),P=r(555655),F=r(523669),L=r(73515);function D({buttonClassName:e,onInsert:t,closeOnInsert:r}){let[n,l]=a.useState(null),o=a.useRef(null),i=a.useCallback(()=>{o.current&&l(o.current.getBoundingClientRect())},[l]),s=a.useCallback(e=>{t(e),r&&l(null)},[t,r,l]);return a.createElement("button",{className:e,ref:o,onClick:i},a.createElement(F.In,{icon:"smiley-32"}),n&&a.createElement(L._,{onInsert:s,onCancel:()=>l(null),targetRect:n}))}let M={library:{list:()=>Promise.resolve([]),search:()=>Promise.resolve([]),maxResultsLength:()=>0}};function B({placeholder:e,text:t,onChange:r,maxLength:l,onSubmit:o,textAreaClassName:i}){let s=(0,n.wA)(),d=x.zl.get(O.ph),[c,m]=a.useState(!1),_=a.useRef(null),p=a.useCallback(e=>{e.preventDefault(),e.stopPropagation(),_.current&&_.current.focus()},[]),f=(0,u.Kq)(t,{includeTrailingWhitespace:!0});return a.createElement("div",{className:"emoji_text_area--textAreaContainer--4FHeL",onClick:p},a.createElement(R.P,{className:S()(g.s.flexGrow1.overflowAuto.maxWFull.borderBox.if(c,g.s.bb1.bSolid.colorBorder).$,i),innerClassName:g.s.hFull.$},a.createElement(P.iX,{ref:_,className:g.s.pt16.px16.borderBox.if(c,g.s.pb4).$,currentOrgUsers:{orgUsers:{}},dispatch:s,editorOnClear:k.lQ,editorOnInsert:k.lQ,mentionables:M,messageMeta:t,mountInputFocused:!0,onCancel:k.lQ,onFocus:k.lQ,onSubmit:o??k.lQ,onUpdateTextArea:k.lQ,placeholderText:e,setIsEditorFocused:k.lQ,submitOnEnter:!1,typeahead:d,updateMessage:([e,t])=>{r(e)}}),a.createElement(A.a,{onInitialLoad:e=>m(!e),onIntersectionChange:e=>m(!e.isIntersecting)})),a.createElement("div",{className:g.s.flex.justifyBetween.itemsCenter.pl12.pr16.py12.$},a.createElement(D,{buttonClassName:"emoji_text_area--emojiPickerButton--CGYqF",onInsert:e=>{if(_.current){let t=C.dN.get(e.id);t&&(_.current.insertEmoji(t),_.current.focus())}},closeOnInsert:!0}),l&&a.createElement("div",{className:g.s.if(f>l,g.s.colorTextDanger,g.s.colorTextSecondary).cursorDefault.$},f,"/",l)))}function U({title:e,confirmText:t,onSubmit:r,file:n,initialDescription:c,warningContent:b,open:y,onClose:T}){let[I,x]=a.useState(c??[]),[N,S]=a.useState(!1),C=(0,w.fA)(n),k=(0,v.l)(n.folder_id),R=(0,u.Kq)(I,{includeTrailingWhitespace:!0}),A=R<=100&&R>0,O=a.useCallback(async()=>{if(A)try{S(!0),await r(I),T()}finally{S(!1)}},[r,A,T,I]),P=l.hS({open:y,onClose:T}),F=(0,h.C)(C),L=a.createElement(a.Fragment,null,a.createElement("div",{className:g.s.p16.gap16.flex.flexColumn.$},a.createElement("div",{className:g.s.flex.flexColumn.gap16.$},a.createElement("div",null,a.createElement(f.e,{tile:C,borderRadius:6})),a.createElement("div",{className:"x78zum5 x1q0g3np x1v2ro7d x6s0dn4"},a.createElement(_.w4,{size:16,type:F}),a.createElement("div",{className:g.s.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.cursorDefault.$},a.createElement("div",{...m.Ay.props(j.title)},n.name),"loaded"===k.status&&k.data?a.createElement("div",{...m.Ay.props(j.subtitle)},k.data):null))),a.createElement(B,{placeholder:(0,E.t)("file_browser.pinning.pin_modal.description_textarea_placeholder"),text:I,onChange:x,onSubmit:O,maxLength:100,textAreaClassName:g.s.maxH100.$})),b?a.createElement("div",{className:g.s.colorBgWarningTertiary.px16.py12.flex.columnGap8.$},a.createElement(d.R,{className:g.s.flexShrink0.$}),a.createElement("span",null,b)):null);return a.createElement(o.bL,{manager:P,width:"lg"},a.createElement(i.vo,null,a.createElement(i.Y9,null,a.createElement(i.hE,null,e)),a.createElement(i.nB,{padding:0},L),a.createElement(i.wi,null,a.createElement(i.jk,null,a.createElement(s.$n,{variant:"secondary",onClick:T},(0,E.tx)("modal.cancel")),N?a.createElement(s.$n,{disabled:!0},a.createElement(p.kt,{className:g.s.colorIconOnbrand.$})):a.createElement(s.$n,{disabled:!A,variant:"primary",onClick:O},t)))))}function $(e,t){let r=(0,n.wA)(),l=(0,T._6)();return a.useCallback(a=>{let n;("workspace"!==l.view||l.subView!==I.V0.DIRECTORY)&&(n={text:(0,E.t)("file_browser.pinning.pin_modal.confirmation_bell.view_workspace"),action:()=>{r(y.$T({view:"workspace",subView:I.V0.DIRECTORY,workspaceId:a,selectedTab:I.dN.TEAMS}))}}),r(b.F.enqueue({type:t,message:e,button:n}))},[r,e,t,l])}let j={title:{...c.g.textBodyMediumStrong,$$css:!0},subtitle:{...c.g.textBodyMedium,$$css:!0}}},573502:(e,t,r)=>{r.d(t,{$:()=>u});var a=r(848318),n=r(301168),l=r(637640),o=r(857607),i=r(453370),s=r(422444),d=r(180294),c=r(28351);if(443==r.j)var m=r(213374);function u(){let e=(0,d.dq)(),t=(0,n.wA)();return a.useCallback((r,a)=>{if(t(s.kg({clickedResourceType:"workspace",resourceIdOrKey:r??void 0})),(0,o.Fo)(a)||a.shiftKey){let t=`/files/${e}/workspace/${r??m.O}/directory/teams`;l.Ay.redirect(t,"_blank"),a.preventDefault()}else t(i.$T({view:"workspace",subView:c.V0.DIRECTORY,workspaceId:r,selectedTab:c.dN.TEAMS}))},[e,t])}},106355:(e,t,r)=>{r.d(t,{h:()=>b});var a=r(848318),n=r(430385),l=r(967688),o=r(657174),i=r(301168),s=r(76e4),d=r(103419),c=r(453370),m=r(422444),u=r(353231),_=r(672940),p=r(26435),f=r(125952),g=r(697906);function E(e){let[t,r]=a.useState(!1),n=(0,i.wA)(),l=(0,i.d4)(e=>e.selectedView),o=(0,_.FC)(),E=e.team,b=()=>{(0,u._J)("file_browser_team_click",E.id,o,{selectedView:"recentsAndSharing"===l.view?l.tab||p.G.RECENTLY_VIEWED:l.view,viewMode:"grid"}),n(m.kg({clickedResourceType:"team",resourceIdOrKey:E.id})),n(c.$T({view:"team",teamId:E.id}))},v=e.selectedTeamId===e.team.id,h=t||v;return a.createElement(d.a,{canView:!0,description:E.description,headerLeft:a.createElement(f.Ro,{className:g.rP,entity:E,size:40}),headerRight:a.createElement(s.m3,{team:E,onLeave:e.onLeave,isCardActive:h}),isCardActive:h,isSelected:v,name:E.name,onClick:t=>{1===t.detail?e.setSelectedTeamId(e.team.id):2===t.detail&&b()},onMouseOut:()=>{r(!1)},onMouseOver:()=>{r(!0)}})}function b(e){let t=e.teams;(0,n.KQ)(t,"name");let[r,i]=a.useState(void 0);return a.createElement(o.X,{emptyView:(0,l.tx)("team_tile.guest.no_teams.info",{orgName:e.orgName})},t.map(t=>a.createElement(E,{key:t.id,team:t,onLeave:e.onLeave,selectedTeamId:r,setSelectedTeamId:i})))}},657174:(e,t,r)=>{r.d(t,{X:()=>s});var a=r(848318),n=r(143823),l=r(536384),o=r.n(l),i=(e=>(e.Medium="Medium",e.Large="Large",e))(i||{});function s(e){let t;return e.isLoading?a.createElement("div",{className:"tile_grid--loadingContainer--1gQIv"},a.createElement(n.k,{htmlAttributes:{"data-testid":"loading-spinner"}})):!e.children||Array.isArray(e.children)&&!e.children.length?a.createElement("div",{className:"tile_grid--emptyContainer--y8P1H text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.emptyView):(t="Large"===e.tileSize?"tile_grid--gridLarge--EZC2-":"tile_grid--gridMedium--fzult",a.createElement("div",{className:o()("tile_grid--gridContainer--cn4vx",e.containerClassName)},a.createElement("div",{className:t},e.children)))}},301360:(e,t,r)=>{r.d(t,{$:()=>C,A:()=>A});var a=r(848318);if(443==r.j)var n=r(413927);var l=r(186606),o=r(768618),i=r(382902),s=r(989232),d=r(615233),c=r(178806),m=r(967688),u=r(740495),_=r(957872),p=r(34375),f=r(34542),g=r(338104),E=r(15105),b=r(531288),v=r(601167),h=r(263336),y=r(556049),w=r(593713),T=r(67391),I=r(136169),x=r(555637),N=r(722541);let S=(0,d.ck)("bfb358109ac5994e69048d8390d3a0c334253aa8"),C="rfd-upsell-page-title";function k({nodeToHighlight:e,complete:t}){let[r,l]=a.useState(null),o=a.useRef(null),i=(0,v._X)({subscribeToUpdates_expensive:!0}),s=a.useCallback(()=>{o.current&&l(o.current.absoluteBounds.height*i.zoomScale)},[i.zoomScale]);return a.useEffect(()=>{if(!e){l(null);return}let t=`dev-page-change-upsell-${e}`,r=(0,b.EE)(t,[e],e=>{o.current=e.position,s()});return o.current=r.currentNodePosition[e]?.position||null,s(),()=>{(0,b.lB)(t)}},[e,s]),a.createElement(w.NJ,{arrowPosition:y.F_.LEFT_TITLE,backgroundColor:"var(--color-bg)",className:N.R3,closeButtonClassName:N.b,dismissModal:t,hideIfArrowPositionDoesNotMatch:!0,hideIfTargetLost:!0,isCanvasNode:!0,leftOffset:12,noAnimation:!0,shouldNotWrapInParagraphTag:!0,targetKey:e,topOffset:r?-r/2-15:0,width:240},a.createElement("div",{className:N.Xq},(0,m.t)("dev_handoff.rfd_signals_upsell.mark_as_ready")),a.createElement("div",{className:N.O6},a.createElement("div",{className:N.zu},(0,m.t)("dev_handoff.rfd_signals_upsell.description"))),a.createElement("div",{className:N.JP},a.createElement(n.v,{mode:"dev-handoff"},a.createElement(c.$z,{trackingProperties:{trackingDescriptor:_.c.MARK_READY_FOR_DEV},variant:"primary",onClick:function(){e&&(t(),g.z4.setNodesReady(!0,[e],"dev-node-change-upsell",null))}},(0,m.t)("dev_handoff.rfd_signals_upsell.mark_ready_for_dev")))))}function R(e){s.definedAnalyticsHandler.trackDefinedEvent("activation.rfd_signal_upsell.disqualification_reason",{reason:e,upsellSubject:"page"})}function A(){let[e,t]=a.useState("show_page_tooltip"),[r,s]=a.useState(null),[d,g]=(0,i.fp)(x.hj),b=(0,i.Xr)(x.d1),A=(0,i.md)(x.Sp),O=(0,i.Xr)(x.Sp),P=(0,E.Z)("dev-handoff-rfd-signals-page-upsell"),F=(0,u.cR)(),{show:L,complete:D,uniqueId:M,isShowing:B}=(0,f.e)({overlay:I.ZNl,priority:h.N.HIGH_PRIORITY_MODAL,experiment:{check:F,predicate:e=>e,postCheck:()=>!0}});async function U(){d&&r&&l.Egt&&(await (0,o.UN)().setCurrentPageAsync(r),l.Egt.replaceSelection([d],!0),await P(await (0,v.QZ)({nodeId:d,alwaysPan:!0}),{alwaysNavToSimilarViewport:!0}),t("show_node_tooltip"))}return(a.useEffect(()=>{b({fn:D})},[D,b]),(0,p.E)(M,["page_name_changed_with_rfd_indicator"],e=>{if(!e.properties.pageId){R("no_page_id");return}if(A){R("already_seen_upsell_this_session");return}let t=(0,o.UN)().get(e.properties.pageId);if(!t){R("page_not_found");return}let r=function(e){let t=null,r=0,a=new Set;return function e(n){if(!a.has(n.guid)){if("FRAME"===n.type&&n.childCount>r&&n.canHaveStatus){let e=function e(t){let r=0;if(t.childCount>0)for(let a of t.childrenNodes)r+=1+e(a);return a.add(t.guid),r}(n);e>r&&(r=e,t=n)}n.childCount>0&&n.childrenNodes?.forEach(e)}}(e),t}(t);if(!r){R("no_upsell_frame_for_page");return}s(e.properties.pageId),g(r.guid),L({onShow:()=>O(!0)})}),B)?"show_page_tooltip"===e?a.createElement(w.NJ,{arrowPosition:y.F_.LEFT_TITLE,backgroundColor:"var(--color-bg)",className:N.R3,closeButtonClassName:N.b,dismissModal:D,leftOffset:12,noAnimation:!0,shouldNotWrapInParagraphTag:!0,targetKey:C,width:240},a.createElement("div",{className:N.Rg},(0,m.t)("dev_handoff.rfd_signals_upsell.title")),a.createElement("div",{className:N.O6},a.createElement("div",{className:N.j},a.createElement(T.GV,{src:S,width:240})),a.createElement("div",{className:N.zu},(0,m.t)("dev_handoff.rfd_signals_upsell.page_upsell.description"))),a.createElement("div",{className:N.JP},a.createElement(n.v,{mode:"dev-handoff"},a.createElement(c.$z,{trackingProperties:{trackingDescriptor:_.c.SHOW_ME_HOW},variant:"primary",onClick:U},(0,m.t)("dev_handoff.rfd_signals_upsell.page_upsell.show_me_how"))))):d?a.createElement(k,{nodeToHighlight:d,complete:D}):null:null}},220133:(e,t,r)=>{r.d(t,{i:()=>_});var a=r(848318);if(443==r.j)var n=r(658029);if(443==r.j)var l=r(269238);if(443==r.j)var o=r(486503);if(443==r.j)var i=r(491383);var s=r(82433),d=r(480800),c=r(286046),m=r(465233),u=r(17753);function _({favoriteType:e,orgId:t,resourceId:r,setFavorite:_,monochrome:f,teamId:g,size:E="md",dataTestId:b="favorite-star-button"}){let v=(0,c.Y)(r,e,t,g),h=(0,d._)({subscription:v,orgId:t,resourceId:r,setFavorite:_});return"loaded"!==v.status?a.createElement("div",{...s.Ay.props(f&&p.monochromePlaceholder)},a.createElement(n.K,{variant:"secondary",disabled:!0,size:E,"aria-label":h.tooltip,htmlAttributes:{"data-tooltip-type":u.Ib.TEXT,"data-tooltip":h.tooltip,"data-tooltip-timeout-delay":50,"data-testid":"favorite-star-placeholder"}},a.createElement(l.c,{"data-testid":"favorite-star-placeholder-unfavorited-icon"}))):a.createElement(a.Fragment,null,a.createElement(n.K,{ref:h.buttonRef,"aria-label":h.tooltip,"aria-pressed":!!v.favorite,htmlAttributes:{"data-tooltip-type":u.Ib.TEXT,"data-tooltip":h.tooltip,"data-tooltip-timeout-delay":50,"data-testid":b},onClick:h.toggle,variant:"secondary",size:E},v.favorite?a.createElement(o._,{style:f?void 0:{"--color-icon":i.Tj.iconfavorite},"data-testid":`${b}-favorited-icon`}):a.createElement(l.c,{"data-testid":`${b}-unfavorited-icon`})),!!t&&h.isDropdownShown&&a.createElement(m.t,{currentSectionId:v.favorite?.resource.sidebarSectionId??void 0,customSectionOrdering:v.orderedSidebarSections??[],"data-testid":"organize-favorite-menu",favoriteId:v.favorite?.id,orgId:t,resourceId:r,resourceType:e,sections:v.userSidebarSections??[],setFavorite:_,userHasMaxFavorites:v.hasMaxFavorites}))}let p={monochromePlaceholder:{display:"xjp7ctv","--color-border-disabled":"x1qgxxjq",$$css:!0}}},815078:(e,t,r)=>{r.d(t,{u:()=>c});var a=r(848318),n=r(301168),l=r(407639),o=r(443074),i=r(125761),s=r(723437),d=r(588014);function c({prepopulatedEmail:e,parentOrg:t,orgDomains:r}){let c=(0,n.wA)(),m=(0,n.d4)(e=>e.contacts),u=(0,i.Pc)();a.useEffect(()=>{c(o.um())},[c]);let _=r??d.ls,p=a.useCallback(e=>(0,s.yI)(e,m.usersByEmail[e]||e,null,_,u.email),[m.usersByEmail,u.email,_]);return a.useEffect(()=>{if(e){let t=p(e);c(l.hZ({tokens:[t],inputValue:"",errorMessage:""}))}},[e,p,c]),a.useEffect(()=>()=>{c(l.cL())},[c]),{validateToken:p,searchResultToken:a.useCallback(e=>(0,s.t9)(e,t,_),[_,t])}}},972382:(e,t,r)=>{r.d(t,{w:()=>l});var a=r(45137),n=r(125761);function l({rolesToDefaultToOther:e}={}){let t=n.iZ()?.profile.job_title,r=(0,a.HB)(t);return e&&e.includes(r)?"other":r}},756192:(e,t,r)=>{r.d(t,{S:()=>s});var a=r(301168),n=r(317720),l=r(43800),o=r(922484),i=r(809351);function s(e){let t=(0,a.d4)(e=>e.loadingState),r=(0,a.d4)(e=>e.teamJoinLinks);return!function(e,t,r){let a=!(0,o.VP)(t,(0,i.OL)(e))&&!(0,o.aF)(t,(0,i.OL)(e))&&!r;return(0,o.VP)(t,(0,i.OL)(e))||(0,o.VP)(t,l.ui.loadingKeyForPayload({teamId:e}))||(0,o.VP)(t,(0,i._M)(e))||a}(e,t,r)?n.Qw.loaded(r?.url):n.Qw.loading()}},879983:(e,t,r)=>{r.d(t,{p:()=>n});var a=r(304756);let n=new class{async pinFile({resourceType:e,resourceId:t,fileKey:r,description:n,shouldUpdatePermissions:l}){await a.Ay.post(`/api/pinned_files/${e}/${t}`,{file_key:r,description:n,should_update_permissions:l})}async updatePin({pinnedFileId:e,description:t}){await a.Ay.put(`/api/pinned_files/${e}`,{description:t})}async deletePin({pinnedFileId:e}){await a.Ay.del(`/api/pinned_files/${e}`)}}},468325:(e,t,r)=>{r.r(t),r.d(t,{Gen0WelcomeOverlay:()=>f});var a=r(848318),n=r(382902),l=r(359822),o=r(847576),i=r(34542),s=r(709292),d=r(752181),c=r(263336),m=r(755396),u=r(134347),_=r(564966),p=r(136169);function f(){let e=!!(0,d.f)("not_gen_0"),t=(0,n.md)(s.NT),r=(0,n.md)(s.g5),f=(0,n.md)(_.pC),{isShowing:g,complete:E,show:b}=(0,i.e)({overlay:p.Lg0,priority:c.N.HIGH_PRIORITY_MODAL},[t,r]);return((0,o.Q)(g),(0,l.h)(()=>{b({canShow:(t,r)=>!(f||e||(0,u.d)({emailValidatedAt:r,jobTitle:t}))})}),g)?a.createElement(m.b,{trackingContextName:"Gen 0 NUX",isShowing:g,onOverlayClose:()=>{E()},dataTestId:"NuxDynamicPreviewOverlay-Gen0WelcomeOverlay"}):null}},517614:(e,t,r)=>{r.d(t,{W:()=>R,l:()=>k});var a=r(848318),n=r(301168),l=r(430385),o=r(19180),i=r(382902),s=r(810503),d=r(967688),c=r(31898),m=r(340132);if(443==r.j)var u=r(142896);var _=r(381673),p=r(859480),f=r(355755),g=r(730143),E=r(318147),b=r(253332),v=r(520779),h=r(386252),y=r(324183),w=r(70969),T=r(228845);if(443==r.j)var I=r(636902);var x=r(230432),N=r(274016),S=r(399e3),C=r(263418);let k=(0,i.eU)(!1);function R({clientX:e,clientY:t,pageIds:r,selectedView:R,shouldShowDuplicateOption:A}){let O=(0,n.wA)(),P=(0,n.d4)(e=>e.mirror.appModel),F=(0,g.q5)(),L=(0,f.p8)("pagesList"),D=(0,p.HZ)(),M=_.F.useShouldHideStarterCtaForOpenFile(),B=(0,T.cT)(),U=(0,w.hZ)(),$=1===r.length&&void 0!==r[0]?function({pageId:e,openFile:t,pagesList:r,team:a,shouldShowDuplicateOption:n,shouldPaywallForDraftsPageLimitV1:l,dispatch:i,hideUpsellPlanCta:u,isFileReadOnly:p,isK12OrgStudent:f}){var g;let y=r.length,w=r.filter(e=>!e.isDivider).length,T=r.find(t=>t.nodeId===e),k=!!T&&T.isDivider,R=r=>(0,C.HZ)()&&T&&t&&t.editorType===E._Y.WHITEBOARD?[{separator:!0},{name:"create-slides-outline-from-figjam",callback:()=>(0,C.$t)({pageGuids:[e],dispatch:r,source:S.E.FJ_PAGE_MENU})}]:[];if(p||f)return[{action:"page-copy-link",args:{nodeId:e}},...R(i)];let A=()=>(0,o.k)().move_page_to_new_file&&T&&t?((0,s.ED)("getPageMoveMenuItem","Parameters",{pageId:e,folderId:"1",fileKey:t.key}),{name:"page-move-to-new-file",callback:()=>{!function(e,t,r,a,n={},l=!0){if(!e)return;let o={...n,type:x.A.FILE,fileKey:e.key,file:e,afterFileMove:void 0,isMovePageToNewFile:l,page_id:r};t(c.to({type:(0,I.J)(),data:o}))}({key:t.key,name:t.name,folder_id:t.folderId,team_id:t.teamId,editor_type:t.editorType},i,e)}}):null,O=n?(g=k?(0,d.t)("fullscreen_actions.divider-duplicate"):(0,d.t)("fullscreen_actions.page-duplicate"),t&&((0,b.J9)({openFile:t,pageCount:y})||l({openFile:t,pageCount:y}))?{name:"page-duplicate",callback:()=>{i((0,c.to)({type:N.DV,data:{team:a,resource:v.vL.PAGE,action:h.ZN.DUPLICATE_PAGE,editorType:t.editorType,currentPlan:_.F.Plan.STARTER,upsellPlan:_.F.Plan.PRO,hideUpsellPlanCta:u}}))},displayText:g}:{action:"page-duplicate",args:{nodeId:e},loadingIndicatorString:"Duplicating",displayText:g}):null;return k?[O,A(),{action:"page-delete",args:{nodeIds:[e]},loadingIndicatorString:"Deleting",displayText:(0,d.t)("fullscreen_actions.divider-delete")}]:[{action:"page-copy-link",args:{nodeId:e}},{separator:!0},{action:"page-rename",args:{nodeId:e},displayText:(0,d.t)("fullscreen_actions.pages-rename",{pageCount:1})},O,A(),{separator:!0},{action:"page-delete",callback:()=>i(m.PK({})),args:{nodeIds:[e]},loadingIndicatorString:"Deleting",disabled:1===w,displayText:(0,d.t)("fullscreen_actions.pages-delete",{pageCount:1})},...R(i)]}({pageId:r[0],team:F?F.team:null,shouldShowDuplicateOption:A,openFile:F,pagesList:L,shouldPaywallForDraftsPageLimitV1:D,dispatch:O,hideUpsellPlanCta:M,isFileReadOnly:B,isK12OrgStudent:U}):function({pageIds:e,pagesList:t,dispatch:r,isFileReadOnly:a,isK12OrgStudent:n}){if(a||n)return[];let l=new Set(t.filter(e=>!e.isDivider).map(e=>e.nodeId)),o=e.filter(e=>l.has(e)),s=o.length;return 0===s?[]:[{action:"batch-page-rename",args:{nodeIds:o},displayText:(0,d.t)("fullscreen_actions.pages-rename",{pageCount:s})},{separator:!0},{action:"page-delete",callback:()=>r(m.PK({})),args:{nodeIds:o},loadingIndicatorString:"Deleting",displayText:(0,d.t)("fullscreen_actions.pages-delete",{pageCount:s}),disabled:l.size<=s},...(t=>{if(!(0,C.HZ)())return[];let r=i.zl.get(g.yV);return r&&r.editorType===E._Y.WHITEBOARD?[{separator:!0},{name:"create-slides-outline-from-figjam",callback:()=>(0,C.$t)({pageGuids:Array.from(e),dispatch:t,source:S.E.FJ_PAGE_MENU})}]:[]})(r)]}({pageIds:r,pagesList:L,dispatch:O,isFileReadOnly:B,isK12OrgStudent:U});return(0,a.useEffect)(()=>(i.zl.set(k,!0),()=>{i.zl.set(k,!1)}),[]),a.createElement("div",{className:`${u.Dm}`},a.createElement(y.Q,{appModel:P,menuItems:(0,l.WI)($),dispatch:O,selectedView:R,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!1,isLimitedDevMode:!1,recordingKey:"pageMenu"}))}},70969:(e,t,r)=>{if(r.d(t,{h5:()=>f,hZ:()=>u,hs:()=>g,mb:()=>p,sv:()=>E}),443==r.j)var a=r(660376);var n=r(859480),l=r(730143),o=r(180294),i=r(125761),s=r(228845),d=r(975695);let c=/^Page \d+$/;var m=(e=>(e.FILE_LOADING="fileLoading",e.K_12="k12",e.READ_ONLY="readOnly",e.PERSONAL_DRAFT="personalDraft",e))(m||{});function u(){let e=(0,o.sZ)(),t=!!e?.k12_google_org,r=i.iZ()?.profile?.job_title;return t&&"student"===r}function _(){let e=(0,l.q5)(),t=(0,s.cT)(),r=u();return e?r?"k12":t?"readOnly":(0,d.Qy)(e)?"personalDraft":null:"fileLoading"}var p=(e=>(e.ADD_PAGE="addPage",e.VIEW_PAGES="viewPages",e))(p||{});function f({nonDividerPageCount:e}){let t=_(),r=(0,n.nn)(),l=r&&!c.exec(r);if("fileLoading"===t)return null;if(e>1||l)return"viewPages";switch(t){case null:return"addPage";case"readOnly":case"personalDraft":return"viewPages";case"k12":return null;default:(0,a.xb)(t)}}function g(){return null===_()}function E(){return null===_()}},217958:(e,t,r)=>{r.d(t,{i:()=>p});var a=r(848318),n=r(536384),l=r.n(n),o=r(410441),i=r(865114),s=r(939010),d=r(264592),c=r(967688),m=r(377549),u=r(786175);let _=(0,o.jz)(u.figmaComponentFlyoutTextMaxCollapsedHeight);function p({description:e,description_rt:t}){let r=a.useRef(null),[n,o]=a.useState(!0),[u,p]=a.useState(!1),f=(0,i.ZC)(e);a.useEffect(()=>{if(e&&r.current&&f!==e){let e=r.current.scrollHeight>_;o(e),p(e)}},[e,f]);let g=a.useCallback(()=>{n&&p(!0),o(!n)},[n]);if(!e&&!t)return null;let E=!!e&&(n||u);return a.createElement("div",{className:"truncated_component_description--documentationSection--87RCO"},t?a.createElement("div",null,a.createElement(d.C,{value:t,valueFormat:(0,s.j_)(t),namespace:"component-description-flyout-lexical-editor-readonly",lexicalContentClassName:n?m.D6:m.kF,innerRef:r})):a.createElement("div",{ref:r,className:l()({"truncated_component_description--collapsed--VXZTS ellipsis--ellipsisAfter6Lines--2UA7M ellipsis--_ellipsisAfterNLines--LzI7k":n},"truncated_component_description--documentationDescription--C090D text--fontPos11--2LvXf text--_fontBase--QdLsd"),dir:"auto"},e),E&&a.createElement("button",{className:"truncated_component_description--showMore--brfX6",onClick:g},n?(0,c.tx)("design_systems.assets_panel.show_more"):(0,c.tx)("design_systems.assets_panel.show_less")))}},590267:(e,t,r)=>{r.d(t,{c0:()=>x,Jc:()=>S});var a=r(848318),n=r(938982);if(443==r.j)var l=r(773511);if(443==r.j)var o=r(272520);var i=r(382902),s=r(317720),d=r(755595),c=r(536384),m=r.n(c),u=r(996202),_=r(410725),p=r(748008),f=r(72462),g=r(998568),E=r(345964),b=r(999556),v=r(555772),h=r(967688),y=r(730143),w=r(55116),T=r(7905),I=r(353956);function x({pageRowRef:e,pagesListRef:t,nodeId:r,nodeName:n,pageThumbnail:s,isLoading:d}){let c=(0,y.q5)(),_=(0,u.hC)(),p=(0,i.Xr)(I.qp);if(!c||!t.current||!e.current)return null;let g=t.current.getBoundingClientRect().left+t.current.getBoundingClientRect().width,w=g-16,x=`calc(${g}px + var(--spacer-2, 0.5rem))`,N=e.current.getBoundingClientRect().top,S=e.current.getBoundingClientRect().height;return a.createElement(a.Fragment,null,a.createElement("div",{style:{position:"fixed",zIndex:10,left:w+"px",top:N+"px",height:S+"px",width:"32px"}}),a.createElement("div",{"data-testid":"PageSummaryPreview",className:"page_summary_preview--previewContainer--kx2Uy",style:{left:x,top:N+S/2}},a.createElement("div",{className:"page_summary_preview--thumbnailContainer--a-jPQ"},a.createElement("div",{"data-testid":"FileThumbnail"},a.createElement(v.V,{thumbnailType:(0,b.lv)(c.editorType,!1),thumbnailUrl:s?.thumbnail_url??null,clientMeta:s?.thumbnail_meta??c.clientMeta,noBorder:!0})),a.createElement(l.E,{"aria-label":(0,h.t)("pages_panel.summary_preview.update_preview"),className:m()("page_summary_preview--refreshButton--XAvPe",{"page_summary_preview--alwaysShowRefreshButton--M3IDC":!s}),onClick:()=>{c&&!d&&(_("figjam_pages_summary.preview_refreshed",{previewPageId:r}),p(f.r.LOADING),T.S.updatePageCheckpointThumbnails({fileKey:c.key}).catch(()=>{_("figjam_summary_preview.page_thumbnails_request_failed_increment_metric",{})}))},htmlAttributes:{"data-tooltip":(0,h.t)("pages_panel.summary_preview.update_preview"),"data-tooltip-type":"text","data-testid":"RefreshPreviewButton"}},d?a.createElement(E.kt,{testId:"LoadingSpinner",size:"small",className:"page_summary_preview--loadingSpinner--FXocO"}):a.createElement(o.o,null))),a.createElement("div",{className:"page_summary_preview--pageTitleContainer--Yk-qK text--fontPos13--xW8hS text--_fontBase--QdLsd"},n)))}let N=d.z.record(d.z.object({thumbnail_url:d.z.string(),thumbnail_meta:d.z.object({}).passthrough().transform(e=>JSON.stringify(e)),created_at:d.z.string().optional()}));function S(e){let t=(0,y.q5)(),r=(0,_.Rs)(w.SPC,{fileKey:t?.key??""},{enabled:!!(t?.key&&e)});return s.Qw.useTransform(r,e=>{if(e?.file?.pagesSignedThumbnailData.status!==p.tT.Loaded)return null;try{if(!e?.file?.pagesSignedThumbnailData.data)return null;let t=JSON.parse(e.file.pagesSignedThumbnailData.data);return N.parse(t)}catch(r){return(0,g.$D)(n.e.FIGJAM,Error(`PageSummaryPreview: Failed to parse page thumbnail data. Error: ${r.message}.`),{tags:{fileKey:t?.key},extra:{parsedPageThumbnails:e?.file?.pagesSignedThumbnailData.data}}),null}})}},65963:(e,t,r)=>{r.d(t,{v:()=>W,G:()=>j});var a=r(848318),n=r(301168);if(443==r.j)var l=r(871043);if(443==r.j)var o=r(773511);if(443==r.j)var i=r(433231);if(443==r.j)var s=r(901948);if(443==r.j)var d=r(2446);if(443==r.j)var c=r(200362);var m=r(186606),u=r(19180),_=r(382902),p=r(536384),f=r.n(p),g=r(781239),E=r(720522),b=r(967688),v=r(952039),h=r(555637),y=r(301360),w=r(995218),T=r(696786),I=r(70433),x=r(665411),N=r(554326),S=r(614092),C=r(17753),k=r(517614),R=r(857607),A=r(146859),O=r(614892);function P({value:e,setValue:t,recordingKey:r,isDisabled:n,stopRenaming:l}){let o=(0,a.useRef)(null);(0,a.useEffect)(()=>{o.current?.select()},[]);let i=g.v_(r,"keydown",e=>{if(e.keyCode===R.Uz.ESCAPE)l(!1),e.stopPropagation();else if(e.keyCode===R.Uz.ENTER)e.preventDefault(),l(!0);else{if(e.keyCode!==R.Uz.TAB)return(0,A.jr)(e,A.W0.NO),g.aH;e.preventDefault(),l(!0)}}),s=g.AF(r,"change",e=>{n||t(e.currentTarget.value)}),d=g.iQ(r,"blur",()=>{l(!0)});return a.createElement(O.ks,{autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"page_rename_input--input--s2o7Q",innerRef:o,onBlur:d,onChange:s,onKeyDown:i,spellCheck:!1,value:e})}var F=r(214758);if(443==r.j)var L=r(954206);if(443==r.j)var D=r(255111);if(443==r.j)var M=r(344432);if(443==r.j)var B=r(871428);function U({editorType:e}){switch(e){case m._YF.DESIGN:return a.createElement(i.k,null);case m._YF.WHITEBOARD:return a.createElement(E.B,{svg:B.A});case m._YF.SLIDES:return a.createElement(s.l,null);default:return null}}function $(e){let{isActive:t,isDivider:r,pageType:n,hasMultiplePageTypes:l}=e;return r||!l?null:a.createElement("div",{className:f()(F.n6,{[F.vu]:t})},a.createElement(U,{editorType:n}))}function j({pageType:e,hasMultiplePageTypes:t,nodeId:r,nodeName:o,isRenaming:i,startRenaming:s,stopRenaming:d,renamingPagePendingName:c,setRenamingPagePendingName:p,isActive:N,shouldShowGuids:R,onMouseDownCallback:A,onMouseUpCallback:O,onMouseMoveCallback:M,onClickCallback:B,reorderingPageGuids:U,selectedPageGuids:j,onContextMenuCallback:V,showMemoryUsage:H,showInFileMemoryPercentage:z,isOffline:Y,isComparingChanges:K,pageToNumChanges:q,versionHistory:J,isDivider:X,pagesList:Q,index:Z,activePageShouldUseBrandColor:ee,shouldUseButtonRow:et}){let er=(0,n.wA)(),ea=(0,T.GS)(),en="whiteboard"===(0,w.lg)(),[el,eo]=a.useState(!1),ei=(0,_.md)(k.l),es=(0,_.md)(h.Yh),ed=(0,S.Fk)((e,t)=>e.get(t)?.nodeMemoryUsage,r),ec=(0,S.Fk)((e,t)=>e.get(t)?.rootMemoryUsage,r),em=a.useMemo(()=>(0,x.Fy)(Q,r)===m.xal.LOADED,[r,Q]),eu=m.h3O.getSessionState()===m.kul.JOINED,e_=a.useMemo(()=>Y&&!eu&&!em&&m.h3O.isIncrementalSession(),[Y,em,eu]),ep=g.Pt("pagesPanel","row",Z)||"",ef=g.rf(ep,"contextmenu",e=>{e.preventDefault(),!e_&&V&&V({nodeId:r,e})}),eg=g.rf(ep,"dblclick",()=>{e_||i||s(r)}),eE=g.rf(ep,"click",e=>{if(!X&&!i){if(e_){er(v.F.enqueue({type:"offline-page-switch",message:(0,b.t)("fullscreen.pages_panel.unavailable_offline")}));return}B(r,e)}}),eb=a.useCallback(e=>{e_||i||A(r,e)},[i,r,A,e_]),ev=a.useCallback(e=>{i||M(r,e)},[i,r,M]),eh=a.useCallback(e=>{i||O(r,e)},[i,r,O]),ey=a.useCallback(()=>(0,l.uy)(ed)||(0,l.uy)(ec)?"":(0,I.pr)(ed,ec,!0),[ed,ec]),ew=K&&q?.get(r)||0,eT=J?.activeId&&"current_version"===J.activeId,eI=H&&z&&!i&&eT,ex=!K&&!i,eN=X&&!N&&!i,eS=en&&!i&&N&&j?.length===0,eC=f()({[F.mB]:eN,[F.oG]:!eN,[F.sl]:N,[F.sR]:eS&&el&&ei,[F.Pl]:ee,[F.Dq]:0===U.length&&0===j.length,[F.As]:et},0!==U.length||0!==j.length?j.includes(r)?F.wH:U.includes(r)?F.iB:0===U.length?F.Dq:"":""),ek=a.useRef(null),eR=a.useRef(!1),eA=a.useCallback(e=>{d(e),eR.current=!0},[d]);a.useLayoutEffect(()=>{!i&&eR.current&&ek.current&&(ek.current.focus(),eR.current=!1)},[i]);let eO=i&&a.createElement(P,{value:c||"",setValue:p,stopRenaming:eA,recordingKey:ep,isDisabled:e_}),eP=e_&&!eN&&a.createElement("div",{className:F.Nr,"data-tooltip-type":C.Ib.TEXT,"data-tooltip":(0,b.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"},a.createElement(E.B,{className:F.VQ,svg:D.A,"data-tooltip-type":C.Ib.TEXT,"data-tooltip":(0,b.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"})),eF=(0,u.k)().version_diffing&&K&&ew>0&&a.createElement("div",{className:F.Sp},ew),eL=eS&&!t?a.createElement(G,{accessibleLabel:et?(0,b.t)("fullscreen.pages_panel.page_row.more_actions",{pageName:o}):void 0,onContextMenuCallback:V,nodeId:r,isMoreActionsActive:el,setIsMoreActionsActive:eo,isPageContextMenuOpen:ei,shouldAbsolutePositionButton:et}):null,eD=a.createElement(a.Fragment,null,!eN&&!ea&&a.createElement(E.B,{className:f()(N?F.Mp:F._J,{[F.Vt]:!1}),svg:L.A}),!et&&eO,eN?a.createElement("span",{className:F.jE,"data-testid":"pageDivider"}):!i&&a.createElement("div",{className:F.Nz},a.createElement("span",{className:e_?F.YW:F.KE},R?`${o} (${r})`:o)),a.createElement("div",{className:F.q8},ex&&a.createElement(W,{pageGuid:r,fallback:a.createElement($,{isActive:N,isDivider:X,pageType:e,hasMultiplePageTypes:t}),hideBackground:!0}),eP,eI&&a.createElement("span",{className:e_?F.hi:F.VC,dir:"auto"},ey()),eF,!et&&eL));return et?i?a.createElement("div",{className:eC,"data-onboarding-key":es===r?y.$:"",draggable:!1,onContextMenu:ef},eO,a.createElement("div",{className:F.q8},eP,eF)):a.createElement("div",{className:"pages_panel_row--pageRowContainer--oVnTb"},a.createElement("button",{ref:ek,"aria-current":N?"page":void 0,className:eC,"data-onboarding-key":es===r?y.$:"",draggable:!1,onClick:eE,onContextMenu:ef,onDoubleClick:eg,onMouseDown:eb,onMouseMove:ev,onMouseUp:eh,type:"button"},eD),eL):a.createElement("div",{className:eC,"data-onboarding-key":es===r?y.$:"",draggable:!1,onClick:eE,onContextMenu:ef,onDoubleClick:eg,onMouseDown:eb,onMouseMove:ev,onMouseUp:eh},eD)}function W({pageGuid:e,margin:t,fallback:r=null,hideBackground:n=!1}){let l=(0,N.J2)(m.Ez5.currentSceneState().numReadyNodesByPage),o=(0,N.J2)(m.Ez5.currentSceneState().numCompletedNodesByPage),i=(0,T.GS)(),s=l.has(e)?l.get(e)>0:m.glU.nodeStatusesOnPage(e).includes(m.zIx.BUILD),c=o.has(e)?o.get(e)>0:m.glU.nodeStatusesOnPage(e).includes(m.zIx.COMPLETED);return c&&!s&&i?a.createElement(d.g,{className:"pages_panel_row--pageCompleted--gzdWd","data-tooltip-type":C.Ib.TEXT,"data-tooltip":(0,b.t)("dev_handoff.status.completed"),"data-testid":"pageCompletedIndicator"}):s||c?a.createElement(E.B,{className:f()("pages_panel_row--pageReady--XaDiG",{"pages_panel_row--hideBackground--22Ike":n}),svg:M.A,style:t?{[t]:"8px"}:void 0,"data-tooltip-type":C.Ib.TEXT,"data-tooltip":(0,b.t)("dev_handoff.tag.ready_to_build"),dataTestId:"pageReadyIndicator"}):r}function G({accessibleLabel:e,onContextMenuCallback:t,nodeId:r,isMoreActionsActive:n,isPageContextMenuOpen:l,setIsMoreActionsActive:i,shouldAbsolutePositionButton:s}){let d=a.useRef(null);return a.useEffect(()=>{l||i(!1)},[l,i]),a.createElement(o.E,{ref:d,"aria-label":e,htmlAttributes:s?void 0:{onDoubleClick:e=>e.stopPropagation()},onClick:e=>{i(!0);let a=d.current?.getBoundingClientRect();a&&t({nodeId:r,e,clientX:a.x+-4,clientY:a.y+a.height+10})},className:f()("pages_panel_row--pageMoreActionsButton--5Rty9",{"pages_panel_row--pageMoreActionsButtonActive--2dmC-":n&&l,"pages_panel_row--pageMoreActionsAbsolutePosition--S-xcp":s}),"data-tooltip-type":C.Ib.TEXT,"data-tooltip":(0,b.t)("fullscreen.pages_panel.more_pages_actions"),"data-tooltip-show-above":!0},a.createElement(c.A,{className:"pages_panel_row--pageMoreActionsIcon--kzZVn"}))}},832608:(e,t,r)=>{r.d(t,{Uz:()=>p,_k:()=>f,oP:()=>_});var a=r(848318),n=r(382902),l=r(857607),o=r(303397),i=r(702038),s=r(859480),d=r(228845),c=r(353956),m=(e=>(e.RANGE="range",e.INDIVIDUAL="individual",e))(m||{});function u(e){return(0,l.Fo)(e)?"individual":e.shiftKey?"range":null}function _(e){return!!u(e)}function p({pagesList:e,isDisabled:t,selectedPageIds:r,startRenaming:n,cancelMultiselect:i,cancelReordering:s}){(0,a.useEffect)(()=>{if(t)return;let a=t=>{let a=(0,d.Pe)(e),c=r.filter(t=>{let r=a[t];return void 0!==r&&!e[r].isDivider}).sort((e,t)=>a[e]-a[t]);if(0!==c.length)switch(t.keyCode){case l.Uz.ESCAPE:i(),s();break;case l.Uz.R:(0,l.Fo)(t)&&(1===c.length?n(c[0]):o.Y5.triggerActionInUserEditScope("batch-page-rename",{args:{nodeIds:c}}))}};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[t,e,r,i,s,n])}function f(e){let[t,r]=(0,n.fp)(c.cE),l=(0,s.dh)(),d=(0,a.useCallback)(()=>{r(e=>e.length?[]:e)},[r]),m=(0,a.useCallback)((a,n)=>{let s=u(n);switch(s&&((0,i.tJ)([]),o.Y5.commit()),s){case"individual":return r(t.includes(a)?t.filter(e=>e!==a):0===t.length&&l!==a?[l,a]:[...t,a]),!0;case"range":{let n=0===t.length?l:t[t.length-1],o=e.findIndex(e=>e.nodeId===n),i=e.findIndex(e=>e.nodeId===a),s=Math.min(o,i),d=Math.max(o,i),c=new Set(t),m=e.slice(s,d+1).map(e=>e.nodeId);return c.has(m[0])&&c.has(m[m.length-1])?r(t.filter(e=>!m.includes(e))):r([...t,...m.filter(e=>!c.has(e))]),!0}case null:return d(),!1}},[d,e,l,t,r]);return{selectedPageIds:t,handleMultiselectClick:m,cancelMultiselect:d}}},275205:(e,t,r)=>{r.d(t,{c:()=>E});var a=r(848318),n=r(301168),l=r(186606),o=r(768618),i=r(382902),s=r(996202),d=r(66699),c=r(555637),m=r(806496),u=r(859480),_=r(665411),p=r(730143),f=r(84145),g=r(353956);function E(e){let t=(0,u.dh)(),[r,E]=(0,i.fp)(g.l7),[b,v]=(0,i.fp)(g.oZ),h=(0,p.q5)(),y=(0,n.wA)(),w=(0,u.rE)(),T=(0,n.d4)(e=>e.versionHistory),I=(0,s.am)(),x=(0,f.W)(),N=(0,i.Xr)(c.Yh),S=(0,a.useCallback)(e=>{E(e),l.glU.triggerActionInUserEditScope("track-page-rename",{args:{nodeId:e}})},[E]),C=(0,a.useCallback)(()=>E(null),[E]),k=(0,a.useCallback)(async()=>{if(!r)return;let a=(0,o.UN)().get(r),n=a?.name,i=b||"",s=await (0,u.zO)({openFile:h,pageNode:a,pageName:i});if((0,u.CQ)({openFile:h,pageId:r,newName:i,oldName:n,trackRenamePage:()=>I("page_commit_rename",{nodeId:t,isDivider:s},{forwardToDatadog:!0})}),s&&t===r){let r=e.findIndex(e=>e.nodeId===t),a=r+1,n=e[a];for(;n&&n.isDivider;)a+=1,n=e[a];if(n)(0,m.J)(()=>(0,u.$P)(n.nodeId,t,T,y,(0,_.Fy)(e,n.nodeId)===l.xal.LOADED,I));else{let a=r-1,n=e[a];for(;n&&n.isDivider;)a-=1,n=e[a];n?(0,m.J)(()=>(0,u.$P)(n.nodeId,t,T,y,(0,_.Fy)(e,n.nodeId)===l.xal.LOADED,I)):w(null)}}E(e=>e===r?null:e),x({newTitle:i,nodeType:"PAGE"}),n!==i&&(0,f.d)(i).length>0&&(N(r),(0,d.YQ)({id:"page_name_changed_with_rfd_indicator",properties:{pageId:r}}))},[e,w,r,E,b,h,t,T,I,y,x,N]);return{renamingPageId:r,startRenaming:S,cancelRenaming:C,commitRenaming:k,pendingPageName:b,setPendingPageName:v}}},467601:(e,t,r)=>{r.d(t,{C:()=>s});var a=r(848318),n=r(186606),l=r(320953),o=r(996202),i=r(228845);function s(e){let[t,r]=(0,a.useState)([]),s=(0,a.useRef)(null),[d,c]=(0,a.useState)(null),m=t.length>0,u=(0,o.U)(),_=(0,a.useCallback)(e=>{r(e),c(null),s.current=null},[]),p=(0,a.useCallback)(()=>{r(e=>e.length?[]:e),c(null),s.current=null},[]),f=(0,a.useCallback)((e,r)=>{if(t.includes(e)){c(null);return}let a=r.target;d&&d.dragOverPageId===e&&s.current||(s.current=a.getBoundingClientRect());let n=r.clientY-s.current.top<s.current.height/2?"before":"after";c(t=>t&&t.dragOverPageId===e&&t.insertPosition===n?t:{dragOverPageId:e,insertPosition:n})},[d,t]),g=(0,a.useCallback)(()=>!d||!m||t.includes(d.dragOverPageId)?(p(),!1):(l.l7.user("reorder-pages",()=>{let r=(0,i.Pe)(e);"before"===d.insertPosition?[...t].sort((e,t)=>r[e]-r[t]).forEach(e=>{n.Egt.pageMoveBeforePage(e,d.dragOverPageId)}):[...t].sort((e,t)=>r[t]-r[e]).forEach(e=>{n.Egt.pageMoveAfterPage(e,d.dragOverPageId)})}),p(),u("page_reorder",{reorderedPageIds:t,dragOverPageId:d.dragOverPageId,insertPosition:d.insertPosition},{forwardToDatadog:!0}),!0),[e,m,t,p,d,u]);return{isReordering:m,reorderingPageIds:t,startReordering:_,cancelReordering:p,commitReordering:g,draggingState:d,updateDraggingState:f}}},452988:(e,t,r)=>{r.d(t,{i:()=>M});var a=r(848318),n=r(301168),l=r(559389),o=r(531788),i=r(762217),s=r(353317),d=r(143823),c=r(773511),m=r(162796),u=r(309488),_=r(93275),p=r(892419),f=r(19180),g=r(156974),E=r(720522),b=r(178806),v=r(850426),h=r(967688),y=r(453370),w=r(31898),T=r(43800),I=r(696786),x=r(756192),N=r(280255),S=r(407638),C=r(94831),k=r(17753),R=r(446951),A=r(335744),O=r(748660);let P="team_join_link_permissions--loadedViewWrapper--LjAIr",F="team_join_link_permissions--urlText--jcjRH ellipsis--ellipsis--Tjyfa";var L=r(769773);let D=(0,l.s)((e,t,r)=>e(T.do({teamId:t,level:r}))),M=(0,n.Ng)((e,t)=>({teamJoinLinks:e.teamJoinLinks,loadingState:e.loadingState,canAdminRedux:(0,S.hasAdminRoleAccessOnTeam)(t.teamId,e),canEditRedux:(0,S.hasEditorRoleAccessOnTeam)(t.teamId,e)}),null,(e,t,r)=>({...e,...r,...t}))(function(e){let{dispatch:t,teamId:r,initialInviteLevel:n,teamPermissions:l}=e,[i,s]=(0,a.useState)(n),d=(0,x.S)(r),c="loading"===d.status,m=d.data;(0,a.useEffect)(()=>(D(t,r,n),()=>{t(T.F1(null))}),[t,r,n]);let u=e.teamPermissions.canEdit&&!!e.teamJoinLinks?.url&&e.includeCopyLinkButton,_=a.useCallback(()=>{t(w.$O({type:j,data:{resetLink:()=>{t(T.Nw({teamId:r,level:i,shouldShowVisualBell:!0}))}}}))},[t,r,i]),p=a.useCallback(()=>a.createElement(B,{dropdownShown:e.dropdownShown,resetInviteLinks:_,disableInviteLinks:()=>t(T.ui({teamId:r})),loading:c,canAdmin:l.canAdmin}),[t,e.dropdownShown,c,_,l.canAdmin,r,,]),f=a.useCallback(()=>{m&&t(T.LN({teamId:e.teamId,url:m,source:T.Kq.TEAM_PERMISSIONS_MODAL}))},[t,e.teamId,m]),g=a.useMemo(()=>e.includeCopyLinkButton?a.createElement(o.$n,{onClick:f,disabled:!m},(0,h.tx)("team_join_links.copy_link")):p(),[f,e.includeCopyLinkButton,m,p]);return!c&&!e.teamJoinLinks||!l.canAdmin&&e.teamJoinLinks?.disabled?null:a.createElement(a.Fragment,null,a.createElement("div",{style:u?{justifyContent:"space-between"}:{justifyContent:"flex-start"},className:"team_join_link_permissions--inviteLinkTitleWrapper--LSkbL"},a.createElement("span",{className:"team_join_link_permissions--inviteHeader--80xpy"},(0,h.tx)("team_join_links.invite_link")),u&&p()),"loading"===d.status||e.teamJoinLinks?.url?a.createElement(U,{dropdownShown:e.dropdownShown,getPermissionDescriptionText:e.getPermissionDescriptionText,showDropdownSeparators:e.showDropdownSeparators,setLevel:e=>{i!==e&&(s(e),t(T.do({teamId:r,level:e,shouldShowFailureMessage:!0,callbackOnFailure:()=>s(i)})))},currentLevel:i,url:c?void 0:e.teamJoinLinks?.url,inviteLevels:l.canEdit?[C.e6.VIEWER,C.e6.EDITOR]:[C.e6.VIEWER],teamId:e.teamId,button:g}):a.createElement($,{turnOnInviteLinks:()=>t(T.Nw({teamId:r,level:i}))}))});function B(e){let t=(0,n.wA)(),r="team-link-settings-dropdown",l=a.createRef(),o=()=>e.dropdownShown?.type===r;return a.createElement(i.o,{eventListeners:["onMouseDown"]},a.createElement("div",{ref:l},a.createElement(s.d,{"aria-expanded":o(),disabled:e.loading,"aria-label":(0,h.t)("team_join_links.team_invite_link_settings"),onClick:()=>{let e=l.current?.getBoundingClientRect();o()?t(y.oB()):e&&t(y.j7({type:r,data:{targetRect:e}}))},htmlAttributes:{"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,h.t)("team_join_links.team_invite_link_settings")}},a.createElement(p.P,null))),o()&&a.createElement(A.Cf,{targetRect:e.dropdownShown.data.targetRect,maxWidth:140,minWidth:140,lean:"left",propagateCloseClick:!0},a.createElement(g.c$,{onClick:e.resetInviteLinks},(0,h.tx)("team_join_links.reset_invite_links")),e.canAdmin&&a.createElement(g.c$,{onClick:e.disableInviteLinks},(0,h.tx)("team_join_links.turn_off_invite_links"))))}function U(e){let t=(0,n.wA)(),r="join-link-permission-level-dropdown",l=e.currentLevel===C.e6.VIEWER?"-32px":"-61px",o=(0,I.GS)(),i=a.createElement("div",{className:"team_join_link_permissions--linkAndDropdown--dOdkB"},a.createElement("span",{className:"team_join_link_permissions--urlSection--fh6VF"},!e.url&&a.createElement(d.k,null),e.url&&a.createElement("span",{className:F},e.url)),a.createElement("div",null,a.createElement(c.E,{onClick:a=>{a.stopPropagation(),e.url&&(e.dropdownShown?t(y.oB()):t(y.j7({type:r})))},className:"team_join_link_permissions--permissionLevelDropdown--xuQLz role_row--select--6VpSS"},a.createElement("span",null,(0,N.C1)(e.currentLevel)),a.createElement("div",{className:"team_join_link_permissions--caretWrapper--OXpki role_row--caretWrapper--P1Mak"},a.createElement(E.B,{svg:L.A}))),e.dropdownShown&&e.dropdownShown.type===r&&a.createElement(g.ms,{className:"team_join_link_permissions--permissionLevelDropdownOptions--cgu-T",style:{marginTop:l}},e.inviteLevels.map((t,r)=>a.createElement(g.MM,{key:r,checked:t===e.currentLevel,onClick:()=>e.setLevel(t)},(0,N.C1)(t)))))),s=a.createElement("div",{className:"team_join_link_permissions--linkAndDropdownV2--7DFWL"},a.createElement("div",{className:"team_join_link_permissions--urlSectionV2--YS4eI"},!e.url&&a.createElement(d.k,null),e.url&&a.createElement("span",{className:F},e.url)),a.createElement("div",{className:"team_join_link_permissions--permissionLevelDropdownWrapper--yCu62"},a.createElement(O.b8,{value:e.currentLevel,options:e.inviteLevels,getPermissionName:N.C1,getPermissionDescription:e.getPermissionDescriptionText,showSeparators:e.showDropdownSeparators,onChange:e.setLevel})));return a.createElement("div",{className:P},(0,f.k)().team_permission_modal_styling&&o?s:i,e.button)}function $(e){return a.createElement("div",{className:P},(0,h.tx)("team_join_links.share_a_secret_link_people_can_use_to_join_your_team")," ",a.createElement(v.Ph,{href:"#",onClick:e.turnOnInviteLinks},(0,h.tx)("team_join_links.turn_on_invite_links")))}let j="RESET_LINKS_CONFIRMATION_MODAL";(0,R.Ju)(function(e){let t=(0,n.wA)(),r=m.hS(e);return a.createElement(u.bL,{width:"md",manager:r},a.createElement(_.vo,null,a.createElement(_.Y9,null,a.createElement(_.hE,null,(0,h.tx)("team_join_links.reset_invite_links"))),a.createElement(_.nB,null,(0,h.tx)("team_join_links.modal_description")),a.createElement(_.wi,null,a.createElement(_.jk,null,a.createElement(b.$z,{variant:"secondary",onClick:()=>t(w.Lo())},(0,h.tx)("team_join_links.cancel")),a.createElement(b.$z,{variant:"destructive",onClick:()=>{e.resetLink(),t(w.Lo())}},(0,h.tx)("team_join_links.reset_links"))))))},j)},217172:(e,t,r)=>{r.d(t,{R:()=>v});var a=r(848318),n=r(531788),l=r(536384),o=r.n(l),i=r(989232),s=r(383886),d=r(615233),c=r(656329),m=r(850426),u=r(967688),_=r(957872),p=r(863270);let f="mobile_download_prompt--mobilePromptTitle--7Tgsn text--fontPos13--xW8hS text--_fontBase--QdLsd",g="mobile_download_prompt--mobilePromptOptionTitle--mMUYW text--fontPos13--xW8hS text--_fontBase--QdLsd",E="mobile_download_prompt--mobilePromptOptionImage--Cp9zK",b="mobile_download_prompt_dismissed";function v(e){let{isCompact:t}=e,r=c.aR?"https://apps.apple.com/us/app/figma-mirror/id1152747299#":"https://play.google.com/store/apps/details?id=com.figma.mirror",l=(0,s.UG)(),f=!t&&!!e.renderBlockingPrompt,[v,w]=a.useState(!f),[T,I]=a.useState(!f);a.useEffect(()=>{null===l.get(b)&&(w(!1),I(!1))},[l,f]);let x=()=>{f||(w(!0),(0,i.trackEvent)("mobile_web_mobile_app_download_prompt_dismissed",{userId:e.userIdForTracking}),setTimeout(()=>{I(!0)},300),l.set(b,!0))};return null!==l.get(b)?null:a.createElement(p.fu,{name:"Mobile Download Prompt"},a.createElement("div",{className:o()({"mobile_download_prompt--overlay--OzW6J":!0,"mobile_download_prompt--overlayClosed--2FWpY":v,"mobile_download_prompt--overlayAnimateEnd--dBvI0":T}),style:{transitionDuration:"300ms"},onClick:x},a.createElement("div",{className:o()("mobile_download_prompt--mobilePromptContainer--FKz5e","mobile_download_prompt--mobileDownloadPromptContainer--FaI33",{"mobile_download_prompt--mobileDownloadPromptContainerClosed--DHusv":v,"mobile_download_prompt--mobileDownloadPromptContainerFullHeightBlocking--B100f":f}),onClick:e=>{e.stopPropagation()}},a.createElement("div",{className:o()("mobile_download_prompt--mobilePromptDescriptionContainer--1PhoH",{"mobile_download_prompt--fullHeightPrompt--U6KWw":f})},t?a.createElement(y,null):a.createElement(h,{renderBlockingPrompt:f??!1})),a.createElement("hr",{className:o()({"mobile_download_prompt--mobilePromptHR--UpOqS":!0,"mobile_download_prompt--fullWidthHR--B-2i1":f})}),a.createElement("div",{className:"mobile_download_prompt--mobilePromptGrid--Mvqf-"},a.createElement("img",{className:E,src:(0,d.ck)("249f0f055b922ecef6bffc592a8420e7e6eddcea"),alt:(0,u.t)("file_browser.mobile_prompt.app_image_alt")}),a.createElement("div",null,a.createElement("h3",{className:g},(0,u.tx)("file_browser.mobile_prompt.app_title")),a.createElement("p",{className:"mobile_download_prompt--mobilePromptOptionDescription--APlZp text--fontPos11--2LvXf text--_fontBase--QdLsd"},f?(0,u.tx)("file_browser.mobile_prompt.app_description_new"):(0,u.tx)("file_browser.mobile_prompt.app_description"))),a.createElement(m.pW,{size:"lg",trackingProperties:{userId:e.userIdForTracking,appLink:r,trackingDescriptor:_.c.MOBILE_WEB_MOBILE_APP_DOWNLOAD_PROMPT_CLICKED},width:"fill",href:r},(0,u.tx)("file_browser.mobile_prompt.app_action")),!f&&a.createElement(a.Fragment,null,a.createElement("img",{className:E,src:(0,d.ck)("741698fed49afa5e8f3becdd906e66d32c8e7fae"),alt:(0,u.t)("file_browser.mobile_prompt.browser_image_alt")}),a.createElement("div",null,a.createElement("h3",{className:g},(0,u.tx)("file_browser.mobile_prompt.browser_title"))),a.createElement(n.Pw,{onClick:x,variant:"secondary"},(0,u.tx)("file_browser.mobile_prompt.browser_action")))))))}function h(e){return a.createElement(a.Fragment,null,a.createElement("img",{className:"mobile_download_prompt--mobilePromptImage--U2Yqj",src:(0,d.ck)("5f1dc37f397dbddf711d3d950bee5dd46c07fc72"),alt:(0,u.t)("file_browser.mobile_prompt.image_alt")}),a.createElement("div",{className:"mobile_download_prompt--mobilePromptTitleContainer--o8VIK"},a.createElement("h2",{className:f},e.renderBlockingPrompt?(0,u.tx)("file_browser.mobile_prompt.modal_title_blocking"):(0,u.tx)("file_browser.mobile_prompt.modal_title")),a.createElement("p",{className:"mobile_download_prompt--mobilePromptSubTitle--GFR67 text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.renderBlockingPrompt?(0,u.tx)("file_browser.mobile_prompt.modal_body_blocking"):(0,u.tx)("file_browser.mobile_prompt.modal_body"))))}function y(){return a.createElement(a.Fragment,null,a.createElement("h2",{className:f},(0,u.tx)("file_browser.mobile_prompt.modal_title_compact")))}},305755:(e,t,r)=>{r.d(t,{h:()=>o});var a=r(749214),n=r(848318),l=r(58153);let o=(0,n.memo)(function(e){return(0,l.O)()?(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.5 5h-2V4h2zm1 0a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1zm-8 5h2v2h-2zm-1 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1zm3-6h-2v3h2zm-2-1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm7 9h-2V8h2zm1 0a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1z",clipRule:"evenodd"})}):(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11 5H9V4h2zm1 0a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1zm-8 5h2v2H4zm-1 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1zm3-6H4v3h2zM4 3a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm7 9H9V8h2zm1 0a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1z",clipRule:"evenodd"})})})},235456:(e,t,r)=>{r.d(t,{U:()=>n});var a=r(749214);let n=(0,r(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0m1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0m3 5a1 1 0 1 1 2 0v2.5a.5.5 0 0 0 1 0V10a2 2 0 1 0-4 0v2.5a.5.5 0 0 0 1 0zM5 9a1 1 0 0 0-1 1v2.5a.5.5 0 0 1-1 0V10a2 2 0 1 1 4 0v2.5a.5.5 0 0 1-1 0V10a1 1 0 0 0-1-1m7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0m1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0",clipRule:"evenodd"})})})},790840:(e,t,r)=>{r.d(t,{o:()=>n});var a=r(749214);let n=(0,r(848318).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M2.5 9.495a1 1 0 0 1 .62-.925l8.119-3.343a2 2 0 0 1 1.522 0l8.12 3.343a1 1 0 0 1 0 1.85l-.881.362V15.5a.5.5 0 0 1-1 0v-4.306l-1 .412V16c0 .64-.328 1.148-.706 1.505-.375.355-.865.629-1.387.838-1.05.42-2.432.657-3.907.657s-2.857-.237-3.907-.657c-.522-.21-1.012-.483-1.387-.838C6.328 17.148 6 16.64 6 16v-4.394l-2.88-1.187a1 1 0 0 1-.62-.924M7 12.017V16c0 1.105 2.239 2 5 2s5-.895 5-2v-3.983l-4.238 1.746a2 2 0 0 1-1.524 0zM3.5 9.495l1.313.54 6.806 2.803a1 1 0 0 0 .762 0l6.806-2.803 1.313-.54-1.313-.541-6.806-2.803a1 1 0 0 0-.762 0L4.813 8.954z",clipRule:"evenodd"})})})},817502:(e,t,r)=>{r.d(t,{K:()=>o});var a=r(749214),n=r(848318),l=r(58153);let o=(0,n.memo)(function(e){return(0,l.O)()?(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.5 7.5V7a2 2 0 1 0-2 2h2zm.724-1.76A3 3 0 1 0 7.264 9H5.5A1.5 1.5 0 0 0 4 10.5v1a1.5 1.5 0 0 0 1 1.415v5.586A1.5 1.5 0 0 0 6.5 20h11a1.5 1.5 0 0 0 1.5-1.5v-5.586a1.5 1.5 0 0 0 1-1.414v-1A1.5 1.5 0 0 0 18.5 9H16a2.5 2.5 0 0 0-3.776-3.26M12.5 7.5V9H14a1.5 1.5 0 1 0-1.5-1.5M6 13v5.5a.5.5 0 0 0 .5.5h5v-6zm6.5 0v6h5a.5.5 0 0 0 .5-.5V13zm0-1v-2h6a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5zm-1-2v2h-6a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5z",clipRule:"evenodd"})}):(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11 7.5V7a2 2 0 1 0-2 2h2zm.724-1.76A3 3 0 1 0 6.764 9H5.5A1.5 1.5 0 0 0 4 10.5v1a1.5 1.5 0 0 0 1 1.415v5.586A1.5 1.5 0 0 0 6.5 20h10a1.5 1.5 0 0 0 1.5-1.5v-5.586a1.5 1.5 0 0 0 1-1.414v-1A1.5 1.5 0 0 0 17.5 9h-2a2.5 2.5 0 0 0-3.776-3.26M12 7.5V9h1.5A1.5 1.5 0 1 0 12 7.5M6 13v5.5a.5.5 0 0 0 .5.5H11v-6zm6 0v6h4.5a.5.5 0 0 0 .5-.5V13zm0-1v-2h5.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5zm-1-2v2H5.5a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5z",clipRule:"evenodd"})})})}}]);

//# debugId=a070149c-6c66-5de3-9b19-7b2f9bbb5067

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/390bd922c5a04cf92f6d90850e19b50457127ed8/0c62c2fd-130a706471ea6b6b.min.js.map